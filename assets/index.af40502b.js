var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,l=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,__assign=(e,n)=>{for(var o in n||(n={}))t.call(n,o)&&l(e,o,n[o]);if(a)for(var o of a(n))r.call(n,o)&&l(e,o,n[o]);return e},n=(e,l)=>{var n={};for(var o in e)t.call(e,o)&&l.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&a)for(var o of a(e))l.indexOf(o)<0&&r.call(e,o)&&(n[o]=e[o]);return n};import{r as o,T as s,a as i,A as c,L as d,M as u,b as m,B as p,P as g,C as h,c as E,d as f,e as v,f as cytoscape,g as y,x as b,h as x,G as O,i as C,j as S,I as A,k as w,l as T,S as I,H as N,m as k,n as L,o as P,p as R,q as M,s as D,D as W,t as V,u as z,v as U,w as j,F as _,y as H,z as F,E as G,J as $,K as B,N as Y,O as q,Q as J,R as Q,U as K,V as X,W as Z,X as ee,Y as te,Z as ae,_ as re,$ as le,a0 as ne,a1 as oe,a2 as se,a3 as ie,a4 as ce,a5 as de,a6 as ue,a7 as me,a8 as pe,a9 as ge,aa as he,ab as Ee,ac as fe,ad as ve,ae as ye,af as be,ag as xe,ah as Oe,ai as Ce,aj as Se,ak as Ae,al as we,am as Te,an as Ie,ao as Ne,ap as ke,aq as Le,ar as Pe,as as Re,at as Me,au as De,av as We,aw as Ve,ax as ze,ay as Ue,az as je,aA as _e,aB as He,aC as Fe,aD as Ge,aE as $e}from"./vendor.c4d6774a.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const r=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const o=new URL(e,r);if(self[t].moduleMap[o])return a(self[t].moduleMap[o]);const s=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){n(new Error(`Failed to import: ${e}`)),l(i)},onload(){a(self[t].moduleMap[o]),l(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/aniCheck/assets/");const Be=["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC","MANGA","ONE_SHOT","NOVEL"],Ye={TV:{id:"TV",label:"TV",icon:o.createElement(s,null),tooltip:"Anime broadcast on television"},TV_SHORT:{id:"TV_SHORT",label:"TV Short",icon:o.createElement(s,null),tooltip:"Anime which are under 15 minutes in length and broadcast on television"},MOVIE:{id:"MOVIE",label:"Movie",icon:o.createElement(i,null),tooltip:"Anime movies with a theatrical release"},SPECIAL:{id:"SPECIAL",label:"Special",icon:o.createElement(s,null),tooltip:"Special episodes that have been included in DVD/Blu-ray releases, picture dramas, pilots, etc"},OVA:{id:"OVA",label:"OVA",icon:o.createElement(c,null),tooltip:"(Original Video Animation) Anime that have been released directly on DVD/Blu-ray without originally going through a theatrical release or television broadcast"},ONA:{id:"ONA",label:"ONA",icon:o.createElement(d,null),tooltip:"(Original Net Animation) Anime that have been originally released online or are only available through streaming services."},MUSIC:{id:"MUSIC",label:"Music",icon:o.createElement(u,null),tooltip:"Short anime released as a music video"},MANGA:{id:"MANGA",label:"Manga",icon:o.createElement(m,null),tooltip:"Professionally published manga with more than one chapter"},NOVEL:{id:"NOVEL",label:"Novel",icon:o.createElement(p,null),tooltip:"Written books released as a series of light novels"},ONE_SHOT:{id:"ONE_SHOT",label:"One Shot",icon:o.createElement(m,null),tooltip:"Manga with just one chapter"}},qe={blue:"#3DB4F2",purple:"#C063FF",green:"#4CCA51",orange:"#EF881A",red:"#E13333",pink:"#FC9DD6",gray:"#677B94"},Je=["CHARACTER","SEQUEL","SIDE_STORY","SOURCE","ALTERNATIVE","SPIN_OFF","SUMMARY","COMPILATION","CONTAINS","PREQUEL","ADAPTATION","PARENT","OTHER"],Qe=(()=>{let e={};return Je.map(((t,a)=>{e[t]=a})),e})(),Ke={CURRENT:{id:"CURRENT",label:"Watching",icon:o.createElement(g,null),tooltip:"Anime broadcast on television",color:"secondary"},PLANNING:{id:"PLANNING",label:"Plan To Watch",icon:o.createElement(h,null),tooltip:"Anime broadcast on television",color:"secondary"},COMPLETED:{id:"COMPLETED",label:"Completed",icon:o.createElement(E,null),tooltip:"Anime broadcast on television",color:"primary"},DROPPED:{id:"DROPPED",label:"Dropped",icon:o.createElement(E,null),tooltip:"Anime broadcast on television",color:"primary"},PAUSED:{id:"PAUSED",label:"Paused",icon:o.createElement(f,null),tooltip:"Anime broadcast on television",color:"secondary"},REPEATING:{id:"REPEATING",label:"Repeating",icon:o.createElement(E,null),tooltip:"Anime broadcast on television",color:"primary"},NO:{id:"NO",label:"Missing",icon:o.createElement(v,null),tooltip:"Anime broadcast on television",color:void 0}},Xe={FINISHED:{id:"FINISHED",label:"Finished",icon:o.createElement(h,null),tooltip:"Has completed and is no longer being released",color:"secondary"},RELEASING:{id:"RELEASING",label:"Releasing",icon:o.createElement(h,null),tooltip:"Currently releasing",color:"secondary"},NOT_YET_RELEASED:{id:"NOT_YET_RELEASED",label:"Not Yet Released",icon:o.createElement(E,null),tooltip:"To be released at a later date",color:"primary"},CANCELLED:{id:"CANCELLED",label:"Cancelled",icon:o.createElement(E,null),tooltip:"Ended before the work could be finished",color:"primary"},HIATUS:{id:"HIATUS",label:"Hiatus",icon:o.createElement(h,null),tooltip:"Is currently paused from releasing and will resume at a later date",color:"secondary"}};function Ze(e,t=null){var a,r;try{JSON.parse(null!=(a=localStorage.getItem(e))?a:JSON.stringify(t))}catch(s){console.log("Old Data found, trying to reset"),localStorage.removeItem(e)}const[l,n]=o.useState(JSON.parse(null!=(r=localStorage.getItem(e))?r:JSON.stringify(t)));return o.useEffect((()=>{localStorage.setItem(e,JSON.stringify(l))}),[l]),[l,n]}function et(e,t){return e.sort(((e,a)=>{var r,l,n,o;return t?(null!=(r=e.item.stats.selected.missWeight)?r:0)-(null!=(l=a.item.stats.selected.missWeight)?l:0):(null!=(n=a.item.stats.selected.missWeight)?n:0)-(null!=(o=e.item.stats.selected.missWeight)?o:0)}))}function tt(e,t){return e.sort(((e,a)=>{var r,l,n,o;let s=(null!=(r=e.item.stats.selected.gotPerWeight)?r:0)+(null!=(l=e.item.stats.selected.planPerWeight)?l:0),i=(null!=(n=a.item.stats.selected.gotPerWeight)?n:0)+(null!=(o=a.item.stats.selected.planPerWeight)?o:0);return(t?-1:1)*(s-i)}))}function at(e,t){return e.sort(((e,a)=>{var r,l,n,o,s,i,c,d;let u=(null!=(l=null==(r=e.item.stats.selected)?void 0:r.gotPer)?l:0)+(null!=(o=null==(n=e.item.stats.selected)?void 0:n.planPer)?o:0),m=(null!=(i=null==(s=a.item.stats.selected)?void 0:s.gotPer)?i:0)+(null!=(d=null==(c=a.item.stats.selected)?void 0:c.planPer)?d:0);return(t?-1:1)*(u-m)}))}function rt(e,t){return console.log(e),e.sort(((e,a)=>t?e.rankedValue[0].localeCompare(a.rankedValue):a.rankedValue[0].localeCompare(e.rankedValue)))}function lt(e,t){return e.sort(((e,a)=>(t?-1:1)*(e.item.stats.tot-a.item.stats.tot)))}function nt(e){switch(e){case"weight%":return tt;case"complete%":return at;case"alphabetical":return rt;case"size":return lt;case"missWeight":return et;default:return rt}}function ot(e,t){switch(e){case"anime":return t.animeComposition;case"manga":return t.mangaComposition;case"novel":return t.novelComposition;default:return[e]}}function st(e,t){var a,r,l,n,o,s,i,c,d,u,m,p,g,h,E,f;let v=0,y=0,b=0,x=0,O=0,C=0,S=0,A=0;for(const w of e)v+=null!=(r=null==(a=t[w])?void 0:a.tot)?r:0,y+=null!=(n=null==(l=t[w])?void 0:l.miss)?n:0,b+=null!=(s=null==(o=t[w])?void 0:o.got)?s:0,x+=null!=(c=null==(i=t[w])?void 0:i.plan)?c:0,O+=null!=(u=null==(d=t[w])?void 0:d.totWeight)?u:0,C+=null!=(p=null==(m=t[w])?void 0:m.missWeight)?p:0,S+=null!=(h=null==(g=t[w])?void 0:g.gotWeight)?h:0,A+=null!=(f=null==(E=t[w])?void 0:E.planWeight)?f:0;return{tot:v,miss:y,got:b,plan:x,totWeight:O,missWeight:C,gotWeight:S,planWeight:A}}const it=e=>{let t={tot:Object.keys(e.seriesDict).length,got:0,miss:0,plan:0};if(e.userOptions.smartCompletion)for(const[a,r]of Object.entries(e.seriesDict)){let l=0,n=0,o=0,s=0,i=0,c=0,d=0,u=0,m=[];for(const t of["anime","manga","novel"]){let{got:a,miss:p,tot:g,plan:h,totWeight:E,missWeight:f,gotWeight:v,planWeight:y}=st(ot(t,e.userOptions),r.stats);0==a&&0==h||(l+=g,n+=p,o+=a,s+=h,i+=E,c+=f,d+=v,u+=y,m=[...m,...ot(t,e.userOptions)])}e.seriesDict[a].stats.selected={tot:l,miss:n,got:o,plan:s,gotPer:Math.floor(o/l*100)||0,planPer:Math.floor(s/l*100)||0,totWeight:i,missWeight:c,gotWeight:d,planWeight:u,gotPerWeight:Math.floor(d/i*100)||0,planPerWeight:Math.floor(u/i*100)||0},e.seriesDict[a].formatsIncluded=m,0!=l?o==l?(e.seriesDict[a].status="COMPLETE",t.got+=1):o+s==l?(e.seriesDict[a].status="PLAN_TO_COMPLETE",t.plan+=1):(e.seriesDict[a].status="NOT_COMPLETE",t.miss+=1):e.seriesDict[a].status="ERR"}else for(const[a,r]of Object.entries(e.seriesDict)){let{got:l,plan:n,miss:o,tot:s,totWeight:i,missWeight:c,gotWeight:d,planWeight:u}=st(e.userOptions.completion,r.stats);e.seriesDict[a].stats.selected={tot:s,got:l,miss:o,plan:n,gotPer:Math.floor(l/s*100),planPer:Math.floor(n/s*100),totWeight:i,gotWeight:d,planWeight:u,missWeight:c,gotPerWeight:Math.floor(d/i*100),planPerWeight:Math.floor(u/i*100)},e.seriesDict[a].formatsIncluded=e.userOptions.completion,0!=s?l==s?(e.seriesDict[a].status="COMPLETE",t.got+=1):l+n==s?(e.seriesDict[a].status="PLAN_TO_COMPLETE",t.plan+=1):(e.seriesDict[a].status="NOT_COMPLETE",t.miss+=1):e.seriesDict[a].status="ERR"}return console.log(t),__assign(__assign({},e),{seriesDict:e.seriesDict,globalStats:t})},ct=(e,t,a)=>{const r=cytoscape({headless:!0}),l=e=>{var t;return{id:e.id,status:"NO",airStatus:e.status,format:null!=(t=e.format)?t:"SPECIAL",title:e.title.userPreferred,titles:[...Object.values(e.title),...e.synonyms].filter((e=>!["MediaTitle",null].includes(e))),siteUrl:e.siteUrl,bannerImage:e.bannerImage,popularity:e.popularity,cover:e.coverImage.extraLarge,compWeight:(e=>{var t,a;if("NOT_YET_RELEASED"==e.status)return 1;if(e.chapters)return 5*e.chapters;if(e.volumes)return 50*e.volumes;if(e.episodes&&e.duration)return e.episodes*e.duration;if((null==(t=e.nextAiringEpisode)?void 0:t.episode)&&e.duration)return(null==(a=e.nextAiringEpisode)?void 0:a.episode)*e.duration;let r=Object.values(e.startDate).filter((e=>"FuzzyDate"!=e&&e)).join("-"),l=(Date.now()-Date.parse(r))/864e5;return"MANGA"==e.format?5*Math.round(l/8.2):(e.format,20*Math.round(l/8.2))})(e),startDate:Object.values(e.startDate).filter((e=>"FuzzyDate"!=e&&e)).join("-")}},[n,o]=(e=>{let t=new Map,a=new Map;console.log(e);for(let r of e)for(let e of r.entries){t.set(e.media.id,{data:__assign(__assign({},l(e.media)),{status:e.status})});for(let a of e.media.relations.nodes)t.get(a.id)||t.set(a.id,{data:__assign(__assign({},l(a)),{status:"NO"})});for(let t of e.media.relations.edges)a.set(t.id,{data:{id:"L"+t.id,source:e.media.id,target:t.node.id,relation:t.relationType}})}return[t,a]})(e);console.log(n,o),r.add(Array.from(n.values()).concat(Array.from(o.values())));let s=r.elements().components(),i=[];s.map((e=>{let l=r.collection();e.edges().map((e=>{let a=e.parallelEdges().sort(((e,a)=>t[e.data("relation")]-t[a.data("relation")]))[0];switch(a.data("relation")){case"ADAPTATION":a.move({source:a.data("target"),target:a.data("source")}),a.data({relation:"SOURCE"});break;case"PREQUEL":a.move({source:a.data("target"),target:a.data("source")}),a.data({relation:"SEQUEL"})}l=l.union(a)})),e=e.nodes().union(l),l.map((e=>{e.restore()})),e.filter("node, edge[relation!='CHARACTER']").difference(a.map((e=>`#${e}`)).join(", ")).components().map((t=>{t.nodes().length!=t.filter("node[status='NO']").length&&i.push({series:t,serieComplete:e.subtract(t)})}))}));let c=i.map((e=>{let t=e.series.sort(((e,t)=>{let a=parseInt(e.data("popularity")),r=parseInt(t.data("popularity"));return isNaN(a)?999:isNaN(r)?-1:r-a}));return{seriesPrime:t.nodes()[0],series:t,serieComplete:e.serieComplete}})).map((e=>{var t,a,r,l,n,o,s,i,c,d,u,m;let p={};for(let g of["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC","MANGA","NOVEL","ONE_SHOT"]){let h=e.series.nodes().filter(`node[format='${g}']`);p[g]={tot:null!=(t=h.length)?t:0,miss:null!=(a=h.filter("node[status='NO']").length)?a:0,got:null!=(r=h.filter("node[status='COMPLETED'],node[status='DROPPED'],node[status='REPEATING']").length)?r:0,plan:null!=(l=h.filter("node[status='PLANNING'],node[status='CURRENT'],node[status='PAUSED']").length)?l:0,totWeight:null==(o=null==(n=h.map((e=>e.data("compWeight"))))?void 0:n.reduce)?void 0:o.call(n,((e,t)=>e+t),0),missWeight:null==(i=null==(s=h.filter("node[status='NO']").map((e=>e.data("compWeight"))))?void 0:s.reduce)?void 0:i.call(s,((e,t)=>e+t),0),gotWeight:null==(d=null==(c=h.filter("node[status='COMPLETED'],node[status='DROPPED'],node[status='REPEATING']").map((e=>e.data("compWeight"))))?void 0:c.reduce)?void 0:d.call(c,((e,t)=>e+t),0),planWeight:null==(m=null==(u=h.filter("node[status='PLANNING'],node[status='CURRENT'],node[status='PAUSED']").map((e=>e.data("compWeight"))))?void 0:u.reduce)?void 0:m.call(u,((e,t)=>e+t),0)}}return __assign(__assign({},e),{stats:p,status:"ERR"})})),d={};return c.map((e=>{d[e.seriesPrime.data("id")]=__assign(__assign({},e),{seriesPrime:e.seriesPrime.data(),series:{nodes:e.series.nodes().map((e=>e.data())),edges:e.series.edges().map((e=>e.data()))},serieComplete:{nodes:e.serieComplete.nodes().map((e=>e.data())),edges:e.serieComplete.edges().map((e=>e.data()))}})})),console.log(Object.values(d).length),d},dt=(e,t=!1)=>t?[...e.nodes,...e.edges].map((e=>({data:e,classes:["not-counted"]}))):[...e.nodes,...e.edges].map((e=>({data:e}))),ut=e=>{var t,a,r;if(e.seriesSelected)switch(e.userOptions.cyLayout){case"breathfirst":return{name:"breadthfirst",roots:[e.seriesSelected.seriesPrime.id]};case"klay":return(null==(t=e.cyViz)?void 0:t.style()).selector("edge").style("curve-style","bezier"),{name:"klay",nodeDimensionsIncludeLabels:!0,klay:{edgeRouting:"POLYLINE",layoutHierarchy:!1,spacing:40,nodeLayering:"NETWORK_SIMPLEX",mergeEdges:!0,thoroughness:10}};case"dagre":return(null==(a=e.cyViz)?void 0:a.style()).selector("edge").style("curve-style","bezier"),{name:"dagre",nodeDimensionsIncludeLabels:!0,rankSep:80};case"elk":return(null==(r=e.cyViz)?void 0:r.style()).selector("edge").style("curve-style","bezier"),{name:"elk",nodeDimensionsIncludeLabels:!0};case"cola":return{name:"cola",animate:!0,nodeSpacing:()=>50,randomize:!0};case"fcose":return{name:"fcose",animate:!0,nodeSeparation:2e3,nodeRepulsion:()=>45e6};default:return{name:"random",roots:[e.seriesSelected.seriesPrime.id]}}return{name:"random"}},mt={cy:y({headless:!0}),userOptions:{themeMode:"auto",vizMode:"list",sort:{type:"alphabetical",inverted:!1},smartCompletion:!0,completion:Be,animeComposition:["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC"],mangaComposition:["MANGA","ONE_SHOT"],novelComposition:["NOVEL"],statusFilter:["COMPLETE","PLAN_TO_COMPLETE","ERR"],cyShowHidden:!1,cyShowNav:!0,cyFormatFilter:[],cyLayout:"klay",cyFilter:[]},seriesDict:{},user:{},usersHist:[],globalStats:{tot:0,miss:0,got:0,plan:0},status:["ok"," "]},{Provider:pt,useTracked:gt}=b((()=>o.useState(mt)));function ht(e){switch(e){case"NO":return"red";case"COMPLETED":return"green";default:return"grey.500"}}const Et=({data:e})=>{var t,a;return o.createElement(x,{sx:{width:200,height:60,border:"1px solid",borderColor:ht(e.status),position:"relative"}},o.createElement(O,{container:!0,sx:{height:"100%"}},o.createElement(O,{item:!0,xs:12,sx:{height:"70%",overflow:"hidden"}},o.createElement(C,null,e.title)),o.createElement(O,{item:!0,xs:6,sx:{borderTop:"solid 1px",borderColor:"grey.500",height:"30%",fontSize:13}},o.createElement(C,{sx:{marginRight:"22px",textAlign:"center",fontSize:13}},null!=(t=e.startDate)?t:"TBA")),o.createElement(O,{item:!0,xs:6,sx:{borderTop:"solid 1px",borderColor:"grey.500",height:"30%",textAlign:"center"}},o.createElement(C,{sx:{marginLeft:"22px",textAlign:"center",fontSize:13,textTransform:"capitalize"}},e.format.toLowerCase()))),o.createElement(S,{sx:{position:"absolute",width:50,height:50,borderRadius:20,border:"1px solid transparent",borderTopColor:"inherit",borderRightColor:"inherit",right:"35%",top:"58%",backgroundColor:"white",transform:"rotate(315deg)"}}," ",o.createElement(A,{sx:{margin:"auto",width:"100%",transform:"rotate(45deg)",position:"absolute",right:"-3px",top:"9px"}},null==(a=Ye[e.format])?void 0:a.icon)))},ft=e=>{var{name:t,dataset:a,chips:r,stateArray:l,disabled:s}=e,i=n(e,["name","dataset","chips","stateArray","disabled"]);const[c,d]=gt();return o.createElement(S,{sx:__assign({position:"relative",display:"grid",gridTemplateColumns:"1fr 40px 40px",gridTemplateRows:"40px auto",gridTemplateAreas:"'name all none' 'chips chips chips'",placeItems:"center",mt:1},i.sx)},o.createElement(C,{sx:__assign({gridArea:"name",placeSelf:"center start",color:"text.primary"},s?{color:"text.disabled",pointerEvents:"none"}:void 0)},t),o.createElement(w,{key:"all",title:"Select All",placement:"top",disableInteractive:!0},o.createElement(T,{sx:{gridArea:"all"},onClick:function(){d((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{[l]:r})})))},disabled:s},o.createElement(I,null))),o.createElement(w,{key:"none",title:"Unselect All",placement:"top",disableInteractive:!0},o.createElement(T,{sx:{gridArea:"none"},onClick:function(){d((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{[l]:[]})})))},disabled:s},o.createElement(N,null))),o.createElement(S,{sx:__assign({gridArea:"chips",border:"1px solid",display:"flex",borderRadius:"10px",borderColor:"grey.500",flexWrap:"wrap",p:"10px",placeSelf:"stretch"},s?{borderColor:"grey.400",pointerEvents:"none"}:void 0)},r.map((e=>{var t,r;return o.createElement(w,{key:a[e].id,title:a[e].tooltip,placement:"top",disableInteractive:!0},o.createElement(k,{color:(r=a[e].id,c.userOptions[l].includes(r)?"primary":"default"),variant:"outlined",disabled:s,label:a[e].label,icon:null==(t=a[e])?void 0:t.icon,onClick:()=>function(e){d((t=>__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{[l]:L(t.userOptions[l],[e])})})))}(a[e].id),sx:{mx:.5,my:.5}}))}))))},vt=()=>{var e,t,a,r;const[l,n]=gt();return o.createElement(ft,{name:"Formats to hide",chips:[...new Set([...null!=(t=null==(e=l.seriesSelected)?void 0:e.series.nodes.map((e=>e.format)))?t:[],...l.userOptions.cyShowHidden&&null!=(r=null==(a=l.seriesSelected)?void 0:a.serieComplete.nodes.map((e=>e.format)))?r:[]])],stateArray:"cyFilter",dataset:Ye,sx:{mt:0}})},yt=e=>{var t,a,r=n(e,[]);const[l,s]=gt(),[i,c]=o.useState(0),[d,u]=o.useState(0),m=e=>{s((t=>{var a,r,l;let n=__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{cyLayout:e})});return null==(a=t.cyViz)||a.elements().makeLayout(ut(n)).run(),null==(r=t.cyViz)||r.fit(void 0,50),null==(l=t.cyViz)||l.panBy({x:-35,y:0}),n}))},p=e=>l.userOptions.cyLayout==e?"primary":"default",[g,h]=o.useState(null);return o.useEffect((()=>{s((e=>(c((()=>{var t;return!e.userOptions.cyShowHidden&&e.seriesSelected?null==(t=e.seriesSelected)?void 0:t.serieComplete.nodes.length:0})),u((()=>{var t,a;return null!=(a=null==(t=e.cyViz)?void 0:t.filter(".hidden").length)?a:0})),__assign({},e))))}),[l.cyViz,l.seriesSelected,l.userOptions.cyFilter,l.userOptions.cyShowHidden]),o.createElement(S,__assign(__assign({},r),{sx:__assign({},r.sx)}),o.createElement(S,{sx:{position:"absolute",top:"calc(20% - 60px)",right:"20px",bgcolor:"background.paper",boxShadow:1,borderRadius:"50px"}},o.createElement(w,{title:l.userOptions.cyShowNav?"Hide Side Nav":"Show Side Nav",placement:"left",disableInteractive:!0},o.createElement(T,{onClick:()=>{s((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{cyShowNav:!e.userOptions.cyShowNav})})))}},l.userOptions.cyShowNav?o.createElement(P,null):o.createElement(R,null)))),o.createElement(M,{sx:{position:"absolute",top:"20%",right:"20px",bgcolor:"background.paper",boxShadow:1,borderRadius:"10px"},spacing:.5},o.createElement(w,{title:"Center View",placement:"left",disableInteractive:!0},o.createElement(T,{onClick:()=>{var e,t;null==(e=l.cyViz)||e.fit(void 0,50),null==(t=l.cyViz)||t.panBy({x:-35,y:0})}},o.createElement(D,null))),o.createElement(W,null),o.createElement(w,{title:"Horizontal Layout",placement:"left",disableInteractive:!0},o.createElement(T,{onClick:()=>m("klay"),color:p("klay")},o.createElement(V,null))),o.createElement(w,{title:"Vertical Layout",placement:"left",disableInteractive:!0},o.createElement(T,{sx:{transform:"rotate(90deg)"},onClick:()=>m("dagre"),color:p("dagre")},o.createElement(V,null))),o.createElement(W,null),o.createElement(S,null,o.createElement(w,{title:0==(null==(t=l.seriesSelected)?void 0:t.serieComplete.nodes.length)?"No related series":l.userOptions.cyShowHidden?"Showing Related":`Show ${i} Related Elements`,placement:"left",disableInteractive:!0},o.createElement(z,{badgeContent:i,color:"primary"},o.createElement(T,{onClick:()=>{s((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{cyShowHidden:!e.userOptions.cyShowHidden})})))},color:l.userOptions.cyShowHidden?"primary":"default",disabled:0==(null==(a=l.seriesSelected)?void 0:a.serieComplete.nodes.length)},o.createElement(U,null))))),o.createElement(W,null),o.createElement(j,{onClickAway:()=>{h(null)}},o.createElement(S,null,o.createElement(w,{title:d?`Hiding ${d} Nodes`:"Filter Nodes",placement:"left",disableInteractive:!0},o.createElement(z,{badgeContent:d,color:"primary"},o.createElement(T,{onClick:e=>{h(g?null:e.currentTarget)},color:0!=l.userOptions.cyFilter.length?"primary":"default"},o.createElement(_,null)))),o.createElement(H,{open:Boolean(g),anchorEl:g,placement:"left",disablePortal:!1,modifiers:[{name:"flip",enabled:!0,options:{altBoundary:!0,rootBoundary:"viewport",padding:8}},{name:"preventOverflow",enabled:!0,options:{altAxis:!0,altBoundary:!0,tether:!0,rootBoundary:document,padding:8}},{name:"arrow",enabled:!0,options:{element:g}}]},o.createElement(S,{sx:{bgcolor:"white",p:2,borderRadius:"10px",width:"300px",boxShadow:1}},o.createElement(vt,null)))))))},bt=e=>{const[t,a]=gt();let r=o.useRef(null);o.useEffect((()=>{try{y.use(F),y.use(G),y.use($),y.use(B),y.use(Y),y.use(q)}catch(t){}let e=y({container:r.current,wheelSensitivity:.3,elements:[{data:{id:"a",title:"Welcome to AniCheck!",startDate:"2020-02-01",format:"helo"}},{data:{id:"b",title:"Insert a username then click on a serie!",startDate:"2020-02-01",format:"HELO"}},{data:{id:"ab",source:"a",target:"b"}}],style:[{selector:"node",style:{width:200,height:60,"background-color":"white",shape:"rectangle"}},{selector:"edge",style:{"curve-style":"unbundled-bezier",width:2,"target-arrow-shape":"triangle","target-label":"data(relation)","target-text-offset":35}},{selector:'edge[relation= "SEQUEL"]',style:{width:5,"line-color":"blue","target-arrow-color":"blue"}},{selector:'edge[relation= "ADAPTATION"],edge[relation= "SOURCE"]',style:{"line-style":"dashed","line-dash-pattern":[10],width:1,"line-color":"cyan","target-arrow-color":"cyan"}},{selector:".hidden",style:{display:"none"}}],layout:{name:"cose"}});e.on("cxttapend","node",(e=>{console.log("cxttapend on node"),window.open(e.target.data("siteUrl"),"_blank")})),e.on("tap","node,edge",(e=>{console.log(e.target.data())})),e.nodeHtmlLabel([{query:"node",halign:"center",valign:"center",halignBox:"center",valignBox:"center",cssClass:"",tpl:e=>J.renderToString(o.createElement(Et,{data:e}))},{query:"node:hidden",tpl:()=>""}],{enablePointerEvents:!0}),a((t=>__assign(__assign({},t),{cyViz:e})))}),[]),o.useEffect((()=>{a((e=>{var t,a,r;return e.seriesSelected&&e.cyViz&&(console.log(e.seriesSelected),e.cyViz.elements().remove(),e.cyViz.add(dt(e.seriesSelected.series)),e.cyViz.add(dt(e.seriesSelected.serieComplete,!0)),l(e.cyViz),null==(t=e.cyViz)||t.center(),e.cyViz.elements().makeLayout(ut(e)).run(),null==(a=e.cyViz)||a.fit(void 0,50),null==(r=e.cyViz)||r.panBy({x:-35,y:0})),__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{cyShowHidden:!1})})}))}),[t.seriesSelected]),o.useEffect((()=>{a((e=>{var t,a,r;return e.seriesSelected&&e.cyViz&&(l(e.cyViz),null==(t=e.cyViz)||t.center(),e.cyViz.elements().makeLayout(ut(e)).run(),null==(a=e.cyViz)||a.fit(void 0,50),null==(r=e.cyViz)||r.panBy({x:-35,y:0})),__assign({},e)}))}),[t.userOptions.cyFilter,t.userOptions.cyShowHidden]);const l=e=>{var a;e.elements().removeClass("hidden"),(null==(a=t.seriesSelected)?void 0:a.serieComplete)&&(t.userOptions.cyShowHidden?e.add(dt(t.seriesSelected.serieComplete,!0)):e.filter(".not-counted").remove()),t.userOptions.cyFilter&&e.filter((e=>Object.values(e.data()).some((e=>t.userOptions.cyFilter.includes(e))))).addClass("hidden")};return o.createElement(S,__assign(__assign({},e),{sx:{position:"relative",display:{xs:"none",sm:"block"}}}),o.createElement(S,{ref:r,style:{width:"100%",height:"100vh",overflow:"hidden"}}),o.createElement(yt,null))};const xt=e=>{const[t,a]=gt();return o.createElement(S,__assign(__assign({},e),{sx:__assign(__assign({},e.sx),{display:"grid",gridTemplateColumns:"1fr 50px 50px",gridTemplateRows:"50px",gridTemplateAreas:"'. help options'",placeItems:"center"})}),o.createElement(T,{sx:{p:"8px",backdropFilter:"blur(8px)",bgcolor:"rgba(255,255,255,0.5)",gridArea:"options",border:"1px solid",borderColor:"primary.main",color:"primary.main",":hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:()=>{var e;null==(e=t.modalOpenState)||e[1](!0)}},o.createElement(Q,null)),o.createElement(T,{sx:{p:"8px",backdropFilter:"blur(8px)",bgcolor:"rgba(255,255,255,0.5)",gridArea:"help",border:"1px solid",borderColor:"primary.main",color:"primary.main",":hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:()=>{var e;null==(e=t.modalInfoOpenState)||e[1](!0)}},o.createElement(K,null)))},Ot=()=>{var e,t;const[a,r]=gt();return o.createElement(S,null,o.createElement(S,{sx:{position:"relative",display:"grid",gridTemplateRows:"40px 10px 70px",gridTemplateColumns:"70px 1fr",gridTemplateAreas:"'head head' '. .' 'avatar username'",background:`url(${a.user.cover}) no-repeat center center`,backgroundSize:"cover",overflow:"hidden"}},o.createElement(S,{sx:{position:"absolute",background:"linear-gradient(180deg,rgba(6,13,34,0) 40%,rgba(6,13,34,.6))",width:"100%",height:"100%",zIndex:"0"}}),o.createElement(xt,{sx:{gridArea:"head"}}),o.createElement(S,{sx:{gridArea:"avatar",placeSelf:"strech strech",m:"0 0 0 2px"}},o.createElement(X,{sx:{width:"100%",height:"100%"},src:null!=(e=a.user.avatar)?e:"/aniCheck/pwaicon.png",variant:"rounded"})),o.createElement(S,{sx:{gridArea:"username",placeSelf:"center start",ml:"2%",zIndex:"1"}},o.createElement(C,{color:"white",variant:"h5"},null!=(t=a.user.name)?t:"AniCheck"))),"loading"==a.status[0]?o.createElement(Z,null):void 0)},Ct=e=>{const[t,a]=gt(),[r,l]=Ze("sort",t.userOptions.sort);o.useEffect((()=>{a((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{sort:r})})))}),[r]);const[n,s]=o.useState(null),i=Boolean(n),c=e=>{r.type==e?l({type:e,inverted:!r.inverted}):l(__assign(__assign({},r),{type:e}))};return o.createElement(S,__assign({},e),o.createElement(T,{id:"sort-button","aria-controls":"sort-menu","aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:e=>{s(e.currentTarget)}},o.createElement(ee,null)),o.createElement(te,{id:"sort-menu",anchorEl:n,open:i,onClose:()=>{s(null)},MenuListProps:{"aria-labelledby":"sort-button"},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},o.createElement(ae,{selected:"weight%"==r.type,onClick:()=>c("weight%")},r.inverted?o.createElement(re,null):o.createElement(le,null),"Weighted Complete %"),o.createElement(ae,{selected:"alphabetical"==r.type,onClick:()=>c("alphabetical")},r.inverted?o.createElement(re,null):o.createElement(le,null),"Alphabetical"),o.createElement(ae,{selected:"missWeight"==r.type,onClick:()=>c("missWeight")},r.inverted?o.createElement(re,null):o.createElement(le,null),"Time To Complete")))},St=({children:e})=>{const[t,a]=gt(),[r,l]=o.useState(""),n=function(e,t){const[a,r]=o.useState(e);return o.useEffect((()=>{const a=setTimeout((()=>{r(e)}),t);return()=>{clearTimeout(a)}}),[e,t]),a}(r,800);o.useState([]);((e,t=!0)=>{const[a,r]=o.useState("idle"),[l,n]=o.useState(null),[s,i]=o.useState(null),c=o.useCallback((()=>(r("pending"),n(null),i(null),e().then((e=>{n(e),r("success")})).catch((e=>{i(e),r("error")})))),[e]);o.useEffect((()=>{t&&c()}),[c,t])})((()=>new Promise(((e,a)=>{var r;e(de(Object.values(null!=(r=t.seriesDict)?r:[]).filter((e=>!t.userOptions.statusFilter.includes(e.status))),n,{keys:["series.nodes.*.titles"],sorter:n?void 0:e=>(console.log(e),nt(t.userOptions.sort.type)(e,t.userOptions.sort.inverted))}))}))),!1);return o.useEffect((()=>{a((e=>{var t;return __assign(__assign({},e),{seriesToRender:de(Object.values(null!=(t=e.seriesDict)?t:[]).filter((t=>!e.userOptions.statusFilter.includes(t.status))),n,{keys:["series.nodes.*.titles"],sorter:n?void 0:t=>nt(e.userOptions.sort.type)(t,e.userOptions.sort.inverted)})})}))}),[n,t.seriesDict,t.userOptions.sort,t.userOptions.completion,t.userOptions.statusFilter,t.userOptions.smartCompletion,t.userOptions.animeComposition,t.userOptions.mangaComposition]),o.createElement(S,{sx:{display:"grid",gridTemplateRows:"60px",gridTemplateColumns:"50% 1fr 50px 50px",gridTemplateAreas:"'search . complete sort'",placeItems:"center",m:"0px 10px 0px 14px"}},o.createElement(ne,{sx:{gridArea:"search",justifySelf:"left","& .MuiOutlinedInput-notchedOutline":{border:"1px solid",borderColor:"#00000000"}},size:"small",value:r,onChange:e=>{l(e.target.value)},placeholder:"Search Series",InputProps:{sx:{bgcolor:"primary.ghost","& ::placeholder":{color:"primary.dark",fontWeight:"bold"}},startAdornment:o.createElement(oe,{position:"start",sx:{color:"primary.main"}},o.createElement(se,null)),endAdornment:o.createElement(oe,{position:"end"},r?o.createElement(T,{onClick:()=>{l("")}},o.createElement(ie,null)):void 0)}}),o.createElement(T,{sx:{gridArea:"complete"},onClick:()=>{var e;null==(e=t.modalOpenState)||e[1](!0,"completion_options")}},o.createElement(ce,null)),o.createElement(Ct,{sx:{gridArea:"sort"}}))},At=({value1:e,value2:t,size:a,sx:r,children:l})=>o.createElement(S,{sx:__assign(__assign({},r),{position:"relative",display:"inline-flex"})},o.createElement(w,{placement:"right",title:`${t?`${t}% Planned`:""}${e&&t?" / ":""}${e?`${e}% Completed`:""}`,disableInteractive:!0},o.createElement(ue,{variant:"determinate",color:"primary",value:e,size:null!=a?a:40,thickness:5,sx:{zIndex:1}})),o.createElement(S,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},o.createElement(ue,{variant:"determinate",color:"secondary",value:t+e,size:(null!=a?a:40)-2,thickness:4,sx:{display:"flex",alignItems:"center",justifyContent:"center"}}),o.createElement(S,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},l))),wt=({index:e,style:t,isScrolling:a,data:r})=>{var l,n,s,i,c;const[d,u]=gt(),[m,p]=o.useState(!1);let g=r.seriesList[e],{series:h,seriesPrime:f}=g,v=f.id;return o.useLayoutEffect((()=>{var e,t;m?(null==(e=d.seriesSelected)?void 0:e.seriesPrime.id)!=v&&p(!1):(null==(t=d.seriesSelected)?void 0:t.seriesPrime.id)==v&&p(!0)}),[d.seriesSelected]),o.useLayoutEffect((()=>{console.log(d.seriesDict[v])}),[d.seriesDict]),o.createElement(S,{style:__assign({},t),key:v},o.createElement(me,{sx:{display:"grid",gridTemplateColumns:"1fr  32%",gridTemplateAreas:"'content stats'",alignItems:"stretch",height:m?"calc(100% - 6px)":"calc(100% - 10px)",width:m?"calc(100% - 16px)":"calc(100% - 20px)",m:m?"3px 8px 3px 8px":"5px 10px 5px 10px",border:m?"3px solid":"1px solid",borderColor:m?"primary.main":"grey.500",background:`url(${null!=(l=f.bannerImage)?l:f.cover}) no-repeat center center`,backgroundSize:"cover",color:"white",borderRadius:"10px",boxShadow:"inset 0 0 0 2000px "+(m?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0.4)"),overflow:"hidden",textAlign:"left"},key:v,onClick:()=>{u((e=>__assign(__assign({},e),{seriesSelected:g})))}},o.createElement(S,{sx:{gridArea:"content",placeSelf:"stretch",display:"grid",gridTemplateRows:"1fr 45px",gridTemplateAreas:"'title' 'bot-stat'",gap:"1px",overflow:"hidden"}},o.createElement(C,{sx:{pt:"10px",pr:"10px",pl:"20px",pb:"20px",gridArea:"title",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},variant:"h6"},f.title),o.createElement(S,{sx:{gridArea:"bot-stat",placeSelf:"stretch",display:"flex",flexDirection:"row",alignItems:"center",pl:"10px"}},void 0)),o.createElement(S,{sx:{gridArea:"stats",display:"grid",gridTemplateRows:"75% auto",gridTemplateAreas:"'pie' 'weight'",alignItems:"center",justifyItems:"center",width:"100%"}},o.createElement(At,{value1:null!=(n=g.stats.selected.gotPerWeight)?n:0,value2:null!=(s=g.stats.selected.planPerWeight)?s:0,size:80,sx:{bgcolor:"rgba(0,2,2,0.2)",gridArea:"pie",backdropFilter:"blur(5px)",borderRadius:"30px",p:"5px"}},o.createElement(C,null,"PLAN_TO_COMPLETE"==g.status||"COMPLETE"==g.status?100:(null!=(i=g.stats.selected.gotPerWeight)?i:0)+(null!=(c=g.stats.selected.planPerWeight)?c:0))),o.createElement(S,{sx:{width:"100%",display:"flex",justifyContent:" space-evenly"}},g.stats.selected.planWeight?o.createElement(w,{placement:"right",title:g.stats.selected.planWeight?`${g.stats.selected.planWeight} minutes planned`:"You did it!",disableInteractive:!0},o.createElement(S,{sx:{bgcolor:"rgba(0,2,2,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"secondary.main",backdropFilter:"blur(10px)",p:"2px 8px",borderRadius:"10px",fontWeight:600}},o.createElement(pe,{sx:{mr:"3px"}}),g.stats.selected.planWeight)):void 0,g.stats.selected.missWeight?o.createElement(w,{placement:"right",title:g.stats.selected.missWeight?`${g.stats.selected.missWeight} minutes missing`:"You did it!",disableInteractive:!0},o.createElement(S,{sx:{bgcolor:"rgba(0,2,2,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",backdropFilter:"blur(10px)",p:"2px 8px",borderRadius:"10px",fontWeight:600}},o.createElement(pe,{sx:{mr:"3px"}}),g.stats.selected.missWeight)):void 0,100==g.stats.selected.gotPerWeight?o.createElement(S,{sx:{bgcolor:"rgba(0,2,2,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"primary.main",backdropFilter:"blur(10px)",p:"2px 8px",borderRadius:"10px",fontWeight:600}},o.createElement(E,{sx:{mr:"3px"}}),"You did it!"):void 0))))},Tt=({onScroll:e,forwardedRef:t,style:a,children:r})=>{const l=o.useCallback((e=>{t(e?e.view:null)}),[t]);return o.createElement(ge.Scrollbars,{ref:l,style:__assign(__assign({},a),{overflow:"hidden"}),onScroll:e},r)};o.forwardRef(((e,t)=>o.createElement(Tt,__assign(__assign({},e),{forwardedRef:t}))));const It=e=>{const t=o.createRef(),a=o.createRef(),[r,l]=gt();let[n,s]=o.useState([]);function i(e){var t;return null!=(t=n[e].seriesPrime.id)?t:"1"}return o.useEffect((()=>{var e,a,l;s(null!=(a=null!=(e=r.seriesToRender)?e:Object.values(r.seriesDict))?a:[]),null==(l=t.current)||l.scrollTo(0)}),[r.seriesToRender,r.seriesDict]),o.createElement(S,__assign(__assign({},e),{sx:__assign(__assign({},e.sx),{height:"100%"})}),r.seriesDict?o.createElement(he,null,(({height:e,width:r})=>{var l;return o.createElement(Ee,{ref:t,height:e,itemSize:140,width:r,itemCount:null!=(l=null==n?void 0:n.length)?l:0,itemData:{seriesList:n},useIsScrolling:!0,itemKey:i,outerRef:a},wt)})):o.createElement("p",null,"None"))},Nt=e=>{var{name:t,helperText:a,onClick:r,control:l}=e,s=n(e,["name","helperText","onClick","control"]);return o.createElement(S,{sx:__assign({position:"relative",display:"grid",gridTemplateColumns:"1fr auto",gridTemplateRows:"auto auto",gridTemplateAreas:"'name s' 'help s'",alignItems:"center",m:"5px 0px"},s.sx)},o.createElement(me,{disabled:!r,sx:{position:"absolute",width:"100%",height:"100%"},onClick:r}),o.createElement(C,{sx:{gridArea:"name",color:"text.primary"},variant:"body1"},t),o.createElement(C,{sx:{gridArea:"help",color:"text.secondary"},variant:"caption"},a),o.createElement(S,{sx:{gridArea:"s",placeSelf:"start end"}},l))},kt=()=>{const[e,t]=gt();function a(e){t((t=>{switch(e){case"smart":return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{smartCompletion:!t.userOptions.smartCompletion})});case"all":return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{completion:Be})});default:return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{completion:L(t.userOptions.completion,[e])})})}}))}return o.useEffect((()=>{t((e=>it(e)))}),[e.userOptions.completion,e.userOptions.smartCompletion,e.userOptions.mangaComposition,e.userOptions.animeComposition]),o.createElement(S,null,o.createElement(Nt,{name:"Smart Completion",helperText:"Only consider completion of thematic groups you have already started. (E.g. If you read all manga of a series without watching any animation the series is completed anyway)",onClick:()=>a("smart"),control:o.createElement(fe,{checked:e.userOptions.smartCompletion,onClick:()=>a("smart")})}),o.createElement(ft,{name:"Formats to consider Anime",chips:["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC"],stateArray:"animeComposition",dataset:Ye,disabled:!e.userOptions.smartCompletion,sx:e.userOptions.smartCompletion?void 0:{display:"none"}}),o.createElement(ft,{name:"Formats to consider Manga",chips:["MANGA","ONE_SHOT"],stateArray:"mangaComposition",dataset:Ye,disabled:!e.userOptions.smartCompletion,sx:e.userOptions.smartCompletion?void 0:{display:"none"}}),o.createElement(ft,{name:"Formats to consider Novel",chips:["NOVEL"],stateArray:"novelComposition",dataset:Ye,disabled:!e.userOptions.smartCompletion,sx:e.userOptions.smartCompletion?void 0:{display:"none"}}),o.createElement(W,{variant:"middle",sx:{my:2}}),o.createElement(Nt,{name:"Custom Completion",helperText:"Choose what formats to include for completion in a series",onClick:()=>a("smart"),control:o.createElement(fe,{checked:!e.userOptions.smartCompletion,onClick:()=>a("smart")})}),o.createElement(ft,{name:"Formats to consider",chips:Be,stateArray:"completion",dataset:Ye,disabled:e.userOptions.smartCompletion,sx:e.userOptions.smartCompletion?{display:"none"}:void 0}))},Lt=()=>{const[e,t]=gt();return o.useEffect((()=>{t((e=>it(e)))}),[e.userOptions.completion,e.userOptions.smartCompletion,e.userOptions.mangaComposition,e.userOptions.animeComposition]),o.createElement(S,null,o.createElement(Nt,{name:"Theme",helperText:"Auto will set the theme based on your system options",control:o.createElement(ve,{labelId:"select-theme",id:"select-theme",value:e.userOptions.themeMode,onChange:e=>{t((t=>__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{themeMode:e.target.value})})))},sx:{width:"100px"}},o.createElement(ae,{value:"auto"},"Auto"),o.createElement(ae,{value:"light"},"Light"),o.createElement(ae,{value:"dark"},"Dark"))}),o.createElement(Nt,{name:"Visualization Type",helperText:"Graph is best for showing relashionships. List (WIP) for a more ordered display.",sx:{mt:2},control:o.createElement(ve,{labelId:"select-visualization",id:"select-visualization",value:e.userOptions.vizMode,onChange:e=>{t((t=>__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{vizMode:e.target.value})})))},sx:{width:"100px"}},o.createElement(ae,{value:"graph"},"Graph"),o.createElement(ae,{value:"list"},"List"))}))};function Pt(){const[e,t]=gt(),[a,r]=o.useState("1"),[l,n]=o.useState(!1),s=(e,t)=>{n(e),r(null!=t?t:"general")};o.useEffect((()=>{t((e=>__assign(__assign({},e),{modalOpenState:[l,s]})))}),[]);return o.createElement(ye,{open:l,onClose:()=>{var t;return null==(t=e.modalOpenState)?void 0:t[1](!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},o.createElement(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,maxHeight:"90%",borderRadius:"10px",overflow:"auto auto"}},o.createElement(be,{value:a},o.createElement(S,{sx:{borderBottom:1,borderColor:"divider"}},o.createElement(xe,{onChange:(e,t)=>{r(t)},"aria-label":"options"},o.createElement(Oe,{label:"General",value:"general"}),o.createElement(Oe,{label:"Completion",value:"completion_options"}))),o.createElement(Ce,{value:"general"},o.createElement(Lt,null)),o.createElement(Ce,{value:"completion_options"},o.createElement(kt,null)),o.createElement(Ce,{value:"3"},"Item Three"))))}const Rt=e=>{var{children:t,statusId:a,tooltip:r}=e,l=n(e,["children","statusId","tooltip"]);const[s,i]=gt();return o.createElement(w,{title:null!=r&&r,disableInteractive:!0},o.createElement(Se,__assign({onClick:e=>{i((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{statusFilter:Ae(["COMPLETE","PLAN_TO_COMPLETE","NOT_COMPLETE","ERR"],a)})})))},color:l.color,variant:s.userOptions.statusFilter.includes(a)?"outlined":"contained",startIcon:l.startIcon},l),t))},Mt=()=>{var e,t,a,r,l,n,s,i,c,d,u,m,p,g,f,y,b,x,O;const[C,A]=gt();return o.createElement(S,null,o.createElement(S,{sx:{margin:"5px 0 0 0",display:"flex",justifyContent:"space-evenly",flexWrap:"wrap"}},o.createElement(Rt,{statusId:"COMPLETE",tooltip:"Completed",startIcon:o.createElement(E,null),color:"primary"},null==(e=C.globalStats)?void 0:e.got),o.createElement(Rt,{statusId:"PLAN_TO_COMPLETE",tooltip:"Plan To Complete",startIcon:o.createElement(h,null),color:"secondary"},null==(t=C.globalStats)?void 0:t.plan),o.createElement(Rt,{statusId:"NOT_COMPLETE",tooltip:"Not Completed",startIcon:o.createElement(v,null),color:void 0},null==(a=C.globalStats)?void 0:a.miss),(null!=(l=null==(r=C.globalStats)?void 0:r.tot)?l:0)-((null!=(s=null==(n=C.globalStats)?void 0:n.got)?s:0)+(null!=(c=null==(i=C.globalStats)?void 0:i.miss)?c:0)+(null!=(u=null==(d=C.globalStats)?void 0:d.plan)?u:0))==0?void 0:o.createElement(Rt,{statusId:"ERR",tooltip:"Not Included with current options",startIcon:o.createElement(N,null),color:void 0},(null!=(p=null==(m=C.globalStats)?void 0:m.tot)?p:0)-((null!=(f=null==(g=C.globalStats)?void 0:g.got)?f:0)+(null!=(b=null==(y=C.globalStats)?void 0:y.miss)?b:0)+(null!=(O=null==(x=C.globalStats)?void 0:x.plan)?O:0)))))};function Dt(){const[e,t]=gt();o.useState("1");const[a,r]=o.useState(!1);o.useEffect((()=>{t((e=>__assign(__assign({},e),{modalInfoOpenState:[a,r]})))}),[]);return o.createElement(ye,{open:a,onClose:()=>{var t;return null==(t=e.modalInfoOpenState)?void 0:t[1](!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},o.createElement(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,p:4,maxWidth:"80%",maxHeight:"90%",borderRadius:"10px",overflow:"auto"}},o.createElement(we,{remarkPlugins:[Te],children:"# Welcome to AniCheck\n\nIn this site you will be able to check the completition status of all the anime/manga series that you are following on AniList. Althougth AniList API are used, the site is completely unofficial and separeted from AniList, AniChart and their respective staff.\n\nIt's not needed to log-in to your AniList's account, fot this motif the scope is limited to only the entries that are made public.\n\nThe site is still in active development and presents various rough edges, for now the graph functionality are disabled on mobile.\n\n## Useful tips\n\n* Right click a node in the graph to open the relative AniList page\n* Weighted Percentage counts the completition based on the time each element of the series takes\n"})))}const Wt=Ie`
query ($user: String!, $type: MediaType){
  MediaListCollection(userName: $user, type: $type) {
    lists {
      entries {
        id
        status
        media {
          id
          title {
            userPreferred
            romaji
            english
          }
          synonyms
          startDate {
            year
            month
            day
          }
          format
          coverImage {
            extraLarge
            medium
            color
          }
          bannerImage
          popularity
          siteUrl
          chapters
          volumes
          episodes
          duration
          nextAiringEpisode {
            episode
          }
          status(version: 2)
          relations {
            nodes {
              id
              title {
                userPreferred
                romaji
                english
              }
              synonyms
              startDate {
                year
                month
                day
              }
              format
              coverImage {
                extraLarge
                medium
                color
              }
              bannerImage
              popularity
              siteUrl
              chapters
              volumes
              episodes
              duration
              nextAiringEpisode {
                episode
              }
              status(version: 2)
            }
            edges {
              id
              relationType(version: 2)
              node {
                id
              }
            }
          }
        }
      }
      name
      isCustomList
      isSplitCompletedList
    }

  }
}
`,Vt=Ie`
query($user: String!){
  User(name: $user) {
   name
    bannerImage
    avatar {
      medium
    }
    options {
      profileColor
      titleLanguage
      displayAdultContent
      airingNotifications 
    }
  }
}
`,zt=["132615","106495","20947","118940"],Ut=e=>{var t=n(e,[]);const[a,r]=gt(),[l,s]=Ze("usr",""),[i,{status:c,kill:d}]=Ne(ct,{remoteDependencies:["https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.18.2/cytoscape.min.js","https://cdnjs.cloudflare.com/ajax/libs/tslib/2.2.0/tslib.min.js"]}),u=()=>{r((e=>__assign(__assign({},e),{status:["ok"," "]}))),m({variables:{user:l}})},[m,p]=ke(Vt,{notifyOnNetworkStatusChange:!0,onCompleted:()=>{r((e=>{var t;return __assign(__assign({},e),{user:{name:p.data.User.name,color:null!=(t=qe[p.data.User.options.profileColor])?t:p.data.User.options.profileColor,avatar:p.data.User.avatar.medium,cover:p.data.User.bannerImage}})})),g({variables:{user:l,type:"ANIME"}})}}),[g,h]=ke(Wt,{notifyOnNetworkStatusChange:!0,onCompleted:()=>{E({variables:{user:l,type:"MANGA"}})}}),[E,f]=ke(Wt,{notifyOnNetworkStatusChange:!0,onCompleted:async()=>{let e=await i([...h.data.MediaListCollection.lists,...f.data.MediaListCollection.lists],Qe,zt);r((t=>it(__assign(__assign({},t),{seriesDict:e}))))}});return o.useEffect((()=>{let e="ok",t=" ";p.loading?(e="loading",t="Loading User Info"):h.loading?(e="loading",t="Loading your Anime List"):f.loading?(e="loading",t="Loading your Manga List"):"RUNNING"==c?(e="loading",t="Computing received data"):p.error?(e="error",t=p.error.message):h.error?(e="error",t=h.error.message):f.error&&(e="error",t=f.error.message),r((a=>__assign(__assign({},a),{status:[e,t]})))}),[p,h,f,c]),o.createElement(S,__assign({},t),o.createElement(Le,{sx:{m:1,width:"100%"},variant:"standard",error:"error"==a.status[0]},o.createElement(Pe,{sx:{fontSize:"20px"},id:"standard",placeholder:"AniList Nick",value:l,onChange:e=>{s(e.target.value)},onKeyPress:e=>{"Enter"==e.key&&"loading"!=a.status[0]&&u()},endAdornment:o.createElement(oe,{position:"end"},"loading"==a.status[0]?o.createElement(ue,null):o.createElement(T,{"aria-label":"get user anime",onClick:u},o.createElement(Re,null)))}),o.createElement(Me,{error:"error"==a.status[0],id:"standard-weight-helper-text",sx:{}},a.status[1])))},jt=e=>(gt(),o.useState(""),o.createElement(S,__assign(__assign({},e),{sx:__assign({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},e.sx)}),o.createElement(S,{sx:{display:"grid",gridTemplateRows:"100px 50px, auto",gridTemplateAreas:"'text' 'input' 'hist'",placeItems:"center"}},o.createElement(C,{sx:{gridArea:"text",textAlign:"center"},color:"primary",variant:"h4"},"Welcome to AniCheck!",o.createElement("br",null)," Insert a AniList username to start."),o.createElement(Ut,{sx:{gridArea:"input"}})))),_t=e=>{const[t,a]=gt();return o.createElement(S,__assign(__assign({},e),{sx:__assign({gridTemplateRows:"auto 1fr",gridTemplateAreas:"'top' 'content'",display:t.userOptions.cyShowNav?"grid":{xs:"grid",sm:"none"},boxShadow:1},e.sx)}),o.createElement(Pt,null),o.createElement(Dt,null),o.createElement(S,{sx:{gridArea:"top"}},o.createElement(Ot,null),Object.keys(t.seriesDict).length?o.createElement(Mt,null):void 0,Object.keys(t.seriesDict).length?o.createElement(St,null):void 0),o.createElement(S,{sx:{gridArea:"content"}},Object.keys(t.seriesDict).length?o.createElement(It,null):o.createElement(jt,null)))},Ht=({children:e})=>{var t,a,r,l;const[n,s]=gt(),i=De("(prefers-color-scheme: dark)"),c="auto"==n.userOptions.themeMode?i?"dark":"light":n.userOptions.themeMode,d=We({palette:{mode:c,primary:{main:null!=(t=n.user.color)?t:"#3f51b5",ghost:Ve(null!=(a=n.user.color)?a:"#3f51b5").alpha(.3).string()},secondary:{main:Ve(null!=(r=n.user.color)?r:"#3f51b5").rotate(180).rgb().string(),ghost:Ve(null!=(l=n.user.color)?l:"#3f51b5").rotate(180).alpha(.3).string()},background:{default:"light"==c?"#EDF1F5":"#121212",paper:"light"==c?"white":"#303030"}}});return o.createElement(ze,{theme:d},e)},Ft=e=>{var t,a,r,l,{node:s}=e,i=n(e,["node"]);const[c,d]=gt();return o.createElement(S,__assign(__assign({},i),{sx:__assign({display:"grid",gridTemplateColumns:"130px auto",gridTemplateRows:"170px",gridTemplateAreas:"'cover content'",border:"1px solid",borderColor:"grey.300",borderRadius:"10px",width:"400px",m:2,opacity:(null==(a=null==(t=c.seriesSelected)?void 0:t.formatsIncluded)?void 0:a.includes(s.format))?"1":"0.2",":hover":{opacity:"1"}},i.sx)}),o.createElement(S,{sx:{gridArea:"cover",placeSelf:"center",position:"relative",backgroundImage:`url(${s.cover})`,backgroundSize:"cover",borderRadius:"10px",border:"1px solid",borderColor:Ke[s.status].color?`${Ke[s.status].color}.main`:"grey.500",boxShadow:2,width:"108%",height:"108%",cursor:"pointer"},component:"a",href:s.siteUrl,target:"_blank"},o.createElement(S,{sx:{position:"absolute",top:"87%",left:"80%",display:"flex"}},o.createElement(k,{color:Ke[s.status].color,variant:"filled",label:(()=>{if(["MANGA","NOVEL","ONE_SHOT"].includes(s.format)){if("CURRENT"==s.status)return"Reading";if("PLANNING"==s.status)return"Plan To Read"}return Ke[s.status].label})(),icon:Ke[s.status].icon,size:"small",sx:{mx:.5,my:.5,boxShadow:1,"&.MuiChip-filledDefault":{bgcolor:"grey.600",color:"white"},"& .MuiChip-iconColorDefault":{color:"white"}}}),(null==(l=null==(r=c.seriesSelected)?void 0:r.formatsIncluded)?void 0:l.includes(s.format))?void 0:o.createElement(k,{color:Ke.NO.color,variant:"filled",label:"Not Considered",icon:o.createElement(N,null),size:"small",sx:{mx:.5,my:.5,boxShadow:1,"&.MuiChip-filledDefault":{bgcolor:"grey.600",color:"white"},"& .MuiChip-iconColorDefault":{color:"white"}}}))),o.createElement(S,{sx:{position:"relative",gridArea:"content",display:"grid",height:"170px",gridTemplateRows:"30px auto auto 20px",gridTemplateColumns:"1fr auto",gridTemplateAreas:"'format link' 'title .' 'date .' 'status .'"}},o.createElement(S,{sx:{gridArea:"title",mx:2,my:0,overflow:"hidden"}},o.createElement(C,{variant:"h6",color:"text.primary"},s.title)),o.createElement(S,{sx:{gridArea:"date",mx:2}},o.createElement(C,{variant:"subtitle2",color:"text.secondary"},s.startDate?`${s.startDate}  `:"",Xe[s.airStatus].label)),o.createElement(S,{sx:{position:"relative",gridArea:"format",mx:.9,mt:.9}},o.createElement(S,{sx:{position:"absolute",top:-7,left:-26,display:"flex",alignItems:"center",color:"primary.main"}},o.createElement(S,{sx:{ml:1,display:"flex",alignItems:"center",borderRadius:"20px",p:"4px",boxShadow:1,bgcolor:"background.paper"}},Ye[s.format].icon),o.createElement(S,{sx:{ml:.8,fontWeight:500,fontSize:15}},Ye[s.format].label)))))},Gt=e=>{var t,{category:a}=e,r=n(e,["category"]);const[l,s]=gt(),i=null==(t=l.seriesSelected)?void 0:t.series.nodes.filter((e=>ot(a,__assign(__assign({},l.userOptions),{animeComposition:["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC"],mangaComposition:["MANGA","ONE_SHOT"],novelComposition:["NOVEL"]})).includes(e.format)));return console.log(i),(null==i?void 0:i.length)?o.createElement(S,{sx:__assign({display:"grid",gridTemplateRows:" 30px auto",gridTemplateAreas:"'name' 'eles'"},r.sx)},o.createElement(C,{gridArea:"name",variant:"h5",color:"text.primary",sx:{placeSelf:"center start",ml:1.8}},a.toUpperCase()),o.createElement(S,{gridArea:"eles",sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignContent:"flex-start"}},i.map((e=>o.createElement(Ft,{key:e.id,node:e}))))):o.createElement(S,null)},$t=e=>{const[t,a]=gt();return o.createElement(S,__assign(__assign({},e),{sx:__assign({position:"relative",display:{xs:"none",sm:"grid"},gridTemplateRows:"0px auto",gridTemplateAreas:"'toolbar' 'list'",height:"100vh",overflow:"auto"},e.sx)}),t.seriesSelected?o.createElement(S,{gridArea:"list"},["anime","manga","novel"].map((e=>o.createElement(Gt,{key:e,category:e,sx:{mt:2}})))):o.createElement(C,{variant:"h3",sx:{gridArea:"list",placeSelf:"center",textAlign:"center"},color:"text.disabled"},"Nothing to show yet. ",o.createElement("br",null),"Select a Series on the right"))};const Bt=new _e({uri:"https://graphql.anilist.co",cache:new He});!function(e={}){const{immediate:t=!1,onNeedRefresh:a,onOfflineReady:r}=e;let l,n;if("serviceWorker"in navigator){l=new Ue("/aniCheck/sw.js",{scope:"/aniCheck/"}),l.addEventListener("activated",(e=>{e.isUpdate||null==r||r()}));{const e=()=>{null==a||a()};l.addEventListener("waiting",e),l.addEventListener("externalwaiting",e)}l.register({immediate:t}).then((e=>n=e))}}({onNeedRefresh(){},onOfflineReady(){}});const Yt=e=>{const[t,a]=gt();return o.createElement(S,{sx:{display:"grid",gridTemplateColumns:t.userOptions.cyShowNav?{xs:"0px 100%",sm:" calc(100% - 500px) 500px"}:{xs:"0px 100%",sm:"100% 0px"},gridTemplateAreas:"'viz nav'",height:"100vh",bgcolor:"background.default",position:"relative"}},"graph"==t.userOptions.vizMode?o.createElement(bt,{sx:{gridArea:"viz"}}):o.createElement($t,{sx:{gridArea:"viz"}}),"graph"==t.userOptions.vizMode?o.createElement(k,{sx:{gridArea:"viz",position:"absolute",top:10,right:10},label:"List View",icon:o.createElement($e,null),clickable:!0,onClick:()=>{a((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{vizMode:"list"})})))}}):o.createElement(k,{sx:{gridArea:"viz",position:"absolute",top:10,right:10},label:"Relations Graph",icon:o.createElement(V,null),clickable:!0,onClick:()=>{a((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{vizMode:"graph"})})))}}),o.createElement(_t,{sx:{gridArea:"nav"}}))};Fe.render(o.createElement(o.StrictMode,null,o.createElement(pt,null,o.createElement(Ge,{client:Bt},o.createElement(Ht,null,o.createElement(Yt,null))))),document.getElementById("root"));
