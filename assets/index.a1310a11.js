var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,__assign=(e,i)=>{for(var l in i||(i={}))t.call(i,l)&&r(e,l,i[l]);if(a)for(var l of a(i))s.call(i,l)&&r(e,l,i[l]);return e};import{c as i,W as l,r as n,P as o,G as c,T as u,B as m,I as d,a as p,M as g,b as E,d as h,e as f,f as O,g as y,k as v,h as b,p as C,i as S,S as A,j as T,s as x,l as N,m as cytoscape,n as k,u as L,A as M,F as w,o as I,q as V,C as D,t as R,E as W,v as P,w as j,x as z,y as U,N as _,z as F,D as H,H as $,J as B,L as G,K as J,O as Q,Q as q,R as K,U as Y,V as X,X as Z,Y as ee,Z as te,_ as ae,$ as se,a0 as re,a1 as ie,a2 as le,a3 as ne,a4 as oe,a5 as ce,a6 as ue,a7 as me,a8 as de,a9 as pe,aa as ge}from"./vendor.6dfa1c98.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const s=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,i)=>{const l=new URL(e,s);if(self[t].moduleMap[l])return a(self[t].moduleMap[l]);const n=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(n),onerror(){i(new Error(`Failed to import: ${e}`)),r(o)},onload(){a(self[t].moduleMap[l]),r(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/aniCheck/assets/");const Ee={cy:i({headless:!0}),userOptions:{sort:{type:"alphabetical",inverted:!1},smartCompletition:!0,completition:[],animeComposition:["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC"],mangaComposition:["MANGA","ONE_SHOT"],statusFilter:["COMPLETE","ERR"]},seriesDict:{},user:{},globalStats:{tot:0,miss:0,got:0},status:["ok"," "]},{Provider:he,useTracked:fe}=l((()=>n.useState(Ee)));function Oe(e){switch(e){case"NO":return"red";case"COMPLETED":return"green";default:return"grey.500"}}const ye=({data:e})=>n.createElement(o,{sx:{width:200,height:60,border:"1px solid",borderColor:Oe(e.status),position:"relative"}},n.createElement(c,{container:!0,sx:{height:"100%"}},n.createElement(c,{item:!0,xs:12,sx:{height:"70%"}},n.createElement(u,null,e.title)),n.createElement(c,{item:!0,xs:6,sx:{borderTop:"solid 1px",borderColor:"grey.500",height:"30%",fontSize:13}},n.createElement(u,{sx:{marginRight:"22px",textAlign:"center",fontSize:13}},e.startDate)),n.createElement(c,{item:!0,xs:6,sx:{borderTop:"solid 1px",borderColor:"grey.500",height:"30%",textAlign:"center"}},n.createElement(u,{sx:{marginLeft:"22px",textAlign:"center",fontSize:13,textTransform:"capitalize"}},e.format.toLowerCase()))),n.createElement(m,{sx:{position:"absolute",width:50,height:50,borderRadius:20,border:"1px solid transparent",borderTopColor:"inherit",borderRightColor:"inherit",right:"35%",top:"58%",backgroundColor:"white",transform:"rotate(315deg)"}}," ",n.createElement(d,{sx:{margin:"auto",width:"100%",transform:"rotate(45deg)",position:"absolute",right:"-3px",top:"9px"}},function(e){switch(e){case"TV":case"TV_SHORT":return n.createElement(h,null);case"MOVIE":return n.createElement(f,null);case"SPECIAL":case"OVA":case"ONA":return n.createElement(h,null);case"MUSIC":return n.createElement(E,null);case"MANGA":case"ONE_SHOT":return n.createElement(g,null);case"NOVEL":return n.createElement(p,null);default:return""}}(e.format))));function ve(){const[e,t]=fe();let a=n.useRef(null);n.useEffect((()=>{try{i.use(O),i.use(y),i.use(v),i.use(b),i.use(C),i.use(S)}catch(s){}let e=i({container:a.current,wheelSensitivity:.3,elements:[{data:{id:"a",title:"Welcome to AniCheck!",startDate:"2020-02-01",format:"helo"}},{data:{id:"b",title:"Check",startDate:"2020-02-01",format:"HELO"}},{data:{id:"ab",source:"a",target:"b"}}],style:[{selector:"node",style:{width:200,height:60,"background-color":"white",shape:"rectangle"}},{selector:"edge",style:{"curve-style":"unbundled-bezier",width:2,"target-arrow-shape":"triangle","target-label":"data(relation)","target-text-offset":80}},{selector:'edge[relation= "SEQUEL"]',style:{width:5,"line-color":"blue","target-arrow-color":"blue"}},{selector:'edge[relation= "ADAPTATION"],edge[relation= "SOURCE"]',style:{"line-style":"dashed","line-dash-pattern":[10],width:1,"line-color":"cyan","target-arrow-color":"cyan"}}],layout:{name:"cose"}});e.on("cxttapend","node",(e=>{console.log("cxttapend on node"),window.open(e.target.data("siteUrl"),"_blank")})),e.on("tap","node,edge",(e=>{console.log(e.target.data())})),e.nodeHtmlLabel([{query:"node",halign:"center",valign:"center",halignBox:"center",valignBox:"center",cssClass:"",tpl:e=>x.renderToString(n.createElement(ye,{data:e}))}]),t((t=>__assign(__assign({},t),{cyViz:e})))}),[]);return n.createElement(c,{sx:{position:"relative"},item:!0,xs:12,sm:9},n.createElement("div",{ref:a,style:{width:"100%",height:"100vh"}}),n.createElement(A,{sx:{position:"absolute",top:"20%",right:"3%"},spacing:2},n.createElement(T,{onClick:()=>{var t;null==(t=e.cyViz)||t.elements().makeLayout({name:"breadthfirst",animate:!0}).run()}},"Breathfirst"),n.createElement(T,{onClick:()=>{var t,a;(null==(t=e.cyViz)?void 0:t.style()).selector("edge").style("curve-style","bezier"),null==(a=e.cyViz)||a.elements().makeLayout({name:"klay",animate:!0,nodeDimensionsIncludeLabels:!0,klay:{edgeRouting:"POLYLINE",layoutHierarchy:!1,spacing:40,nodeLayering:"NETWORK_SIMPLEX",mergeEdges:!0,thoroughness:50}}).run()}},"Klay"),n.createElement(T,{onClick:()=>{var t,a;(null==(t=e.cyViz)?void 0:t.style()).selector("edge").style("curve-style","bezier"),null==(a=e.cyViz)||a.elements().makeLayout({name:"dagre",animate:!0,nodeDimensionsIncludeLabels:!0}).run()}},"Dagre"),n.createElement(T,{onClick:()=>{var t;null==(t=e.cyViz)||t.elements().makeLayout({name:"cola",animate:!0,nodeSpacing:()=>50,randomize:!0}).run()}},"Cola"),n.createElement(T,{onClick:()=>{var t;null==(t=e.cyViz)||t.elements().makeLayout({name:"fcose",animate:!0,nodeSeparation:2e3,nodeRepulsion:()=>45e6}).run()}},"Cose")))}const be=N`
query ($user: String!, $type: MediaType){
  MediaListCollection(userName: $user, type: $type) {
    lists {
      entries {
        id
        status
        media {
          id
          title {
            userPreferred
            romaji
            english
          }
          synonyms
          startDate {
            year
            month
            day
          }
          format
          coverImage {
            medium
            color
          }
          bannerImage
          popularity
          siteUrl
          chapters
          volumes
          episodes
          duration
          nextAiringEpisode {
            episode
          }
          status(version: 2)
          relations {
            nodes {
              id
              title {
                userPreferred
                romaji
                english
              }
              synonyms
              startDate {
                year
                month
                day
              }
              format
              coverImage {
                medium
                color
              }
              bannerImage
              popularity
              siteUrl
              chapters
              volumes
              episodes
              duration
              nextAiringEpisode {
                episode
              }
              status(version: 2)
            }
            edges {
              id
              relationType(version: 2)
              node {
                id
              }
            }
          }
        }
      }
      name
      isCustomList
      isSplitCompletedList
    }

  }
}
`,Ce=N`
query($user: String!){
  User(name: $user) {
   name
    bannerImage
    avatar {
      medium
    }
    options {
      profileColor
      titleLanguage
      displayAdultContent
      airingNotifications 
    }
  }
}
`;function Se(e,t=null){var a,s;try{JSON.parse(null!=(a=localStorage.getItem(e))?a:JSON.stringify(t))}catch(l){console.log("Old Data found, trying to reset"),localStorage.removeItem(e)}const[r,i]=n.useState(JSON.parse(null!=(s=localStorage.getItem(e))?s:JSON.stringify(t)));return n.useEffect((()=>{localStorage.setItem(e,JSON.stringify(r))}),[r]),[r,i]}function Ae(e,t){return e.sort(((e,a)=>t?e.item.stats.selected.missWeight-a.item.stats.selected.missWeight:a.item.stats.selected.missWeight-e.item.stats.selected.missWeight))}function Te(e,t){return e.sort(((e,a)=>t?e.item.stats.selected.perWeight-a.item.stats.selected.perWeight:a.item.stats.selected.perWeight-e.item.stats.selected.perWeight))}function xe(e,t){return e.sort(((e,a)=>t?e.item.stats.selected.per-a.item.stats.selected.per:a.item.stats.selected.per-e.item.stats.selected.per))}function Ne(e,t){return console.log(e),e.sort(((e,a)=>t?e.rankedValue[0].localeCompare(a.rankedValue):a.rankedValue[0].localeCompare(e.rankedValue)))}function ke(e,t){return e.sort(((e,a)=>t?e.item.stats.serieMiss+e.item.stats.serieTot-(a.item.stats.serieMiss+a.item.stats.serieTot):a.item.stats.serieMiss+a.item.stats.serieTot-(e.item.stats.serieMiss+e.item.stats.serieTot)))}function Le(e){switch(e){case"weight%":return Te;case"complete%":return xe;case"alphabetical":return Ne;case"size":return ke;case"missWeight":return Ae;default:return Ne}}const Me=["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC","MANGA","NOVEL","ONE_SHOT"],we=[{id:"TV",label:"TV",tooltip:"Anime broadcast on television"},{id:"TV_SHORT",label:"TV Short",tooltip:"Anime which are under 15 minutes in length and broadcast on television"},{id:"MOVIE",label:"Movie",tooltip:"Anime movies with a theatrical release"},{id:"SPECIAL",label:"Special",tooltip:"Special episodes that have been included in DVD/Blu-ray releases, picture dramas, pilots, etc"},{id:"OVA",label:"OVA",tooltip:"(Original Video Animation) Anime that have been released directly on DVD/Blu-ray without originally going through a theatrical release or television broadcast"},{id:"ONA",label:"ONA",tooltip:"(Original Net Animation) Anime that have been originally released online or are only available through streaming services."},{id:"MUSIC",label:"Music",tooltip:"Short anime released as a music video"},{id:"MANGA",label:"Manga",tooltip:"Professionally published manga with more than one chapter"},{id:"NOVEL",label:"Novel",tooltip:"Written books released as a series of light novels"},{id:"ONE_SHOT",label:"One Shot",tooltip:"Manga with just one chapter"}];function Ie(e,t){switch(e){case"anime":return t.animeComposition;case"manga":return t.mangaComposition;default:return[e]}}function Ve(e,t){var a,s,r,i,l;let n=0,o=0,c=0,u=0,m=0,d=0;for(const p of e)n+=null!=(a=t[p].tot)?a:0,o+=null!=(s=t[p].miss)?s:0,c+=t[p].tot-t[p].miss,u+=null!=(r=t[p].totWeight)?r:0,m+=null!=(i=t[p].missWeight)?i:0,d+=null!=(l=t[p].gotWeight)?l:0;return{tot:n,miss:o,got:c,totWeight:u,missWeight:m,gotWeight:d}}const De=e=>{console.log(JSON.stringify(e.globalStats));let t={tot:Object.keys(e.seriesDict).length,got:0,miss:0};if(e.userOptions.smartCompletition)for(const[a,s]of Object.entries(e.seriesDict)){let r=0,i=0,l=0,n=0,o=0,c=0;for(const t of["anime","manga","NOVEL"]){let{got:a,miss:u,tot:m,totWeight:d,missWeight:p,gotWeight:g}=Ve(Ie(t,e.userOptions),s.stats);0!=a&&(r+=m,i+=u,l+=a,n+=d,o+=p,c+=g)}e.seriesDict[a].stats.selected={tot:r,miss:i,got:l,per:Math.floor(l/r*100),totWeight:n,missWeight:o,gotWeight:c,perWeight:Math.floor(c/n*100)},0!=r?r==l?(e.seriesDict[a].status="COMPLETE",t.got+=1):(e.seriesDict[a].status="NOT_COMPLETE",t.miss+=1):e.seriesDict[a].status="ERR"}else for(const[a,s]of Object.entries(e.seriesDict)){let{got:r,miss:i,tot:l,totWeight:n,missWeight:o,gotWeight:c}=Ve(e.userOptions.completition,s.stats);e.seriesDict[a].stats.selected={tot:l,got:r,miss:i,per:Math.floor(r/l*100),totWeight:n,gotWeight:c,missWeight:o,perWeight:Math.floor(c/n*100)},0!=l?l==r?(e.seriesDict[a].status="COMPLETE",t.got+=1):(e.seriesDict[a].status="NOT_COMPLETE",t.miss+=1):e.seriesDict[a].status="ERR"}return __assign(__assign({},e),{globalStats:t})},Re={CHARACTER:1,SEQUEL:2,SIDE_STORY:3,SOURCE:4,ALTERNATIVE:5,SPIN_OFF:6,SUMMARY:7,COMPILATION:8,CONTAINS:9,PREQUEL:10,ADAPTATION:11,PARENT:12,OTHER:13},We=(e,t,a)=>{const s=cytoscape({headless:!0}),r=e=>{var t;return{id:e.id,status:"NO",airStatus:e.status,format:null!=(t=e.format)?t:"SPECIAL",title:e.title.userPreferred,titles:[...Object.values(e.title),...e.synonyms].filter((e=>!["MediaTitle",null].includes(e))),siteUrl:e.siteUrl,bannerImage:e.bannerImage,popularity:e.popularity,compWeight:(e=>{var t,a;if("NOT_YET_RELEASED"==e.status)return 1;if(e.chapters)return 5*e.chapters;if(e.volumes)return 50*e.volumes;if(e.episodes&&e.duration)return e.episodes*e.duration;if((null==(t=e.nextAiringEpisode)?void 0:t.episode)&&e.duration)return(null==(a=e.nextAiringEpisode)?void 0:a.episode)*e.duration;let s=Object.values(e.startDate).filter((e=>"FuzzyDate"!=e&&e)).join("-"),r=(Date.now()-Date.parse(s))/864e5;return"MANGA"==e.format?5*Math.round(r/8.2):(e.format,20*Math.round(r/8.2))})(e),startDate:Object.values(e.startDate).filter((e=>"FuzzyDate"!=e&&e)).join("-")}},[i,l]=(e=>{let t=new Map,a=new Map;console.log(e);for(let s of e)for(let e of s.entries){t.set(e.media.id,{data:__assign(__assign({},r(e.media)),{status:e.status})});for(let a of e.media.relations.nodes)t.get(a.id)||t.set(a.id,{data:__assign(__assign({},r(a)),{status:"NO"})});for(let t of e.media.relations.edges)a.set(t.id,{data:{id:"l"+t.id,source:e.media.id,target:t.node.id,relation:t.relationType}})}return[t,a]})(e);console.log(i,l),s.elements().remove(),s.add(Array.from(i.values()).concat(Array.from(l.values())));let n=s.elements().components(),o=[];n.map((e=>{let s=e.edges().map((e=>{let a=e.parallelEdges().sort(((e,a)=>t[e.data("relation")]-t[a.data("relation")]))[0];switch(a.data("relation")){case"ADAPTATION":a.move({source:a.data("target"),target:a.data("source")}),a.data({relation:"SOURCE"});break;case"PREQUEL":a.move({source:a.data("target"),target:a.data("source")}),a.data({relation:"SEQUEL"})}return a}));e.edges().remove(),s.map((e=>{e.restore()})),e.filter("node, edge[relation!='CHARACTER']").difference(a.map((e=>`#${e}`)).join(", ")).components().map((t=>{t.nodes().length!=t.filter("node[status='NO']").length&&o.push({series:t,serieComplete:e})}))}));let c=o.map((e=>{let t=e.series.sort(((e,t)=>{let a=parseInt(e.data("popularity")),s=parseInt(t.data("popularity"));return isNaN(a)?999:isNaN(s)?-1:s-a}));return{seriesPrime:t.nodes()[0],series:t,serieComplete:e.serieComplete}})).map((e=>{var t,a,s,r,i,l,n,o,c;let u={};for(let m of["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC","MANGA","NOVEL","ONE_SHOT"]){let d=e.series.nodes().filter(`node[format='${m}']`);u[m]={tot:null!=(t=d.length)?t:0,miss:null!=(a=d.filter("node[status='NO']").length)?a:0,got:null!=(s=d.filter("node[status!='NO']").length)?s:0,totWeight:null==(i=null==(r=d.map((e=>e.data("compWeight"))))?void 0:r.reduce)?void 0:i.call(r,((e,t)=>e+t),0),missWeight:null==(n=null==(l=d.filter("node[status='NO']").map((e=>e.data("compWeight"))))?void 0:l.reduce)?void 0:n.call(l,((e,t)=>e+t),0),gotWeight:null==(c=null==(o=d.filter("node[status!='NO']").map((e=>e.data("compWeight"))))?void 0:o.reduce)?void 0:c.call(o,((e,t)=>e+t),0)}}return __assign(__assign({},e),{stats:u,status:"ERR"})})),u={};return c.map((e=>{u[e.seriesPrime.data("id")]=__assign(__assign({},e),{seriesPrime:e.seriesPrime.data(),series:{nodes:e.series.nodes().map((e=>e.data())),edges:e.series.edges().map((e=>e.data()))},serieComplete:{nodes:e.serieComplete.nodes().map((e=>e.data())),edges:e.serieComplete.edges().map((e=>e.data()))}})})),console.log(Object.values(u).length),u},Pe={blue:"#3DB4F2",puple:"#C063FF",green:"#4CCA51",orange:"#EF881A",red:"#E13333",pink:"#FC9DD6",gray:"#677B94"},je=["132615","106495","20947","118940"],ze=()=>{const[e,t]=fe(),[a,s]=Se("usr",""),[r,{status:i,kill:l}]=k(We,{remoteDependencies:["https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.18.2/cytoscape.min.js","https://cdnjs.cloudflare.com/ajax/libs/tslib/2.2.0/tslib.min.js"]}),o=()=>{t((e=>__assign(__assign({},e),{status:["ok"," "]}))),u({variables:{user:a}})},[u,m]=L(Ce,{notifyOnNetworkStatusChange:!0,onCompleted:()=>{t((e=>{var t;return __assign(__assign({},e),{user:{color:null!=(t=Pe[m.data.User.options.profileColor])?t:m.data.User.options.profileColor,avatar:m.data.User.avatar.medium}})})),d({variables:{user:a,type:"ANIME"}})}}),[d,p]=L(be,{notifyOnNetworkStatusChange:!0,onCompleted:()=>{g({variables:{user:a,type:"MANGA"}})}}),[g,E]=L(be,{notifyOnNetworkStatusChange:!0,onCompleted:async()=>{let e=await r([...p.data.MediaListCollection.lists,...E.data.MediaListCollection.lists],Re,je);t((t=>De(__assign(__assign({},t),{seriesDict:e}))))}});return n.useEffect((()=>{let e="ok",a=" ";m.loading?(e="loading",a="Loading User Info"):p.loading?(e="loading",a="Loading your Anime List"):E.loading?(e="loading",a="Loading your Manga List"):"RUNNING"==i?(e="loading",a="Computing received data"):m.error?(e="error",a=m.error.message):p.error?(e="error",a=p.error.message):E.error&&(e="error",a=E.error.message),t((t=>__assign(__assign({},t),{status:[e,a]})))}),[p,E,i]),n.createElement("div",null,n.createElement(c,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center"},n.createElement(c,{item:!0},n.createElement(M,{src:e.user.avatar,variant:"rounded"})),n.createElement(c,{item:!0},n.createElement(w,{sx:{m:1,width:"100%"},variant:"standard",error:"error"==e.status[0]},n.createElement(I,{id:"standard-adornment-password",placeholder:"AniList Nick",value:a,onChange:e=>{s(e.target.value)},onKeyPress:t=>{"Enter"==t.key&&"loading"!=e.status[0]&&o()},endAdornment:n.createElement(V,{position:"end"},"loading"==e.status[0]?n.createElement(D,null):n.createElement(R,{"aria-label":"get user anime",onClick:o},n.createElement(W,null)))}),n.createElement(P,{error:"error"==e.status[0],id:"standard-weight-helper-text"},e.status[1])))))},Ue=()=>{const[e,t]=fe(),[a,s]=Se("sort",e.userOptions.sort);n.useEffect((()=>{t((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{sort:a})})))}),[a]);const[r,i]=n.useState(null),l=Boolean(r),o=e=>{a.type==e?s({type:e,inverted:!a.inverted}):s(__assign(__assign({},a),{type:e}))};return n.createElement("span",null,n.createElement(R,{id:"sort-button","aria-controls":"sort-menu","aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:e=>{i(e.currentTarget)}},n.createElement(j,null)),n.createElement(z,{id:"sort-menu",anchorEl:r,open:l,onClose:()=>{i(null)},MenuListProps:{"aria-labelledby":"sort-button"},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},n.createElement(U,{selected:"complete%"==a.type,onClick:()=>o("complete%")},a.inverted?n.createElement(_,null):n.createElement(F,null),"Complete %"),n.createElement(U,{selected:"weight%"==a.type,onClick:()=>o("weight%")},a.inverted?n.createElement(_,null):n.createElement(F,null),"Weighted Complete %"),n.createElement(U,{selected:"alphabetical"==a.type,onClick:()=>o("alphabetical")},a.inverted?n.createElement(_,null):n.createElement(F,null),"Alphabetical"),n.createElement(U,{selected:"missWeight"==a.type,onClick:()=>o("missWeight")},a.inverted?n.createElement(_,null):n.createElement(F,null),"Easy To Complete")))},_e=({children:e})=>{const[t,a]=fe(),[s,r]=n.useState(""),i=function(e,t){const[a,s]=n.useState(e);return n.useEffect((()=>{const a=setTimeout((()=>{s(e)}),t);return()=>{clearTimeout(a)}}),[e,t]),a}(s,800),[l,o]=n.useState([]);((e,t=!0)=>{const[a,s]=n.useState("idle"),[r,i]=n.useState(null),[l,o]=n.useState(null),c=n.useCallback((()=>(s("pending"),i(null),o(null),e().then((e=>{i(e),s("success")})).catch((e=>{o(e),s("error")})))),[e]);n.useEffect((()=>{t&&c()}),[c,t])})((()=>new Promise(((e,a)=>{var s;e(B(Object.values(null!=(s=t.seriesDict)?s:[]).filter((e=>!t.userOptions.statusFilter.includes(e.status))),i,{keys:["series.nodes.*.titles"],sorter:i?void 0:e=>(console.log(e),Le(t.userOptions.sort.type)(e,t.userOptions.sort.inverted))}))}))),!1);return n.useEffect((()=>{var e;o(B(Object.values(null!=(e=t.seriesDict)?e:[]).filter((e=>!t.userOptions.statusFilter.includes(e.status))),i,{keys:["series.nodes.*.titles"],sorter:i?void 0:e=>(console.log(e),Le(t.userOptions.sort.type)(e,t.userOptions.sort.inverted))}))}),[i,t.seriesDict,t.userOptions.sort,t.userOptions.completition,t.userOptions.statusFilter,t.userOptions.smartCompletition]),n.createElement(m,null,n.createElement(H,{value:s,onChange:e=>{r(e.target.value)}}),n.createElement(R,{onClick:()=>{var e;null==(e=t.modalOpenState)||e[1](!0)}},n.createElement($,null)),n.createElement(Ue,null),n.isValidElement(e)?n.cloneElement(e,{seriesToRender:l}):n.createElement("p",null,"Shouldn't display"))},Fe=({index:e,style:t,data:a})=>{var s,r,i;fe();const[l,o]=n.useState(!1);let{addState:c,remState:d,handleToggle:p,seriesList:g,test:E}=a,h=null==(s=g[e])?void 0:s.series,f=null==(r=g[e])?void 0:r.seriesPrime,O=null==(i=g[e])?void 0:i.seriesPrime.id;return n.useLayoutEffect((()=>(c({id:O,state:[l,o],series:h}),()=>{d(O)})),[]),n.createElement(m,{style:__assign({},t),sx:{},key:O},n.createElement(G,{sx:{marginBottom:"10px",border:"1px solid",borderColor:"grey.500",background:`url(${f.bannerImage}) no-repeat center center`,backgroundSize:"cover",color:"white",height:"calc(100% - 10px)",width:"calc(100% - 10px)",borderRadius:"5px",boxShadow:"inset 0 0 0 2000px rgba(0, 0, 0, 0.3)"},selected:l,key:O,button:!0,onClick:()=>{c({id:O,state:[l,o],series:h}),p(O)}},n.createElement(J,{sx:{fontSize:"19px"},id:O,primary:f.title+" "+g[e].stats.selected.missWeight}),n.createElement(m,{sx:{position:"relative",display:"inline-flex"}},n.createElement(D,{size:80,variant:"determinate",color:"primary",value:g[e].stats.selected.per}),n.createElement(m,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"}},n.createElement(u,null,g[e].stats.selected.per))),n.createElement(m,{sx:{position:"relative",display:"inline-flex"}},n.createElement(D,{variant:"determinate",color:"secondary",value:g[e].stats.selected.perWeight}),n.createElement(m,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"}},n.createElement(u,null,g[e].stats.selected.perWeight)))))},He=({seriesToRender:e})=>{const[t,a]=fe();let[s,r]=n.useState([]);n.useEffect((()=>{var a;r(null!=(a=null!=e?e:Object.values(t.seriesDict))?a:[])}),[e,t.seriesDict]);let[i,l]=n.useState("Very Stupid Fix"),o=n.useMemo((()=>""),[i]);var c=n.useMemo((()=>({})),[i]);const u=e=>{c[e.id]={id:e.id,state:e.state,series:e.series},o==e.id&&e.state[1](!0)},d=e=>{delete c[e]},p=e=>{var a,s,r,i,l,n,u,m,d;o&&(null==(s=null==(a=null==c?void 0:c[o])?void 0:a.state)||s[1](!1)),o=e,c[e].state[1](!0),console.log(t.cyViz),console.log(null!=(i=null==(r=t.seriesDict)?void 0:r[e])?i:0),null==(l=t.cyViz)||l.elements().remove(),null==(n=t.cyViz)||n.add([...(d=c[e].series).nodes,...d.edges].map((e=>({data:e})))),null==(u=t.cyViz)||u.elements().makeLayout({name:"breadthfirst",roots:[o]}).run(),null==(m=t.cyViz)||m.center()};function g(e){var t;return null!=(t=s[e].seriesPrime.id)?t:"1"}return n.createElement(m,{sx:{height:"calc(100vh - 200px)"}},t.seriesDict?n.createElement(Q,null,(({height:e,width:t})=>{var a;return n.createElement(q,{height:e,itemSize:140,width:t,itemCount:null!=(a=null==s?void 0:s.length)?a:0,itemData:{addState:u,remState:d,handleToggle:p,seriesList:s},itemKey:g},Fe)})):n.createElement("p",null,"None"))},$e=()=>{const[e,t]=fe();function a(e){t((t=>{switch(e){case"smart":return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{smartCompletition:!t.userOptions.smartCompletition})});case"all":return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{completition:Me})});default:return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{completition:ee(t.userOptions.completition,[e])})})}}))}return n.useEffect((()=>{t((e=>De(e)))}),[e.userOptions.completition,e.userOptions.smartCompletition,e.userOptions.mangaComposition,e.userOptions.animeComposition]),n.createElement("div",null,n.createElement(K,{control:n.createElement(Y,{checked:e.userOptions.smartCompletition,onClick:()=>a("smart")}),label:"Smart Completition"}),"What is anime? ",we.map((a=>{if(["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC"].includes(a.id))return n.createElement(X,{key:a.label,title:a.tooltip},n.createElement(Z,{variant:(s=a.id,e.userOptions.animeComposition.includes(s)?void 0:"outlined"),disabled:!e.userOptions.smartCompletition,label:a.label,onClick:()=>function(e){t((t=>__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{animeComposition:ee(t.userOptions.animeComposition,[e])})})))}(a.id)}));var s})),"What is Manga? ",we.map((a=>{if(["MANGA","ONE_SHOT"].includes(a.id))return n.createElement(X,{key:a.label,title:a.tooltip},n.createElement(Z,{variant:(s=a.id,e.userOptions.mangaComposition.includes(s)?void 0:"outlined"),disabled:!e.userOptions.smartCompletition,label:a.label,onClick:()=>function(e){t((t=>__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{mangaComposition:ee(t.userOptions.mangaComposition,[e])})})))}(a.id)}));var s})),n.createElement(K,{control:n.createElement(Y,{checked:!e.userOptions.smartCompletition,onClick:()=>a("smart")}),label:"Custom"}),n.createElement(T,{disabled:e.userOptions.smartCompletition,onClick:()=>a("all")},"Select All"),we.map((t=>{return n.createElement(X,{key:t.label,title:t.tooltip},n.createElement(Z,{variant:(s=t.id,e.userOptions.completition.includes(s)?void 0:"outlined"),disabled:e.userOptions.smartCompletition,label:t.label,onClick:()=>a(t.id)}));var s})))},Be={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4};function Ge(){const[e,t]=fe(),[a,s]=n.useState("1"),[r,i]=n.useState(!1);n.useEffect((()=>{t((e=>__assign(__assign({},e),{modalOpenState:[r,i]})))}),[]);return n.createElement("div",null,n.createElement(te,{open:r,onClose:()=>{var t;return null==(t=e.modalOpenState)?void 0:t[1](!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},n.createElement(o,{sx:Be},n.createElement(ae,{value:a},n.createElement(m,{sx:{borderBottom:1,borderColor:"divider"}},n.createElement(se,{onChange:(e,t)=>{s(t)},"aria-label":"options"},n.createElement(re,{label:"Completition Options",value:"1"}),n.createElement(re,{label:"Sort",value:"2"}),n.createElement(re,{label:"Filter",value:"3"}))),n.createElement(ie,{value:"1"},n.createElement($e,null)),n.createElement(ie,{value:"2"},"Item Two"),n.createElement(ie,{value:"3"},"Item Three")))))}const Je=({children:e,statusId:t})=>{const[a,s]=fe();return n.createElement(R,{onClick:e=>{s((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{statusFilter:ee(e.userOptions.statusFilter,[t])})})))},color:a.userOptions.statusFilter.includes(t)?"default":"primary"},e)},Qe=()=>{const[e,t]=fe();return n.createElement(m,{sx:{margin:"auto"}},n.createElement(A,{direction:"row",spacing:2},n.createElement(Je,{statusId:"COMPLETE"},n.createElement(le,null),e.globalStats.got),n.createElement(Je,{statusId:"NOT_COMPLETE"},n.createElement(ne,null),e.globalStats.miss),n.createElement(Je,{statusId:"ERR"},n.createElement(oe,null),e.globalStats.tot-(e.globalStats.got+e.globalStats.miss))))};function qe(){return n.createElement(c,{sx:{height:"100vh"},item:!0,xs:12,sm:3},n.createElement(Ge,null),n.createElement(ze,null),n.createElement(Qe,null),n.createElement(_e,null,n.createElement(He,null)))}const Ke=({children:e})=>{var t;const[a,s]=fe(),r=ce({palette:{mode:"light",primary:{main:null!=(t=a.user.color)?t:"#3f51b5"}}});return n.createElement(ue,{theme:r},e)},Ye=new me({uri:"https://graphql.anilist.co",cache:new de});pe.render(n.createElement(n.StrictMode,null,n.createElement(he,null,n.createElement(ge,{client:Ye},n.createElement(Ke,null,n.createElement(c,{container:!0},n.createElement(ve,null),n.createElement(qe,null)))))),document.getElementById("root"));
