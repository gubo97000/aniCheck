var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,s=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,__assign=(e,l)=>{for(var n in l||(l={}))t.call(l,n)&&s(e,n,l[n]);if(r)for(var n of r(l))a.call(l,n)&&s(e,n,l[n]);return e};import{c as l,b as n,r as o,T as i,a as c,A as d,L as m,M as u,d as p,B as g,e as cytoscape,P as h,G as E,f,g as y,I as b,h as v,i as x,k as O,j as C,p as S,l as A,s as T,S as w,m as k,n as L,o as I,q as N,t as R,H as P,u as M,v as D,w as W,F as V,x as z,y as j,C as U,E as _,z as F,D as H,J as G,K as $,N as B,O as q,Q as J,R as K,U as Q,V as Y,W as X,X as Z,Y as ee,Z as te,_ as re,$ as ae,a0 as se,a1 as le,a2 as ne,a3 as oe,a4 as ie,a5 as ce,a6 as de,a7 as me,a8 as ue,a9 as pe,aa as ge,ab as he,ac as Ee,ad as fe,ae as ye,af as be,ag as ve,ah as xe,ai as Oe,aj as Ce,ak as Se,al as Ae,am as Te,an as we}from"./vendor.a3e7dee7.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(r){const a=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((r,l)=>{const n=new URL(e,a);if(self[t].moduleMap[n])return r(self[t].moduleMap[n]);const o=new Blob([`import * as m from '${n}';`,`${t}.moduleMap['${n}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){l(new Error(`Failed to import: ${e}`)),s(i)},onload(){r(self[t].moduleMap[n]),s(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/aniCheck/assets/");const ke={cy:l({headless:!0}),userOptions:{sort:{type:"alphabetical",inverted:!1},smartCompletion:!0,completion:[],animeComposition:["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC"],mangaComposition:["MANGA","ONE_SHOT"],novelComposition:["NOVEL"],statusFilter:["COMPLETE","PLAN_TO_COMPLETE","ERR"],cyShowHidden:!1,cyFormatFilter:[],cyLayout:"klay",cyFilter:[]},seriesDict:{},user:{},globalStats:{tot:0,miss:0,got:0,plan:0},status:["ok"," "]},{Provider:Le,useTracked:Ie}=n((()=>o.useState(ke))),Ne=["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC","MANGA","ONE_SHOT","NOVEL"],Re={TV:{id:"TV",label:"TV",icon:o.createElement(i,null),tooltip:"Anime broadcast on television"},TV_SHORT:{id:"TV_SHORT",label:"TV Short",icon:o.createElement(i,null),tooltip:"Anime which are under 15 minutes in length and broadcast on television"},MOVIE:{id:"MOVIE",label:"Movie",icon:o.createElement(c,null),tooltip:"Anime movies with a theatrical release"},SPECIAL:{id:"SPECIAL",label:"Special",icon:o.createElement(i,null),tooltip:"Special episodes that have been included in DVD/Blu-ray releases, picture dramas, pilots, etc"},OVA:{id:"OVA",label:"OVA",icon:o.createElement(d,null),tooltip:"(Original Video Animation) Anime that have been released directly on DVD/Blu-ray without originally going through a theatrical release or television broadcast"},ONA:{id:"ONA",label:"ONA",icon:o.createElement(m,null),tooltip:"(Original Net Animation) Anime that have been originally released online or are only available through streaming services."},MUSIC:{id:"MUSIC",label:"Music",icon:o.createElement(u,null),tooltip:"Short anime released as a music video"},MANGA:{id:"MANGA",label:"Manga",icon:o.createElement(p,null),tooltip:"Professionally published manga with more than one chapter"},NOVEL:{id:"NOVEL",label:"Novel",icon:o.createElement(g,null),tooltip:"Written books released as a series of light novels"},ONE_SHOT:{id:"ONE_SHOT",label:"One Shot",icon:o.createElement(p,null),tooltip:"Manga with just one chapter"}},Pe={blue:"#3DB4F2",purple:"#C063FF",green:"#4CCA51",orange:"#EF881A",red:"#E13333",pink:"#FC9DD6",gray:"#677B94"},Me=["CHARACTER","SEQUEL","SIDE_STORY","SOURCE","ALTERNATIVE","SPIN_OFF","SUMMARY","COMPILATION","CONTAINS","PREQUEL","ADAPTATION","PARENT","OTHER"],De=(()=>{let e={};return Me.map(((t,r)=>{e[t]=r})),e})();function We(e){switch(e){case"TV":case"TV_SHORT":return o.createElement(i,null);case"MOVIE":return o.createElement(c,null);case"SPECIAL":return o.createElement(i,null);case"OVA":return o.createElement(d,null);case"ONA":return o.createElement(m,null);case"MUSIC":return o.createElement(u,null);case"MANGA":case"ONE_SHOT":return o.createElement(p,null);case"NOVEL":return o.createElement(g,null);default:return""}}function Ve(e,t=null){var r,a;try{JSON.parse(null!=(r=localStorage.getItem(e))?r:JSON.stringify(t))}catch(n){console.log("Old Data found, trying to reset"),localStorage.removeItem(e)}const[s,l]=o.useState(JSON.parse(null!=(a=localStorage.getItem(e))?a:JSON.stringify(t)));return o.useEffect((()=>{localStorage.setItem(e,JSON.stringify(s))}),[s]),[s,l]}function ze(e,t){return e.sort(((e,r)=>t?e.item.stats.selected.missWeight-r.item.stats.selected.missWeight:r.item.stats.selected.missWeight-e.item.stats.selected.missWeight))}function je(e,t){return e.sort(((e,r)=>{var a,s,l,n;let o=e.item.stats.selected.perWeight+Math.floor((null!=(a=e.item.stats.selected.planWeight)?a:0)/(null!=(s=e.item.stats.selected.totWeight)?s:0)*100),i=r.item.stats.selected.perWeight+Math.floor((null!=(l=r.item.stats.selected.planWeight)?l:0)/(null!=(n=r.item.stats.selected.totWeight)?n:0)*100);return(t?-1:1)*(o-i)}))}function Ue(e,t){return e.sort(((e,r)=>(t?-1:1)*(e.item.stats.selected.per-r.item.stats.selected.per)))}function _e(e,t){return console.log(e),e.sort(((e,r)=>t?e.rankedValue[0].localeCompare(r.rankedValue):r.rankedValue[0].localeCompare(e.rankedValue)))}function Fe(e,t){return e.sort(((e,r)=>(t?-1:1)*(e.item.stats.serieTot-r.item.stats.serieTot)))}function He(e){switch(e){case"weight%":return je;case"complete%":return Ue;case"alphabetical":return _e;case"size":return Fe;case"missWeight":return ze;default:return _e}}function Ge(e,t){switch(e){case"anime":return t.animeComposition;case"manga":return t.mangaComposition;case"novel":return t.novelComposition;default:return[e]}}function $e(e,t){var r,a,s,l,n,o,i,c;let d=0,m=0,u=0,p=0,g=0,h=0,E=0,f=0;for(const y of e)d+=null!=(r=t[y].tot)?r:0,m+=null!=(a=t[y].miss)?a:0,u+=null!=(s=t[y].got)?s:0,p+=null!=(l=t[y].plan)?l:0,g+=null!=(n=t[y].totWeight)?n:0,h+=null!=(o=t[y].missWeight)?o:0,E+=null!=(i=t[y].gotWeight)?i:0,f+=null!=(c=t[y].planWeight)?c:0;return{tot:d,miss:m,got:u,plan:p,totWeight:g,missWeight:h,gotWeight:E,planWeight:f}}const Be=e=>{let t={tot:Object.keys(e.seriesDict).length,got:0,miss:0,plan:0};if(e.userOptions.smartCompletion)for(const[r,a]of Object.entries(e.seriesDict)){let s=0,l=0,n=0,o=0,i=0,c=0,d=0,m=0;for(const t of["anime","manga","novel"]){let{got:r,miss:u,tot:p,plan:g,totWeight:h,missWeight:E,gotWeight:f,planWeight:y}=$e(Ge(t,e.userOptions),a.stats);0==r&&0==g||(s+=p,l+=u,n+=r,o+=g,i+=h,c+=E,d+=f,m+=y)}e.seriesDict[r].stats.selected={tot:s,miss:l,got:n,plan:o,per:Math.floor(n/s*100)||0,totWeight:i,missWeight:c,gotWeight:d,planWeight:m,perWeight:Math.floor(d/i*100)||0},0!=s?n==s?(e.seriesDict[r].status="COMPLETE",t.got+=1):n+o==s?(e.seriesDict[r].status="PLAN_TO_COMPLETE",t.plan+=1):(e.seriesDict[r].status="NOT_COMPLETE",t.miss+=1):e.seriesDict[r].status="ERR"}else for(const[r,a]of Object.entries(e.seriesDict)){let{got:s,plan:l,miss:n,tot:o,totWeight:i,missWeight:c,gotWeight:d,planWeight:m}=$e(e.userOptions.completion,a.stats);e.seriesDict[r].stats.selected={tot:o,got:s,miss:n,plan:l,per:Math.floor(s/o*100),totWeight:i,gotWeight:d,planWeight:m,missWeight:c,perWeight:Math.floor(d/i*100)},0!=o?s==o?(e.seriesDict[r].status="COMPLETE",t.got+=1):s+l==o?(e.seriesDict[r].status="PLAN_TO_COMPLETE",t.plan+=1):(e.seriesDict[r].status="NOT_COMPLETE",t.miss+=1):e.seriesDict[r].status="ERR"}return console.log(t),__assign(__assign({},e),{seriesDict:e.seriesDict,globalStats:t})},qe=(e,t,r)=>{const a=cytoscape({headless:!0}),s=e=>{var t;return{id:e.id,status:"NO",airStatus:e.status,format:null!=(t=e.format)?t:"SPECIAL",title:e.title.userPreferred,titles:[...Object.values(e.title),...e.synonyms].filter((e=>!["MediaTitle",null].includes(e))),siteUrl:e.siteUrl,bannerImage:e.bannerImage,popularity:e.popularity,cover:e.coverImage.extraLarge,compWeight:(e=>{var t,r;if("NOT_YET_RELEASED"==e.status)return 1;if(e.chapters)return 5*e.chapters;if(e.volumes)return 50*e.volumes;if(e.episodes&&e.duration)return e.episodes*e.duration;if((null==(t=e.nextAiringEpisode)?void 0:t.episode)&&e.duration)return(null==(r=e.nextAiringEpisode)?void 0:r.episode)*e.duration;let a=Object.values(e.startDate).filter((e=>"FuzzyDate"!=e&&e)).join("-"),s=(Date.now()-Date.parse(a))/864e5;return"MANGA"==e.format?5*Math.round(s/8.2):(e.format,20*Math.round(s/8.2))})(e),startDate:Object.values(e.startDate).filter((e=>"FuzzyDate"!=e&&e)).join("-")}},[l,n]=(e=>{let t=new Map,r=new Map;console.log(e);for(let a of e)for(let e of a.entries){t.set(e.media.id,{data:__assign(__assign({},s(e.media)),{status:e.status})});for(let r of e.media.relations.nodes)t.get(r.id)||t.set(r.id,{data:__assign(__assign({},s(r)),{status:"NO"})});for(let t of e.media.relations.edges)r.set(t.id,{data:{id:"L"+t.id,source:e.media.id,target:t.node.id,relation:t.relationType}})}return[t,r]})(e);console.log(l,n),a.add(Array.from(l.values()).concat(Array.from(n.values())));let o=a.elements().components(),i=[];o.map((e=>{let s=a.collection();e.edges().map((e=>{let r=e.parallelEdges().sort(((e,r)=>t[e.data("relation")]-t[r.data("relation")]))[0];switch(r.data("relation")){case"ADAPTATION":r.move({source:r.data("target"),target:r.data("source")}),r.data({relation:"SOURCE"});break;case"PREQUEL":r.move({source:r.data("target"),target:r.data("source")}),r.data({relation:"SEQUEL"})}s=s.union(r)})),e=e.nodes().union(s),s.map((e=>{e.restore()})),e.filter("node, edge[relation!='CHARACTER']").difference(r.map((e=>`#${e}`)).join(", ")).components().map((t=>{t.nodes().length!=t.filter("node[status='NO']").length&&i.push({series:t,serieComplete:e.subtract(t)})}))}));let c=i.map((e=>{let t=e.series.sort(((e,t)=>{let r=parseInt(e.data("popularity")),a=parseInt(t.data("popularity"));return isNaN(r)?999:isNaN(a)?-1:a-r}));return{seriesPrime:t.nodes()[0],series:t,serieComplete:e.serieComplete}})).map((e=>{var t,r,a,s,l,n,o,i,c,d,m,u;let p={};for(let g of["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC","MANGA","NOVEL","ONE_SHOT"]){let h=e.series.nodes().filter(`node[format='${g}']`);p[g]={tot:null!=(t=h.length)?t:0,miss:null!=(r=h.filter("node[status='NO']").length)?r:0,got:null!=(a=h.filter("node[status='COMPLETED'],node[status='DROPPED'],node[status='REPEATING']").length)?a:0,plan:null!=(s=h.filter("node[status='PLANNING'],node[status='CURRENT'],node[status='PAUSED']").length)?s:0,totWeight:null==(n=null==(l=h.map((e=>e.data("compWeight"))))?void 0:l.reduce)?void 0:n.call(l,((e,t)=>e+t),0),missWeight:null==(i=null==(o=h.filter("node[status='NO']").map((e=>e.data("compWeight"))))?void 0:o.reduce)?void 0:i.call(o,((e,t)=>e+t),0),gotWeight:null==(d=null==(c=h.filter("node[status='COMPLETED'],node[status='DROPPED'],node[status='REPEATING']").map((e=>e.data("compWeight"))))?void 0:c.reduce)?void 0:d.call(c,((e,t)=>e+t),0),planWeight:null==(u=null==(m=h.filter("node[status='PLANNING'],node[status='CURRENT'],node[status='PAUSED']").map((e=>e.data("compWeight"))))?void 0:m.reduce)?void 0:u.call(m,((e,t)=>e+t),0)}}return __assign(__assign({},e),{stats:p,status:"ERR"})})),d={};return c.map((e=>{d[e.seriesPrime.data("id")]=__assign(__assign({},e),{seriesPrime:e.seriesPrime.data(),series:{nodes:e.series.nodes().map((e=>e.data())),edges:e.series.edges().map((e=>e.data()))},serieComplete:{nodes:e.serieComplete.nodes().map((e=>e.data())),edges:e.serieComplete.edges().map((e=>e.data()))}})})),console.log(Object.values(d).length),d},Je=(e,t=!1)=>t?[...e.nodes,...e.edges].map((e=>({data:e,classes:["not-counted"]}))):[...e.nodes,...e.edges].map((e=>({data:e}))),Ke=e=>{var t,r;if(e.seriesSelected)switch(e.userOptions.cyLayout){case"breathfirst":return{name:"breadthfirst",roots:[e.seriesSelected.seriesPrime.id]};case"klay":return(null==(t=e.cyViz)?void 0:t.style()).selector("edge").style("curve-style","bezier"),{name:"klay",nodeDimensionsIncludeLabels:!0,klay:{edgeRouting:"POLYLINE",layoutHierarchy:!1,spacing:40,nodeLayering:"NETWORK_SIMPLEX",mergeEdges:!0,thoroughness:50}};case"dagre":return(null==(r=e.cyViz)?void 0:r.style()).selector("edge").style("curve-style","bezier"),{name:"dagre",nodeDimensionsIncludeLabels:!0};case"cola":return{name:"cola",animate:!0,nodeSpacing:()=>50,randomize:!0};case"fcose":return{name:"fcose",animate:!0,nodeSeparation:2e3,nodeRepulsion:()=>45e6};default:return{name:"random",roots:[e.seriesSelected.seriesPrime.id]}}return{name:"random"}};function Qe(e){switch(e){case"NO":return"red";case"COMPLETED":return"green";default:return"grey.500"}}const Ye=({data:e})=>o.createElement(h,{sx:{width:200,height:60,border:"1px solid",borderColor:Qe(e.status),position:"relative"}},o.createElement(E,{container:!0,sx:{height:"100%"}},o.createElement(E,{item:!0,xs:12,sx:{height:"70%"}},o.createElement(f,null,e.title)),o.createElement(E,{item:!0,xs:6,sx:{borderTop:"solid 1px",borderColor:"grey.500",height:"30%",fontSize:13}},o.createElement(f,{sx:{marginRight:"22px",textAlign:"center",fontSize:13}},e.startDate)),o.createElement(E,{item:!0,xs:6,sx:{borderTop:"solid 1px",borderColor:"grey.500",height:"30%",textAlign:"center"}},o.createElement(f,{sx:{marginLeft:"22px",textAlign:"center",fontSize:13,textTransform:"capitalize"}},e.format.toLowerCase()))),o.createElement(y,{sx:{position:"absolute",width:50,height:50,borderRadius:20,border:"1px solid transparent",borderTopColor:"inherit",borderRightColor:"inherit",right:"35%",top:"58%",backgroundColor:"white",transform:"rotate(315deg)"}}," ",o.createElement(b,{sx:{margin:"auto",width:"100%",transform:"rotate(45deg)",position:"absolute",right:"-3px",top:"9px"}},We(e.format)))),Xe=e=>{const[t,r]=Ie(),[a,s]=o.useState(0);let n=o.useRef(null);o.useEffect((()=>{try{l.use(v),l.use(x),l.use(O),l.use(C),l.use(S),l.use(A)}catch(t){}let e=l({container:n.current,wheelSensitivity:.3,elements:[{data:{id:"a",title:"Welcome to AniCheck!",startDate:"2020-02-01",format:"helo"}},{data:{id:"b",title:"Check",startDate:"2020-02-01",format:"HELO"}},{data:{id:"ab",source:"a",target:"b"}}],style:[{selector:"node",style:{width:200,height:60,"background-color":"white",shape:"rectangle"}},{selector:"edge",style:{"curve-style":"unbundled-bezier",width:2,"target-arrow-shape":"triangle","target-label":"data(relation)","target-text-offset":80}},{selector:'edge[relation= "SEQUEL"]',style:{width:5,"line-color":"blue","target-arrow-color":"blue"}},{selector:'edge[relation= "ADAPTATION"],edge[relation= "SOURCE"]',style:{"line-style":"dashed","line-dash-pattern":[10],width:1,"line-color":"cyan","target-arrow-color":"cyan"}},{selector:".hidden",style:{display:"none"}}],layout:{name:"cose"}});e.on("cxttapend","node",(e=>{console.log("cxttapend on node"),window.open(e.target.data("siteUrl"),"_blank")})),e.on("tap","node,edge",(e=>{console.log(e.target.data())})),e.nodeHtmlLabel([{query:"node",halign:"center",valign:"center",halignBox:"center",valignBox:"center",cssClass:"",tpl:e=>T.renderToString(o.createElement(Ye,{data:e}))},{query:"node:hidden",tpl:()=>""}]),r((t=>__assign(__assign({},t),{cyViz:e})))}),[]),o.useEffect((()=>{r((e=>{var t,r;return e.seriesSelected&&e.cyViz&&(console.log(e.seriesSelected),c(),e.cyViz.elements().remove(),e.cyViz.add(Je(e.seriesSelected.series)),e.cyViz.add(Je(e.seriesSelected.serieComplete,!0)),d(e.cyViz),null==(t=e.cyViz)||t.center(),e.cyViz.elements().makeLayout(Ke(e)).run(),null==(r=e.cyViz)||r.center()),__assign({},e)}))}),[t.seriesSelected]),o.useEffect((()=>{r((e=>{var t,r;return e.seriesSelected&&e.cyViz&&(c(),d(e.cyViz),null==(t=e.cyViz)||t.center(),e.cyViz.elements().makeLayout(Ke(e)).run(),null==(r=e.cyViz)||r.center()),__assign({},e)}))}),[t.userOptions.cyFilter,t.userOptions.cyShowHidden]);const i=e=>{r((t=>{var r,a;let s=__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{cyLayout:e})});return null==(r=t.cyViz)||r.elements().makeLayout(Ke(s)).run(),null==(a=t.cyViz)||a.center(),s}))},c=()=>{var e,r;!t.userOptions.cyShowHidden&&t.seriesSelected&&(null==(e=t.seriesSelected)?void 0:e.serieComplete.nodes.length)?s(null==(r=t.seriesSelected)?void 0:r.serieComplete.nodes.length):s(0)},d=e=>{var r;e.elements().removeClass("hidden"),(null==(r=t.seriesSelected)?void 0:r.serieComplete)&&(t.userOptions.cyShowHidden?e.add(Je(t.seriesSelected.serieComplete,!0)):e.filter(".not-counted").remove()),t.userOptions.cyFilter&&e.filter((e=>Object.values(e.data()).some((e=>t.userOptions.cyFilter.includes(e))))).addClass("hidden")};return o.createElement(y,__assign(__assign({},e),{sx:{position:"relative",display:{xs:"none",sm:"block"}}}),o.createElement(y,{ref:n,style:{width:"100%",height:"100vh",overflow:"hidden"}}),o.createElement(w,{sx:{position:"absolute",top:"20%",right:"3%"},spacing:2},o.createElement(k,{onClick:()=>i("breathfirst")},"Breathfirst"),o.createElement(k,{onClick:()=>i("klay")},"Klay"),o.createElement(k,{onClick:()=>i("dagre")},"Dagre"),o.createElement(k,{onClick:()=>i("cola")},"Cola"),o.createElement(k,{onClick:()=>i("fcose")},"Cose"),o.createElement(L,{badgeContent:a,color:"primary"},o.createElement(k,{onClick:()=>{r((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{cyShowHidden:!e.userOptions.cyShowHidden})})))}},"hidden"))))};const Ze=I`
query ($user: String!, $type: MediaType){
  MediaListCollection(userName: $user, type: $type) {
    lists {
      entries {
        id
        status
        media {
          id
          title {
            userPreferred
            romaji
            english
          }
          synonyms
          startDate {
            year
            month
            day
          }
          format
          coverImage {
            extraLarge
            medium
            color
          }
          bannerImage
          popularity
          siteUrl
          chapters
          volumes
          episodes
          duration
          nextAiringEpisode {
            episode
          }
          status(version: 2)
          relations {
            nodes {
              id
              title {
                userPreferred
                romaji
                english
              }
              synonyms
              startDate {
                year
                month
                day
              }
              format
              coverImage {
                extraLarge
                medium
                color
              }
              bannerImage
              popularity
              siteUrl
              chapters
              volumes
              episodes
              duration
              nextAiringEpisode {
                episode
              }
              status(version: 2)
            }
            edges {
              id
              relationType(version: 2)
              node {
                id
              }
            }
          }
        }
      }
      name
      isCustomList
      isSplitCompletedList
    }

  }
}
`,et=I`
query($user: String!){
  User(name: $user) {
   name
    bannerImage
    avatar {
      medium
    }
    options {
      profileColor
      titleLanguage
      displayAdultContent
      airingNotifications 
    }
  }
}
`,tt=["132615","106495","20947","118940"],rt=e=>{const[t,r]=Ie();return o.createElement(y,__assign(__assign({},e),{sx:__assign(__assign({},e.sx),{display:"grid",gridTemplateColumns:"1fr 50px 50px",gridTemplateRows:"50px",gridTemplateAreas:"'. help options'",placeItems:"center"})}),o.createElement(N,{sx:{p:"8px",backdropFilter:"blur(8px)",bgcolor:"rgba(255,255,255,0.5)",gridArea:"options",border:"1px solid",borderColor:"primary.main",color:"primary.main",":hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:()=>{var e;null==(e=t.modalOpenState)||e[1](!0)}},o.createElement(R,null)),o.createElement(N,{sx:{p:"8px",backdropFilter:"blur(8px)",bgcolor:"rgba(255,255,255,0.5)",gridArea:"help",border:"1px solid",borderColor:"primary.main",color:"primary.main",":hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:()=>{var e;null==(e=t.modalInfoOpenState)||e[1](!0)}},o.createElement(P,null)))},at=()=>{var e;const[t,r]=Ie(),[a,s]=Ve("usr",""),[l,{status:n,kill:i}]=M(qe,{remoteDependencies:["https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.18.2/cytoscape.min.js","https://cdnjs.cloudflare.com/ajax/libs/tslib/2.2.0/tslib.min.js"]}),c=()=>{r((e=>__assign(__assign({},e),{status:["ok"," "]}))),d({variables:{user:a}})},[d,m]=D(et,{notifyOnNetworkStatusChange:!0,onCompleted:()=>{r((e=>{var t;return __assign(__assign({},e),{user:{color:null!=(t=Pe[m.data.User.options.profileColor])?t:m.data.User.options.profileColor,avatar:m.data.User.avatar.medium,cover:m.data.User.bannerImage}})})),u({variables:{user:a,type:"ANIME"}})}}),[u,p]=D(Ze,{notifyOnNetworkStatusChange:!0,onCompleted:()=>{g({variables:{user:a,type:"MANGA"}})}}),[g,h]=D(Ze,{notifyOnNetworkStatusChange:!0,onCompleted:async()=>{let e=await l([...p.data.MediaListCollection.lists,...h.data.MediaListCollection.lists],De,tt);r((t=>Be(__assign(__assign({},t),{seriesDict:e}))))}});return o.useEffect((()=>{let e="ok",t=" ";m.loading?(e="loading",t="Loading User Info"):p.loading?(e="loading",t="Loading your Anime List"):h.loading?(e="loading",t="Loading your Manga List"):"RUNNING"==n?(e="loading",t="Computing received data"):m.error?(e="error",t=m.error.message):p.error?(e="error",t=p.error.message):h.error&&(e="error",t=h.error.message),r((r=>__assign(__assign({},r),{status:[e,t]})))}),[m,p,h,n]),o.createElement(y,null,o.createElement(y,{sx:{position:"relative",display:"grid",gridTemplateRows:"40px 10px 70px",gridTemplateColumns:"70px 1fr",gridTemplateAreas:"'head head' '. .' 'avatar username'",background:`url(${t.user.cover}) no-repeat center center`,backgroundSize:"cover",overflow:"hidden"}},o.createElement(y,{sx:{position:"absolute",background:"linear-gradient(180deg,rgba(6,13,34,0) 40%,rgba(6,13,34,.6))",width:"100%",height:"100%"}}),o.createElement(rt,{sx:{gridArea:"head"}}),o.createElement(y,{sx:{gridArea:"avatar",placeSelf:"strech strech",m:"0 0 0 2px"}},o.createElement(W,{sx:{width:"100%",height:"100%"},src:null!=(e=t.user.avatar)?e:"/aniCheck/assets/favicon.eef9bc89.png",variant:"rounded"})),o.createElement(y,{sx:{gridArea:"username"}},o.createElement(V,{sx:{m:1,width:"100%"},variant:"standard",error:"error"==t.status[0]},o.createElement(z,{sx:{color:"white",fontSize:"20px"},id:"standard-adornment-password",placeholder:"AniList Nick",value:a,onChange:e=>{s(e.target.value)},onKeyPress:e=>{"Enter"==e.key&&"loading"!=t.status[0]&&c()},endAdornment:o.createElement(j,{position:"end"},"loading"==t.status[0]?o.createElement(U,null):o.createElement(N,{"aria-label":"get user anime",onClick:c},o.createElement(_,null)))}),o.createElement(F,{error:"error"==t.status[0],id:"standard-weight-helper-text",sx:{color:"white"}},t.status[1])))),"loading"==t.status[0]?o.createElement(H,null):void 0)},st=e=>{const[t,r]=Ie(),[a,s]=Ve("sort",t.userOptions.sort);o.useEffect((()=>{r((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{sort:a})})))}),[a]);const[l,n]=o.useState(null),i=Boolean(l),c=e=>{a.type==e?s({type:e,inverted:!a.inverted}):s(__assign(__assign({},a),{type:e}))};return o.createElement(y,__assign({},e),o.createElement(N,{id:"sort-button","aria-controls":"sort-menu","aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:e=>{n(e.currentTarget)}},o.createElement(G,null)),o.createElement($,{id:"sort-menu",anchorEl:l,open:i,onClose:()=>{n(null)},MenuListProps:{"aria-labelledby":"sort-button"},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},o.createElement(B,{selected:"complete%"==a.type,onClick:()=>c("complete%")},a.inverted?o.createElement(q,null):o.createElement(J,null),"Complete %"),o.createElement(B,{selected:"weight%"==a.type,onClick:()=>c("weight%")},a.inverted?o.createElement(q,null):o.createElement(J,null),"Weighted Complete %"),o.createElement(B,{selected:"alphabetical"==a.type,onClick:()=>c("alphabetical")},a.inverted?o.createElement(q,null):o.createElement(J,null),"Alphabetical"),o.createElement(B,{selected:"missWeight"==a.type,onClick:()=>c("missWeight")},a.inverted?o.createElement(q,null):o.createElement(J,null),"Time To Complete")))},lt=({children:e})=>{const[t,r]=Ie(),[a,s]=o.useState(""),l=function(e,t){const[r,a]=o.useState(e);return o.useEffect((()=>{const r=setTimeout((()=>{a(e)}),t);return()=>{clearTimeout(r)}}),[e,t]),r}(a,800);o.useState([]);((e,t=!0)=>{const[r,a]=o.useState("idle"),[s,l]=o.useState(null),[n,i]=o.useState(null),c=o.useCallback((()=>(a("pending"),l(null),i(null),e().then((e=>{l(e),a("success")})).catch((e=>{i(e),a("error")})))),[e]);o.useEffect((()=>{t&&c()}),[c,t])})((()=>new Promise(((e,r)=>{var a;e(X(Object.values(null!=(a=t.seriesDict)?a:[]).filter((e=>!t.userOptions.statusFilter.includes(e.status))),l,{keys:["series.nodes.*.titles"],sorter:l?void 0:e=>(console.log(e),He(t.userOptions.sort.type)(e,t.userOptions.sort.inverted))}))}))),!1);return o.useEffect((()=>{r((e=>{var t;return __assign(__assign({},e),{seriesToRender:X(Object.values(null!=(t=e.seriesDict)?t:[]).filter((t=>!e.userOptions.statusFilter.includes(t.status))),l,{keys:["series.nodes.*.titles"],sorter:l?void 0:t=>He(e.userOptions.sort.type)(t,e.userOptions.sort.inverted)})})}))}),[l,t.seriesDict,t.userOptions.sort,t.userOptions.completion,t.userOptions.statusFilter,t.userOptions.smartCompletion,t.userOptions.animeComposition,t.userOptions.mangaComposition]),o.createElement(y,{sx:{display:"grid",gridTemplateRows:"60px",gridTemplateColumns:"50% 1fr 50px 50px",gridTemplateAreas:"'search . complete sort'",placeItems:"center",m:"0px 10px 0px 14px"}},o.createElement(K,{sx:{gridArea:"search",justifySelf:"left"},size:"small",value:a,onChange:e=>{s(e.target.value)},placeholder:"Search",inputProps:{sx:{bgcolor:"grey.300",borderRadius:"5px",border:"0px solid"},startAdornment:o.createElement(j,{position:"start"},o.createElement(Q,null))}}),o.createElement(N,{sx:{gridArea:"complete"},onClick:()=>{var e;null==(e=t.modalOpenState)||e[1](!0)}},o.createElement(Y,null)),o.createElement(st,{sx:{gridArea:"sort"}}))},nt=({value1:e,value2:t,size:r,sx:a,children:s})=>o.createElement(y,{sx:__assign(__assign({},a),{position:"relative",display:"inline-flex"})},o.createElement(U,{variant:"determinate",color:"primary",value:e,size:null!=r?r:40,thickness:5,sx:{zIndex:1}}),o.createElement(y,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},o.createElement(U,{variant:"determinate",color:"secondary",value:t+e,size:(null!=r?r:40)-2,thickness:4,sx:{display:"flex",alignItems:"center",justifyContent:"center"}}),o.createElement(y,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},s))),ot=({index:e,style:t,isScrolling:r,data:a})=>{var s,l,n,i;const[c,d]=Ie(),[m,u]=o.useState(!1);let p=a.seriesList[e],{series:g,seriesPrime:h}=p,E=h.id;return o.useLayoutEffect((()=>{var e,t;m?(null==(e=c.seriesSelected)?void 0:e.seriesPrime.id)!=E&&u(!1):(null==(t=c.seriesSelected)?void 0:t.seriesPrime.id)==E&&u(!0)}),[c.seriesSelected]),o.useLayoutEffect((()=>{console.log(c.seriesDict[E])}),[c.seriesDict]),o.createElement(y,{style:__assign({},t),key:E},o.createElement(Z,{sx:{display:"grid",gridTemplateColumns:"1fr  25%",gridTemplateAreas:"'content stats'",alignItems:"stretch",height:m?"calc(100% - 6px)":"calc(100% - 10px)",width:m?"calc(100% - 16px)":"calc(100% - 20px)",m:m?"3px 8px 3px 8px":"5px 10px 5px 10px",border:m?"3px solid":"1px solid",borderColor:m?"primary.main":"grey.500",background:r?void 0:`url(${null!=(s=h.bannerImage)?s:h.cover}) no-repeat center center`,backgroundSize:"cover",color:"white",borderRadius:"10px",boxShadow:"inset 0 0 0 2000px "+(m?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0.4)"),overflow:"hidden",textAlign:"left"},key:E,onClick:()=>{d((e=>__assign(__assign({},e),{seriesSelected:p})))}},o.createElement(y,{sx:{gridArea:"content",placeSelf:"stretch",display:"grid",gridTemplateRows:"1fr 45px",gridTemplateAreas:"'title' 'bot-stat'",gap:"1px",overflow:"hidden"}},o.createElement(f,{sx:{pt:"10px",pr:"10px",pl:"20px",pb:"20px",gridArea:"title",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},variant:"h6"},h.title),o.createElement(y,{sx:{gridArea:"bot-stat",placeSelf:"stretch",display:"flex",flexDirection:"row",alignItems:"center",pl:"10px"}},r?void 0:Object.keys(p.stats).map((e=>{if("selected"!=e&&p.stats[e].tot)return o.createElement(y,{key:e,sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",mr:"6px",mb:"5px",color:p.stats[e].tot-p.stats[e].got?"gray":"primary.main",width:"40px",height:"40px",bgcolor:"white",borderRadius:"50px"}},o.createElement(nt,{value1:Math.floor(p.stats[e].got/p.stats[e].tot*100),value2:Math.floor(p.stats[e].plan/p.stats[e].tot*100)},We(e)))})))),o.createElement(y,{sx:{gridArea:"stats",display:"grid",gridTemplateRows:"75% auto",gridTemplateAreas:"'pie' 'weight'",alignItems:"center",justifyItems:"center",width:"100%"}},o.createElement(nt,{value1:null!=(l=p.stats.selected.perWeight)?l:0,value2:Math.floor((null!=(n=p.stats.selected.planWeight)?n:0)/(null!=(i=p.stats.selected.totWeight)?i:0)*100),size:80,sx:{bgcolor:"rgba(0,2,2,0.2)",gridArea:"pie",backdropFilter:"blur(5px)",borderRadius:"30px",p:"5px"}},o.createElement(f,null,p.stats.selected.perWeight)),o.createElement(y,{sx:{bgcolor:"rgba(0,2,2,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"primary.main",backdropFilter:"blur(10px)",p:"2px 8px",borderRadius:"10px",fontWeight:600}},o.createElement(ee,{sx:{mr:"3px"}}),p.stats.selected.missWeight))))},it=({onScroll:e,forwardedRef:t,style:r,children:a})=>{const s=o.useCallback((e=>{t(e?e.view:null)}),[t]);return o.createElement(te.Scrollbars,{ref:s,style:__assign(__assign({},r),{overflow:"hidden"}),onScroll:e},a)};o.forwardRef(((e,t)=>o.createElement(it,__assign(__assign({},e),{forwardedRef:t}))));const ct=e=>{const t=o.createRef(),r=o.createRef(),[a,s]=Ie();let[l,n]=o.useState([]);function i(e){var t;return null!=(t=l[e].seriesPrime.id)?t:"1"}return o.useEffect((()=>{var e,r,s;n(null!=(r=null!=(e=a.seriesToRender)?e:Object.values(a.seriesDict))?r:[]),null==(s=t.current)||s.scrollTo(0)}),[a.seriesToRender,a.seriesDict]),o.createElement(y,__assign(__assign({},e),{sx:__assign(__assign({},e.sx),{height:"100%"})}),a.seriesDict?o.createElement(re,null,(({height:e,width:a})=>{var s;return o.createElement(ae,{ref:t,height:e,itemSize:140,width:a,itemCount:null!=(s=null==l?void 0:l.length)?s:0,itemData:{seriesList:l},useIsScrolling:!0,itemKey:i,outerRef:r},ot)})):o.createElement("p",null,"None"))},dt=({name:e,helperText:t,onClick:r,control:a})=>o.createElement(y,{sx:{position:"relative",display:"grid",gridTemplateColumns:"1fr 25%",gridTemplateRows:"40% 60%",gridTemplateAreas:"'name s' 'help .'",alignItems:"start",m:"5px 0px"}},o.createElement(Z,{sx:{position:"absolute",width:"100%",height:"100%"},onClick:r}),o.createElement(f,{sx:{gridArea:"name"},variant:"subtitle1"},e),o.createElement(f,{sx:{gridArea:"help",color:"text.secondary"},variant:"caption"},t),o.createElement(y,{sx:{gridArea:"s",placeSelf:"center end"}},a)),mt=({name:e,dataset:t,chips:r,stateArray:a,disabled:s})=>{const[l,n]=Ie();return o.createElement(y,{sx:{position:"relative",display:"grid",gridTemplateColumns:"1fr 40px 40px",gridTemplateRows:"40px auto",gridTemplateAreas:"'name all none' 'chips chips chips'",placeItems:"center",mt:1}},o.createElement(f,{sx:__assign({gridArea:"name",placeSelf:"center start"},s?{color:"text.disabled",pointerEvents:"none"}:void 0)},e),o.createElement(se,{key:"all",title:"Select All",placement:"top",disableInteractive:!0},o.createElement(N,{sx:{gridArea:"all"},onClick:function(){n((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{[a]:r})})))},disabled:s},o.createElement(le,null))),o.createElement(se,{key:"none",title:"Unselect All",placement:"top",disableInteractive:!0},o.createElement(N,{sx:{gridArea:"none"},onClick:function(){n((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{[a]:[]})})))},disabled:s},o.createElement(ne,null))),o.createElement(y,{sx:__assign({gridArea:"chips",border:"1px solid",display:"flex",borderRadius:"10px",borderColor:"grey.500",flexWrap:"wrap",p:"10px",placeSelf:"stretch"},s?{borderColor:"grey.400",pointerEvents:"none"}:void 0)},r.map((e=>{var r,i;return o.createElement(se,{key:t[e].id,title:t[e].tooltip,placement:"top",disableInteractive:!0},o.createElement(oe,{color:(i=t[e].id,l.userOptions[a].includes(i)?"primary":"default"),variant:"outlined",disabled:s,label:t[e].label,icon:null==(r=t[e])?void 0:r.icon,onClick:()=>function(e){n((t=>__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{[a]:ie(t.userOptions[a],[e])})})))}(t[e].id),sx:{mx:.5,my:.5}}))}))))},ut=()=>{const[e,t]=Ie();function r(e){t((t=>{switch(e){case"smart":return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{smartCompletion:!t.userOptions.smartCompletion})});case"all":return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{completion:Ne})});default:return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{completion:ie(t.userOptions.completion,[e])})})}}))}return o.useEffect((()=>{t((e=>Be(e)))}),[e.userOptions.completion,e.userOptions.smartCompletion,e.userOptions.mangaComposition,e.userOptions.animeComposition]),o.createElement(y,null,o.createElement(dt,{name:"Smart Completion",helperText:"Only consider completion of thematic groups you have already started",onClick:()=>r("smart"),control:o.createElement(ce,{checked:e.userOptions.smartCompletion,onClick:()=>r("smart")})}),o.createElement(mt,{name:"Formats to consider Anime",chips:["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC"],stateArray:"animeComposition",dataset:Re,disabled:!e.userOptions.smartCompletion}),o.createElement(mt,{name:"Formats to consider Manga",chips:["MANGA","ONE_SHOT"],stateArray:"mangaComposition",dataset:Re,disabled:!e.userOptions.smartCompletion}),o.createElement(mt,{name:"Formats to consider Novel",chips:["NOVEL"],stateArray:"novelComposition",dataset:Re,disabled:!e.userOptions.smartCompletion}),o.createElement(de,{variant:"middle",sx:{my:2}}),o.createElement(dt,{name:"Custom Completion",helperText:"Choose what formats to consider for completion in all series",onClick:()=>r("smart"),control:o.createElement(ce,{checked:!e.userOptions.smartCompletion,onClick:()=>r("smart")})}),o.createElement(mt,{name:"Formats to consider",chips:Ne,stateArray:"completion",dataset:Re,disabled:e.userOptions.smartCompletion}))},pt=()=>(Ie(),o.createElement(mt,{name:"Formats to Filter",chips:Ne,stateArray:"cyFilter",dataset:Re}));function gt(){const[e,t]=Ie(),[r,a]=o.useState("1"),[s,l]=o.useState(!1);o.useEffect((()=>{t((e=>__assign(__assign({},e),{modalOpenState:[s,l]})))}),[]);return o.createElement(me,{open:s,onClose:()=>{var t;return null==(t=e.modalOpenState)?void 0:t[1](!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},o.createElement(y,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"10px",overflow:"hidden"}},o.createElement(ue,{value:r},o.createElement(y,{sx:{borderBottom:1,borderColor:"divider"}},o.createElement(pe,{onChange:(e,t)=>{a(t)},"aria-label":"options"},o.createElement(ge,{label:"Completion",value:"1"}),o.createElement(ge,{label:"Sort",value:"2"}),o.createElement(ge,{label:"Filter",value:"3"}))),o.createElement(he,{value:"1"},o.createElement(ut,null)),o.createElement(he,{value:"2"},o.createElement(pt,null)),o.createElement(he,{value:"3"},"Item Three"))))}const ht=({children:e,statusId:t,tooltip:r,icon:a})=>{const[s,l]=Ie();return o.createElement(se,{title:null!=r&&r,disableInteractive:!0},o.createElement(k,{onClick:e=>{l((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{statusFilter:be(["COMPLETE","PLAN_TO_COMPLETE","NOT_COMPLETE","ERR"],t)})})))},variant:s.userOptions.statusFilter.includes(t)?"outlined":"contained",startIcon:a},e))},Et=()=>{const[e,t]=Ie();return o.createElement(y,null,o.createElement(y,{sx:{margin:"5px 0 0 0",display:"flex",justifyContent:"space-evenly",flexWrap:"wrap"}},o.createElement(ht,{statusId:"COMPLETE",tooltip:"Completed",icon:o.createElement(Ee,null)},e.globalStats.got),o.createElement(ht,{statusId:"PLAN_TO_COMPLETE",tooltip:"Plan To Complete",icon:o.createElement(fe,null)},e.globalStats.plan),o.createElement(ht,{statusId:"NOT_COMPLETE",tooltip:"Not Completed",icon:o.createElement(ye,null)},e.globalStats.miss),o.createElement(ht,{statusId:"ERR",tooltip:"Not Included with current options",icon:o.createElement(ne,null)},e.globalStats.tot-(e.globalStats.got+e.globalStats.miss+e.globalStats.plan))))};function ft(){const[e,t]=Ie();o.useState("1");const[r,a]=o.useState(!1);o.useEffect((()=>{t((e=>__assign(__assign({},e),{modalInfoOpenState:[r,a]})))}),[]);return o.createElement(me,{open:r,onClose:()=>{var t;return null==(t=e.modalInfoOpenState)?void 0:t[1](!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},o.createElement(y,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4,maxHeight:"90%",borderRadius:"10px",overflow:"auto"}},o.createElement(ve,{remarkPlugins:[xe],children:"# Welcome to AniCheck\n\nIn this site you will be able to check the completition status of all the anime/manga series that you are following on AniList. Althougth AniList API are used, the site is completely unofficial and separeted from AniList, AniChart and their respective staff.\n\nIt's not needed to log-in to your AniList account, fot this motif the scope is limited to only the entries that are made public.\n\nThe site is still in active development and presents various rough edges, for now the graph functionality are disabled on mobile.\n\n## Useful tips\n\n* Right click a node in the graph to open the relative AniList page\n* The best layouts are Klay and Dagre\n* Weighted Percentage counts the completition based on the time each element of the series takes\n"})))}const yt=e=>o.createElement(y,__assign(__assign({},e),{sx:__assign(__assign({},e.sx),{display:"grid",gridTemplateRows:"25% 1fr",gridTemplateAreas:"'top' 'content'"})}),o.createElement(gt,null),o.createElement(ft,null),o.createElement(y,{sx:{gridArea:"top"}},o.createElement(at,null),o.createElement(Et,null),o.createElement(lt,null)),o.createElement(y,{sx:{gridArea:"content"}},o.createElement(ct,null))),bt=({children:e})=>{var t;const[r,a]=Ie(),s=Oe({palette:{mode:"light",primary:{main:null!=(t=r.user.color)?t:"#3f51b5"}}});return o.createElement(Ce,{theme:s},e)},vt=new Se({uri:"https://graphql.anilist.co",cache:new Ae});Te.render(o.createElement(o.StrictMode,null,o.createElement(Le,null,o.createElement(we,{client:vt},o.createElement(bt,null,o.createElement(y,{sx:{display:"grid",gridTemplateColumns:{xs:"0px 100%",sm:" calc(100% - 500px) 500px"},gridTemplateAreas:" 'viz nav'",height:"100vh"}},o.createElement(Xe,{sx:{gridArea:"viz"}}),o.createElement(yt,{sx:{gridArea:"nav"}})))))),document.getElementById("root"));
