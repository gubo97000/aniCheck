var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,r=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,__assign=(e,n)=>{for(var l in n||(n={}))t.call(n,l)&&r(e,l,n[l]);if(s)for(var l of s(n))a.call(n,l)&&r(e,l,n[l]);return e};import{c as n,b as l,r as i,P as o,G as c,T as u,B as d,I as m,a as p,M as g,d as E,e as h,f as O,g as cytoscape,h as f,i as y,k as b,j as v,p as C,l as S,s as A,S as T,m as N,n as L,o as x,q as k,u as w,A as I,F as M,t as P,v as D,C as V,w as R,E as W,x as z,y as U,z as j,D as _,N as F,H,J as G,K as $,L as B,O as q,Q as J,R as Q,U as K,V as Y,W as X,X as Z,Y as ee,Z as te,_ as se,$ as ae,a0 as re,a1 as ne,a2 as le,a3 as ie,a4 as oe,a5 as ce,a6 as ue,a7 as de,a8 as me,a9 as pe,aa as ge,ab as Ee,ac as he}from"./vendor.db0c2cc5.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const a=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,n)=>{const l=new URL(e,a);if(self[t].moduleMap[l])return s(self[t].moduleMap[l]);const i=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){n(new Error(`Failed to import: ${e}`)),r(o)},onload(){s(self[t].moduleMap[l]),r(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/aniCheck/assets/");const Oe={cy:n({headless:!0}),userOptions:{sort:{type:"alphabetical",inverted:!1},smartCompletition:!0,completition:[],animeComposition:["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC"],mangaComposition:["MANGA","ONE_SHOT"],statusFilter:["COMPLETE","ERR"],cyShowHidden:!1,cyFormatFilter:[],cyLayout:"klay",cyFilter:[]},seriesDict:{},user:{},globalStats:{tot:0,miss:0,got:0,plan:0},status:["ok"," "]},{Provider:fe,useTracked:ye}=l((()=>i.useState(Oe)));function be(e){switch(e){case"NO":return"red";case"COMPLETED":return"green";default:return"grey.500"}}const ve=({data:e})=>i.createElement(o,{sx:{width:200,height:60,border:"1px solid",borderColor:be(e.status),position:"relative"}},i.createElement(c,{container:!0,sx:{height:"100%"}},i.createElement(c,{item:!0,xs:12,sx:{height:"70%"}},i.createElement(u,null,e.title)),i.createElement(c,{item:!0,xs:6,sx:{borderTop:"solid 1px",borderColor:"grey.500",height:"30%",fontSize:13}},i.createElement(u,{sx:{marginRight:"22px",textAlign:"center",fontSize:13}},e.startDate)),i.createElement(c,{item:!0,xs:6,sx:{borderTop:"solid 1px",borderColor:"grey.500",height:"30%",textAlign:"center"}},i.createElement(u,{sx:{marginLeft:"22px",textAlign:"center",fontSize:13,textTransform:"capitalize"}},e.format.toLowerCase()))),i.createElement(d,{sx:{position:"absolute",width:50,height:50,borderRadius:20,border:"1px solid transparent",borderTopColor:"inherit",borderRightColor:"inherit",right:"35%",top:"58%",backgroundColor:"white",transform:"rotate(315deg)"}}," ",i.createElement(m,{sx:{margin:"auto",width:"100%",transform:"rotate(45deg)",position:"absolute",right:"-3px",top:"9px"}},function(e){switch(e){case"TV":case"TV_SHORT":return i.createElement(h,null);case"MOVIE":return i.createElement(O,null);case"SPECIAL":case"OVA":case"ONA":return i.createElement(h,null);case"MUSIC":return i.createElement(E,null);case"MANGA":case"ONE_SHOT":return i.createElement(g,null);case"NOVEL":return i.createElement(p,null);default:return""}}(e.format)))),Ce=["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC","MANGA","NOVEL","ONE_SHOT"],Se=[{id:"TV",label:"TV",tooltip:"Anime broadcast on television"},{id:"TV_SHORT",label:"TV Short",tooltip:"Anime which are under 15 minutes in length and broadcast on television"},{id:"MOVIE",label:"Movie",tooltip:"Anime movies with a theatrical release"},{id:"SPECIAL",label:"Special",tooltip:"Special episodes that have been included in DVD/Blu-ray releases, picture dramas, pilots, etc"},{id:"OVA",label:"OVA",tooltip:"(Original Video Animation) Anime that have been released directly on DVD/Blu-ray without originally going through a theatrical release or television broadcast"},{id:"ONA",label:"ONA",tooltip:"(Original Net Animation) Anime that have been originally released online or are only available through streaming services."},{id:"MUSIC",label:"Music",tooltip:"Short anime released as a music video"},{id:"MANGA",label:"Manga",tooltip:"Professionally published manga with more than one chapter"},{id:"NOVEL",label:"Novel",tooltip:"Written books released as a series of light novels"},{id:"ONE_SHOT",label:"One Shot",tooltip:"Manga with just one chapter"}],Ae={blue:"#3DB4F2",purple:"#C063FF",green:"#4CCA51",orange:"#EF881A",red:"#E13333",pink:"#FC9DD6",gray:"#677B94"},Te=["CHARACTER","SEQUEL","SIDE_STORY","SOURCE","ALTERNATIVE","SPIN_OFF","SUMMARY","COMPILATION","CONTAINS","PREQUEL","ADAPTATION","PARENT","OTHER"],Ne=(()=>{let e={};return Te.map(((t,s)=>{e[t]=s})),e})();function Le(e,t=null){var s,a;try{JSON.parse(null!=(s=localStorage.getItem(e))?s:JSON.stringify(t))}catch(l){console.log("Old Data found, trying to reset"),localStorage.removeItem(e)}const[r,n]=i.useState(JSON.parse(null!=(a=localStorage.getItem(e))?a:JSON.stringify(t)));return i.useEffect((()=>{localStorage.setItem(e,JSON.stringify(r))}),[r]),[r,n]}function xe(e,t){return e.sort(((e,s)=>t?e.item.stats.selected.missWeight-s.item.stats.selected.missWeight:s.item.stats.selected.missWeight-e.item.stats.selected.missWeight))}function ke(e,t){return e.sort(((e,s)=>t?e.item.stats.selected.perWeight-s.item.stats.selected.perWeight:s.item.stats.selected.perWeight-e.item.stats.selected.perWeight))}function we(e,t){return e.sort(((e,s)=>t?e.item.stats.selected.per-s.item.stats.selected.per:s.item.stats.selected.per-e.item.stats.selected.per))}function Ie(e,t){return console.log(e),e.sort(((e,s)=>t?e.rankedValue[0].localeCompare(s.rankedValue):s.rankedValue[0].localeCompare(e.rankedValue)))}function Me(e,t){return e.sort(((e,s)=>t?e.item.stats.serieMiss+e.item.stats.serieTot-(s.item.stats.serieMiss+s.item.stats.serieTot):s.item.stats.serieMiss+s.item.stats.serieTot-(e.item.stats.serieMiss+e.item.stats.serieTot)))}function Pe(e){switch(e){case"weight%":return ke;case"complete%":return we;case"alphabetical":return Ie;case"size":return Me;case"missWeight":return xe;default:return Ie}}function De(e,t){switch(e){case"anime":return t.animeComposition;case"manga":return t.mangaComposition;default:return[e]}}function Ve(e,t){var s,a,r,n,l,i,o,c;let u=0,d=0,m=0,p=0,g=0,E=0,h=0,O=0;for(const f of e)u+=null!=(s=t[f].tot)?s:0,d+=null!=(a=t[f].miss)?a:0,m+=null!=(r=t[f].got)?r:0,p+=null!=(n=t[f].plan)?n:0,g+=null!=(l=t[f].totWeight)?l:0,E+=null!=(i=t[f].missWeight)?i:0,h+=null!=(o=t[f].gotWeight)?o:0,O+=null!=(c=t[f].planWeight)?c:0;return{tot:u,miss:d,got:m,plan:p,totWeight:g,missWeight:E,gotWeight:h,planWeight:O}}const Re=e=>{let t={tot:Object.keys(e.seriesDict).length,got:0,miss:0,plan:0};if(e.userOptions.smartCompletition)for(const[s,a]of Object.entries(e.seriesDict)){let r=0,n=0,l=0,i=0,o=0,c=0,u=0,d=0;for(const t of["anime","manga","NOVEL"]){let{got:s,miss:d,tot:m,plan:p,totWeight:g,missWeight:E,gotWeight:h,planWeight:O}=Ve(De(t,e.userOptions),a.stats);0==s&&0==p||(r+=m,n+=d,l+=s,i+=p,o+=g,c+=E,u+=h)}e.seriesDict[s].stats.selected={tot:r,miss:n,got:l,plan:i,per:Math.floor(l/r*100),totWeight:o,missWeight:c,gotWeight:u,planWeight:d,perWeight:Math.floor(u/o*100)},0!=r?l==r?(e.seriesDict[s].status="COMPLETE",t.got+=1):l+i==r?(e.seriesDict[s].status="PLAN_TO_COMPLETE",t.plan+=1):(e.seriesDict[s].status="NOT_COMPLETE",t.miss+=1):e.seriesDict[s].status="ERR"}else for(const[s,a]of Object.entries(e.seriesDict)){let{got:r,plan:n,miss:l,tot:i,totWeight:o,missWeight:c,gotWeight:u,planWeight:d}=Ve(e.userOptions.completition,a.stats);e.seriesDict[s].stats.selected={tot:i,got:r,miss:l,plan:n,per:Math.floor(r/i*100),totWeight:o,gotWeight:u,planWeight:d,missWeight:c,perWeight:Math.floor(u/o*100)},0!=i?r==i?(e.seriesDict[s].status="COMPLETE",t.got+=1):r+n==i?(e.seriesDict[s].status="PLAN_TO_COMPLETE",t.plan+=1):(e.seriesDict[s].status="NOT_COMPLETE",t.miss+=1):e.seriesDict[s].status="ERR"}return console.log(t),__assign(__assign({},e),{globalStats:t})},We=(e,t,s)=>{const a=cytoscape({headless:!0}),r=e=>{var t;return{id:e.id,status:"NO",airStatus:e.status,format:null!=(t=e.format)?t:"SPECIAL",title:e.title.userPreferred,titles:[...Object.values(e.title),...e.synonyms].filter((e=>!["MediaTitle",null].includes(e))),siteUrl:e.siteUrl,bannerImage:e.bannerImage,popularity:e.popularity,compWeight:(e=>{var t,s;if("NOT_YET_RELEASED"==e.status)return 1;if(e.chapters)return 5*e.chapters;if(e.volumes)return 50*e.volumes;if(e.episodes&&e.duration)return e.episodes*e.duration;if((null==(t=e.nextAiringEpisode)?void 0:t.episode)&&e.duration)return(null==(s=e.nextAiringEpisode)?void 0:s.episode)*e.duration;let a=Object.values(e.startDate).filter((e=>"FuzzyDate"!=e&&e)).join("-"),r=(Date.now()-Date.parse(a))/864e5;return"MANGA"==e.format?5*Math.round(r/8.2):(e.format,20*Math.round(r/8.2))})(e),startDate:Object.values(e.startDate).filter((e=>"FuzzyDate"!=e&&e)).join("-")}},[n,l]=(e=>{let t=new Map,s=new Map;console.log(e);for(let a of e)for(let e of a.entries){t.set(e.media.id,{data:__assign(__assign({},r(e.media)),{status:e.status})});for(let s of e.media.relations.nodes)t.get(s.id)||t.set(s.id,{data:__assign(__assign({},r(s)),{status:"NO"})});for(let t of e.media.relations.edges)s.set(t.id,{data:{id:"L"+t.id,source:e.media.id,target:t.node.id,relation:t.relationType}})}return[t,s]})(e);console.log(n,l),a.add(Array.from(n.values()).concat(Array.from(l.values())));let i=a.elements().components(),o=[];i.map((e=>{let r=a.collection();e.edges().map((e=>{let s=e.parallelEdges().sort(((e,s)=>t[e.data("relation")]-t[s.data("relation")]))[0];switch(s.data("relation")){case"ADAPTATION":s.move({source:s.data("target"),target:s.data("source")}),s.data({relation:"SOURCE"});break;case"PREQUEL":s.move({source:s.data("target"),target:s.data("source")}),s.data({relation:"SEQUEL"})}r=r.union(s)})),e=e.nodes().union(r),r.map((e=>{e.restore()})),e.filter("node, edge[relation!='CHARACTER']").difference(s.map((e=>`#${e}`)).join(", ")).components().map((t=>{t.nodes().length!=t.filter("node[status='NO']").length&&o.push({series:t,serieComplete:e.subtract(t)})}))}));let c=o.map((e=>{let t=e.series.sort(((e,t)=>{let s=parseInt(e.data("popularity")),a=parseInt(t.data("popularity"));return isNaN(s)?999:isNaN(a)?-1:a-s}));return{seriesPrime:t.nodes()[0],series:t,serieComplete:e.serieComplete}})).map((e=>{var t,s,a,r,n,l,i,o,c,u,d,m;let p={};for(let g of["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC","MANGA","NOVEL","ONE_SHOT"]){let E=e.series.nodes().filter(`node[format='${g}']`);p[g]={tot:null!=(t=E.length)?t:0,miss:null!=(s=E.filter("node[status='NO']").length)?s:0,got:null!=(a=E.filter("node[status='COMPLETED'],node[status='DROPPED'],node[status='REPEATING']").length)?a:0,plan:null!=(r=E.filter("node[status='PLANNING'],node[status='CURRENT'],node[status='PAUSED']").length)?r:0,totWeight:null==(l=null==(n=E.map((e=>e.data("compWeight"))))?void 0:n.reduce)?void 0:l.call(n,((e,t)=>e+t),0),missWeight:null==(o=null==(i=E.filter("node[status='NO']").map((e=>e.data("compWeight"))))?void 0:i.reduce)?void 0:o.call(i,((e,t)=>e+t),0),gotWeight:null==(u=null==(c=E.filter("node[status='COMPLETED'],node[status='DROPPED'],node[status='REPEATING']").map((e=>e.data("compWeight"))))?void 0:c.reduce)?void 0:u.call(c,((e,t)=>e+t),0),planWeight:null==(m=null==(d=E.filter("node[status='PLANNING'],node[status='CURRENT'],node[status='PAUSED']").map((e=>e.data("compWeight"))))?void 0:d.reduce)?void 0:m.call(d,((e,t)=>e+t),0)}}return __assign(__assign({},e),{stats:p,status:"ERR"})})),u={};return c.map((e=>{u[e.seriesPrime.data("id")]=__assign(__assign({},e),{seriesPrime:e.seriesPrime.data(),series:{nodes:e.series.nodes().map((e=>e.data())),edges:e.series.edges().map((e=>e.data()))},serieComplete:{nodes:e.serieComplete.nodes().map((e=>e.data())),edges:e.serieComplete.edges().map((e=>e.data()))}})})),console.log(Object.values(u).length),u},ze=(e,t=!1)=>t?[...e.nodes,...e.edges].map((e=>({data:e,classes:["not-counted"]}))):[...e.nodes,...e.edges].map((e=>({data:e}))),Ue=e=>{var t,s;if(e.seriesSelected)switch(e.userOptions.cyLayout){case"breathfirst":return{name:"breadthfirst",roots:[e.seriesSelected.seriesPrime.id]};case"klay":return(null==(t=e.cyViz)?void 0:t.style()).selector("edge").style("curve-style","bezier"),{name:"klay",animate:!0,nodeDimensionsIncludeLabels:!0,klay:{edgeRouting:"POLYLINE",layoutHierarchy:!1,spacing:40,nodeLayering:"NETWORK_SIMPLEX",mergeEdges:!0,thoroughness:50}};case"dagre":return(null==(s=e.cyViz)?void 0:s.style()).selector("edge").style("curve-style","bezier"),{name:"dagre",animate:!0,nodeDimensionsIncludeLabels:!0};case"cola":return{name:"cola",animate:!0,nodeSpacing:()=>50,randomize:!0};case"fcose":return{name:"fcose",animate:!0,nodeSeparation:2e3,nodeRepulsion:()=>45e6};default:return{name:"random",roots:[e.seriesSelected.seriesPrime.id]}}return{name:"random"}};function je(){const[e,t]=ye(),[s,a]=i.useState(0);let r=i.useRef(null);i.useEffect((()=>{try{n.use(f),n.use(y),n.use(b),n.use(v),n.use(C),n.use(S)}catch(s){}let e=n({container:r.current,wheelSensitivity:.3,elements:[{data:{id:"a",title:"Welcome to AniCheck!",startDate:"2020-02-01",format:"helo"}},{data:{id:"b",title:"Check",startDate:"2020-02-01",format:"HELO"}},{data:{id:"ab",source:"a",target:"b"}}],style:[{selector:"node",style:{width:200,height:60,"background-color":"white",shape:"rectangle"}},{selector:"edge",style:{"curve-style":"unbundled-bezier",width:2,"target-arrow-shape":"triangle","target-label":"data(relation)","target-text-offset":80}},{selector:'edge[relation= "SEQUEL"]',style:{width:5,"line-color":"blue","target-arrow-color":"blue"}},{selector:'edge[relation= "ADAPTATION"],edge[relation= "SOURCE"]',style:{"line-style":"dashed","line-dash-pattern":[10],width:1,"line-color":"cyan","target-arrow-color":"cyan"}},{selector:".hidden",style:{display:"none"}}],layout:{name:"cose"}});e.on("cxttapend","node",(e=>{console.log("cxttapend on node"),window.open(e.target.data("siteUrl"),"_blank")})),e.on("tap","node,edge",(e=>{console.log(e.target.data())})),e.nodeHtmlLabel([{query:"node",halign:"center",valign:"center",halignBox:"center",valignBox:"center",cssClass:"",tpl:e=>A.renderToString(i.createElement(ve,{data:e}))},{query:"node:hidden",tpl:()=>""}]),t((t=>__assign(__assign({},t),{cyViz:e})))}),[]),i.useEffect((()=>{t((e=>{var t,s;return e.seriesSelected&&e.cyViz&&(console.log(e.seriesSelected),o(),e.cyViz.elements().remove(),e.cyViz.add(ze(e.seriesSelected.series)),e.cyViz.add(ze(e.seriesSelected.serieComplete,!0)),u(e.cyViz),null==(t=e.cyViz)||t.center(),e.cyViz.elements().makeLayout(Ue(e)).run(),null==(s=e.cyViz)||s.center()),__assign({},e)}))}),[e.seriesSelected]),i.useEffect((()=>{t((e=>{var t,s;return e.seriesSelected&&e.cyViz&&(o(),u(e.cyViz),null==(t=e.cyViz)||t.center(),e.cyViz.elements().makeLayout(Ue(e)).run(),null==(s=e.cyViz)||s.center()),__assign({},e)}))}),[e.userOptions.cyFilter,e.userOptions.cyShowHidden]);const l=e=>{t((t=>{var s,a;let r=__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{cyLayout:e})});return null==(s=t.cyViz)||s.elements().makeLayout(Ue(r)).run(),null==(a=t.cyViz)||a.center(),r}))},o=()=>{var t,s;!e.userOptions.cyShowHidden&&e.seriesSelected&&(null==(t=e.seriesSelected)?void 0:t.serieComplete.nodes.length)?a(null==(s=e.seriesSelected)?void 0:s.serieComplete.nodes.length):a(0)},u=t=>{var s;t.elements().removeClass("hidden"),(null==(s=e.seriesSelected)?void 0:s.serieComplete)&&(e.userOptions.cyShowHidden?t.add(ze(e.seriesSelected.serieComplete,!0)):t.filter(".not-counted").remove()),e.userOptions.cyFilter&&t.filter((t=>Object.values(t.data()).some((t=>e.userOptions.cyFilter.includes(t))))).addClass("hidden")};return i.createElement(c,{sx:{position:"relative"},item:!0,xs:12,sm:9},i.createElement("div",{ref:r,style:{width:"100%",height:"100vh"}}),i.createElement(T,{sx:{position:"absolute",top:"20%",right:"3%"},spacing:2},i.createElement(N,{onClick:()=>l("breathfirst")},"Breathfirst"),i.createElement(N,{onClick:()=>l("klay")},"Klay"),i.createElement(N,{onClick:()=>l("dagre")},"Dagre"),i.createElement(N,{onClick:()=>l("cola")},"Cola"),i.createElement(N,{onClick:()=>l("fcose")},"Cose"),i.createElement(L,{badgeContent:s,color:"primary"},i.createElement(N,{onClick:()=>{t((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{cyShowHidden:!e.userOptions.cyShowHidden})})))}},"hidden"))))}const _e=x`
query ($user: String!, $type: MediaType){
  MediaListCollection(userName: $user, type: $type) {
    lists {
      entries {
        id
        status
        media {
          id
          title {
            userPreferred
            romaji
            english
          }
          synonyms
          startDate {
            year
            month
            day
          }
          format
          coverImage {
            medium
            color
          }
          bannerImage
          popularity
          siteUrl
          chapters
          volumes
          episodes
          duration
          nextAiringEpisode {
            episode
          }
          status(version: 2)
          relations {
            nodes {
              id
              title {
                userPreferred
                romaji
                english
              }
              synonyms
              startDate {
                year
                month
                day
              }
              format
              coverImage {
                medium
                color
              }
              bannerImage
              popularity
              siteUrl
              chapters
              volumes
              episodes
              duration
              nextAiringEpisode {
                episode
              }
              status(version: 2)
            }
            edges {
              id
              relationType(version: 2)
              node {
                id
              }
            }
          }
        }
      }
      name
      isCustomList
      isSplitCompletedList
    }

  }
}
`,Fe=x`
query($user: String!){
  User(name: $user) {
   name
    bannerImage
    avatar {
      medium
    }
    options {
      profileColor
      titleLanguage
      displayAdultContent
      airingNotifications 
    }
  }
}
`,He=["132615","106495","20947","118940"],Ge=()=>{const[e,t]=ye(),[s,a]=Le("usr",""),[r,{status:n,kill:l}]=k(We,{remoteDependencies:["https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.18.2/cytoscape.min.js","https://cdnjs.cloudflare.com/ajax/libs/tslib/2.2.0/tslib.min.js"]}),o=()=>{t((e=>__assign(__assign({},e),{status:["ok"," "]}))),u({variables:{user:s}})},[u,d]=w(Fe,{notifyOnNetworkStatusChange:!0,onCompleted:()=>{t((e=>{var t;return __assign(__assign({},e),{user:{color:null!=(t=Ae[d.data.User.options.profileColor])?t:d.data.User.options.profileColor,avatar:d.data.User.avatar.medium}})})),m({variables:{user:s,type:"ANIME"}})}}),[m,p]=w(_e,{notifyOnNetworkStatusChange:!0,onCompleted:()=>{g({variables:{user:s,type:"MANGA"}})}}),[g,E]=w(_e,{notifyOnNetworkStatusChange:!0,onCompleted:async()=>{let e=await r([...p.data.MediaListCollection.lists,...E.data.MediaListCollection.lists],Ne,He);t((t=>Re(__assign(__assign({},t),{seriesDict:e}))))}});return i.useEffect((()=>{let e="ok",s=" ";d.loading?(e="loading",s="Loading User Info"):p.loading?(e="loading",s="Loading your Anime List"):E.loading?(e="loading",s="Loading your Manga List"):"RUNNING"==n?(e="loading",s="Computing received data"):d.error?(e="error",s=d.error.message):p.error?(e="error",s=p.error.message):E.error&&(e="error",s=E.error.message),t((t=>__assign(__assign({},t),{status:[e,s]})))}),[d,p,E,n]),i.createElement("div",null,i.createElement(c,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center"},i.createElement(c,{item:!0},i.createElement(I,{src:e.user.avatar,variant:"rounded"})),i.createElement(c,{item:!0},i.createElement(M,{sx:{m:1,width:"100%"},variant:"standard",error:"error"==e.status[0]},i.createElement(P,{id:"standard-adornment-password",placeholder:"AniList Nick",value:s,onChange:e=>{a(e.target.value)},onKeyPress:t=>{"Enter"==t.key&&"loading"!=e.status[0]&&o()},endAdornment:i.createElement(D,{position:"end"},"loading"==e.status[0]?i.createElement(V,null):i.createElement(R,{"aria-label":"get user anime",onClick:o},i.createElement(W,null)))}),i.createElement(z,{error:"error"==e.status[0],id:"standard-weight-helper-text"},e.status[1])))))},$e=()=>{const[e,t]=ye(),[s,a]=Le("sort",e.userOptions.sort);i.useEffect((()=>{t((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{sort:s})})))}),[s]);const[r,n]=i.useState(null),l=Boolean(r),o=e=>{s.type==e?a({type:e,inverted:!s.inverted}):a(__assign(__assign({},s),{type:e}))};return i.createElement("span",null,i.createElement(R,{id:"sort-button","aria-controls":"sort-menu","aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:e=>{n(e.currentTarget)}},i.createElement(U,null)),i.createElement(j,{id:"sort-menu",anchorEl:r,open:l,onClose:()=>{n(null)},MenuListProps:{"aria-labelledby":"sort-button"},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},i.createElement(_,{selected:"complete%"==s.type,onClick:()=>o("complete%")},s.inverted?i.createElement(F,null):i.createElement(H,null),"Complete %"),i.createElement(_,{selected:"weight%"==s.type,onClick:()=>o("weight%")},s.inverted?i.createElement(F,null):i.createElement(H,null),"Weighted Complete %"),i.createElement(_,{selected:"alphabetical"==s.type,onClick:()=>o("alphabetical")},s.inverted?i.createElement(F,null):i.createElement(H,null),"Alphabetical"),i.createElement(_,{selected:"missWeight"==s.type,onClick:()=>o("missWeight")},s.inverted?i.createElement(F,null):i.createElement(H,null),"Easy To Complete")))},Be=({children:e})=>{const[t,s]=ye(),[a,r]=i.useState(""),n=function(e,t){const[s,a]=i.useState(e);return i.useEffect((()=>{const s=setTimeout((()=>{a(e)}),t);return()=>{clearTimeout(s)}}),[e,t]),s}(a,800),[l,o]=i.useState([]);((e,t=!0)=>{const[s,a]=i.useState("idle"),[r,n]=i.useState(null),[l,o]=i.useState(null),c=i.useCallback((()=>(a("pending"),n(null),o(null),e().then((e=>{n(e),a("success")})).catch((e=>{o(e),a("error")})))),[e]);i.useEffect((()=>{t&&c()}),[c,t])})((()=>new Promise(((e,s)=>{var a;e(B(Object.values(null!=(a=t.seriesDict)?a:[]).filter((e=>!t.userOptions.statusFilter.includes(e.status))),n,{keys:["series.nodes.*.titles"],sorter:n?void 0:e=>(console.log(e),Pe(t.userOptions.sort.type)(e,t.userOptions.sort.inverted))}))}))),!1);return i.useEffect((()=>{var e;o(B(Object.values(null!=(e=t.seriesDict)?e:[]).filter((e=>!t.userOptions.statusFilter.includes(e.status))),n,{keys:["series.nodes.*.titles"],sorter:n?void 0:e=>Pe(t.userOptions.sort.type)(e,t.userOptions.sort.inverted)}))}),[n,t.seriesDict,t.userOptions.sort,t.userOptions.completition,t.userOptions.statusFilter,t.userOptions.smartCompletition]),i.createElement(d,null,i.createElement(G,{value:a,onChange:e=>{r(e.target.value)}}),i.createElement(R,{onClick:()=>{var e;null==(e=t.modalOpenState)||e[1](!0)}},i.createElement($,null)),i.createElement($e,null),i.isValidElement(e)?i.cloneElement(e,{seriesToRender:l}):i.createElement("p",null,"Shouldn't display"))},qe=({index:e,style:t,data:s})=>{const[a,r]=ye(),[n,l]=i.useState(!1);let o=s.seriesList[e],{series:c,seriesPrime:m}=o,p=m.id;return i.useLayoutEffect((()=>{var e;l((null==(e=a.seriesSelected)?void 0:e.seriesPrime.id)==p)}),[a.seriesSelected]),i.createElement(d,{style:__assign({},t),sx:{},key:p},i.createElement(q,{sx:{marginBottom:"10px",border:"1px solid",borderColor:"grey.500",background:`url(${m.bannerImage}) no-repeat center center`,backgroundSize:"cover",color:"white",height:"calc(100% - 10px)",width:"calc(100% - 10px)",borderRadius:"5px",boxShadow:"inset 0 0 0 2000px rgba(0, 0, 0, 0.3)"},selected:n,key:p,button:!0,onClick:()=>{r((e=>__assign(__assign({},e),{seriesSelected:o})))}},i.createElement(J,{sx:{fontSize:"19px"},id:p,primary:m.title+" "+o.stats.selected.missWeight+" "+n}),i.createElement(d,{sx:{position:"relative",display:"inline-flex"}},i.createElement(V,{size:80,variant:"determinate",color:"primary",value:o.stats.selected.per}),i.createElement(d,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"}},i.createElement(u,null,o.stats.selected.per))),i.createElement(d,{sx:{position:"relative",display:"inline-flex"}},i.createElement(V,{variant:"determinate",color:"secondary",value:o.stats.selected.perWeight}),i.createElement(d,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"}},i.createElement(u,null,o.stats.selected.perWeight)))))},Je=({seriesToRender:e})=>{const t=i.createRef(),[s,a]=ye();let[r,n]=i.useState([]);function l(e){var t;return null!=(t=r[e].seriesPrime.id)?t:"1"}return i.useEffect((()=>{var a,r;n(null!=(a=null!=e?e:Object.values(s.seriesDict))?a:[]),null==(r=t.current)||r.scrollTo(0)}),[e,s.seriesDict]),i.createElement(d,{sx:{height:"calc(100vh - 200px)"}},s.seriesDict?i.createElement(Q,null,(({height:e,width:s})=>{var a;return i.createElement(K,{ref:t,height:e,itemSize:140,width:s,itemCount:null!=(a=null==r?void 0:r.length)?a:0,itemData:{seriesList:r},itemKey:l},qe)})):i.createElement("p",null,"None"))},Qe=()=>{const[e,t]=ye();function s(e){t((t=>{switch(e){case"smart":return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{smartCompletition:!t.userOptions.smartCompletition})});case"all":return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{completition:Ce})});default:return __assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{completition:te(t.userOptions.completition,[e])})})}}))}return i.useEffect((()=>{t((e=>Re(e)))}),[e.userOptions.completition,e.userOptions.smartCompletition,e.userOptions.mangaComposition,e.userOptions.animeComposition]),i.createElement("div",null,i.createElement(Y,{control:i.createElement(X,{checked:e.userOptions.smartCompletition,onClick:()=>s("smart")}),label:"Smart Completition"}),"What is anime? ",Se.map((s=>{if(["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC"].includes(s.id))return i.createElement(Z,{key:s.label,title:s.tooltip,placement:"top",disableInteractive:!0},i.createElement(ee,{variant:(a=s.id,e.userOptions.animeComposition.includes(a)?void 0:"outlined"),disabled:!e.userOptions.smartCompletition,label:s.label,onClick:()=>function(e){t((t=>__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{animeComposition:te(t.userOptions.animeComposition,[e])})})))}(s.id)}));var a})),"What is Manga? ",Se.map((s=>{if(["MANGA","ONE_SHOT"].includes(s.id))return i.createElement(Z,{key:s.label,title:s.tooltip,placement:"top",disableInteractive:!0},i.createElement(ee,{variant:(a=s.id,e.userOptions.mangaComposition.includes(a)?void 0:"outlined"),disabled:!e.userOptions.smartCompletition,label:s.label,onClick:()=>function(e){t((t=>__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{mangaComposition:te(t.userOptions.mangaComposition,[e])})})))}(s.id)}));var a})),i.createElement(Y,{control:i.createElement(X,{checked:!e.userOptions.smartCompletition,onClick:()=>s("smart")}),label:"Custom"}),i.createElement(N,{disabled:e.userOptions.smartCompletition,onClick:()=>s("all")},"Select All"),Se.map((t=>{return i.createElement(Z,{key:t.label,title:t.tooltip,placement:"top",disableInteractive:!0},i.createElement(ee,{variant:(a=t.id,e.userOptions.completition.includes(a)?void 0:"outlined"),disabled:e.userOptions.smartCompletition,label:t.label,onClick:()=>s(t.id)}));var a})))},Ke=()=>{const[e,t]=ye();return i.createElement("div",null,"Formats"," ",Se.map((s=>{return i.createElement(Z,{key:s.label,title:s.tooltip,placement:"top",disableInteractive:!0},i.createElement(ee,{variant:(a=s.id,e.userOptions.cyFilter.includes(a)?void 0:"outlined"),label:s.label,onClick:()=>function(e){t((t=>__assign(__assign({},t),{userOptions:__assign(__assign({},t.userOptions),{cyFilter:te(t.userOptions.cyFilter,[e])})})))}(s.id)}));var a})))},Ye={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4};function Xe(){const[e,t]=ye(),[s,a]=i.useState("1"),[r,n]=i.useState(!1);i.useEffect((()=>{t((e=>__assign(__assign({},e),{modalOpenState:[r,n]})))}),[]);return i.createElement("div",null,i.createElement(se,{open:r,onClose:()=>{var t;return null==(t=e.modalOpenState)?void 0:t[1](!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},i.createElement(o,{sx:Ye},i.createElement(ae,{value:s},i.createElement(d,{sx:{borderBottom:1,borderColor:"divider"}},i.createElement(re,{onChange:(e,t)=>{a(t)},"aria-label":"options"},i.createElement(ne,{label:"Completition Options",value:"1"}),i.createElement(ne,{label:"Sort",value:"2"}),i.createElement(ne,{label:"Filter",value:"3"}))),i.createElement(le,{value:"1"},i.createElement(Qe,null)),i.createElement(le,{value:"2"},i.createElement(Ke,null)),i.createElement(le,{value:"3"},"Item Three")))))}const Ze=({children:e,statusId:t})=>{const[s,a]=ye();return i.createElement(R,{onClick:e=>{a((e=>__assign(__assign({},e),{userOptions:__assign(__assign({},e.userOptions),{statusFilter:te(e.userOptions.statusFilter,[t])})})))},color:s.userOptions.statusFilter.includes(t)?"default":"primary"},e)},et=()=>{const[e,t]=ye();return i.createElement(d,{sx:{margin:"auto"}},i.createElement(T,{direction:"row",spacing:2},i.createElement(Ze,{statusId:"COMPLETE"},i.createElement(ie,null),e.globalStats.got),i.createElement(Ze,{statusId:"PLAN_TO_COMPLETE"},i.createElement(oe,null),e.globalStats.plan),i.createElement(Ze,{statusId:"NOT_COMPLETE"},i.createElement(ce,null),e.globalStats.miss),i.createElement(Ze,{statusId:"ERR"},i.createElement(ue,null),e.globalStats.tot-(e.globalStats.got+e.globalStats.miss+e.globalStats.plan))))};function tt(){return i.createElement(c,{sx:{height:"100vh"},item:!0,xs:12,sm:3},i.createElement(Xe,null),i.createElement(Ge,null),i.createElement(et,null),i.createElement(Be,null,i.createElement(Je,null)))}const st=({children:e})=>{var t;const[s,a]=ye(),r=de({palette:{mode:"light",primary:{main:null!=(t=s.user.color)?t:"#3f51b5"}}});return i.createElement(me,{theme:r},e)},at=new pe({uri:"https://graphql.anilist.co",cache:new ge});Ee.render(i.createElement(i.StrictMode,null,i.createElement(fe,null,i.createElement(he,{client:at},i.createElement(st,null,i.createElement(c,{container:!0},i.createElement(je,null),i.createElement(tt,null)))))),document.getElementById("root"));
