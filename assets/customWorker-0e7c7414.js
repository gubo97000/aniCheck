(function(){"use strict";const Fg=["132615","106495","20947","118940"];var Ur=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $g(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qs={},of={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=Symbol.for("react.element"),qg=Symbol.for("react.portal"),Vg=Symbol.for("react.fragment"),Wg=Symbol.for("react.strict_mode"),Hg=Symbol.for("react.profiler"),Gg=Symbol.for("react.provider"),Ug=Symbol.for("react.context"),Kg=Symbol.for("react.forward_ref"),Yg=Symbol.for("react.suspense"),Xg=Symbol.for("react.memo"),Zg=Symbol.for("react.lazy"),sf=Symbol.iterator;function Qg(t){return t===null||typeof t!="object"?null:(t=sf&&t[sf]||t["@@iterator"],typeof t=="function"?t:null)}var uf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lf=Object.assign,ff={};function da(t,e,r){this.props=t,this.context=e,this.refs=ff,this.updater=r||uf}da.prototype.isReactComponent={},da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vf(){}vf.prototype=da.prototype;function Vs(t,e,r){this.props=t,this.context=e,this.refs=ff,this.updater=r||uf}var Ws=Vs.prototype=new vf;Ws.constructor=Vs,lf(Ws,da.prototype),Ws.isPureReactComponent=!0;var cf=Array.isArray,df=Object.prototype.hasOwnProperty,Hs={current:null},hf={key:!0,ref:!0,__self:!0,__source:!0};function gf(t,e,r){var n,a={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)df.call(e,n)&&!hf.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var v=Array(l),f=0;f<l;f++)v[f]=arguments[f+2];a.children=v}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:ri,type:t,key:o,ref:s,props:a,_owner:Hs.current}}function Jg(t,e){return{$$typeof:ri,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gs(t){return typeof t=="object"&&t!==null&&t.$$typeof===ri}function jg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var pf=/\/+/g;function Us(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jg(""+t.key):e.toString(36)}function ji(t,e,r,n,a){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ri:case qg:s=!0}}if(s)return s=t,a=a(s),t=n===""?"."+Us(s,0):n,cf(a)?(r="",t!=null&&(r=t.replace(pf,"$&/")+"/"),ji(a,e,r,"",function(f){return f})):a!=null&&(Gs(a)&&(a=Jg(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(pf,"$&/")+"/")+t)),e.push(a)),1;if(s=0,n=n===""?".":n+":",cf(t))for(var l=0;l<t.length;l++){o=t[l];var v=n+Us(o,l);s+=ji(o,e,r,v,a)}else if(v=Qg(t),typeof v=="function")for(t=v.call(t),l=0;!(o=t.next()).done;)o=o.value,v=n+Us(o,l++),s+=ji(o,e,r,v,a);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function eo(t,e,r){if(t==null)return t;var n=[],a=0;return ji(t,n,"","",function(o){return e.call(r,o,a++)}),n}function ep(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tr={current:null},to={transition:null},tp={ReactCurrentDispatcher:tr,ReactCurrentBatchConfig:to,ReactCurrentOwner:Hs};Xe.Children={map:eo,forEach:function(t,e,r){eo(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return eo(t,function(){e++}),e},toArray:function(t){return eo(t,function(e){return e})||[]},only:function(t){if(!Gs(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},Xe.Component=da,Xe.Fragment=Vg,Xe.Profiler=Hg,Xe.PureComponent=Vs,Xe.StrictMode=Wg,Xe.Suspense=Yg,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tp,Xe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=lf({},t.props),a=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Hs.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(v in e)df.call(e,v)&&!hf.hasOwnProperty(v)&&(n[v]=e[v]===void 0&&l!==void 0?l[v]:e[v])}var v=arguments.length-2;if(v===1)n.children=r;else if(1<v){l=Array(v);for(var f=0;f<v;f++)l[f]=arguments[f+2];n.children=l}return{$$typeof:ri,type:t.type,key:a,ref:o,props:n,_owner:s}},Xe.createContext=function(t){return t={$$typeof:Ug,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Gg,_context:t},t.Consumer=t},Xe.createElement=gf,Xe.createFactory=function(t){var e=gf.bind(null,t);return e.type=t,e},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(t){return{$$typeof:Kg,render:t}},Xe.isValidElement=Gs,Xe.lazy=function(t){return{$$typeof:Zg,_payload:{_status:-1,_result:t},_init:ep}},Xe.memo=function(t,e){return{$$typeof:Xg,type:t,compare:e===void 0?null:e}},Xe.startTransition=function(t){var e=to.transition;to.transition={};try{t()}finally{to.transition=e}},Xe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Xe.useCallback=function(t,e){return tr.current.useCallback(t,e)},Xe.useContext=function(t){return tr.current.useContext(t)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(t){return tr.current.useDeferredValue(t)},Xe.useEffect=function(t,e){return tr.current.useEffect(t,e)},Xe.useId=function(){return tr.current.useId()},Xe.useImperativeHandle=function(t,e,r){return tr.current.useImperativeHandle(t,e,r)},Xe.useInsertionEffect=function(t,e){return tr.current.useInsertionEffect(t,e)},Xe.useLayoutEffect=function(t,e){return tr.current.useLayoutEffect(t,e)},Xe.useMemo=function(t,e){return tr.current.useMemo(t,e)},Xe.useReducer=function(t,e,r){return tr.current.useReducer(t,e,r)},Xe.useRef=function(t){return tr.current.useRef(t)},Xe.useState=function(t){return tr.current.useState(t)},Xe.useSyncExternalStore=function(t,e,r){return tr.current.useSyncExternalStore(t,e,r)},Xe.useTransition=function(){return tr.current.useTransition()},Xe.version="18.2.0",of.exports=Xe;var rp=of.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np=rp,ap=Symbol.for("react.element"),ip=Symbol.for("react.fragment"),op=Object.prototype.hasOwnProperty,sp=np.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,up={key:!0,ref:!0,__self:!0,__source:!0};function mf(t,e,r){var n,a={},o=null,s=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)op.call(e,n)&&!up.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:ap,type:t,key:o,ref:s,props:a,_owner:sp.current}}qs.Fragment=ip,qs.jsx=mf,qs.jsxs=mf;function lp(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ni=lp,fp=typeof Ur=="object"&&Ur&&Ur.Object===Object&&Ur,vp=fp,cp=vp,dp=typeof self=="object"&&self&&self.Object===Object&&self,hp=cp||dp||Function("return this")(),ro=hp,gp=ro,pp=function(){return gp.Date.now()},mp=pp,yp=/\s/;function bp(t){for(var e=t.length;e--&&yp.test(t.charAt(e)););return e}var wp=bp,xp=wp,Ep=/^\s+/;function Sp(t){return t&&t.slice(0,xp(t)+1).replace(Ep,"")}var Cp=Sp,Tp=ro,Dp=Tp.Symbol,Ks=Dp,yf=Ks,bf=Object.prototype,Ap=bf.hasOwnProperty,Pp=bf.toString,ai=yf?yf.toStringTag:void 0;function Lp(t){var e=Ap.call(t,ai),r=t[ai];try{t[ai]=void 0;var n=!0}catch{}var a=Pp.call(t);return n&&(e?t[ai]=r:delete t[ai]),a}var kp=Lp,Bp=Object.prototype,Rp=Bp.toString;function _p(t){return Rp.call(t)}var Ip=_p,wf=Ks,Mp=kp,Op=Ip,Np="[object Null]",zp="[object Undefined]",xf=wf?wf.toStringTag:void 0;function Fp(t){return t==null?t===void 0?zp:Np:xf&&xf in Object(t)?Mp(t):Op(t)}var Ef=Fp;function $p(t){return t!=null&&typeof t=="object"}var qp=$p,Vp=Ef,Wp=qp,Hp="[object Symbol]";function Gp(t){return typeof t=="symbol"||Wp(t)&&Vp(t)==Hp}var ii=Gp,Up=Cp,Sf=ni,Kp=ii,Cf=0/0,Yp=/^[-+]0x[0-9a-f]+$/i,Xp=/^0b[01]+$/i,Zp=/^0o[0-7]+$/i,Qp=parseInt;function Jp(t){if(typeof t=="number")return t;if(Kp(t))return Cf;if(Sf(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Sf(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Up(t);var r=Xp.test(t);return r||Zp.test(t)?Qp(t.slice(2),r?2:8):Yp.test(t)?Cf:+t}var jp=Jp,em=ni,Ys=mp,Tf=jp,tm="Expected a function",rm=Math.max,nm=Math.min;function am(t,e,r){var n,a,o,s,l,v,f=0,c=!1,h=!1,g=!0;if(typeof t!="function")throw new TypeError(tm);e=Tf(e)||0,em(r)&&(c=!!r.leading,h="maxWait"in r,o=h?rm(Tf(r.maxWait)||0,e):o,g="trailing"in r?!!r.trailing:g);function m(L){var D=n,_=a;return n=a=void 0,f=L,s=t.apply(_,D),s}function p(L){return f=L,l=setTimeout(y,e),c?m(L):s}function x(L){var D=L-v,_=L-f,A=e-D;return h?nm(A,o-_):A}function w(L){var D=L-v,_=L-f;return v===void 0||D>=e||D<0||h&&_>=o}function y(){var L=Ys();if(w(L))return E(L);l=setTimeout(y,x(L))}function E(L){return l=void 0,g&&n?m(L):(n=a=void 0,s)}function S(){l!==void 0&&clearTimeout(l),f=0,n=v=a=l=void 0}function T(){return l===void 0?s:E(Ys())}function k(){var L=Ys(),D=w(L);if(n=arguments,a=this,v=L,D){if(l===void 0)return p(v);if(h)return clearTimeout(l),l=setTimeout(y,e),m(v)}return l===void 0&&(l=setTimeout(y,e)),s}return k.cancel=S,k.flush=T,k}var im=am,Df={exports:{}};(function(t,e){(function(){var r,n,a,o,s,l,v,f,c,h,g,m,p,x,w;a=Math.floor,h=Math.min,n=function(y,E){return y<E?-1:y>E?1:0},c=function(y,E,S,T,k){var L;if(S==null&&(S=0),k==null&&(k=n),S<0)throw new Error("lo must be non-negative");for(T==null&&(T=y.length);S<T;)L=a((S+T)/2),k(E,y[L])<0?T=L:S=L+1;return[].splice.apply(y,[S,S-S].concat(E)),E},l=function(y,E,S){return S==null&&(S=n),y.push(E),x(y,0,y.length-1,S)},s=function(y,E){var S,T;return E==null&&(E=n),S=y.pop(),y.length?(T=y[0],y[0]=S,w(y,0,E)):T=S,T},f=function(y,E,S){var T;return S==null&&(S=n),T=y[0],y[0]=E,w(y,0,S),T},v=function(y,E,S){var T;return S==null&&(S=n),y.length&&S(y[0],E)<0&&(T=[y[0],E],E=T[0],y[0]=T[1],w(y,0,S)),E},o=function(y,E){var S,T,k,L,D,_;for(E==null&&(E=n),L=function(){_=[];for(var A=0,O=a(y.length/2);0<=O?A<O:A>O;0<=O?A++:A--)_.push(A);return _}.apply(this).reverse(),D=[],T=0,k=L.length;T<k;T++)S=L[T],D.push(w(y,S,E));return D},p=function(y,E,S){var T;if(S==null&&(S=n),T=y.indexOf(E),T!==-1)return x(y,0,T,S),w(y,T,S)},g=function(y,E,S){var T,k,L,D,_;if(S==null&&(S=n),k=y.slice(0,E),!k.length)return k;for(o(k,S),_=y.slice(E),L=0,D=_.length;L<D;L++)T=_[L],v(k,T,S);return k.sort(S).reverse()},m=function(y,E,S){var T,k,L,D,_,A,O,N,R;if(S==null&&(S=n),E*10<=y.length){if(L=y.slice(0,E).sort(S),!L.length)return L;for(k=L[L.length-1],O=y.slice(E),D=0,A=O.length;D<A;D++)T=O[D],S(T,k)<0&&(c(L,T,0,null,S),L.pop(),k=L[L.length-1]);return L}for(o(y,S),R=[],_=0,N=h(E,y.length);0<=N?_<N:_>N;0<=N?++_:--_)R.push(s(y,S));return R},x=function(y,E,S,T){var k,L,D;for(T==null&&(T=n),k=y[S];S>E;){if(D=S-1>>1,L=y[D],T(k,L)<0){y[S]=L,S=D;continue}break}return y[S]=k},w=function(y,E,S){var T,k,L,D,_;for(S==null&&(S=n),k=y.length,_=E,L=y[E],T=2*E+1;T<k;)D=T+1,D<k&&!(S(y[T],y[D])<0)&&(T=D),y[E]=y[T],E=T,T=2*E+1;return y[E]=L,x(y,_,E,S)},r=function(){y.push=l,y.pop=s,y.replace=f,y.pushpop=v,y.heapify=o,y.updateItem=p,y.nlargest=g,y.nsmallest=m;function y(E){this.cmp=E??n,this.nodes=[]}return y.prototype.push=function(E){return l(this.nodes,E,this.cmp)},y.prototype.pop=function(){return s(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(E){return this.nodes.indexOf(E)!==-1},y.prototype.replace=function(E){return f(this.nodes,E,this.cmp)},y.prototype.pushpop=function(E){return v(this.nodes,E,this.cmp)},y.prototype.heapify=function(){return o(this.nodes,this.cmp)},y.prototype.updateItem=function(E){return p(this.nodes,E,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var E;return E=new y,E.nodes=this.nodes.slice(0),E},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y}(),function(y,E){return t.exports=E()}(this,function(){return r})}).call(Ur)})(Df);var om=Df.exports,sm=om,um=Array.isArray,no=um,lm=no,fm=ii,vm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cm=/^\w*$/;function dm(t,e){if(lm(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||fm(t)?!0:cm.test(t)||!vm.test(t)||e!=null&&t in Object(e)}var hm=dm,gm=Ef,pm=ni,mm="[object AsyncFunction]",ym="[object Function]",bm="[object GeneratorFunction]",wm="[object Proxy]";function xm(t){if(!pm(t))return!1;var e=gm(t);return e==ym||e==bm||e==mm||e==wm}var Em=xm,Sm=ro,Cm=Sm["__core-js_shared__"],Tm=Cm,Xs=Tm,Af=function(){var t=/[^.]+$/.exec(Xs&&Xs.keys&&Xs.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Dm(t){return!!Af&&Af in t}var Am=Dm,Pm=Function.prototype,Lm=Pm.toString;function km(t){if(t!=null){try{return Lm.call(t)}catch{}try{return t+""}catch{}}return""}var Bm=km,Rm=Em,_m=Am,Im=ni,Mm=Bm,Om=/[\\^$.*+?()[\]{}|]/g,Nm=/^\[object .+?Constructor\]$/,zm=Function.prototype,Fm=Object.prototype,$m=zm.toString,qm=Fm.hasOwnProperty,Vm=RegExp("^"+$m.call(qm).replace(Om,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wm(t){if(!Im(t)||_m(t))return!1;var e=Rm(t)?Vm:Nm;return e.test(Mm(t))}var Hm=Wm;function Gm(t,e){return t?.[e]}var Um=Gm,Km=Hm,Ym=Um;function Xm(t,e){var r=Ym(t,e);return Km(r)?r:void 0}var Zs=Xm,Zm=Zs,Qm=Zm(Object,"create"),ao=Qm,Pf=ao;function Jm(){this.__data__=Pf?Pf(null):{},this.size=0}var jm=Jm;function ey(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ty=ey,ry=ao,ny="__lodash_hash_undefined__",ay=Object.prototype,iy=ay.hasOwnProperty;function oy(t){var e=this.__data__;if(ry){var r=e[t];return r===ny?void 0:r}return iy.call(e,t)?e[t]:void 0}var sy=oy,uy=ao,ly=Object.prototype,fy=ly.hasOwnProperty;function vy(t){var e=this.__data__;return uy?e[t]!==void 0:fy.call(e,t)}var cy=vy,dy=ao,hy="__lodash_hash_undefined__";function gy(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=dy&&e===void 0?hy:e,this}var py=gy,my=jm,yy=ty,by=sy,wy=cy,xy=py;function ha(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ha.prototype.clear=my,ha.prototype.delete=yy,ha.prototype.get=by,ha.prototype.has=wy,ha.prototype.set=xy;var Ey=ha;function Sy(){this.__data__=[],this.size=0}var Cy=Sy;function Ty(t,e){return t===e||t!==t&&e!==e}var Lf=Ty,Dy=Lf;function Ay(t,e){for(var r=t.length;r--;)if(Dy(t[r][0],e))return r;return-1}var io=Ay,Py=io,Ly=Array.prototype,ky=Ly.splice;function By(t){var e=this.__data__,r=Py(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():ky.call(e,r,1),--this.size,!0}var Ry=By,_y=io;function Iy(t){var e=this.__data__,r=_y(e,t);return r<0?void 0:e[r][1]}var My=Iy,Oy=io;function Ny(t){return Oy(this.__data__,t)>-1}var zy=Ny,Fy=io;function $y(t,e){var r=this.__data__,n=Fy(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var qy=$y,Vy=Cy,Wy=Ry,Hy=My,Gy=zy,Uy=qy;function ga(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ga.prototype.clear=Vy,ga.prototype.delete=Wy,ga.prototype.get=Hy,ga.prototype.has=Gy,ga.prototype.set=Uy;var Ky=ga,Yy=Zs,Xy=ro,Zy=Yy(Xy,"Map"),Qy=Zy,kf=Ey,Jy=Ky,jy=Qy;function e0(){this.size=0,this.__data__={hash:new kf,map:new(jy||Jy),string:new kf}}var t0=e0;function r0(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var n0=r0,a0=n0;function i0(t,e){var r=t.__data__;return a0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var oo=i0,o0=oo;function s0(t){var e=o0(this,t).delete(t);return this.size-=e?1:0,e}var u0=s0,l0=oo;function f0(t){return l0(this,t).get(t)}var v0=f0,c0=oo;function d0(t){return c0(this,t).has(t)}var h0=d0,g0=oo;function p0(t,e){var r=g0(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var m0=p0,y0=t0,b0=u0,w0=v0,x0=h0,E0=m0;function pa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}pa.prototype.clear=y0,pa.prototype.delete=b0,pa.prototype.get=w0,pa.prototype.has=x0,pa.prototype.set=E0;var S0=pa,Bf=S0,C0="Expected a function";function Qs(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(C0);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var s=t.apply(this,n);return r.cache=o.set(a,s)||o,s};return r.cache=new(Qs.Cache||Bf),r}Qs.Cache=Bf;var T0=Qs,D0=T0,A0=500;function P0(t){var e=D0(t,function(n){return r.size===A0&&r.clear(),n}),r=e.cache;return e}var L0=P0,k0=L0,B0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R0=/\\(\\)?/g,_0=k0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(B0,function(r,n,a,o){e.push(a?o.replace(R0,"$1"):n||r)}),e}),Rf=_0;function I0(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}var _f=I0,If=Ks,M0=_f,O0=no,N0=ii,z0=1/0,Mf=If?If.prototype:void 0,Of=Mf?Mf.toString:void 0;function Nf(t){if(typeof t=="string")return t;if(O0(t))return M0(t,Nf)+"";if(N0(t))return Of?Of.call(t):"";var e=t+"";return e=="0"&&1/t==-z0?"-0":e}var F0=Nf,$0=F0;function q0(t){return t==null?"":$0(t)}var zf=q0,V0=no,W0=hm,H0=Rf,G0=zf;function U0(t,e){return V0(t)?t:W0(t,e)?[t]:H0(G0(t))}var Ff=U0,K0=ii,Y0=1/0;function X0(t){if(typeof t=="string"||K0(t))return t;var e=t+"";return e=="0"&&1/t==-Y0?"-0":e}var Js=X0,Z0=Ff,Q0=Js;function J0(t,e){e=Z0(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Q0(e[r++])];return r&&r==n?t:void 0}var j0=J0,e1=j0;function t1(t,e,r){var n=t==null?void 0:e1(t,e);return n===void 0?r:n}var r1=t1,n1=Zs,a1=function(){try{var t=n1(Object,"defineProperty");return t({},"",{}),t}catch{}}(),i1=a1,$f=i1;function o1(t,e,r){e=="__proto__"&&$f?$f(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var s1=o1,u1=s1,l1=Lf,f1=Object.prototype,v1=f1.hasOwnProperty;function c1(t,e,r){var n=t[e];(!(v1.call(t,e)&&l1(n,r))||r===void 0&&!(e in t))&&u1(t,e,r)}var d1=c1,h1=9007199254740991,g1=/^(?:0|[1-9]\d*)$/;function p1(t,e){var r=typeof t;return e=e??h1,!!e&&(r=="number"||r!="symbol"&&g1.test(t))&&t>-1&&t%1==0&&t<e}var m1=p1,y1=d1,b1=Ff,w1=m1,qf=ni,x1=Js;function E1(t,e,r,n){if(!qf(t))return t;e=b1(e,t);for(var a=-1,o=e.length,s=o-1,l=t;l!=null&&++a<o;){var v=x1(e[a]),f=r;if(v==="__proto__"||v==="constructor"||v==="prototype")return t;if(a!=s){var c=l[v];f=n?n(c,v,l):void 0,f===void 0&&(f=qf(c)?c:w1(e[a+1])?[]:{})}y1(l,v,f),l=l[v]}return t}var S1=E1,C1=S1;function T1(t,e,r){return t==null?t:C1(t,e,r)}var D1=T1;function A1(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var P1=A1,L1=_f,k1=P1,B1=no,R1=ii,_1=Rf,I1=Js,M1=zf;function O1(t){return B1(t)?L1(t,I1):R1(t)?[t]:k1(_1(M1(t)))}var N1=O1,z1=im,F1=sm,$1=r1,q1=D1,V1=N1;function oi(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var so=oi(z1),si=oi(F1),W1=oi($1),H1=oi(q1),G1=oi(V1);function Pt(t){"@babel/helpers - typeof";return Pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(t)}function js(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eu(t,e,r){return e&&Vf(t.prototype,e),r&&Vf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wf(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tn(t,e){return U1(t)||K1(t,e)||Y1(t,e)||X1()}function U1(t){if(Array.isArray(t))return t}function K1(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],a=!0,o=!1,s,l;try{for(r=r.call(t);!(a=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));a=!0);}catch(v){o=!0,l=v}finally{try{!a&&r.return!=null&&r.return()}finally{if(o)throw l}}return n}}function Y1(t,e){if(t){if(typeof t=="string")return Hf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hf(t,e)}}function Hf(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function X1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt=typeof window>"u"?null:window,Gf=Lt?Lt.navigator:null;Lt&&Lt.document;var Z1=Pt(""),Uf=Pt({}),Q1=Pt(function(){}),J1=typeof HTMLElement>"u"?"undefined":Pt(HTMLElement),ui=function(e){return e&&e.instanceString&&xt(e.instanceString)?e.instanceString():null},ke=function(e){return e!=null&&Pt(e)==Z1},xt=function(e){return e!=null&&Pt(e)===Q1},ct=function(e){return!mr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},tt=function(e){return e!=null&&Pt(e)===Uf&&!ct(e)&&e.constructor===Object},j1=function(e){return e!=null&&Pt(e)===Uf},we=function(e){return e!=null&&Pt(e)===Pt(1)&&!isNaN(e)},eb=function(e){return we(e)&&Math.floor(e)===e},uo=function(e){if(J1!=="undefined")return e!=null&&e instanceof HTMLElement},mr=function(e){return li(e)||Kf(e)},li=function(e){return ui(e)==="collection"&&e._private.single},Kf=function(e){return ui(e)==="collection"&&!e._private.single},tu=function(e){return ui(e)==="core"},Yf=function(e){return ui(e)==="stylesheet"},tb=function(e){return ui(e)==="event"},bn=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},rb=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},nb=function(e){return tt(e)&&we(e.x1)&&we(e.x2)&&we(e.y1)&&we(e.y2)},ab=function(e){return j1(e)&&xt(e.then)},ib=function(){return Gf&&Gf.userAgent.match(/msie|trident|edge/i)},fi=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);return o.join("$")});var n=function a(){var o=this,s=arguments,l,v=r.apply(o,s),f=a.cache;return(l=f[v])||(l=f[v]=e.apply(o,s)),l};return n.cache={},n},ru=fi(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),lo=fi(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Xf=fi(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Zf=function(e){return bn(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},kt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ob="rgb[a]?\\(("+kt+"[%]?)\\s*,\\s*("+kt+"[%]?)\\s*,\\s*("+kt+"[%]?)(?:\\s*,\\s*("+kt+"))?\\)",sb="rgb[a]?\\((?:"+kt+"[%]?)\\s*,\\s*(?:"+kt+"[%]?)\\s*,\\s*(?:"+kt+"[%]?)(?:\\s*,\\s*(?:"+kt+"))?\\)",ub="hsl[a]?\\(("+kt+")\\s*,\\s*("+kt+"[%])\\s*,\\s*("+kt+"[%])(?:\\s*,\\s*("+kt+"))?\\)",lb="hsl[a]?\\((?:"+kt+")\\s*,\\s*(?:"+kt+"[%])\\s*,\\s*(?:"+kt+"[%])(?:\\s*,\\s*(?:"+kt+"))?\\)",fb="\\#[0-9a-fA-F]{3}",vb="\\#[0-9a-fA-F]{6}",Qf=function(e,r){return e<r?-1:e>r?1:0},cb=function(e,r){return-1*Qf(e,r)},_e=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o];t[s]=n[s]}}return t},db=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,o,s=16;return r?(n=parseInt(e[1]+e[1],s),a=parseInt(e[2]+e[2],s),o=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),a=parseInt(e[3]+e[4],s),o=parseInt(e[5]+e[6],s)),[n,a,o]}},hb=function(e){var r,n,a,o,s,l,v,f;function c(p,x,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?p+(x-p)*6*w:w<1/2?x:w<2/3?p+(x-p)*(2/3-w)*6:p}var h=new RegExp("^"+ub+"$").exec(e);if(h){if(n=parseInt(h[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(h[2]),a<0||a>100||(a=a/100,o=parseFloat(h[3]),o<0||o>100)||(o=o/100,s=h[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(a===0)l=v=f=Math.round(o*255);else{var g=o<.5?o*(1+a):o+a-o*a,m=2*o-g;l=Math.round(255*c(m,g,n+1/3)),v=Math.round(255*c(m,g,n)),f=Math.round(255*c(m,g,n-1/3))}r=[l,v,f,s]}return r},gb=function(e){var r,n=new RegExp("^"+ob+"$").exec(e);if(n){r=[];for(var a=[],o=1;o<=3;o++){var s=n[o];if(s[s.length-1]==="%"&&(a[o]=!0),s=parseFloat(s),a[o]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var l=a[1]||a[2]||a[3],v=a[1]&&a[2]&&a[3];if(l&&!v)return;var f=n[4];if(f!==void 0){if(f=parseFloat(f),f<0||f>1)return;r.push(f)}}return r},pb=function(e){return yb[e.toLowerCase()]},mb=function(e){return(ct(e)?e:null)||pb(e)||db(e)||gb(e)||hb(e)},yb={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Jf=function(e){for(var r=e.map,n=e.keys,a=n.length,o=0;o<a;o++){var s=n[o];if(tt(s))throw Error("Tried to set map with object key");o<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=e.value}},jf=function(e){for(var r=e.map,n=e.keys,a=n.length,o=0;o<a;o++){var s=n[o];if(tt(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},nu=Lt?Lt.performance:null,ev=nu&&nu.now?function(){return nu.now()}:function(){return Date.now()},bb=function(){if(Lt){if(Lt.requestAnimationFrame)return function(t){Lt.requestAnimationFrame(t)};if(Lt.mozRequestAnimationFrame)return function(t){Lt.mozRequestAnimationFrame(t)};if(Lt.webkitRequestAnimationFrame)return function(t){Lt.webkitRequestAnimationFrame(t)};if(Lt.msRequestAnimationFrame)return function(t){Lt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(ev())},1e3/60)}}(),fo=function(e){return bb(e)},rn=ev,ma=9261,tv=65599,vi=5381,rv=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ma,n=r,a;a=e.next(),!a.done;)n=n*tv+a.value|0;return n},ci=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ma;return r*tv+e|0},di=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vi;return(r<<5)+r+e|0},wb=function(e,r){return e*2097152+r},wn=function(e){return e[0]*2097152+e[1]},vo=function(e,r){return[ci(e[0],r[0]),di(e[1],r[1])]},xb=function(e,r){var n={value:0,done:!1},a=0,o=e.length,s={next:function(){return a<o?n.value=e[a++]:n.done=!0,n}};return rv(s,r)},Gn=function(e,r){var n={value:0,done:!1},a=0,o=e.length,s={next:function(){return a<o?n.value=e.charCodeAt(a++):n.done=!0,n}};return rv(s,r)},nv=function(){return Eb(arguments)},Eb=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=Gn(a):r=Gn(a,r)}return r},av=!0,Sb=console.warn!=null,Cb=console.trace!=null,au=Number.MAX_SAFE_INTEGER||9007199254740991,iv=function(){return!0},co=function(){return!1},ov=function(){return 0},iu=function(){},St=function(e){throw new Error(e)},sv=function(e){if(e!==void 0)av=!!e;else return av},st=function(e){sv()&&(Sb?console.warn(e):(console.log(e),Cb&&console.trace()))},Tb=function(e){return _e({},e)},Kr=function(e){return e==null?e:ct(e)?e.slice():tt(e)?Tb(e):e},Db=function(e){return e.slice()},uv=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},Ab={},lv=function(){return Ab},$t=function(e){var r=Object.keys(e);return function(n){for(var a={},o=0;o<r.length;o++){var s=r[o],l=n?.[s];a[s]=l===void 0?e[s]:l}return a}},xn=function(e,r,n){for(var a=e.length-1;a>=0&&!(e[a]===r&&(e.splice(a,1),n));a--);},ou=function(e){e.splice(0,e.length)},Pb=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Nr=function(e,r,n){return n&&(r=Xf(n,r)),e[r]},En=function(e,r,n,a){n&&(r=Xf(n,r)),e[r]=a},Lb=function(){function t(){js(this,t),this._obj={}}return eu(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),Yr=typeof Map<"u"?Map:Lb,kb="undefined",Bb=function(){function t(e){if(js(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return eu(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}]),t}(),ya=(typeof Set>"u"?"undefined":Pt(Set))!==kb?Set:Bb,ho=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!tu(e)){St("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){St("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new ya,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),r.renderedPosition){var s=r.renderedPosition,l=e.pan(),v=e.zoom();o.position={x:(s.x-l.x)/v,y:(s.y-l.y)/v}}var f=[];ct(r.classes)?f=r.classes:ke(r.classes)&&(f=r.classes.split(/\s+/));for(var c=0,h=f.length;c<h;c++){var g=f[c];!g||g===""||o.classes.add(g)}this.createEmitter();var m=r.style||r.css;m&&(st("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(m)),(n===void 0||n)&&this.restore()},fv=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,o){var s;tt(n)&&!mr(n)&&(s=n,n=s.roots||s.root,a=s.visit,o=s.directed),o=arguments.length===2&&!xt(a)?a:o,a=xt(a)?a:function(){};for(var l=this._private.cy,v=n=ke(n)?this.filter(n):n,f=[],c=[],h={},g={},m={},p=0,x,w=this.byGroup(),y=w.nodes,E=w.edges,S=0;S<v.length;S++){var T=v[S],k=T.id();T.isNode()&&(f.unshift(T),e.bfs&&(m[k]=!0,c.push(T)),g[k]=0)}for(var L=function(){var F=e.bfs?f.shift():f.pop(),M=F.id();if(e.dfs){if(m[M])return"continue";m[M]=!0,c.push(F)}var H=g[M],$=h[M],q=$!=null?$.source():null,U=$!=null?$.target():null,X=$==null?void 0:F.same(q)?U[0]:q[0],J=void 0;if(J=a(F,$,X,p++,H),J===!0)return x=F,"break";if(J===!1)return"break";for(var Y=F.connectedEdges().filter(function(ne){return(!o||ne.source().same(F))&&E.has(ne)}),j=0;j<Y.length;j++){var ie=Y[j],se=ie.connectedNodes().filter(function(ne){return!ne.same(F)&&y.has(ne)}),ee=se.id();se.length!==0&&!m[ee]&&(se=se[0],f.push(se),e.bfs&&(m[ee]=!0,c.push(se)),h[ee]=ie,g[ee]=g[M]+1)}};f.length!==0;){var D=L();if(D!=="continue"&&D==="break")break}for(var _=l.collection(),A=0;A<c.length;A++){var O=c[A],N=h[O.id()];N!=null&&_.push(N),_.push(O)}return{path:l.collection(_),found:l.collection(x)}}},hi={breadthFirstSearch:fv({bfs:!0}),depthFirstSearch:fv({dfs:!0})};hi.bfs=hi.breadthFirstSearch,hi.dfs=hi.depthFirstSearch;var Rb=$t({root:null,weight:function(e){return 1},directed:!1}),_b={dijkstra:function(e){if(!tt(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=Rb(e),a=n.root,o=n.weight,s=n.directed,l=this,v=o,f=ke(a)?this.filter(a)[0]:a[0],c={},h={},g={},m=this.byGroup(),p=m.nodes,x=m.edges;x.unmergeBy(function(H){return H.isLoop()});for(var w=function($){return c[$.id()]},y=function($,q){c[$.id()]=q,E.updateItem($)},E=new si.default(function(H,$){return w(H)-w($)}),S=0;S<p.length;S++){var T=p[S];c[T.id()]=T.same(f)?0:1/0,E.push(T)}for(var k=function($,q){for(var U=(s?$.edgesTo(q):$.edgesWith(q)).intersect(x),X=1/0,J,Y=0;Y<U.length;Y++){var j=U[Y],ie=v(j);(ie<X||!J)&&(X=ie,J=j)}return{edge:J,dist:X}};E.size()>0;){var L=E.pop(),D=w(L),_=L.id();if(g[_]=D,D!==1/0)for(var A=L.neighborhood().intersect(p),O=0;O<A.length;O++){var N=A[O],R=N.id(),F=k(L,N),M=D+F.dist;M<w(N)&&(y(N,M),h[R]={node:L,edge:F.edge})}}return{distanceTo:function($){var q=ke($)?p.filter($)[0]:$[0];return g[q.id()]},pathTo:function($){var q=ke($)?p.filter($)[0]:$[0],U=[],X=q,J=X.id();if(q.length>0)for(U.unshift(q);h[J];){var Y=h[J];U.unshift(Y.edge),U.unshift(Y.node),X=Y.node,J=X.id()}return l.spawn(U)}}}},Ib={kruskal:function(e){e=e||function(S){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,o=n.length,s=new Array(o),l=n,v=function(T){for(var k=0;k<s.length;k++){var L=s[k];if(L.has(T))return k}},f=0;f<o;f++)s[f]=this.spawn(n[f]);for(var c=a.sort(function(S,T){return e(S)-e(T)}),h=0;h<c.length;h++){var g=c[h],m=g.source()[0],p=g.target()[0],x=v(m),w=v(p),y=s[x],E=s[w];x!==w&&(l.merge(g),y.merge(E),s.splice(w,1))}return l}},Mb=$t({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Ob={aStar:function(e){var r=this.cy(),n=Mb(e),a=n.root,o=n.goal,s=n.heuristic,l=n.directed,v=n.weight;a=r.collection(a)[0],o=r.collection(o)[0];var f=a.id(),c=o.id(),h={},g={},m={},p=new si.default(function(J,Y){return g[J.id()]-g[Y.id()]}),x=new ya,w={},y={},E=function(Y,j){p.push(Y),x.add(j)},S,T,k=function(){S=p.pop(),T=S.id(),x.delete(T)},L=function(Y){return x.has(Y)};E(a,f),h[f]=0,g[f]=s(a);for(var D=0;p.size()>0;){if(k(),D++,T===c){for(var _=[],A=o,O=c,N=y[O];_.unshift(A),N!=null&&_.unshift(N),A=w[O],A!=null;)O=A.id(),N=y[O];return{found:!0,distance:h[T],path:this.spawn(_),steps:D}}m[T]=!0;for(var R=S._private.edges,F=0;F<R.length;F++){var M=R[F];if(this.hasElementWithId(M.id())&&!(l&&M.data("source")!==T)){var H=M.source(),$=M.target(),q=H.id()!==T?H:$,U=q.id();if(this.hasElementWithId(U)&&!m[U]){var X=h[T]+v(M);if(!L(U)){h[U]=X,g[U]=X+s(q),E(q,U),w[U]=S,y[U]=M;continue}X<h[U]&&(h[U]=X,g[U]=X+s(q),w[U]=S,y[U]=M)}}}}return{found:!1,distance:void 0,path:void 0,steps:D}}},Nb=$t({weight:function(e){return 1},directed:!1}),zb={floydWarshall:function(e){for(var r=this.cy(),n=Nb(e),a=n.weight,o=n.directed,s=a,l=this.byGroup(),v=l.nodes,f=l.edges,c=v.length,h=c*c,g=function(ie){return v.indexOf(ie)},m=function(ie){return v[ie]},p=new Array(h),x=0;x<h;x++){var w=x%c,y=(x-w)/c;y===w?p[x]=0:p[x]=1/0}for(var E=new Array(h),S=new Array(h),T=0;T<f.length;T++){var k=f[T],L=k.source()[0],D=k.target()[0];if(L!==D){var _=g(L),A=g(D),O=_*c+A,N=s(k);if(p[O]>N&&(p[O]=N,E[O]=A,S[O]=k),!o){var R=A*c+_;!o&&p[R]>N&&(p[R]=N,E[R]=_,S[R]=k)}}}for(var F=0;F<c;F++)for(var M=0;M<c;M++)for(var H=M*c+F,$=0;$<c;$++){var q=M*c+$,U=F*c+$;p[H]+p[U]<p[q]&&(p[q]=p[H]+p[U],E[q]=E[H])}var X=function(ie){return(ke(ie)?r.filter(ie):ie)[0]},J=function(ie){return g(X(ie))},Y={distance:function(ie,se){var ee=J(ie),ne=J(se);return p[ee*c+ne]},path:function(ie,se){var ee=J(ie),ne=J(se),K=m(ee);if(ee===ne)return K.collection();if(E[ee*c+ne]==null)return r.collection();var oe=r.collection(),ue=ee,ge;for(oe.merge(K);ee!==ne;)ue=ee,ee=E[ee*c+ne],ge=S[ue*c+ee],oe.merge(ge),oe.merge(m(ee));return oe}};return Y}},Fb=$t({weight:function(e){return 1},directed:!1,root:null}),$b={bellmanFord:function(e){var r=this,n=Fb(e),a=n.weight,o=n.directed,s=n.root,l=a,v=this,f=this.cy(),c=this.byGroup(),h=c.edges,g=c.nodes,m=g.length,p=new Yr,x=!1,w=[];s=f.collection(s)[0],h.unmergeBy(function(xe){return xe.isLoop()});for(var y=h.length,E=function(be){var Te=p.get(be.id());return Te||(Te={},p.set(be.id(),Te)),Te},S=function(be){return(ke(be)?f.$(be):be)[0]},T=function(be){return E(S(be)).dist},k=function(be){for(var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,$e=S(be),Re=[],Le=$e;;){if(Le==null)return r.spawn();var Je=E(Le),de=Je.edge,I=Je.pred;if(Re.unshift(Le[0]),Le.same(Te)&&Re.length>0)break;de!=null&&Re.unshift(de),Le=I}return v.spawn(Re)},L=0;L<m;L++){var D=g[L],_=E(D);D.same(s)?_.dist=0:_.dist=1/0,_.pred=null,_.edge=null}for(var A=!1,O=function(be,Te,$e,Re,Le,Je){var de=Re.dist+Je;de<Le.dist&&!$e.same(Re.edge)&&(Le.dist=de,Le.pred=be,Le.edge=$e,A=!0)},N=1;N<m;N++){A=!1;for(var R=0;R<y;R++){var F=h[R],M=F.source(),H=F.target(),$=l(F),q=E(M),U=E(H);O(M,H,F,q,U,$),o||O(H,M,F,U,q,$)}if(!A)break}if(A)for(var X=[],J=0;J<y;J++){var Y=h[J],j=Y.source(),ie=Y.target(),se=l(Y),ee=E(j).dist,ne=E(ie).dist;if(ee+se<ne||!o&&ne+se<ee)if(x||(st("Graph contains a negative weight cycle for Bellman-Ford"),x=!0),e.findNegativeWeightCycles!==!1){var K=[];ee+se<ne&&K.push(j),!o&&ne+se<ee&&K.push(ie);for(var oe=K.length,ue=0;ue<oe;ue++){var ge=K[ue],ye=[ge];ye.push(E(ge).edge);for(var Be=E(ge).pred;ye.indexOf(Be)===-1;)ye.push(Be),ye.push(E(Be).edge),Be=E(Be).pred;ye=ye.slice(ye.indexOf(Be));for(var ze=ye[0].id(),pe=0,me=2;me<ye.length;me+=2)ye[me].id()<ze&&(ze=ye[me].id(),pe=me);ye=ye.slice(pe).concat(ye.slice(0,pe)),ye.push(ye[0]);var De=ye.map(function(xe){return xe.id()}).join(",");X.indexOf(De)===-1&&(w.push(v.spawn(ye)),X.push(De))}}else break}return{distanceTo:T,pathTo:k,hasNegativeWeightCycle:x,negativeWeightCycles:w}}},qb=Math.sqrt(2),Vb=function(e,r,n){n.length===0&&St("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],o=a[1],s=a[2],l=r[o],v=r[s],f=n,c=f.length-1;c>=0;c--){var h=f[c],g=h[1],m=h[2];(r[g]===l&&r[m]===v||r[g]===v&&r[m]===l)&&f.splice(c,1)}for(var p=0;p<f.length;p++){var x=f[p];x[1]===v?(f[p]=x.slice(),f[p][1]=l):x[2]===v&&(f[p]=x.slice(),f[p][2]=l)}for(var w=0;w<r.length;w++)r[w]===v&&(r[w]=l);return f},su=function(e,r,n,a){for(;n>a;){var o=Math.floor(Math.random()*r.length);r=Vb(o,e,r),n--}return r},Wb={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(U){return U.isLoop()});var o=n.length,s=a.length,l=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),v=Math.floor(o/qb);if(o<2){St("At least 2 nodes are required for Karger-Stein algorithm");return}for(var f=[],c=0;c<s;c++){var h=a[c];f.push([c,n.indexOf(h.source()),n.indexOf(h.target())])}for(var g=1/0,m=[],p=new Array(o),x=new Array(o),w=new Array(o),y=function(X,J){for(var Y=0;Y<o;Y++)J[Y]=X[Y]},E=0;E<=l;E++){for(var S=0;S<o;S++)x[S]=S;var T=su(x,f.slice(),o,v),k=T.slice();y(x,w);var L=su(x,T,v,2),D=su(w,k,v,2);L.length<=D.length&&L.length<g?(g=L.length,m=L,y(x,p)):D.length<=L.length&&D.length<g&&(g=D.length,m=D,y(w,p))}for(var _=this.spawn(m.map(function(U){return a[U[0]]})),A=this.spawn(),O=this.spawn(),N=p[0],R=0;R<p.length;R++){var F=p[R],M=n[R];F===N?A.merge(M):O.merge(M)}var H=function(X){var J=e.spawn();return X.forEach(function(Y){J.merge(Y),Y.connectedEdges().forEach(function(j){e.contains(j)&&!_.contains(j)&&J.merge(j)})}),J},$=[H(A),H(O)],q={cut:_,components:$,partition1:A,partition2:O};return q}},Hb=function(e){return{x:e.x,y:e.y}},go=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},vv=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},ba=function(e){return{x:e[0],y:e[1]}},Gb=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(a=Math.min(s,a))}return a},Ub=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(a=Math.max(s,a))}return a},Kb=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,o=0,s=r;s<n;s++){var l=e[s];isFinite(l)&&(a+=l,o++)}return a/o},Yb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var l=0,v=e.length-1;v>=0;v--){var f=e[v];s?isFinite(f)||(e[v]=-1/0,l++):e.splice(v,1)}o&&e.sort(function(g,m){return g-m});var c=e.length,h=Math.floor(c/2);return c%2!==0?e[h+1+l]:(e[h-1+l]+e[h+l])/2},Xb=function(e){return Math.PI*e/180},po=function(e,r){return Math.atan2(r,e)-Math.PI/2},uu=Math.log2||function(t){return Math.log(t)/Math.log(2)},cv=function(e){return e>0?1:e<0?-1:0},Un=function(e,r){return Math.sqrt(Kn(e,r))},Kn=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},Zb=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var o=0;o<r;o++)e[o]=e[o]/n;return e},Ot=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},wa=function(e,r,n,a){return{x:Ot(e.x,r.x,n.x,a),y:Ot(e.y,r.y,n.y,a)}},Qb=function(e,r,n,a){var o={x:r.x-e.x,y:r.y-e.y},s=Un(e,r),l={x:o.x/s,y:o.y/s};return n=n??0,a=a??n*s,{x:e.x+l.x*a,y:e.y+l.y*a}},gi=function(e,r,n){return Math.max(e,Math.min(n,r))},sr=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Jb=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},jb=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},ew=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},tw=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},mo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},lu=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,o,s;if(r.length===1)n=a=o=s=r[0];else if(r.length===2)n=o=r[0],s=a=r[1];else if(r.length===4){var l=tn(r,4);n=l[0],a=l[1],o=l[2],s=l[3]}return e.x1-=s,e.x2+=a,e.y1-=n,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},dv=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},fu=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},xa=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},rw=function(e,r){return xa(e,r.x,r.y)},hv=function(e,r){return xa(e,r.x1,r.y1)&&xa(e,r.x2,r.y2)},gv=function(e,r,n,a,o,s,l){var v=yi(o,s),f=o/2,c=s/2,h;{var g=n-f+v-l,m=a-c-l,p=n+f-v+l,x=m;if(h=Sn(e,r,n,a,g,m,p,x,!1),h.length>0)return h}{var w=n+f+l,y=a-c+v-l,E=w,S=a+c-v+l;if(h=Sn(e,r,n,a,w,y,E,S,!1),h.length>0)return h}{var T=n-f+v-l,k=a+c+l,L=n+f-v+l,D=k;if(h=Sn(e,r,n,a,T,k,L,D,!1),h.length>0)return h}{var _=n-f-l,A=a-c+v-l,O=_,N=a+c-v+l;if(h=Sn(e,r,n,a,_,A,O,N,!1),h.length>0)return h}var R;{var F=n-f+v,M=a-c+v;if(R=pi(e,r,n,a,F,M,v+l),R.length>0&&R[0]<=F&&R[1]<=M)return[R[0],R[1]]}{var H=n+f-v,$=a-c+v;if(R=pi(e,r,n,a,H,$,v+l),R.length>0&&R[0]>=H&&R[1]<=$)return[R[0],R[1]]}{var q=n+f-v,U=a+c-v;if(R=pi(e,r,n,a,q,U,v+l),R.length>0&&R[0]>=q&&R[1]>=U)return[R[0],R[1]]}{var X=n-f+v,J=a+c-v;if(R=pi(e,r,n,a,X,J,v+l),R.length>0&&R[0]<=X&&R[1]>=J)return[R[0],R[1]]}return[]},nw=function(e,r,n,a,o,s,l){var v=l,f=Math.min(n,o),c=Math.max(n,o),h=Math.min(a,s),g=Math.max(a,s);return f-v<=e&&e<=c+v&&h-v<=r&&r<=g+v},aw=function(e,r,n,a,o,s,l,v,f){var c={x1:Math.min(n,l,o)-f,x2:Math.max(n,l,o)+f,y1:Math.min(a,v,s)-f,y2:Math.max(a,v,s)+f};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},iw=function(e,r,n,a){n-=a;var o=r*r-4*e*n;if(o<0)return[];var s=Math.sqrt(o),l=2*e,v=(-r+s)/l,f=(-r-s)/l;return[v,f]},ow=function(e,r,n,a,o){var s=1e-5;e===0&&(e=s),r/=e,n/=e,a/=e;var l,v,f,c,h,g,m,p;if(v=(3*n-r*r)/9,f=-(27*a)+r*(9*n-2*(r*r)),f/=54,l=v*v*v+f*f,o[1]=0,m=r/3,l>0){h=f+Math.sqrt(l),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),g=f-Math.sqrt(l),g=g<0?-Math.pow(-g,1/3):Math.pow(g,1/3),o[0]=-m+h+g,m+=(h+g)/2,o[4]=o[2]=-m,m=Math.sqrt(3)*(-g+h)/2,o[3]=m,o[5]=-m;return}if(o[5]=o[3]=0,l===0){p=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),o[0]=-m+2*p,o[4]=o[2]=-(p+m);return}v=-v,c=v*v*v,c=Math.acos(f/Math.sqrt(c)),p=2*Math.sqrt(v),o[0]=-m+p*Math.cos(c/3),o[2]=-m+p*Math.cos((c+2*Math.PI)/3),o[4]=-m+p*Math.cos((c+4*Math.PI)/3)},sw=function(e,r,n,a,o,s,l,v){var f=1*n*n-4*n*o+2*n*l+4*o*o-4*o*l+l*l+a*a-4*a*s+2*a*v+4*s*s-4*s*v+v*v,c=1*9*n*o-3*n*n-3*n*l-6*o*o+3*o*l+9*a*s-3*a*a-3*a*v-6*s*s+3*s*v,h=1*3*n*n-6*n*o+n*l-n*e+2*o*o+2*o*e-l*e+3*a*a-6*a*s+a*v-a*r+2*s*s+2*s*r-v*r,g=1*n*o-n*n+n*e-o*e+a*s-a*a+a*r-s*r,m=[];ow(f,c,h,g,m);for(var p=1e-7,x=[],w=0;w<6;w+=2)Math.abs(m[w+1])<p&&m[w]>=0&&m[w]<=1&&x.push(m[w]);x.push(1),x.push(0);for(var y=-1,E,S,T,k=0;k<x.length;k++)E=Math.pow(1-x[k],2)*n+2*(1-x[k])*x[k]*o+x[k]*x[k]*l,S=Math.pow(1-x[k],2)*a+2*(1-x[k])*x[k]*s+x[k]*x[k]*v,T=Math.pow(E-e,2)+Math.pow(S-r,2),y>=0?T<y&&(y=T):y=T;return y},uw=function(e,r,n,a,o,s){var l=[e-n,r-a],v=[o-n,s-a],f=v[0]*v[0]+v[1]*v[1],c=l[0]*l[0]+l[1]*l[1],h=l[0]*v[0]+l[1]*v[1],g=h*h/f;return h<0?c:g>f?(e-o)*(e-o)+(r-s)*(r-s):c-g},ur=function(e,r,n){for(var a,o,s,l,v,f=0,c=0;c<n.length/2;c++)if(a=n[c*2],o=n[c*2+1],c+1<n.length/2?(s=n[(c+1)*2],l=n[(c+1)*2+1]):(s=n[(c+1-n.length/2)*2],l=n[(c+1-n.length/2)*2+1]),!(a==e&&s==e))if(a>=e&&e>=s||a<=e&&e<=s)v=(e-a)/(s-a)*(l-o)+o,v>r&&f++;else continue;return f%2!==0},nn=function(e,r,n,a,o,s,l,v,f){var c=new Array(n.length),h;v[0]!=null?(h=Math.atan(v[1]/v[0]),v[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=v;for(var g=Math.cos(-h),m=Math.sin(-h),p=0;p<c.length/2;p++)c[p*2]=s/2*(n[p*2]*g-n[p*2+1]*m),c[p*2+1]=l/2*(n[p*2+1]*g+n[p*2]*m),c[p*2]+=a,c[p*2+1]+=o;var x;if(f>0){var w=mv(c,-f);x=pv(w)}else x=c;return ur(e,r,x)},lw=function(e,r,n,a,o,s,l){for(var v=new Array(n.length),f=s/2,c=l/2,h=du(s,l),g=h*h,m=0;m<n.length/4;m++){var p=void 0,x=void 0;m===0?p=n.length-2:p=m*4-2,x=m*4+2;var w=a+f*n[m*4],y=o+c*n[m*4+1],E=-n[p]*n[x]-n[p+1]*n[x+1],S=h/Math.tan(Math.acos(E)/2),T=w-S*n[p],k=y-S*n[p+1],L=w+S*n[x],D=y+S*n[x+1];v[m*4]=T,v[m*4+1]=k,v[m*4+2]=L,v[m*4+3]=D;var _=n[p+1],A=-n[p],O=_*n[x]+A*n[x+1];O<0&&(_*=-1,A*=-1);var N=T+_*h,R=k+A*h,F=Math.pow(N-e,2)+Math.pow(R-r,2);if(F<=g)return!0}return ur(e,r,v)},pv=function(e){for(var r=new Array(e.length/2),n,a,o,s,l,v,f,c,h=0;h<e.length/4;h++){n=e[h*4],a=e[h*4+1],o=e[h*4+2],s=e[h*4+3],h<e.length/4-1?(l=e[(h+1)*4],v=e[(h+1)*4+1],f=e[(h+1)*4+2],c=e[(h+1)*4+3]):(l=e[0],v=e[1],f=e[2],c=e[3]);var g=Sn(n,a,o,s,l,v,f,c,!0);r[h*2]=g[0],r[h*2+1]=g[1]}return r},mv=function(e,r){for(var n=new Array(e.length*2),a,o,s,l,v=0;v<e.length/2;v++){a=e[v*2],o=e[v*2+1],v<e.length/2-1?(s=e[(v+1)*2],l=e[(v+1)*2+1]):(s=e[0],l=e[1]);var f=l-o,c=-(s-a),h=Math.sqrt(f*f+c*c),g=f/h,m=c/h;n[v*4]=a+g*r,n[v*4+1]=o+m*r,n[v*4+2]=s+g*r,n[v*4+3]=l+m*r}return n},fw=function(e,r,n,a,o,s){var l=n-e,v=a-r;l/=o,v/=s;var f=Math.sqrt(l*l+v*v),c=f-1;if(c<0)return[];var h=c/f;return[(n-e)*h+e,(a-r)*h+r]},Yn=function(e,r,n,a,o,s,l){return e-=o,r-=s,e/=n/2+l,r/=a/2+l,e*e+r*r<=1},pi=function(e,r,n,a,o,s,l){var v=[n-e,a-r],f=[e-o,r-s],c=v[0]*v[0]+v[1]*v[1],h=2*(f[0]*v[0]+f[1]*v[1]),g=f[0]*f[0]+f[1]*f[1]-l*l,m=h*h-4*c*g;if(m<0)return[];var p=(-h+Math.sqrt(m))/(2*c),x=(-h-Math.sqrt(m))/(2*c),w=Math.min(p,x),y=Math.max(p,x),E=[];if(w>=0&&w<=1&&E.push(w),y>=0&&y<=1&&E.push(y),E.length===0)return[];var S=E[0]*v[0]+e,T=E[0]*v[1]+r;if(E.length>1){if(E[0]==E[1])return[S,T];var k=E[1]*v[0]+e,L=E[1]*v[1]+r;return[S,T,k,L]}else return[S,T]},vu=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},Sn=function(e,r,n,a,o,s,l,v,f){var c=e-o,h=n-e,g=l-o,m=r-s,p=a-r,x=v-s,w=g*m-x*c,y=h*m-p*c,E=x*h-g*p;if(E!==0){var S=w/E,T=y/E,k=.001,L=0-k,D=1+k;return L<=S&&S<=D&&L<=T&&T<=D?[e+S*h,r+S*p]:f?[e+S*h,r+S*p]:[]}else return w===0||y===0?vu(e,n,l)===l?[l,v]:vu(e,n,o)===o?[o,s]:vu(o,l,n)===n?[n,a]:[]:[]},mi=function(e,r,n,a,o,s,l,v){var f=[],c,h=new Array(n.length),g=!0;s==null&&(g=!1);var m;if(g){for(var p=0;p<h.length/2;p++)h[p*2]=n[p*2]*s+a,h[p*2+1]=n[p*2+1]*l+o;if(v>0){var x=mv(h,-v);m=pv(x)}else m=h}else m=n;for(var w,y,E,S,T=0;T<m.length/2;T++)w=m[T*2],y=m[T*2+1],T<m.length/2-1?(E=m[(T+1)*2],S=m[(T+1)*2+1]):(E=m[0],S=m[1]),c=Sn(e,r,a,o,w,y,E,S),c.length!==0&&f.push(c[0],c[1]);return f},vw=function(e,r,n,a,o,s,l,v){for(var f=[],c,h=new Array(n.length),g=s/2,m=l/2,p=du(s,l),x=0;x<n.length/4;x++){var w=void 0,y=void 0;x===0?w=n.length-2:w=x*4-2,y=x*4+2;var E=a+g*n[x*4],S=o+m*n[x*4+1],T=-n[w]*n[y]-n[w+1]*n[y+1],k=p/Math.tan(Math.acos(T)/2),L=E-k*n[w],D=S-k*n[w+1],_=E+k*n[y],A=S+k*n[y+1];x===0?(h[n.length-2]=L,h[n.length-1]=D):(h[x*4-2]=L,h[x*4-1]=D),h[x*4]=_,h[x*4+1]=A;var O=n[w+1],N=-n[w],R=O*n[y]+N*n[y+1];R<0&&(O*=-1,N*=-1);var F=L+O*p,M=D+N*p;c=pi(e,r,a,o,F,M,p),c.length!==0&&f.push(c[0],c[1])}for(var H=0;H<h.length/4;H++)c=Sn(e,r,a,o,h[H*4],h[H*4+1],h[H*4+2],h[H*4+3],!1),c.length!==0&&f.push(c[0],c[1]);if(f.length>2){for(var $=[f[0],f[1]],q=Math.pow($[0]-e,2)+Math.pow($[1]-r,2),U=1;U<f.length/2;U++){var X=Math.pow(f[U*2]-e,2)+Math.pow(f[U*2+1]-r,2);X<=q&&($[0]=f[U*2],$[1]=f[U*2+1],q=X)}return $}return f},yo=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=(o-n)/o;return s<0&&(s=1e-5),[r[0]+s*a[0],r[1]+s*a[1]]},rr=function(e,r){var n=cu(e,r);return n=yv(n),n},yv=function(e){for(var r,n,a=e.length/2,o=1/0,s=1/0,l=-1/0,v=-1/0,f=0;f<a;f++)r=e[2*f],n=e[2*f+1],o=Math.min(o,r),l=Math.max(l,r),s=Math.min(s,n),v=Math.max(v,n);for(var c=2/(l-o),h=2/(v-s),g=0;g<a;g++)r=e[2*g]=e[2*g]*c,n=e[2*g+1]=e[2*g+1]*h,o=Math.min(o,r),l=Math.max(l,r),s=Math.min(s,n),v=Math.max(v,n);if(s<-1)for(var m=0;m<a;m++)n=e[2*m+1]=e[2*m+1]+(-1-s);return e},cu=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var o=new Array(e*2),s,l=0;l<e;l++)s=l*n+a,o[2*l]=Math.cos(s),o[2*l+1]=Math.sin(-s);return o},yi=function(e,r){return Math.min(e/4,r/4,8)},du=function(e,r){return Math.min(e/10,r/10,8)},bv=function(){return 8},cw=function(e,r,n){return[e-2*r+n,2*(r-e),e]},hu=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},dw=$t({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),hw={pageRank:function(e){for(var r=dw(e),n=r.dampingFactor,a=r.precision,o=r.iterations,s=r.weight,l=this._private.cy,v=this.byGroup(),f=v.nodes,c=v.edges,h=f.length,g=h*h,m=c.length,p=new Array(g),x=new Array(h),w=(1-n)/h,y=0;y<h;y++){for(var E=0;E<h;E++){var S=y*h+E;p[S]=0}x[y]=0}for(var T=0;T<m;T++){var k=c[T],L=k.data("source"),D=k.data("target");if(L!==D){var _=f.indexOfId(L),A=f.indexOfId(D),O=s(k),N=A*h+_;p[N]+=O,x[_]+=O}}for(var R=1/h+w,F=0;F<h;F++)if(x[F]===0)for(var M=0;M<h;M++){var H=M*h+F;p[H]=R}else for(var $=0;$<h;$++){var q=$*h+F;p[q]=p[q]/x[F]+w}for(var U=new Array(h),X=new Array(h),J,Y=0;Y<h;Y++)U[Y]=1;for(var j=0;j<o;j++){for(var ie=0;ie<h;ie++)X[ie]=0;for(var se=0;se<h;se++)for(var ee=0;ee<h;ee++){var ne=se*h+ee;X[se]+=p[ne]*U[ee]}Zb(X),J=U,U=X,X=J;for(var K=0,oe=0;oe<h;oe++){var ue=J[oe]-U[oe];K+=ue*ue}if(K<a)break}var ge={rank:function(Be){return Be=l.collection(Be)[0],U[f.indexOf(Be)]}};return ge}},wv=$t({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Ea={degreeCentralityNormalized:function(e){e=wv(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},h={},g=0,m=0,p=0;p<a;p++){var x=n[p],w=x.id();e.root=x;var y=this.degreeCentrality(e);g<y.indegree&&(g=y.indegree),m<y.outdegree&&(m=y.outdegree),c[w]=y.indegree,h[w]=y.outdegree}return{indegree:function(S){return g==0?0:(ke(S)&&(S=r.filter(S)),c[S.id()]/g)},outdegree:function(S){return m===0?0:(ke(S)&&(S=r.filter(S)),h[S.id()]/m)}}}else{for(var o={},s=0,l=0;l<a;l++){var v=n[l];e.root=v;var f=this.degreeCentrality(e);s<f.degree&&(s=f.degree),o[v.id()]=f.degree}return{degree:function(S){return s===0?0:(ke(S)&&(S=r.filter(S)),o[S.id()]/s)}}}},degreeCentrality:function(e){e=wv(e);var r=this.cy(),n=this,a=e,o=a.root,s=a.weight,l=a.directed,v=a.alpha;if(o=r.collection(o)[0],l){for(var m=o.connectedEdges(),p=m.filter(function(L){return L.target().same(o)&&n.has(L)}),x=m.filter(function(L){return L.source().same(o)&&n.has(L)}),w=p.length,y=x.length,E=0,S=0,T=0;T<p.length;T++)E+=s(p[T]);for(var k=0;k<x.length;k++)S+=s(x[k]);return{indegree:Math.pow(w,1-v)*Math.pow(E,v),outdegree:Math.pow(y,1-v)*Math.pow(S,v)}}else{for(var f=o.connectedEdges().intersection(n),c=f.length,h=0,g=0;g<f.length;g++)h+=s(f[g]);return{degree:Math.pow(c,1-v)*Math.pow(h,v)}}}};Ea.dc=Ea.degreeCentrality,Ea.dcn=Ea.degreeCentralityNormalised=Ea.degreeCentralityNormalized;var xv=$t({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Sa={closenessCentralityNormalized:function(e){for(var r=xv(e),n=r.harmonic,a=r.weight,o=r.directed,s=this.cy(),l={},v=0,f=this.nodes(),c=this.floydWarshall({weight:a,directed:o}),h=0;h<f.length;h++){for(var g=0,m=f[h],p=0;p<f.length;p++)if(h!==p){var x=c.distance(m,f[p]);n?g+=1/x:g+=x}n||(g=1/g),v<g&&(v=g),l[m.id()]=g}return{closeness:function(y){return v==0?0:(ke(y)?y=s.filter(y)[0].id():y=y.id(),l[y]/v)}}},closenessCentrality:function(e){var r=xv(e),n=r.root,a=r.weight,o=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var l=this.dijkstra({root:n,weight:a,directed:o}),v=0,f=this.nodes(),c=0;c<f.length;c++){var h=f[c];if(!h.same(n)){var g=l.distanceTo(h);s?v+=1/g:v+=g}}return s?v:1/v}};Sa.cc=Sa.closenessCentrality,Sa.ccn=Sa.closenessCentralityNormalised=Sa.closenessCentralityNormalized;var gw=$t({weight:null,directed:!1}),gu={betweennessCentrality:function(e){for(var r=gw(e),n=r.directed,a=r.weight,o=a!=null,s=this.cy(),l=this.nodes(),v={},f={},c=0,h={set:function(S,T){f[S]=T,T>c&&(c=T)},get:function(S){return f[S]}},g=0;g<l.length;g++){var m=l[g],p=m.id();n?v[p]=m.outgoers().nodes():v[p]=m.openNeighborhood().nodes(),h.set(p,0)}for(var x=function(S){for(var T=l[S].id(),k=[],L={},D={},_={},A=new si.default(function(ee,ne){return _[ee]-_[ne]}),O=0;O<l.length;O++){var N=l[O].id();L[N]=[],D[N]=0,_[N]=1/0}for(D[T]=1,_[T]=0,A.push(T);!A.empty();){var R=A.pop();if(k.push(R),o)for(var F=0;F<v[R].length;F++){var M=v[R][F],H=s.getElementById(R),$=void 0;H.edgesTo(M).length>0?$=H.edgesTo(M)[0]:$=M.edgesTo(H)[0];var q=a($);M=M.id(),_[M]>_[R]+q&&(_[M]=_[R]+q,A.nodes.indexOf(M)<0?A.push(M):A.updateItem(M),D[M]=0,L[M]=[]),_[M]==_[R]+q&&(D[M]=D[M]+D[R],L[M].push(R))}else for(var U=0;U<v[R].length;U++){var X=v[R][U].id();_[X]==1/0&&(A.push(X),_[X]=_[R]+1),_[X]==_[R]+1&&(D[X]=D[X]+D[R],L[X].push(R))}}for(var J={},Y=0;Y<l.length;Y++)J[l[Y].id()]=0;for(;k.length>0;){for(var j=k.pop(),ie=0;ie<L[j].length;ie++){var se=L[j][ie];J[se]=J[se]+D[se]/D[j]*(1+J[j])}j!=l[S].id()&&h.set(j,h.get(j)+J[j])}},w=0;w<l.length;w++)x(w);var y={betweenness:function(S){var T=s.collection(S).id();return h.get(T)},betweennessNormalized:function(S){if(c==0)return 0;var T=s.collection(S).id();return h.get(T)/c}};return y.betweennessNormalised=y.betweennessNormalized,y}};gu.bc=gu.betweennessCentrality;var pw=$t({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),mw=function(e){return pw(e)},yw=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},bw=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Ev=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var o=0;o<r;o++)n+=e[o*r+a];for(var s=0;s<r;s++)e[s*r+a]=e[s*r+a]/n}},ww=function(e,r,n){for(var a=new Array(n*n),o=0;o<n;o++){for(var s=0;s<n;s++)a[o*n+s]=0;for(var l=0;l<n;l++)for(var v=0;v<n;v++)a[o*n+v]+=e[o*n+l]*r[l*n+v]}return a},xw=function(e,r,n){for(var a=e.slice(0),o=1;o<n;o++)e=ww(e,a,r);return e},Ew=function(e,r,n){for(var a=new Array(r*r),o=0;o<r*r;o++)a[o]=Math.pow(e[o],n);return Ev(a,r),a},Sw=function(e,r,n,a){for(var o=0;o<n;o++){var s=Math.round(e[o]*Math.pow(10,a))/Math.pow(10,a),l=Math.round(r[o]*Math.pow(10,a))/Math.pow(10,a);if(s!==l)return!1}return!0},Cw=function(e,r,n,a){for(var o=[],s=0;s<r;s++){for(var l=[],v=0;v<r;v++)Math.round(e[s*r+v]*1e3)/1e3>0&&l.push(n[v]);l.length!==0&&o.push(a.collection(l))}return o},Tw=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},Dw=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&Tw(e[r],e[n])&&e.splice(n,1);return e},Sv=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),o=mw(e),s={},l=0;l<r.length;l++)s[r[l].id()]=l;for(var v=r.length,f=v*v,c=new Array(f),h,g=0;g<f;g++)c[g]=0;for(var m=0;m<n.length;m++){var p=n[m],x=s[p.source().id()],w=s[p.target().id()],y=yw(p,o.attributes);c[x*v+w]+=y,c[w*v+x]+=y}bw(c,v,o.multFactor),Ev(c,v);for(var E=!0,S=0;E&&S<o.maxIterations;)E=!1,h=xw(c,v,o.expandFactor),c=Ew(h,v,o.inflateFactor),Sw(c,h,f,4)||(E=!0),S++;var T=Cw(c,v,r,a);return T=Dw(T),T},Aw={markovClustering:Sv,mcl:Sv},Pw=function(e){return e},Cv=function(e,r){return Math.abs(r-e)},Tv=function(e,r,n){return e+Cv(r,n)},Dv=function(e,r,n){return e+Math.pow(n-r,2)},Lw=function(e){return Math.sqrt(e)},kw=function(e,r,n){return Math.max(e,Cv(r,n))},bi=function(e,r,n,a,o){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Pw,l=a,v,f,c=0;c<e;c++)v=r(c),f=n(c),l=o(l,v,f);return s(l)},Ca={euclidean:function(e,r,n){return e>=2?bi(e,r,n,0,Dv,Lw):bi(e,r,n,0,Tv)},squaredEuclidean:function(e,r,n){return bi(e,r,n,0,Dv)},manhattan:function(e,r,n){return bi(e,r,n,0,Tv)},max:function(e,r,n){return bi(e,r,n,-1/0,kw)}};Ca["squared-euclidean"]=Ca.squaredEuclidean,Ca.squaredeuclidean=Ca.squaredEuclidean;function bo(t,e,r,n,a,o){var s;return xt(t)?s=t:s=Ca[t]||Ca.euclidean,e===0&&xt(t)?s(a,o):s(e,r,n,a,o)}var Bw=$t({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),pu=function(e){return Bw(e)},wo=function(e,r,n,a,o){var s=o!=="kMedoids",l=s?function(h){return n[h]}:function(h){return a[h](n)},v=function(g){return a[g](r)},f=n,c=r;return bo(e,a.length,l,v,f,c)},mu=function(e,r,n){for(var a=n.length,o=new Array(a),s=new Array(a),l=new Array(r),v=null,f=0;f<a;f++)o[f]=e.min(n[f]).value,s[f]=e.max(n[f]).value;for(var c=0;c<r;c++){v=[];for(var h=0;h<a;h++)v[h]=Math.random()*(s[h]-o[h])+o[h];l[c]=v}return l},Av=function(e,r,n,a,o){for(var s=1/0,l=0,v=0;v<r.length;v++){var f=wo(n,e,r[v],a,o);f<s&&(s=f,l=v)}return l},Pv=function(e,r,n){for(var a=[],o=null,s=0;s<r.length;s++)o=r[s],n[o.id()]===e&&a.push(o);return a},Rw=function(e,r,n){return Math.abs(r-e)<=n},_w=function(e,r,n){for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++){var s=Math.abs(e[a][o]-r[a][o]);if(s>n)return!1}return!0},Iw=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Lv=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var o=e[Math.floor(Math.random()*e.length)];Iw(o,n,a);)o=e[Math.floor(Math.random()*e.length)];n[a]=o}else for(var s=0;s<r;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},kv=function(e,r,n){for(var a=0,o=0;o<r.length;o++)a+=wo("manhattan",r[o],e,n,"kMedoids");return a},Mw=function(e){var r=this.cy(),n=this.nodes(),a=null,o=pu(e),s=new Array(o.k),l={},v;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,v=mu(n,o.k,o.attributes)):Pt(o.testCentroids)==="object"?v=o.testCentroids:v=mu(n,o.k,o.attributes):v=mu(n,o.k,o.attributes);for(var f=!0,c=0;f&&c<o.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],l[a.id()]=Av(a,v,o.distance,o.attributes,"kMeans");f=!1;for(var g=0;g<o.k;g++){var m=Pv(g,n,l);if(m.length!==0){for(var p=o.attributes.length,x=v[g],w=new Array(p),y=new Array(p),E=0;E<p;E++){y[E]=0;for(var S=0;S<m.length;S++)a=m[S],y[E]+=o.attributes[E](a);w[E]=y[E]/m.length,Rw(w[E],x[E],o.sensitivityThreshold)||(f=!0)}v[g]=w,s[g]=r.collection(m)}}c++}return s},Ow=function(e){var r=this.cy(),n=this.nodes(),a=null,o=pu(e),s=new Array(o.k),l,v={},f,c=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(Pt(o.testCentroids)==="object"?l=o.testCentroids:l=Lv(n,o.k)):l=Lv(n,o.k);for(var h=!0,g=0;h&&g<o.maxIterations;){for(var m=0;m<n.length;m++)a=n[m],v[a.id()]=Av(a,l,o.distance,o.attributes,"kMedoids");h=!1;for(var p=0;p<l.length;p++){var x=Pv(p,n,v);if(x.length!==0){c[p]=kv(l[p],x,o.attributes);for(var w=0;w<x.length;w++)f=kv(x[w],x,o.attributes),f<c[p]&&(c[p]=f,l[p]=x[w],h=!0);s[p]=r.collection(x)}}g++}return s},Nw=function(e,r,n,a,o){for(var s,l,v=0;v<r.length;v++)for(var f=0;f<e.length;f++)a[v][f]=Math.pow(n[v][f],o.m);for(var c=0;c<e.length;c++)for(var h=0;h<o.attributes.length;h++){s=0,l=0;for(var g=0;g<r.length;g++)s+=a[g][c]*o.attributes[h](r[g]),l+=a[g][c];e[c][h]=s/l}},zw=function(e,r,n,a,o){for(var s=0;s<e.length;s++)r[s]=e[s].slice();for(var l,v,f,c=2/(o.m-1),h=0;h<n.length;h++)for(var g=0;g<a.length;g++){l=0;for(var m=0;m<n.length;m++)v=wo(o.distance,a[g],n[h],o.attributes,"cmeans"),f=wo(o.distance,a[g],n[m],o.attributes,"cmeans"),l+=Math.pow(v/f,c);e[g][h]=1/l}},Fw=function(e,r,n,a){for(var o=new Array(n.k),s=0;s<o.length;s++)o[s]=[];for(var l,v,f=0;f<r.length;f++){l=-1/0,v=-1;for(var c=0;c<r[0].length;c++)r[f][c]>l&&(l=r[f][c],v=c);o[v].push(e[f])}for(var h=0;h<o.length;h++)o[h]=a.collection(o[h]);return o},Bv=function(e){var r=this.cy(),n=this.nodes(),a=pu(e),o,s,l,v,f;v=new Array(n.length);for(var c=0;c<n.length;c++)v[c]=new Array(a.k);l=new Array(n.length);for(var h=0;h<n.length;h++)l[h]=new Array(a.k);for(var g=0;g<n.length;g++){for(var m=0,p=0;p<a.k;p++)l[g][p]=Math.random(),m+=l[g][p];for(var x=0;x<a.k;x++)l[g][x]=l[g][x]/m}s=new Array(a.k);for(var w=0;w<a.k;w++)s[w]=new Array(a.attributes.length);f=new Array(n.length);for(var y=0;y<n.length;y++)f[y]=new Array(a.k);for(var E=!0,S=0;E&&S<a.maxIterations;)E=!1,Nw(s,n,l,f,a),zw(l,v,s,n,a),_w(l,v,a.sensitivityThreshold)||(E=!0),S++;return o=Fw(n,l,a,r),{clusters:o,degreeOfMembership:l}},$w={kMeans:Mw,kMedoids:Ow,fuzzyCMeans:Bv,fcm:Bv},qw=$t({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Vw={single:"min",complete:"max"},Ww=function(e){var r=qw(e),n=Vw[r.linkage];return n!=null&&(r.linkage=n),r},Rv=function(e,r,n,a,o){for(var s=0,l=1/0,v,f=o.attributes,c=function(A,O){return bo(o.distance,f.length,function(N){return f[N](A)},function(N){return f[N](O)},A,O)},h=0;h<e.length;h++){var g=e[h].key,m=n[g][a[g]];m<l&&(s=g,l=m)}if(o.mode==="threshold"&&l>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var p=r[s],x=r[a[s]],w;o.mode==="dendrogram"?w={left:p,right:x,key:p.key}:w={value:p.value.concat(x.value),key:p.key},e[p.index]=w,e.splice(x.index,1),r[p.key]=w;for(var y=0;y<e.length;y++){var E=e[y];p.key===E.key?v=1/0:o.linkage==="min"?(v=n[p.key][E.key],n[p.key][E.key]>n[x.key][E.key]&&(v=n[x.key][E.key])):o.linkage==="max"?(v=n[p.key][E.key],n[p.key][E.key]<n[x.key][E.key]&&(v=n[x.key][E.key])):o.linkage==="mean"?v=(n[p.key][E.key]*p.size+n[x.key][E.key]*x.size)/(p.size+x.size):o.mode==="dendrogram"?v=c(E.value,p.value):v=c(E.value[0],p.value[0]),n[p.key][E.key]=n[E.key][p.key]=v}for(var S=0;S<e.length;S++){var T=e[S].key;if(a[T]===p.key||a[T]===x.key){for(var k=T,L=0;L<e.length;L++){var D=e[L].key;n[T][D]<n[T][k]&&(k=D)}a[T]=k}e[S].index=S}return p.key=x.key=p.index=x.index=null,!0},xo=function t(e,r,n){e&&(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))},Hw=function t(e,r){if(!e)return"";if(e.left&&e.right){var n=t(e.left,r),a=t(e.right,r),o=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:o.id()}}),r.add({group:"edges",data:{source:a,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},Gw=function t(e,r,n){if(!e)return[];var a=[],o=[],s=[];return r===0?(e.left&&xo(e.left,a),e.right&&xo(e.right,o),s=a.concat(o),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&xo(e.left,a),e.right&&xo(e.right,o),[n.collection(a),n.collection(o)]):e.value?[n.collection(e.value)]:(e.left&&(a=t(e.left,r-1,n)),e.right&&(o=t(e.right,r-1,n)),a.concat(o))},_v=function(e){for(var r=this.cy(),n=this.nodes(),a=Ww(e),o=a.attributes,s=function(S,T){return bo(a.distance,o.length,function(k){return o[k](S)},function(k){return o[k](T)},S,T)},l=[],v=[],f=[],c=[],h=0;h<n.length;h++){var g={value:a.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};l[h]=g,c[h]=g,v[h]=[],f[h]=0}for(var m=0;m<l.length;m++)for(var p=0;p<=m;p++){var x=void 0;a.mode==="dendrogram"?x=m===p?1/0:s(l[m].value,l[p].value):x=m===p?1/0:s(l[m].value[0],l[p].value[0]),v[m][p]=x,v[p][m]=x,x<v[m][f[m]]&&(f[m]=p)}for(var w=Rv(l,c,v,f,a);w;)w=Rv(l,c,v,f,a);var y;return a.mode==="dendrogram"?(y=Gw(l[0],a.dendrogramDepth,r),a.addDendrogram&&Hw(l[0],r)):(y=new Array(l.length),l.forEach(function(E,S){E.key=E.index=null,y[S]=r.collection(E.value)})),y},Uw={hierarchicalClustering:_v,hca:_v},Kw=$t({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Yw=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||St("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(o){return o===n})||we(n)||St("Preference must be one of [".concat(a.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Kw(e)},Xw=function(e,r,n,a){var o=function(l,v){return a[v](l)};return-bo(e,a.length,function(s){return o(r,s)},function(s){return o(n,s)},r,n)},Zw=function(e,r){var n=null;return r==="median"?n=Yb(e):r==="mean"?n=Kb(e):r==="min"?n=Gb(e):r==="max"?n=Ub(e):n=r,n},Qw=function(e,r,n){for(var a=[],o=0;o<e;o++)r[o*e+o]+n[o*e+o]>0&&a.push(o);return a},Iv=function(e,r,n){for(var a=[],o=0;o<e;o++){for(var s=-1,l=-1/0,v=0;v<n.length;v++){var f=n[v];r[o*e+f]>l&&(s=f,l=r[o*e+f])}s>0&&a.push(s)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},Jw=function(e,r,n){for(var a=Iv(e,r,n),o=0;o<n.length;o++){for(var s=[],l=0;l<a.length;l++)a[l]===n[o]&&s.push(l);for(var v=-1,f=-1/0,c=0;c<s.length;c++){for(var h=0,g=0;g<s.length;g++)h+=r[s[g]*e+s[c]];h>f&&(v=c,f=h)}n[o]=s[v]}return a=Iv(e,r,n),a},Mv=function(e){for(var r=this.cy(),n=this.nodes(),a=Yw(e),o={},s=0;s<n.length;s++)o[n[s].id()]=s;var l,v,f,c,h,g;l=n.length,v=l*l,f=new Array(v);for(var m=0;m<v;m++)f[m]=-1/0;for(var p=0;p<l;p++)for(var x=0;x<l;x++)p!==x&&(f[p*l+x]=Xw(a.distance,n[p],n[x],a.attributes));c=Zw(f,a.preference);for(var w=0;w<l;w++)f[w*l+w]=c;h=new Array(v);for(var y=0;y<v;y++)h[y]=0;g=new Array(v);for(var E=0;E<v;E++)g[E]=0;for(var S=new Array(l),T=new Array(l),k=new Array(l),L=0;L<l;L++)S[L]=0,T[L]=0,k[L]=0;for(var D=new Array(l*a.minIterations),_=0;_<D.length;_++)D[_]=0;var A;for(A=0;A<a.maxIterations;A++){for(var O=0;O<l;O++){for(var N=-1/0,R=-1/0,F=-1,M=0,H=0;H<l;H++)S[H]=h[O*l+H],M=g[O*l+H]+f[O*l+H],M>=N?(R=N,N=M,F=H):M>R&&(R=M);for(var $=0;$<l;$++)h[O*l+$]=(1-a.damping)*(f[O*l+$]-N)+a.damping*S[$];h[O*l+F]=(1-a.damping)*(f[O*l+F]-R)+a.damping*S[F]}for(var q=0;q<l;q++){for(var U=0,X=0;X<l;X++)S[X]=g[X*l+q],T[X]=Math.max(0,h[X*l+q]),U+=T[X];U-=T[q],T[q]=h[q*l+q],U+=T[q];for(var J=0;J<l;J++)g[J*l+q]=(1-a.damping)*Math.min(0,U-T[J])+a.damping*S[J];g[q*l+q]=(1-a.damping)*(U-T[q])+a.damping*S[q]}for(var Y=0,j=0;j<l;j++){var ie=g[j*l+j]+h[j*l+j]>0?1:0;D[A%a.minIterations*l+j]=ie,Y+=ie}if(Y>0&&(A>=a.minIterations-1||A==a.maxIterations-1)){for(var se=0,ee=0;ee<l;ee++){k[ee]=0;for(var ne=0;ne<a.minIterations;ne++)k[ee]+=D[ne*l+ee];(k[ee]===0||k[ee]===a.minIterations)&&se++}if(se===l)break}}for(var K=Qw(l,h,g),oe=Jw(l,f,K),ue={},ge=0;ge<K.length;ge++)ue[K[ge]]=[];for(var ye=0;ye<n.length;ye++){var Be=o[n[ye].id()],ze=oe[Be];ze!=null&&ue[ze].push(n[ye])}for(var pe=new Array(K.length),me=0;me<K.length;me++)pe[me]=r.collection(ue[K[me]]);return pe},jw={affinityPropagation:Mv,ap:Mv},ex=$t({root:void 0,directed:!1}),tx={hierholzer:function(e){if(!tt(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=ex(e),a=n.root,o=n.directed,s=this,l=!1,v,f,c;a&&(c=ke(a)?this.filter(a)[0].id():a[0].id());var h={},g={};o?s.forEach(function(E){var S=E.id();if(E.isNode()){var T=E.indegree(!0),k=E.outdegree(!0),L=T-k,D=k-T;L==1?v?l=!0:v=S:D==1?f?l=!0:f=S:(D>1||L>1)&&(l=!0),h[S]=[],E.outgoers().forEach(function(_){_.isEdge()&&h[S].push(_.id())})}else g[S]=[void 0,E.target().id()]}):s.forEach(function(E){var S=E.id();if(E.isNode()){var T=E.degree(!0);T%2&&(v?f?l=!0:f=S:v=S),h[S]=[],E.connectedEdges().forEach(function(k){return h[S].push(k.id())})}else g[S]=[E.source().id(),E.target().id()]});var m={found:!1,trail:void 0};if(l)return m;if(f&&v)if(o){if(c&&f!=c)return m;c=f}else{if(c&&f!=c&&v!=c)return m;c||(c=f)}else c||(c=s[0].id());var p=function(S){for(var T=S,k=[S],L,D,_;h[T].length;)L=h[T].shift(),D=g[L][0],_=g[L][1],T!=_?(h[_]=h[_].filter(function(A){return A!=L}),T=_):!o&&T!=D&&(h[D]=h[D].filter(function(A){return A!=L}),T=D),k.unshift(L),k.unshift(T);return k},x=[],w=[];for(w=p(c);w.length!=1;)h[w[0]].length==0?(x.unshift(s.getElementById(w.shift())),x.unshift(s.getElementById(w.shift()))):w=p(w.shift()).concat(w);x.unshift(s.getElementById(w.shift()));for(var y in h)if(h[y].length)return m;return m.found=!0,m.trail=this.spawn(x,!0),m}},Eo=function(){var e=this,r={},n=0,a=0,o=[],s=[],l={},v=function(g,m){for(var p=s.length-1,x=[],w=e.spawn();s[p].x!=g||s[p].y!=m;)x.push(s.pop().edge),p--;x.push(s.pop().edge),x.forEach(function(y){var E=y.connectedNodes().intersection(e);w.merge(y),E.forEach(function(S){var T=S.id(),k=S.connectedEdges().intersection(e);w.merge(S),r[T].cutVertex?w.merge(k.filter(function(L){return L.isLoop()})):w.merge(k)})}),o.push(w)},f=function h(g,m,p){g===p&&(a+=1),r[m]={id:n,low:n++,cutVertex:!1};var x=e.getElementById(m).connectedEdges().intersection(e);if(x.size()===0)o.push(e.spawn(e.getElementById(m)));else{var w,y,E,S;x.forEach(function(T){w=T.source().id(),y=T.target().id(),E=w===m?y:w,E!==p&&(S=T.id(),l[S]||(l[S]=!0,s.push({x:m,y:E,edge:T})),E in r?r[m].low=Math.min(r[m].low,r[E].id):(h(g,E,m),r[m].low=Math.min(r[m].low,r[E].low),r[m].id<=r[E].low&&(r[m].cutVertex=!0,v(m,E))))})}};e.forEach(function(h){if(h.isNode()){var g=h.id();g in r||(a=0,f(g,g),r[g].cutVertex=a>1)}});var c=Object.keys(r).filter(function(h){return r[h].cutVertex}).map(function(h){return e.getElementById(h)});return{cut:e.spawn(c),components:o}},rx={hopcroftTarjanBiconnected:Eo,htbc:Eo,htb:Eo,hopcroftTarjanBiconnectedComponents:Eo},So=function(){var e=this,r={},n=0,a=[],o=[],s=e.spawn(e),l=function v(f){o.push(f),r[f]={index:n,low:n++,explored:!1};var c=e.getElementById(f).connectedEdges().intersection(e);if(c.forEach(function(x){var w=x.target().id();w!==f&&(w in r||v(w),r[w].explored||(r[f].low=Math.min(r[f].low,r[w].low)))}),r[f].index===r[f].low){for(var h=e.spawn();;){var g=o.pop();if(h.merge(e.getElementById(g)),r[g].low=r[f].index,r[g].explored=!0,g===f)break}var m=h.edgesWith(h),p=h.merge(m);a.push(p),s=s.difference(p)}};return e.forEach(function(v){if(v.isNode()){var f=v.id();f in r||l(f)}}),{cut:s,components:a}},nx={tarjanStronglyConnected:So,tsc:So,tscc:So,tarjanStronglyConnectedComponents:So},Ov={};[hi,_b,Ib,Ob,zb,$b,Wb,hw,Ea,Sa,gu,Aw,$w,Uw,jw,tx,rx,nx].forEach(function(t){_e(Ov,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Nv=0,zv=1,Fv=2,an=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=Nv,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};an.prototype={fulfill:function(e){return $v(this,zv,"fulfillValue",e)},reject:function(e){return $v(this,Fv,"rejectReason",e)},then:function(e,r){var n=this,a=new an;return n.onFulfilled.push(Wv(e,a,"fulfill")),n.onRejected.push(Wv(r,a,"reject")),qv(n),a.proxy}};var $v=function(e,r,n,a){return e.state===Nv&&(e.state=r,e[n]=a,qv(e)),e},qv=function(e){e.state===zv?Vv(e,"onFulfilled",e.fulfillValue):e.state===Fv&&Vv(e,"onRejected",e.rejectReason)},Vv=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var o=function(){for(var l=0;l<a.length;l++)a[l](n)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},Wv=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var o;try{o=e(a)}catch(s){r.reject(s);return}ax(r,o)}}},ax=function t(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Pt(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(o){e.reject(o);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(o){a||(a=!0,o===r?e.reject(new TypeError("circular thenable chain")):t(e,o))},function(o){a||(a=!0,e.reject(o))})}catch(o){a||e.reject(o)}return}e.fulfill(r)};an.all=function(t){return new an(function(e,r){for(var n=new Array(t.length),a=0,o=function(v,f){n[v]=f,a++,a===t.length&&e(n)},s=0;s<t.length;s++)(function(l){var v=t[l],f=v!=null&&v.then!=null;if(f)v.then(function(h){o(l,h)},function(h){r(h)});else{var c=v;o(l,c)}})(s)})},an.resolve=function(t){return new an(function(e,r){e(t)})},an.reject=function(t){return new an(function(e,r){r(t)})};var Ta=typeof Promise<"u"?Promise:an,yu=function(e,r,n){var a=tu(e),o=!a,s=this._private=_e({duration:1e3},r,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&xt(s.complete)&&s.completes.push(s.complete),o){var l=e.position();s.startPosition=s.startPosition||{x:l.x,y:l.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(a){var v=e.pan();s.startPan={x:v.x,y:v.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},Xn=yu.prototype;_e(Xn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),mr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(f,c){var h=e[f];h!=null&&(e[f]=e[c],e[c]=h)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var o=e.style[a],s=o.name,l=e.startStyle[s];e.startStyle[s]=o,e.style[a]=l}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new Ta(function(a,o){n.push(function(){a()})})}}),Xn.complete=Xn.completed,Xn.run=Xn.play,Xn.running=Xn.playing;var ix={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return!1;var s=a[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var s=0;s<a.length;s++){var l=a[s];l._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,o=a.length!==void 0,s=o?a:[a],l=this._private.cy||this,v=!o,f=!v;if(!l.styleEnabled())return this;var c=l.style();r=_e({},r,n);var h=Object.keys(r).length===0;if(h)return new yu(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(f&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),f&&r.renderedPosition!=null){var g=r.renderedPosition,m=l.pan(),p=l.zoom();r.position=vv(g,p,m)}if(v&&r.panBy!=null){var x=r.panBy,w=l.pan();r.pan={x:w.x+x.x,y:w.y+x.y}}var y=r.center||r.centre;if(v&&y!=null){var E=l.getCenterPan(y.eles,r.zoom);E!=null&&(r.pan=E)}if(v&&r.fit!=null){var S=r.fit,T=l.getFitViewport(S.eles||S.boundingBox,S.padding);T!=null&&(r.pan=T.pan,r.zoom=T.zoom)}if(v&&tt(r.zoom)){var k=l.getZoomedViewport(r.zoom);k!=null?(k.zoomed&&(r.zoom=k.zoom),k.panned&&(r.pan=k.pan)):r.zoom=null}return new yu(s[0],r)}},animate:function(){return function(r,n){var a=this,o=a.length!==void 0,s=o?a:[a],l=this._private.cy||this;if(!l.styleEnabled())return this;n&&(r=_e({},r,n));for(var v=0;v<s.length;v++){var f=s[v],c=f.animated()&&(r.queue===void 0||r.queue),h=f.animation(r,c?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(r,n){var a=this,o=a.length!==void 0,s=o?a:[a],l=this._private.cy||this;if(!l.styleEnabled())return this;for(var v=0;v<s.length;v++){for(var f=s[v],c=f._private,h=c.animation.current,g=0;g<h.length;g++){var m=h[g],p=m._private;n&&(p.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return l.notify("draw"),this}}},ox={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,o){},onSet:function(a){},canSet:function(a){return!0}};return e=_e({},r,e),function(a,o){var s=e,l=this,v=l.length!==void 0,f=v?l:[l],c=v?l[0]:l;if(ke(a)){var h=a.indexOf(".")!==-1,g=h&&G1.default(a);if(s.allowGetting&&o===void 0){var m;return c&&(s.beforeGet(c),g&&c._private[s.field][a]===void 0?m=W1.default(c._private[s.field],g):m=c._private[s.field][a]),m}else if(s.allowSetting&&o!==void 0){var p=!s.immutableKeys[a];if(p){var x=Wf({},a,o);s.beforeSet(l,x);for(var w=0,y=f.length;w<y;w++){var E=f[w];s.canSet(E)&&(g&&c._private[s.field][a]===void 0?H1.default(E._private[s.field],g,o):E._private[s.field][a]=o)}s.updateStyle&&l.updateStyle(),s.onSet(l),s.settingTriggersEvent&&l[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&tt(a)){var S=a,T,k,L=Object.keys(S);s.beforeSet(l,S);for(var D=0;D<L.length;D++){T=L[D],k=S[T];var _=!s.immutableKeys[T];if(_)for(var A=0;A<f.length;A++){var O=f[A];s.canSet(O)&&(O._private[s.field][T]=k)}}s.updateStyle&&l.updateStyle(),s.onSet(l),s.settingTriggersEvent&&l[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&xt(a)){var N=a;l.on(s.bindingEvent,N)}else if(s.allowGetting&&a===void 0){var R;return c&&(s.beforeGet(c),R=c._private[s.field]),R}return l}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=_e({},r,e),function(a){var o=e,s=this,l=s.length!==void 0,v=l?s:[s];if(ke(a)){for(var f=a.split(/\s+/),c=f.length,h=0;h<c;h++){var g=f[h];if(!bn(g)){var m=!o.immutableKeys[g];if(m)for(var p=0,x=v.length;p<x;p++)v[p]._private[o.field][g]=void 0}}o.triggerEvent&&s[o.triggerFnName](o.event)}else if(a===void 0){for(var w=0,y=v.length;w<y;w++)for(var E=v[w]._private[o.field],S=Object.keys(E),T=0;T<S.length;T++){var k=S[T],L=!o.immutableKeys[k];L&&(E[k]=void 0)}o.triggerEvent&&s[o.triggerFnName](o.event)}return s}}},sx={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var o=this,s=Array.prototype.slice.call(arguments,0);return new Ta(function(l,v){var f=function(m){o.off.apply(o,h),l(m)},c=s.concat([f]),h=c.concat([]);o.on.apply(o,c)})}}},ut={};[ix,ox,sx].forEach(function(t){_e(ut,t)});var ux={animate:ut.animate(),animation:ut.animation(),animated:ut.animated(),clearQueue:ut.clearQueue(),delay:ut.delay(),delayAnimation:ut.delayAnimation(),stop:ut.stop()},Co={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(p){return n.push(p)}),n}else ct(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],o=new ya(e),s=0;s<r.length;s++){for(var l=r[s],v=l._private,f=v.classes,c=!1,h=0;h<e.length;h++){var g=e[h],m=f.has(g);if(!m){c=!0;break}}c||(c=f.size!==e.length),c&&(v.classes=o,a.push(l))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){ct(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,o=[],s=0,l=n.length;s<l;s++)for(var v=n[s],f=v._private.classes,c=!1,h=0;h<e.length;h++){var g=e[h],m=f.has(g),p=!1;r||a&&!m?(f.add(g),p=!0):(!r||a&&m)&&(f.delete(g),p=!0),!c&&p&&(o.push(v),c=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Co.className=Co.classNames=Co.classes;var rt={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:kt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};rt.variable="(?:[\\w-.]|(?:\\\\"+rt.metaChar+"))+",rt.className="(?:[\\w-]|(?:\\\\"+rt.metaChar+"))+",rt.value=rt.string+"|"+rt.number,rt.id=rt.variable,function(){var t,e,r;for(t=rt.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],rt.comparatorOp+="|@"+e;for(t=rt.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(rt.comparatorOp+="|\\!"+e)}();var vt=function(){return{checks:[]}},Ce={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},bu=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return cb(t.selector,e.selector)}),lx=function(){for(var t={},e,r=0;r<bu.length;r++)e=bu[r],t[e.selector]=e.matches;return t}(),fx=function(e,r){return lx[e](r)},vx="("+bu.map(function(t){return t.selector}).join("|")+")",Da=function(e){return e.replace(new RegExp("\\\\("+rt.metaChar+")","g"),function(r,n){return n})},Cn=function(e,r,n){e[e.length-1]=n},wu=[{name:"group",query:!0,regex:"("+rt.group+")",populate:function(e,r,n){var a=tn(n,1),o=a[0];r.checks.push({type:Ce.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:vx,populate:function(e,r,n){var a=tn(n,1),o=a[0];r.checks.push({type:Ce.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+rt.id+")",populate:function(e,r,n){var a=tn(n,1),o=a[0];r.checks.push({type:Ce.ID,value:Da(o)})}},{name:"className",query:!0,regex:"\\.("+rt.className+")",populate:function(e,r,n){var a=tn(n,1),o=a[0];r.checks.push({type:Ce.CLASS,value:Da(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+rt.variable+")\\s*\\]",populate:function(e,r,n){var a=tn(n,1),o=a[0];r.checks.push({type:Ce.DATA_EXIST,field:Da(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+rt.variable+")\\s*("+rt.comparatorOp+")\\s*("+rt.value+")\\s*\\]",populate:function(e,r,n){var a=tn(n,3),o=a[0],s=a[1],l=a[2],v=new RegExp("^"+rt.string+"$").exec(l)!=null;v?l=l.substring(1,l.length-1):l=parseFloat(l),r.checks.push({type:Ce.DATA_COMPARE,field:Da(o),operator:s,value:l})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+rt.boolOp+")\\s*("+rt.variable+")\\s*\\]",populate:function(e,r,n){var a=tn(n,2),o=a[0],s=a[1];r.checks.push({type:Ce.DATA_BOOL,field:Da(s),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+rt.meta+")\\s*("+rt.comparatorOp+")\\s*("+rt.number+")\\s*\\]\\]",populate:function(e,r,n){var a=tn(n,3),o=a[0],s=a[1],l=a[2];r.checks.push({type:Ce.META_COMPARE,field:Da(o),operator:s,value:parseFloat(l)})}},{name:"nextQuery",separator:!0,regex:rt.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,o=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=a,s.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var l=e[e.length++]=vt();return l}},{name:"directedEdge",separator:!0,regex:rt.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=vt(),a=r,o=vt();return n.checks.push({type:Ce.DIRECTED_EDGE,source:a,target:o}),Cn(e,r,n),e.edgeCount++,o}else{var s=vt(),l=r,v=vt();return s.checks.push({type:Ce.NODE_SOURCE,source:l,target:v}),Cn(e,r,s),e.edgeCount++,v}}},{name:"undirectedEdge",separator:!0,regex:rt.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=vt(),a=r,o=vt();return n.checks.push({type:Ce.UNDIRECTED_EDGE,nodes:[a,o]}),Cn(e,r,n),e.edgeCount++,o}else{var s=vt(),l=r,v=vt();return s.checks.push({type:Ce.NODE_NEIGHBOR,node:l,neighbor:v}),Cn(e,r,s),v}}},{name:"child",separator:!0,regex:rt.child,populate:function(e,r){if(e.currentSubject==null){var n=vt(),a=vt(),o=e[e.length-1];return n.checks.push({type:Ce.CHILD,parent:o,child:a}),Cn(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=vt(),l=e[e.length-1],v=vt(),f=vt(),c=vt(),h=vt();return s.checks.push({type:Ce.COMPOUND_SPLIT,left:l,right:v,subject:f}),f.checks=r.checks,r.checks=[{type:Ce.TRUE}],h.checks.push({type:Ce.TRUE}),v.checks.push({type:Ce.PARENT,parent:h,child:c}),Cn(e,l,s),e.currentSubject=f,e.compoundCount++,c}else{var g=vt(),m=vt(),p=[{type:Ce.PARENT,parent:g,child:m}];return g.checks=r.checks,r.checks=p,e.compoundCount++,m}}},{name:"descendant",separator:!0,regex:rt.descendant,populate:function(e,r){if(e.currentSubject==null){var n=vt(),a=vt(),o=e[e.length-1];return n.checks.push({type:Ce.DESCENDANT,ancestor:o,descendant:a}),Cn(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=vt(),l=e[e.length-1],v=vt(),f=vt(),c=vt(),h=vt();return s.checks.push({type:Ce.COMPOUND_SPLIT,left:l,right:v,subject:f}),f.checks=r.checks,r.checks=[{type:Ce.TRUE}],h.checks.push({type:Ce.TRUE}),v.checks.push({type:Ce.ANCESTOR,ancestor:h,descendant:c}),Cn(e,l,s),e.currentSubject=f,e.compoundCount++,c}else{var g=vt(),m=vt(),p=[{type:Ce.ANCESTOR,ancestor:g,descendant:m}];return g.checks=r.checks,r.checks=p,e.compoundCount++,m}}},{name:"subject",modifier:!0,regex:rt.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return st("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],o=a==null?null:a.type;o===Ce.DIRECTED_EDGE?a.type=Ce.NODE_TARGET:o===Ce.UNDIRECTED_EDGE&&(a.type=Ce.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];wu.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var cx=function(e){for(var r,n,a,o=0;o<wu.length;o++){var s=wu[o],l=s.name,v=e.match(s.regexObj);if(v!=null){n=v,r=s,a=l;var f=v[0];e=e.substring(f.length);break}}return{expr:r,match:n,name:a,remaining:e}},dx=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},hx=function(e){var r=this,n=r.inputText=e,a=r[0]=vt();for(r.length=1,n=dx(n);;){var o=cx(n);if(o.expr==null)return st("The selector `"+e+"`is invalid"),!1;var s=o.match.slice(1),l=o.expr.populate(r,a,s);if(l===!1)return!1;if(l!=null&&(a=l),n=o.remaining,n.match(/^\s*$/))break}var v=r[r.length-1];r.currentSubject!=null&&(v.subject=r.currentSubject),v.edgeCount=r.edgeCount,v.compoundCount=r.compoundCount;for(var f=0;f<r.length;f++){var c=r[f];if(c.compoundCount>0&&c.edgeCount>0)return st("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return st("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&st("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},gx=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return ke(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,h){var g=c.type,m=c.value;switch(g){case Ce.GROUP:{var p=e(m);return p.substring(0,p.length-1)}case Ce.DATA_COMPARE:{var x=c.field,w=c.operator;return"["+x+n(e(w))+r(m)+"]"}case Ce.DATA_BOOL:{var y=c.operator,E=c.field;return"["+e(y)+E+"]"}case Ce.DATA_EXIST:{var S=c.field;return"["+S+"]"}case Ce.META_COMPARE:{var T=c.operator,k=c.field;return"[["+k+n(e(T))+r(m)+"]]"}case Ce.STATE:return m;case Ce.ID:return"#"+m;case Ce.CLASS:return"."+m;case Ce.PARENT:case Ce.CHILD:return o(c.parent,h)+n(">")+o(c.child,h);case Ce.ANCESTOR:case Ce.DESCENDANT:return o(c.ancestor,h)+" "+o(c.descendant,h);case Ce.COMPOUND_SPLIT:{var L=o(c.left,h),D=o(c.subject,h),_=o(c.right,h);return L+(L.length>0?" ":"")+D+_}case Ce.TRUE:return""}},o=function(c,h){return c.checks.reduce(function(g,m,p){return g+(h===c&&p===0?"$":"")+a(m,h)},"")},s="",l=0;l<this.length;l++){var v=this[l];s+=o(v,v.subject),this.length>1&&l<this.length-1&&(s+=", ")}return this.toStringCache=s,s},px={parse:hx,toString:gx},Hv=function(e,r,n){var a,o=ke(e),s=we(e),l=ke(n),v,f,c=!1,h=!1,g=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),h=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(o||l||c)&&(v=!o&&!s?"":""+e,f=""+n),c&&(e=v=v.toLowerCase(),n=f=f.toLowerCase()),r){case"*=":a=v.indexOf(f)>=0;break;case"$=":a=v.indexOf(f,v.length-f.length)>=0;break;case"^=":a=v.indexOf(f)===0;break;case"=":a=e===n;break;case">":g=!0,a=e>n;break;case">=":g=!0,a=e>=n;break;case"<":g=!0,a=e<n;break;case"<=":g=!0,a=e<=n;break;default:a=!1;break}return h&&(e!=null||!g)&&(a=!a),a},mx=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},yx=function(e){return e!==void 0},xu=function(e,r){return e.data(r)},bx=function(e,r){return e[r]()},Ct=[],mt=function(e,r){return e.checks.every(function(n){return Ct[n.type](n,r)})};Ct[Ce.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()},Ct[Ce.STATE]=function(t,e){var r=t.value;return fx(r,e)},Ct[Ce.ID]=function(t,e){var r=t.value;return e.id()===r},Ct[Ce.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)},Ct[Ce.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Hv(bx(e,r),n,a)},Ct[Ce.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Hv(xu(e,r),n,a)},Ct[Ce.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return mx(xu(e,r),n)},Ct[Ce.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,yx(xu(e,r))},Ct[Ce.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),o=e.target();return mt(r,a)&&mt(n,o)||mt(n,a)&&mt(r,o)},Ct[Ce.NODE_NEIGHBOR]=function(t,e){return mt(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&mt(t.neighbor,r)})},Ct[Ce.DIRECTED_EDGE]=function(t,e){return mt(t.source,e.source())&&mt(t.target,e.target())},Ct[Ce.NODE_SOURCE]=function(t,e){return mt(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&mt(t.target,r)})},Ct[Ce.NODE_TARGET]=function(t,e){return mt(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&mt(t.source,r)})},Ct[Ce.CHILD]=function(t,e){return mt(t.child,e)&&mt(t.parent,e.parent())},Ct[Ce.PARENT]=function(t,e){return mt(t.parent,e)&&e.children().some(function(r){return mt(t.child,r)})},Ct[Ce.DESCENDANT]=function(t,e){return mt(t.descendant,e)&&e.ancestors().some(function(r){return mt(t.ancestor,r)})},Ct[Ce.ANCESTOR]=function(t,e){return mt(t.ancestor,e)&&e.descendants().some(function(r){return mt(t.descendant,r)})},Ct[Ce.COMPOUND_SPLIT]=function(t,e){return mt(t.subject,e)&&mt(t.left,e)&&mt(t.right,e)},Ct[Ce.TRUE]=function(){return!0},Ct[Ce.COLLECTION]=function(t,e){var r=t.value;return r.has(e)},Ct[Ce.FILTER]=function(t,e){var r=t.value;return r(e)};var wx=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===Ce.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(o){for(var s=0;s<r.length;s++){var l=r[s];if(mt(l,o))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},xx=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(mt(a,e))return!0}return!1},Ex={matches:xx,filter:wx},Tn=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||ke(e)&&e.match(/^\s*$/)||(mr(e)?this.addQuery({checks:[{type:Ce.COLLECTION,value:e.collection()}]}):xt(e)?this.addQuery({checks:[{type:Ce.FILTER,value:e}]}):ke(e)?this.parse(e)||(this.invalid=!0):St("A selector must be created from a string; found "))},Dn=Tn.prototype;[px,Ex].forEach(function(t){return _e(Dn,t)}),Dn.text=function(){return this.inputText},Dn.size=function(){return this.length},Dn.eq=function(t){return this[t]},Dn.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},Dn.addQuery=function(t){this[this.length++]=t},Dn.selector=Dn.toString;var An={allAre:function(e){var r=new Tn(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Tn(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};An.allAreNeighbours=An.allAreNeighbors,An.has=An.contains,An.equal=An.equals=An.same;var Dr=function(e,r){return function(a,o,s,l){var v=a,f=this,c;if(v==null?c="":mr(v)&&v.length===1&&(c=v.id()),f.length===1&&c){var h=f[0]._private,g=h.traversalCache=h.traversalCache||{},m=g[r]=g[r]||[],p=Gn(c),x=m[p];return x||(m[p]=e.call(f,a,o,s,l))}else return e.call(f,a,o,s,l)}},Aa={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var o=this[a],s=o._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var o=n[a];r.push(o)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],o=a.parents();r=r||o,r=r.intersect(o)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Dr(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,o=0;o<a.length;o++)e.push(a[o]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var o=0;o<a.length;o++){var s=a[o];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function Eu(t,e,r,n){for(var a=[],o=new ya,s=t.cy(),l=s.hasCompoundNodes(),v=0;v<t.length;v++){var f=t[v];r?a.push(f):l&&n(a,o,f)}for(;a.length>0;){var c=a.shift();e(c),o.add(c.id()),l&&n(a,o,c)}return t}function Gv(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var o=n[a];e.has(o.id())||t.push(o)}}Aa.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Eu(this,t,e,Gv)};function Uv(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}Aa.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Eu(this,t,e,Uv)};function Sx(t,e,r){Uv(t,e,r),Gv(t,e,r)}Aa.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Eu(this,t,e,Sx)},Aa.ancestors=Aa.parents;var wi,Kv;wi=Kv={data:ut.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ut.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ut.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ut.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ut.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ut.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}},wi.attr=wi.data,wi.removeAttr=wi.removeData;var Cx=Kv,To={};function Su(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],o=a._private.edges,s=0;s<o.length;s++){var l=o[s];!e&&l.isLoop()||(n+=t(a,l))}return n}else return}}_e(To,{degree:Su(function(t,e){return e.source().same(e.target())?2:1}),indegree:Su(function(t,e){return e.target().same(t)?1:0}),outdegree:Su(function(t,e){return e.source().same(t)?1:0})});function Pa(t,e){return function(r){for(var n,a=this.nodes(),o=0;o<a.length;o++){var s=a[o],l=s[t](r);l!==void 0&&(n===void 0||e(l,n))&&(n=l)}return n}}_e(To,{minDegree:Pa("degree",function(t,e){return t<e}),maxDegree:Pa("degree",function(t,e){return t>e}),minIndegree:Pa("indegree",function(t,e){return t<e}),maxIndegree:Pa("indegree",function(t,e){return t>e}),minOutdegree:Pa("outdegree",function(t,e){return t<e}),maxOutdegree:Pa("outdegree",function(t,e){return t>e})}),_e(To,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var zr,Yv,Xv=function(e,r,n){for(var a=0;a<e.length;a++){var o=e[a];if(!o.locked()){var s=o._private.position,l={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};o.isParent()&&!(l.x===0&&l.y===0)&&o.children().shift(l,n),o.dirtyBoundingBoxCache()}}},Zv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){Xv(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};zr=Yv={position:ut.data(Zv),silentPosition:ut.data(_e({},Zv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){Xv(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(tt(e))r?this.silentPosition(e):this.position(e);else if(xt(e)){var n=e,a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var s=this[o],l=void 0;(l=n(s,o))&&(r?s.silentPosition(l):s.position(l))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(tt(e)?(a={x:we(e.x)?e.x:0,y:we(e.y)?e.y:0},n=r):ke(e)&&we(r)&&(a={x:0,y:0},a[e]=r),a!=null){var o=this.cy();o.startBatch();for(var s=0;s<this.length;s++){var l=this[s];if(!(o.hasCompoundNodes()&&l.isChild()&&l.ancestors().anySame(this))){var v=l.position(),f={x:v.x+a.x,y:v.y+a.y};n?l.silentPosition(f):l.position(f)}}o.endBatch()}return this},silentShift:function(e,r){return tt(e)?this.shift(e,!0):ke(e)&&we(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),o=a.zoom(),s=a.pan(),l=tt(e)?e:void 0,v=l!==void 0||r!==void 0&&ke(e);if(n&&n.isNode())if(v)for(var f=0;f<this.length;f++){var c=this[f];r!==void 0?c.position(e,(r-s[e])/o):l!==void 0&&c.position(vv(l,o,s))}else{var h=n.position();return l=go(h,o,s),e===void 0?l:l[e]}else if(!v)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),o=tt(e)?e:void 0,s=o!==void 0||r!==void 0&&ke(e),l=a.hasCompoundNodes();if(n&&n.isNode())if(s)for(var v=0;v<this.length;v++){var f=this[v],c=l?f.parent():null,h=c&&c.length>0,g=h;h&&(c=c[0]);var m=g?c.position():{x:0,y:0};r!==void 0?f.position(e,r+m[e]):o!==void 0&&f.position({x:o.x+m.x,y:o.y+m.y})}else{var p=n.position(),x=l?n.parent():null,w=x&&x.length>0,y=w;w&&(x=x[0]);var E=y?x.position():{x:0,y:0};return o={x:p.x-E.x,y:p.y-E.y},e===void 0?o:o[e]}else if(!s)return;return this}},zr.modelPosition=zr.point=zr.position,zr.modelPositions=zr.points=zr.positions,zr.renderedPoint=zr.renderedPosition,zr.relativePoint=zr.relativePosition;var Tx=Yv,La,Pn;La=Pn={},Pn.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),o=e.x1*n+a.x,s=e.x2*n+a.x,l=e.y1*n+a.y,v=e.y2*n+a.y;return{x1:o,x2:s,y1:l,y2:v,w:s-o,h:v-l}},Pn.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)},Pn.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(!s.isParent())return;var l=s._private,v=s.children(),f=s.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},h=v.boundingBox({includeLabels:f,includeOverlays:!1,useCache:!1}),g=l.position;(h.w===0||h.h===0)&&(h={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},h.x1=g.x-h.w/2,h.x2=g.x+h.w/2,h.y1=g.y-h.h/2,h.y2=g.y+h.h/2);function m(A,O,N){var R=0,F=0,M=O+N;return A>0&&M>0&&(R=O/M*A,F=N/M*A),{biasDiff:R,biasComplementDiff:F}}function p(A,O,N,R){if(N.units==="%")switch(R){case"width":return A>0?N.pfValue*A:0;case"height":return O>0?N.pfValue*O:0;case"average":return A>0&&O>0?N.pfValue*(A+O)/2:0;case"min":return A>0&&O>0?A>O?N.pfValue*O:N.pfValue*A:0;case"max":return A>0&&O>0?A>O?N.pfValue*A:N.pfValue*O:0;default:return 0}else return N.units==="px"?N.pfValue:0}var x=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(x=x*100/c.width.val);var w=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(w=w*100/c.width.val);var y=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var E=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(E=E*100/c.height.val);var S=m(c.width.val-h.w,x,w),T=S.biasDiff,k=S.biasComplementDiff,L=m(c.height.val-h.h,y,E),D=L.biasDiff,_=L.biasComplementDiff;l.autoPadding=p(h.w,h.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),l.autoWidth=Math.max(h.w,c.width.val),g.x=(-T+h.x1+h.x2+k)/2,l.autoHeight=Math.max(h.h,c.height.val),g.y=(-D+h.y1+h.y2+_)/2}for(var n=0;n<this.length;n++){var a=this[n],o=a._private;(!o.compoundBoundsClean||t)&&(r(a),e.batching()||(o.compoundBoundsClean=!0))}return this};var Ar=function(e){return e===1/0||e===-1/0?0:e},Fr=function(e,r,n,a,o){a-r===0||o-n===0||r==null||n==null||a==null||o==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Zn=function(e,r){return r==null?e:Fr(e,r.x1,r.y1,r.x2,r.y2)},xi=function(e,r,n){return Nr(e,r,n)},Do=function(e,r,n){if(!r.cy().headless()){var a=r._private,o=a.rstyle,s=o.arrowWidth/2,l=r.pstyle(n+"-arrow-shape").value,v,f;if(l!=="none"){n==="source"?(v=o.srcX,f=o.srcY):n==="target"?(v=o.tgtX,f=o.tgtY):(v=o.midX,f=o.midY);var c=a.arrowBounds=a.arrowBounds||{},h=c[n]=c[n]||{};h.x1=v-s,h.y1=f-s,h.x2=v+s,h.y2=f+s,h.w=h.x2-h.x1,h.h=h.y2-h.y1,mo(h,1),Fr(e,h.x1,h.y1,h.x2,h.y2)}}},Cu=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var o=r._private,s=o.rstyle,l=r.pstyle(a+"label").strValue;if(l){var v=r.pstyle("text-halign"),f=r.pstyle("text-valign"),c=xi(s,"labelWidth",n),h=xi(s,"labelHeight",n),g=xi(s,"labelX",n),m=xi(s,"labelY",n),p=r.pstyle(a+"text-margin-x").pfValue,x=r.pstyle(a+"text-margin-y").pfValue,w=r.isEdge(),y=r.pstyle(a+"text-rotation"),E=r.pstyle("text-outline-width").pfValue,S=r.pstyle("text-border-width").pfValue,T=S/2,k=r.pstyle("text-background-padding").pfValue,L=2,D=h,_=c,A=_/2,O=D/2,N,R,F,M;if(w)N=g-A,R=g+A,F=m-O,M=m+O;else{switch(v.value){case"left":N=g-_,R=g;break;case"center":N=g-A,R=g+A;break;case"right":N=g,R=g+_;break}switch(f.value){case"top":F=m-D,M=m;break;case"center":F=m-O,M=m+O;break;case"bottom":F=m,M=m+D;break}}N+=p-Math.max(E,T)-k-L,R+=p+Math.max(E,T)+k+L,F+=x-Math.max(E,T)-k-L,M+=x+Math.max(E,T)+k+L;var H=n||"main",$=o.labelBounds,q=$[H]=$[H]||{};q.x1=N,q.y1=F,q.x2=R,q.y2=M,q.w=R-N,q.h=M-F;var U=w&&y.strValue==="autorotate",X=y.pfValue!=null&&y.pfValue!==0;if(U||X){var J=U?xi(o.rstyle,"labelAngle",n):y.pfValue,Y=Math.cos(J),j=Math.sin(J),ie=(N+R)/2,se=(F+M)/2;if(!w){switch(v.value){case"left":ie=R;break;case"right":ie=N;break}switch(f.value){case"top":se=M;break;case"bottom":se=F;break}}var ee=function(ze,pe){return ze=ze-ie,pe=pe-se,{x:ze*Y-pe*j+ie,y:ze*j+pe*Y+se}},ne=ee(N,F),K=ee(N,M),oe=ee(R,F),ue=ee(R,M);N=Math.min(ne.x,K.x,oe.x,ue.x),R=Math.max(ne.x,K.x,oe.x,ue.x),F=Math.min(ne.y,K.y,oe.y,ue.y),M=Math.max(ne.y,K.y,oe.y,ue.y)}var ge=H+"Rot",ye=$[ge]=$[ge]||{};ye.x1=N,ye.y1=F,ye.x2=R,ye.y2=M,ye.w=R-N,ye.h=M-F,Fr(e,N,F,R,M),Fr(o.labelBounds.all,N,F,R,M)}return e}},Dx=function(e,r){var n=e._private.cy,a=n.styleEnabled(),o=n.headless(),s=sr(),l=e._private,v=e.isNode(),f=e.isEdge(),c,h,g,m,p,x,w=l.rstyle,y=v&&a?e.pstyle("bounds-expansion").pfValue:[0],E=function(De){return De.pstyle("display").value!=="none"},S=!a||E(e)&&(!f||E(e.source())&&E(e.target()));if(S){var T=0,k=0;a&&r.includeOverlays&&(T=e.pstyle("overlay-opacity").value,T!==0&&(k=e.pstyle("overlay-padding").value));var L=0,D=0;a&&r.includeUnderlays&&(L=e.pstyle("underlay-opacity").value,L!==0&&(D=e.pstyle("underlay-padding").value));var _=Math.max(k,D),A=0,O=0;if(a&&(A=e.pstyle("width").pfValue,O=A/2),v&&r.includeNodes){var N=e.position();p=N.x,x=N.y;var R=e.outerWidth(),F=R/2,M=e.outerHeight(),H=M/2;c=p-F,h=p+F,g=x-H,m=x+H,Fr(s,c,g,h,m)}else if(f&&r.includeEdges)if(a&&!o){var $=e.pstyle("curve-style").strValue;if(c=Math.min(w.srcX,w.midX,w.tgtX),h=Math.max(w.srcX,w.midX,w.tgtX),g=Math.min(w.srcY,w.midY,w.tgtY),m=Math.max(w.srcY,w.midY,w.tgtY),c-=O,h+=O,g-=O,m+=O,Fr(s,c,g,h,m),$==="haystack"){var q=w.haystackPts;if(q&&q.length===2){if(c=q[0].x,g=q[0].y,h=q[1].x,m=q[1].y,c>h){var U=c;c=h,h=U}if(g>m){var X=g;g=m,m=X}Fr(s,c-O,g-O,h+O,m+O)}}else if($==="bezier"||$==="unbundled-bezier"||$==="segments"||$==="taxi"){var J;switch($){case"bezier":case"unbundled-bezier":J=w.bezierPts;break;case"segments":case"taxi":J=w.linePts;break}if(J!=null)for(var Y=0;Y<J.length;Y++){var j=J[Y];c=j.x-O,h=j.x+O,g=j.y-O,m=j.y+O,Fr(s,c,g,h,m)}}}else{var ie=e.source(),se=ie.position(),ee=e.target(),ne=ee.position();if(c=se.x,h=ne.x,g=se.y,m=ne.y,c>h){var K=c;c=h,h=K}if(g>m){var oe=g;g=m,m=oe}c-=O,h+=O,g-=O,m+=O,Fr(s,c,g,h,m)}if(a&&r.includeEdges&&f&&(Do(s,e,"mid-source"),Do(s,e,"mid-target"),Do(s,e,"source"),Do(s,e,"target")),a){var ue=e.pstyle("ghost").value==="yes";if(ue){var ge=e.pstyle("ghost-offset-x").pfValue,ye=e.pstyle("ghost-offset-y").pfValue;Fr(s,s.x1+ge,s.y1+ye,s.x2+ge,s.y2+ye)}}var Be=l.bodyBounds=l.bodyBounds||{};dv(Be,s),lu(Be,y),mo(Be,1),a&&(c=s.x1,h=s.x2,g=s.y1,m=s.y2,Fr(s,c-_,g-_,h+_,m+_));var ze=l.overlayBounds=l.overlayBounds||{};dv(ze,s),lu(ze,y),mo(ze,1);var pe=l.labelBounds=l.labelBounds||{};pe.all!=null?jb(pe.all):pe.all=sr(),a&&r.includeLabels&&(r.includeMainLabels&&Cu(s,e,null),f&&(r.includeSourceLabels&&Cu(s,e,"source"),r.includeTargetLabels&&Cu(s,e,"target")))}return s.x1=Ar(s.x1),s.y1=Ar(s.y1),s.x2=Ar(s.x2),s.y2=Ar(s.y2),s.w=Ar(s.x2-s.x1),s.h=Ar(s.y2-s.y1),s.w>0&&s.h>0&&S&&(lu(s,y),mo(s,1)),s},Qv=function(e){var r=0,n=function(s){return(s?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a},Jv=function(e){if(e.isEdge()){var r=e.source().position(),n=e.target().position(),a=function(s){return Math.round(s)};return xb([a(r.x),a(r.y),a(n.x),a(n.y)])}else return 0},jv=function(e,r){var n=e._private,a,o=e.isEdge(),s=r==null?ec:Qv(r),l=s===ec,v=Jv(e),f=n.bbCachePosKey===v,c=r.useCache&&f,h=function(x){return x._private.bbCache==null||x._private.styleDirty},g=!c||h(e)||o&&h(e.source())||h(e.target());if(g?(f||e.recalculateRenderedStyle(c),a=Dx(e,Ei),n.bbCache=a,n.bbCachePosKey=v):a=n.bbCache,!l){var m=e.isNode();a=sr(),(r.includeNodes&&m||r.includeEdges&&!m)&&(r.includeOverlays?Zn(a,n.overlayBounds):Zn(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!o||r.includeSourceLabels&&r.includeTargetLabels)?Zn(a,n.labelBounds.all):(r.includeMainLabels&&Zn(a,n.labelBounds.mainRot),r.includeSourceLabels&&Zn(a,n.labelBounds.sourceRot),r.includeTargetLabels&&Zn(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Ei={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},ec=Qv(Ei),tc=$t(Ei);Pn.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=Ei:t=tc(t),e=jv(this[0],t);else{e=sr(),t=t||Ei;var r=tc(t),n=this,a=n.cy(),o=a.styleEnabled();if(o)for(var s=0;s<n.length;s++){var l=n[s],v=l._private,f=Jv(l),c=v.bbCachePosKey===f,h=r.useCache&&c&&!v.styleDirty;l.recalculateRenderedStyle(h)}this.updateCompoundBounds(!t.useCache);for(var g=0;g<n.length;g++){var m=n[g];Zn(e,jv(m,r))}}return e.x1=Ar(e.x1),e.y1=Ar(e.y1),e.x2=Ar(e.x2),e.y2=Ar(e.y2),e.w=Ar(e.x2-e.x1),e.h=Ar(e.y2-e.y1),e},Pn.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Pn.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(f){return f.isParent()}),e=e.not(a)),tt(t)){var o=t;t=function(){return o}}var s=function(c,h){return c._private.bbAtOldPos=t(c,h)},l=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(s).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var v=Jb(this.boundingBox({useCache:!1}));return e.silentPositions(l),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),v},La.boundingbox=La.bb=La.boundingBox,La.renderedBoundingbox=La.renderedBoundingBox;var Ax=Pn,Si,Ci;Si=Ci={};var rc=function(e){e.uppercaseName=Zf(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Zf(e.outerName),Si[e.name]=function(){var n=this[0],a=n._private,o=a.cy,s=o._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var l=n.pstyle(e.name);switch(l.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return l.pfValue}}else return 1},Si["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,o=a.cy,s=o._private.styleEnabled;if(n)if(s){var l=n[e.name](),v=n.pstyle("border-width").pfValue,f=2*n.padding();return l+v+f}else return 1},Si["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Si["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};rc({name:"width"}),rc({name:"height"}),Ci.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},Ci.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},Ci.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Px=Ci,Lx=function(e,r){if(e.isEdge())return r(e)},kx=function(e,r){if(e.isEdge()){var n=e.cy();return go(r(e),n.zoom(),n.pan())}},Bx=function(e,r){if(e.isEdge()){var n=e.cy(),a=n.pan(),o=n.zoom();return r(e).map(function(s){return go(s,o,a)})}},Rx=function(e){return e.renderer().getControlPoints(e)},_x=function(e){return e.renderer().getSegmentPoints(e)},Ix=function(e){return e.renderer().getSourceEndpoint(e)},Mx=function(e){return e.renderer().getTargetEndpoint(e)},Ox=function(e){return e.renderer().getEdgeMidpoint(e)},nc={controlPoints:{get:Rx,mult:!0},segmentPoints:{get:_x,mult:!0},sourceEndpoint:{get:Ix},targetEndpoint:{get:Mx},midpoint:{get:Ox}},Nx=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},zx=Object.keys(nc).reduce(function(t,e){var r=nc[e],n=Nx(e);return t[e]=function(){return Lx(this,r.get)},r.mult?t[n]=function(){return Bx(this,r.get)}:t[n]=function(){return kx(this,r.get)},t},{}),Fx=_e({},Tx,Ax,Px,zx);/*!
  Event object based on jQuery events, MIT license

  https://jquery.org/license/
  https://tldrlegal.com/license/mit-license
  https://github.com/jquery/jquery/blob/master/src/event.js
  */var ac=function(e,r){this.recycle(e,r)};function Ti(){return!1}function Ao(){return!0}ac.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ti,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Ao:Ti):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:n.x*a+o.x,y:n.y*a+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Ao;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Ao;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Ao,this.stopPropagation()},isDefaultPrevented:Ti,isPropagationStopped:Ti,isImmediatePropagationStopped:Ti};var ic=/^([^.]+)(\.(?:[^.]+))?$/,$x=".*",oc={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},sc=Object.keys(oc),qx={};function Po(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qx,e=arguments.length>1?arguments[1]:void 0,r=0;r<sc.length;r++){var n=sc[r];this[n]=t[n]||oc[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Ln=Po.prototype,uc=function(e,r,n,a,o,s,l){xt(a)&&(o=a,a=null),l&&(s==null?s=l:s=_e({},s,l));for(var v=ct(n)?n:n.split(/\s+/),f=0;f<v.length;f++){var c=v[f];if(!bn(c)){var h=c.match(ic);if(h){var g=h[1],m=h[2]?h[2]:null,p=r(e,c,g,m,a,o,s);if(p===!1)break}}}},lc=function(e,r){return e.addEventFields(e.context,r),new ac(r.type,r)},Vx=function(e,r,n){if(tb(n)){r(e,n);return}else if(tt(n)){r(e,lc(e,n));return}for(var a=ct(n)?n:n.split(/\s+/),o=0;o<a.length;o++){var s=a[o];if(!bn(s)){var l=s.match(ic);if(l){var v=l[1],f=l[2]?l[2]:null,c=lc(e,{type:v,namespace:f,target:e.context});r(e,c)}}}};Ln.on=Ln.addListener=function(t,e,r,n,a){return uc(this,function(o,s,l,v,f,c,h){xt(c)&&o.listeners.push({event:s,callback:c,type:l,namespace:v,qualifier:f,conf:h})},t,e,r,n,a),this},Ln.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})},Ln.removeListener=Ln.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=Db(this.listeners));for(var o=this.listeners,s=function(f){var c=o[f];uc(a,function(h,g,m,p,x,w){if((c.type===m||t==="*")&&(!p&&c.namespace!==".*"||c.namespace===p)&&(!x||h.qualifierCompare(c.qualifier,x))&&(!w||c.callback===w))return o.splice(f,1),!1},t,e,r,n)},l=o.length-1;l>=0;l--)s(l);return this},Ln.removeAllListeners=function(){return this.removeListener("*")},Ln.emit=Ln.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,ct(e)||(e=[e]),Vx(this,function(o,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],a=n.length);for(var l=function(c){var h=n[c];if(h.type===s.type&&(!h.namespace||h.namespace===s.namespace||h.namespace===$x)&&o.eventMatches(o.context,h,s)){var g=[s];e!=null&&Pb(g,e),o.beforeEmit(o.context,h,s),h.conf&&h.conf.one&&(o.listeners=o.listeners.filter(function(x){return x!==h}));var m=o.callbackContext(o.context,h,s),p=h.callback.apply(m,g);o.afterEmit(o.context,h,s),p===!1&&(s.stopPropagation(),s.preventDefault())}},v=0;v<a;v++)l(v);o.bubble(o.context)&&!s.isPropagationStopped()&&o.parent(o.context).emit(s,e)},t),this.emitting--,this};var Wx={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&li(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Lo=function(e){return ke(e)?new Tn(e):e},fc={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Po(Wx,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=Lo(r),o=0;o<this.length;o++){var s=this[o];s.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=Lo(r),o=0;o<this.length;o++){var s=this[o];s.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=Lo(r),o=0;o<this.length;o++){var s=this[o];s.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=Lo(r),o=0;o<this.length;o++){var s=this[o];s.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};ut.eventAliasesOn(fc);var vc={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(ke(e)||mr(e))return new Tn(e).filter(this);if(xt(e)){for(var n=this.spawn(),a=this,o=0;o<a.length;o++){var s=a[o],l=r?e.apply(r,[s,o,a]):e(s,o,a);l&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){ke(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],o=e.has(a);o||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(ke(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,o=e,s=this.length<e.length,l=s?a:o,v=s?o:a,f=0;f<l.length;f++){var c=l[f];v.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;ke(e)&&(e=r.$(e));var n=this.spawn(),a=this,o=e,s=function(v,f){for(var c=0;c<v.length;c++){var h=v[c],g=h._private.data.id,m=f.hasElementWithId(g);m||n.push(h)}};return s(a,o),s(o,a),n},diff:function(e){var r=this._private.cy;ke(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),o=this.spawn(),s=this,l=e,v=function(c,h,g){for(var m=0;m<c.length;m++){var p=c[m],x=p._private.data.id,w=h.hasElementWithId(x);w?o.merge(p):g.push(p)}};return v(s,l,n),v(l,s,a),{left:n,right:a,both:o}},add:function(e){var r=this._private.cy;if(!e)return this;if(ke(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),o=0;o<e.length;o++){var s=e[o],l=!this.has(s);l&&a.push(s)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&ke(e)){var a=e;e=n.mutableElements().filter(a)}for(var o=r.map,s=0;s<e.length;s++){var l=e[s],v=l._private.data.id,f=!o.has(v);if(f){var c=this.length++;this[c]=l,o.set(v,{ele:l,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,o=a.map;this[e]=void 0,o.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var l=this.length-1,v=this[l],f=v._private.data.id;this[l]=void 0,this[e]=v,o.set(f,{ele:v,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,o=a.get(n);if(!o)return this;var s=o.index;return this.unmergeAt(s),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&ke(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,o=0;o<a.length;o++){var s=a[o],l=r?e.apply(r,[s,o,a]):e(s,o,a);n.push(l)}return n},reduce:function(e,r){for(var n=r,a=this,o=0;o<a.length;o++)n=e(n,a[o],o,a);return n},max:function(e,r){for(var n=-1/0,a,o=this,s=0;s<o.length;s++){var l=o[s],v=r?e.apply(r,[l,s,o]):e(l,s,o);v>n&&(n=v,a=l)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,o=this,s=0;s<o.length;s++){var l=o[s],v=r?e.apply(r,[l,s,o]):e(l,s,o);v<n&&(n=v,a=l)}return{value:n,ele:a}}},at=vc;at.u=at["|"]=at["+"]=at.union=at.or=at.add,at["\\"]=at["!"]=at["-"]=at.difference=at.relativeComplement=at.subtract=at.not,at.n=at["&"]=at["."]=at.and=at.intersection=at.intersect,at["^"]=at["(+)"]=at["(-)"]=at.symmetricDifference=at.symdiff=at.xor,at.fnFilter=at.filterFn=at.stdFilter=at.filter,at.complement=at.abscomp=at.absoluteComplement;var Hx={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},cc=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function o(c){var h=c.pstyle("z-compound-depth");return h.value==="auto"?a?c.zDepth():0:h.value==="bottom"?-1:h.value==="top"?au:0}var s=o(e)-o(r);if(s!==0)return s;function l(c){var h=c.pstyle("z-index-compare");return h.value==="auto"&&c.isNode()?1:0}var v=l(e)-l(r);if(v!==0)return v;var f=e.pstyle("z-index").value-r.pstyle("z-index").value;return f!==0?f:e.poolIndex()-r.poolIndex()},ko={forEach:function(e,r){if(xt(e))for(var n=this.length,a=0;a<n;a++){var o=this[a],s=r?e.apply(r,[o,a,this]):e(o,a,this);if(s===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var o=e;o>=0&&o<r&&o<a;o++)n.push(this[o]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!xt(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(cc)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:au-1}else{var o=r.source,s=r.target,l=o.zDepth(),v=s.zDepth();return Math.max(l,v,0)}}}};ko.each=ko.forEach;var Gx=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":Pt(Symbol))!=e&&Pt(Symbol.iterator)!=e;r&&(ko[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},o=0,s=this.length;return Wf({next:function(){return o<s?a.value=n[o++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};Gx();var Ux=$t({nodeDimensionsIncludeLabels:!1}),Bo={layoutDimensions:function(e){e=Ux(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(k){return!k.isParent()}),o=this.cy(),s=r.eles,l=function(L){return L.id()},v=fi(n,l);e.emit({type:"layoutstart",layout:e}),e.animations=[];var f=function(L,D,_){var A={x:D.x1+D.w/2,y:D.y1+D.h/2},O={x:(_.x-A.x)*L,y:(_.y-A.y)*L};return{x:A.x+O.x,y:A.y+O.y}},c=r.spacingFactor&&r.spacingFactor!==1,h=function(){if(!c)return null;for(var L=sr(),D=0;D<a.length;D++){var _=a[D],A=v(_,D);tw(L,A.x,A.y)}return L},g=h(),m=fi(function(k,L){var D=v(k,L);if(c){var _=Math.abs(r.spacingFactor);D=f(_,g,D)}return r.transform!=null&&(D=r.transform(k,D)),D},l);if(r.animate){for(var p=0;p<a.length;p++){var x=a[p],w=m(x,p),y=r.animateFilter==null||r.animateFilter(x,p);if(y){var E=x.animation({position:w,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(E)}else x.position(w)}if(r.fit){var S=o.animation({fit:{boundingBox:s.boundingBoxAt(m),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(S)}else if(r.zoom!==void 0&&r.pan!==void 0){var T=o.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(T)}e.animations.forEach(function(k){return k.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),Ta.all(e.animations.map(function(k){return k.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(m),r.fit&&o.fit(r.eles,r.padding),r.zoom!=null&&o.zoom(r.zoom),r.pan&&o.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(_e({},e,{eles:this}))}};Bo.createLayout=Bo.makeLayout=Bo.layout;function dc(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],o;return(o=a[t])!=null||(o=a[t]=e(r)),o}function Ro(t,e){return t=Gn(t),function(n){return dc(t,e,n)}}function _o(t,e){t=Gn(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return dc(t,r,a)}}var qt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),o=this;e=!!(e||e===void 0),a&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=o;return e?s.emitAndNotify("style"):s.emit("style"),o.forEach(function(l){return l._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){this.cleanStyle();var o=n._private.style[e];return o??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,o=n.style();if(tt(e)){var s=e;o.applyBypass(this,s,a),this.emitAndNotify("style")}else if(ke(e))if(r===void 0){var l=this[0];return l?o.getStylePropertyValue(l,e):void 0}else o.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var v=this[0];return v?o.getRawStyle(v):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),o=this;if(e===void 0)for(var s=0;s<o.length;s++){var l=o[s];a.removeAllBypasses(l,n)}else{e=e.split(/\s+/);for(var v=0;v<o.length;v++){var f=o[v];a.removeBypasses(f,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,o=n.pstyle("opacity").value;if(!r)return o;var s=a.data.parent?n.parents():null;if(s)for(var l=0;l<s.length;l++){var v=s[l],f=v.pstyle("opacity").value;o=f*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Tu(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var o=n[a];if(!e(o))return!1}return!0}function Du(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var o=this[0],s=a.hasCompoundNodes();if(o){var l=o._private;if(!e(o))return!1;if(o.isNode())return!s||Tu(o,n);var v=l.source,f=l.target;return r(v)&&(!s||Tu(v,r))&&(v===f||r(f)&&(!s||Tu(f,r)))}}}var ka=Ro("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});qt.takesUpSpace=_o("takesUpSpace",Du({ok:ka}));var Kx=Ro("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&ka(t)}),Yx=Ro("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&ka(t)});qt.interactive=_o("interactive",Du({ok:Kx,parentOk:Yx,edgeOkViaNode:ka})),qt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var Xx=Ro("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&ka(t)}),Zx=ka;qt.visible=_o("visible",Du({ok:Xx,edgeOkViaNode:Zx})),qt.hidden=function(){var t=this[0];if(t)return!t.visible()},qt.isBundledBezier=_o("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1}),qt.bypass=qt.css=qt.style,qt.renderedCss=qt.renderedStyle,qt.removeBypass=qt.removeCss=qt.removeStyle,qt.pstyle=qt.parsedStyle;var kn={};function hc(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&xt(e[0])){var o=e[0];this.on(t.event,o)}else if(e.length===0||e.length===1&&ct(e[0])){for(var s=e.length===1?e[0]:null,l=0;l<this.length;l++){var v=this[l],f=!t.ableField||v._private[t.ableField],c=v._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(v);if(h!==void 0&&(f=h,!h))return this}f&&(v._private[t.field]=t.value,c&&r.push(v))}var g=this.spawn(r);g.updateStyle(),g.emit(t.event),s&&g.emit(s)}return this}}function Ba(t){kn[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},kn[t.on]=hc({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),kn[t.off]=hc({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Ba({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),Ba({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"}),Ba({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),Ba({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),kn.deselect=kn.unselect,kn.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},Ba({field:"active",on:"activate",off:"unactivate"}),Ba({field:"pannable",on:"panify",off:"unpanify"}),kn.inactive=function(){var t=this[0];if(t)return!t._private.active};var Yt={},gc=function(e){return function(n){for(var a=this,o=[],s=0;s<a.length;s++){var l=a[s];if(l.isNode()){for(var v=!1,f=l.connectedEdges(),c=0;c<f.length;c++){var h=f[c],g=h.source(),m=h.target();if(e.noIncomingEdges&&m===l&&g!==l||e.noOutgoingEdges&&g===l&&m!==l){v=!0;break}}v||o.push(l)}}return this.spawn(o,!0).filter(n)}},pc=function(e){return function(r){for(var n=this,a=[],o=0;o<n.length;o++){var s=n[o];if(s.isNode())for(var l=s.connectedEdges(),v=0;v<l.length;v++){var f=l[v],c=f.source(),h=f.target();e.outgoing&&c===s?(a.push(f),a.push(h)):e.incoming&&h===s&&(a.push(f),a.push(c))}}return this.spawn(a,!0).filter(r)}},mc=function(e){return function(r){for(var n=this,a=[],o={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var l=!1,v=0;v<s.length;v++){var f=s[v],c=f.id();o[c]||(o[c]=!0,a.push(f),l=!0)}if(!l)break;n=s}return this.spawn(a,!0).filter(r)}};Yt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},_e(Yt,{roots:gc({noIncomingEdges:!0}),leaves:gc({noOutgoingEdges:!0}),outgoers:Dr(pc({outgoing:!0}),"outgoers"),successors:mc({outgoing:!0}),incomers:Dr(pc({incoming:!0}),"incomers"),predecessors:mc({incoming:!0})}),_e(Yt,{neighborhood:Dr(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],o=a.connectedEdges(),s=0;s<o.length;s++){var l=o[s],v=l.source(),f=l.target(),c=a===v?f:v;c.length>0&&e.push(c[0]),e.push(l[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),Yt.neighbourhood=Yt.neighborhood,Yt.closedNeighbourhood=Yt.closedNeighborhood,Yt.openNeighbourhood=Yt.openNeighborhood,_e(Yt,{source:Dr(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Dr(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:yc({attr:"source"}),targets:yc({attr:"target"})});function yc(t){return function(r){for(var n=[],a=0;a<this.length;a++){var o=this[a],s=o._private[t.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}_e(Yt,{edgesWith:Dr(bc(),"edgesWith"),edgesTo:Dr(bc({thisIsSrc:!0}),"edgesTo")});function bc(t){return function(r){var n=[],a=this._private.cy,o=t||{};ke(r)&&(r=a.$(r));for(var s=0;s<r.length;s++)for(var l=r[s]._private.edges,v=0;v<l.length;v++){var f=l[v],c=f._private.data,h=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),g=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),m=h||g;m&&((o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!h||o.thisIsTgt&&!g)||n.push(f))}return this.spawn(n,!0)}}_e(Yt,{connectedEdges:Dr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var o=a._private.edges,s=0;s<o.length;s++){var l=o[s];e.push(l)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Dr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Dr(wc(),"parallelEdges"),codirectedEdges:Dr(wc({codirected:!0}),"codirectedEdges")});function wc(t){var e={codirected:!1};return t=_e({},e,t),function(n){for(var a=[],o=this.edges(),s=t,l=0;l<o.length;l++)for(var v=o[l],f=v._private,c=f.source,h=c._private.data.id,g=f.data.target,m=c._private.edges,p=0;p<m.length;p++){var x=m[p],w=x._private.data,y=w.target,E=w.source,S=y===g&&E===h,T=h===y&&g===E;(s.codirected&&S||!s.codirected&&(S||T))&&a.push(x)}return this.spawn(a,!0).filter(n)}}_e(Yt,{components:function(e){var r=this,n=r.cy(),a=n.collection(),o=e==null?r.nodes():e.nodes(),s=[];e!=null&&o.empty()&&(o=e.sources());var l=function(c,h){a.merge(c),o.unmerge(c),h.merge(c)};if(o.empty())return r.spawn();var v=function(){var c=n.collection();s.push(c);var h=o[0];l(h,c),r.bfs({directed:!1,roots:h,visit:function(m){return l(m,c)}}),c.forEach(function(g){g.connectedEdges().forEach(function(m){r.has(m)&&c.has(m.source())&&c.has(m.target())&&c.merge(m)})})};do v();while(o.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),Yt.componentsOf=Yt.components;var Vt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){St("A collection must have a reference to the core");return}var o=new Yr,s=!1;if(!r)r=[];else if(r.length>0&&tt(r[0])&&!li(r[0])){s=!0;for(var l=[],v=new ya,f=0,c=r.length;f<c;f++){var h=r[f];h.data==null&&(h.data={});var g=h.data;if(g.id==null)g.id=uv();else if(e.hasElementWithId(g.id)||v.has(g.id))continue;var m=new ho(e,h,!1);l.push(m),v.add(g.id)}r=l}this.length=0;for(var p=0,x=r.length;p<x;p++){var w=r[p][0];if(w!=null){var y=w._private.data.id;(!n||!o.has(y))&&(n&&o.set(y,{index:this.length,ele:w}),this[this.length]=w,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(E){this.lazyMap=E},rebuildMap:function(){for(var S=this.lazyMap=new Yr,T=this.eles,k=0;k<T.length;k++){var L=T[k];S.set(L.id(),{index:k,ele:L})}}},n&&(this._private.map=o),s&&!a&&this.restore()},ht=ho.prototype=Vt.prototype=Object.create(Array.prototype);ht.instanceString=function(){return"collection"},ht.spawn=function(t,e){return new Vt(this.cy(),t,e)},ht.spawnSelf=function(){return this.spawn(this)},ht.cy=function(){return this._private.cy},ht.renderer=function(){return this._private.cy.renderer()},ht.element=function(){return this[0]},ht.collection=function(){return Kf(this)?this:new Vt(this._private.cy,[this])},ht.unique=function(){return new Vt(this._private.cy,this,!0)},ht.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)},ht.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new Vt(e)},ht.$id=ht.getElementById,ht.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index},ht.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index},ht.indexOfId=function(t){return t=""+t,this._private.map.get(t).index},ht.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(tt(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var o=!1,s={},l=t.data.source,v=t.data.target;l!=null&&l!=a.source&&(s.source=""+l,o=!0),v!=null&&v!=a.target&&(s.target=""+v,o=!0),o&&(e=e.move(s))}else{var f="parent"in t.data,c=t.data.parent;f&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var h=function(x,w,y){var E=t[x];E!=null&&E!==n[x]&&(E?e[w]():e[y]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var g={data:Kr(n.data),position:Kr(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};g.classes="";var m=0;return n.classes.forEach(function(p){return g.classes+=m++===0?p:" "+p}),g}}},ht.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t},ht.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),o=new ho(t,a,!1);e.push(o)}return new Vt(t,e)},ht.copy=ht.clone,ht.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,o=[],s=[],l,v=0,f=r.length;v<f;v++){var c=r[v];e&&!c.removed()||(c.isNode()?o.push(c):s.push(c))}l=o.concat(s);var h,g=function(){l.splice(h,1),h--};for(h=0;h<l.length;h++){var m=l[h],p=m._private,x=p.data;if(m.clearTraversalCache(),!(!e&&!p.removed)){if(x.id===void 0)x.id=uv();else if(we(x.id))x.id=""+x.id;else if(bn(x.id)||!ke(x.id)){St("Can not create element with invalid string ID `"+x.id+"`"),g();continue}else if(n.hasElementWithId(x.id)){St("Can not create second element with ID `"+x.id+"`"),g();continue}}var w=x.id;if(m.isNode()){var y=p.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(m.isEdge()){for(var E=m,S=["source","target"],T=S.length,k=!1,L=0;L<T;L++){var D=S[L],_=x[D];we(_)&&(_=x[D]=""+x[D]),_==null||_===""?(St("Can not create edge `"+w+"` with unspecified "+D),k=!0):n.hasElementWithId(_)||(St("Can not create edge `"+w+"` with nonexistant "+D+" `"+_+"`"),k=!0)}if(k){g();continue}var A=n.getElementById(x.source),O=n.getElementById(x.target);A.same(O)?A._private.edges.push(E):(A._private.edges.push(E),O._private.edges.push(E)),E._private.source=A,E._private.target=O}p.map=new Yr,p.map.set(w,{ele:m,index:0}),p.removed=!1,e&&n.addToPool(m)}for(var N=0;N<o.length;N++){var R=o[N],F=R._private.data;we(F.parent)&&(F.parent=""+F.parent);var M=F.parent,H=M!=null;if(H||R._private.parent){var $=R._private.parent?n.collection().merge(R._private.parent):n.getElementById(M);if($.empty())F.parent=void 0;else if($[0].removed())st("Node added with missing parent, reference to parent removed"),F.parent=void 0,R._private.parent=null;else{for(var q=!1,U=$;!U.empty();){if(R.same(U)){q=!0,F.parent=void 0;break}U=U.parent()}q||($[0]._private.children.push(R),R._private.parent=$[0],a.hasCompoundNodes=!0)}}}if(l.length>0){for(var X=l.length===r.length?r:new Vt(n,l),J=0;J<X.length;J++){var Y=X[J];Y.isNode()||(Y.parallelEdges().clearTraversalCache(),Y.source().clearTraversalCache(),Y.target().clearTraversalCache())}var j;a.hasCompoundNodes?j=n.collection().merge(X).merge(X.connectedNodes()).merge(X.parent()):j=X,j.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?X.emitAndNotify("add"):e&&X.emit("add")}return r},ht.removed=function(){var t=this[0];return t&&t._private.removed},ht.inside=function(){var t=this[0];return t&&!t._private.removed},ht.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},o=r._private.cy;function s(M){for(var H=M._private.edges,$=0;$<H.length;$++)v(H[$])}function l(M){for(var H=M._private.children,$=0;$<H.length;$++)v(H[$])}function v(M){var H=a[M.id()];e&&M.removed()||H||(a[M.id()]=!0,M.isNode()?(n.push(M),s(M),l(M)):n.unshift(M))}for(var f=0,c=r.length;f<c;f++){var h=r[f];v(h)}function g(M,H){var $=M._private.edges;xn($,H),M.clearTraversalCache()}function m(M){M.clearTraversalCache()}var p=[];p.ids={};function x(M,H){H=H[0],M=M[0];var $=M._private.children,q=M.id();xn($,H),H._private.parent=null,p.ids[q]||(p.ids[q]=!0,p.push(M))}r.dirtyCompoundBoundsCache(),e&&o.removeFromPool(n);for(var w=0;w<n.length;w++){var y=n[w];if(y.isEdge()){var E=y.source()[0],S=y.target()[0];g(E,y),g(S,y);for(var T=y.parallelEdges(),k=0;k<T.length;k++){var L=T[k];m(L),L.isBundledBezier()&&L.dirtyBoundingBoxCache()}}else{var D=y.parent();D.length!==0&&x(D,y)}e&&(y._private.removed=!0)}var _=o._private.elements;o._private.hasCompoundNodes=!1;for(var A=0;A<_.length;A++){var O=_[A];if(O.isParent()){o._private.hasCompoundNodes=!0;break}}var N=new Vt(this.cy(),n);N.size()>0&&(t?N.emitAndNotify("remove"):e&&N.emit("remove"));for(var R=0;R<p.length;R++){var F=p[R];(!e||!F.removed())&&F.updateStyle()}return N},ht.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,o=function(p){return p==null?p:""+p};if(t.source!==void 0||t.target!==void 0){var s=o(t.source),l=o(t.target),v=s!=null&&e.hasElementWithId(s),f=l!=null&&e.hasElementWithId(l);(v||f)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var m=0;m<r.length;m++){var p=r[m],x=p._private.data;p.isEdge()&&(v&&(x.source=s),f&&(x.target=l))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=o(t.parent),h=c===null||e.hasElementWithId(c);if(h){var g=c===null?void 0:c;e.batch(function(){var m=r.remove(n,a);m.emitAndNotify("moveout");for(var p=0;p<r.length;p++){var x=r[p],w=x._private.data;x.isNode()&&(w.parent=g)}m.restore(n,a)}),r.emitAndNotify("move")}}return this},[Ov,ux,Co,An,Aa,Cx,To,Fx,fc,vc,Hx,ko,Bo,qt,kn,Yt].forEach(function(t){_e(ht,t)});var Qx={add:function(e){var r,n=this;if(mr(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var o=[],s=0;s<a.length;s++){var l=a[s];o.push(l.json())}r=new Vt(n,o)}}else if(ct(e)){var v=e;r=new Vt(n,v)}else if(tt(e)&&(ct(e.nodes)||ct(e.edges))){for(var f=e,c=[],h=["nodes","edges"],g=0,m=h.length;g<m;g++){var p=h[g],x=f[p];if(ct(x))for(var w=0,y=x.length;w<y;w++){var E=_e({group:p},x[w]);c.push(E)}}r=new Vt(n,c)}else{var S=e;r=new ho(n,S).collection()}return r},remove:function(e){if(!mr(e)){if(ke(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Jx(t,e,r,n){var a=4,o=.001,s=1e-7,l=10,v=11,f=1/(v-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var g=c?new Float32Array(v):new Array(v);function m(O,N){return 1-3*N+3*O}function p(O,N){return 3*N-6*O}function x(O){return 3*O}function w(O,N,R){return((m(N,R)*O+p(N,R))*O+x(N))*O}function y(O,N,R){return 3*m(N,R)*O*O+2*p(N,R)*O+x(N)}function E(O,N){for(var R=0;R<a;++R){var F=y(N,t,r);if(F===0)return N;var M=w(N,t,r)-O;N-=M/F}return N}function S(){for(var O=0;O<v;++O)g[O]=w(O*f,t,r)}function T(O,N,R){var F,M,H=0;do M=N+(R-N)/2,F=w(M,t,r)-O,F>0?R=M:N=M;while(Math.abs(F)>s&&++H<l);return M}function k(O){for(var N=0,R=1,F=v-1;R!==F&&g[R]<=O;++R)N+=f;--R;var M=(O-g[R])/(g[R+1]-g[R]),H=N+M*f,$=y(H,t,r);return $>=o?E(O,H):$===0?H:T(O,N,N+f)}var L=!1;function D(){L=!0,(t!==e||r!==n)&&S()}var _=function(N){return L||D(),t===e&&r===n?N:N===0?0:N===1?1:w(k(N),e,n)};_.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var A="generateBezier("+[t,e,r,n]+")";return _.toString=function(){return A},_}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var jx=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,o){var s={x:n.x+o.dx*a,v:n.v+o.dv*a,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,a){var o={dx:n.v,dv:t(n)},s=e(n,a*.5,o),l=e(n,a*.5,s),v=e(n,a,l),f=1/6*(o.dx+2*(s.dx+l.dx)+v.dx),c=1/6*(o.dv+2*(s.dv+l.dv)+v.dv);return n.x=n.x+f*a,n.v=n.v+c*a,n}return function n(a,o,s){var l={x:-1,v:0,tension:null,friction:null},v=[0],f=0,c=1/1e4,h=16/1e3,g,m,p;for(a=parseFloat(a)||500,o=parseFloat(o)||20,s=s||null,l.tension=a,l.friction=o,g=s!==null,g?(f=n(a,o),m=f/s*h):m=h;p=r(p||l,m),v.push(1+p.x),f+=16,Math.abs(p.x)>c&&Math.abs(p.v)>c;);return g?function(x){return v[x*(v.length-1)|0]}:f}}(),gt=function(e,r,n,a){var o=Jx(e,r,n,a);return function(s,l,v){return s+(l-s)*o(v)}},Io={linear:function(e,r,n){return e+(r-e)*n},ease:gt(.25,.1,.25,1),"ease-in":gt(.42,0,1,1),"ease-out":gt(0,0,.58,1),"ease-in-out":gt(.42,0,.58,1),"ease-in-sine":gt(.47,0,.745,.715),"ease-out-sine":gt(.39,.575,.565,1),"ease-in-out-sine":gt(.445,.05,.55,.95),"ease-in-quad":gt(.55,.085,.68,.53),"ease-out-quad":gt(.25,.46,.45,.94),"ease-in-out-quad":gt(.455,.03,.515,.955),"ease-in-cubic":gt(.55,.055,.675,.19),"ease-out-cubic":gt(.215,.61,.355,1),"ease-in-out-cubic":gt(.645,.045,.355,1),"ease-in-quart":gt(.895,.03,.685,.22),"ease-out-quart":gt(.165,.84,.44,1),"ease-in-out-quart":gt(.77,0,.175,1),"ease-in-quint":gt(.755,.05,.855,.06),"ease-out-quint":gt(.23,1,.32,1),"ease-in-out-quint":gt(.86,0,.07,1),"ease-in-expo":gt(.95,.05,.795,.035),"ease-out-expo":gt(.19,1,.22,1),"ease-in-out-expo":gt(1,0,0,1),"ease-in-circ":gt(.6,.04,.98,.335),"ease-out-circ":gt(.075,.82,.165,1),"ease-in-out-circ":gt(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Io.linear;var a=jx(e,r,n);return function(o,s,l){return o+(s-o)*a(l)}},"cubic-bezier":gt};function xc(t,e,r,n,a){if(n===1||e===r)return r;var o=a(e,r,n);return t==null||((t.roundValue||t.color)&&(o=Math.round(o)),t.min!==void 0&&(o=Math.max(o,t.min)),t.max!==void 0&&(o=Math.min(o,t.max))),o}function Ec(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Ra(t,e,r,n,a){var o=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var s=Ec(t,a),l=Ec(e,a);if(we(s)&&we(l))return xc(o,s,l,r,n);if(ct(s)&&ct(l)){for(var v=[],f=0;f<l.length;f++){var c=s[f],h=l[f];if(c!=null&&h!=null){var g=xc(o,c,h,r,n);v.push(g)}else v.push(h)}return v}}function eE(t,e,r,n){var a=!n,o=t._private,s=e._private,l=s.easing,v=s.startTime,f=n?t:t.cy(),c=f.style();if(!s.easingImpl)if(l==null)s.easingImpl=Io.linear;else{var h;if(ke(l)){var g=c.parse("transition-timing-function",l);h=g.value}else h=l;var m,p;ke(h)?(m=h,p=[]):(m=h[1],p=h.slice(2).map(function(X){return+X})),p.length>0?(m==="spring"&&p.push(s.duration),s.easingImpl=Io[m].apply(null,p)):s.easingImpl=Io[m]}var x=s.easingImpl,w;if(s.duration===0?w=1:w=(r-v)/s.duration,s.applying&&(w=s.progress),w<0?w=0:w>1&&(w=1),s.delay==null){var y=s.startPosition,E=s.position;if(E&&a&&!t.locked()){var S={};Di(y.x,E.x)&&(S.x=Ra(y.x,E.x,w,x)),Di(y.y,E.y)&&(S.y=Ra(y.y,E.y,w,x)),t.position(S)}var T=s.startPan,k=s.pan,L=o.pan,D=k!=null&&n;D&&(Di(T.x,k.x)&&(L.x=Ra(T.x,k.x,w,x)),Di(T.y,k.y)&&(L.y=Ra(T.y,k.y,w,x)),t.emit("pan"));var _=s.startZoom,A=s.zoom,O=A!=null&&n;O&&(Di(_,A)&&(o.zoom=gi(o.minZoom,Ra(_,A,w,x),o.maxZoom)),t.emit("zoom")),(D||O)&&t.emit("viewport");var N=s.style;if(N&&N.length>0&&a){for(var R=0;R<N.length;R++){var F=N[R],M=F.name,H=F,$=s.startStyle[M],q=c.properties[$.name],U=Ra($,H,w,x,q);c.overrideBypass(t,M,U)}t.emit("style")}}return s.progress=w,w}function Di(t,e){return t==null||e==null?!1:we(t)&&we(e)?!0:!!(t&&e)}function tE(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function Sc(t,e){var r=e._private.aniEles,n=[];function a(c,h){var g=c._private,m=g.animation.current,p=g.animation.queue,x=!1;if(m.length===0){var w=p.shift();w&&m.push(w)}for(var y=function(L){for(var D=L.length-1;D>=0;D--){var _=L[D];_()}L.splice(0,L.length)},E=m.length-1;E>=0;E--){var S=m[E],T=S._private;if(T.stopped){m.splice(E,1),T.hooked=!1,T.playing=!1,T.started=!1,y(T.frames);continue}!T.playing&&!T.applying||(T.playing&&T.applying&&(T.applying=!1),T.started||tE(c,S,t),eE(c,S,t,h),T.applying&&(T.applying=!1),y(T.frames),T.step!=null&&T.step(t),S.completed()&&(m.splice(E,1),T.hooked=!1,T.playing=!1,T.started=!1,y(T.completes)),x=!0)}return!h&&m.length===0&&p.length===0&&n.push(c),x}for(var o=!1,s=0;s<r.length;s++){var l=r[s],v=a(l);o=o||v}var f=a(e,!0);(o||f)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var rE={animate:ut.animate(),animation:ut.animation(),animated:ut.animated(),clearQueue:ut.clearQueue(),delay:ut.delay(),delayAnimation:ut.delayAnimation(),stop:ut.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&fo(function(o){Sc(o,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(o,s){Sc(s,e)},n.beforeRenderPriorities.animations):r()}},nE={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&li(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},Mo=function(e){return ke(e)?new Tn(e):e},Cc={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Po(nE,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,Mo(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,Mo(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,Mo(r),n),this},once:function(e,r,n){return this.emitter().one(e,Mo(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};ut.eventAliasesOn(Cc);var Au={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};Au.jpeg=Au.jpg;var Oo={layout:function(e){var r=this;if(e==null){St("Layout options must be specified to make a layout");return}if(e.name==null){St("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){St("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;ke(e.eles)?o=r.$(e.eles):o=e.eles!=null?e.eles:r.$();var s=new a(_e({},e,{cy:r,eles:o}));return s}};Oo.createLayout=Oo.makeLayout=Oo.layout;var aE={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var o=n[a],s=e[o],l=r.getElementById(o);l.data(s)}})}},iE=$t({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Pu={renderTo:function(e,r,n,a){var o=this._private.renderer;return o.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){St("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&st("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=iE(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Pu.invalidateDimensions=Pu.resize;var No={collection:function(e,r){return ke(e)?this.$(e):mr(e)?e.collection():ct(e)?(r||(r={}),new Vt(this,e,r.unique,r.removed)):new Vt(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};No.elements=No.filter=No.$;var Xt={},Ai="t",oE="f";Xt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),o=0;o<t.length;o++){var s=t[o],l=e.getContextMeta(s);if(!l.empty){var v=e.getContextStyle(l),f=e.applyContextStyle(l,v,s);s._private.appliedInitStyle?e.updateTransitions(s,f.diffProps):s._private.appliedInitStyle=!0;var c=e.updateStyleHints(s);c&&a.push(s)}}return a},Xt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,o=n[a];if(o)return o;for(var s=[],l={},v=0;v<r.length;v++){var f=r[v],c=t[v]===Ai,h=e[v]===Ai,g=c!==h,m=f.mappedProperties.length>0;if(g||h&&m){var p=void 0;g&&m||g?p=f.properties:m&&(p=f.mappedProperties);for(var x=0;x<p.length;x++){for(var w=p[x],y=w.name,E=!1,S=v+1;S<r.length;S++){var T=r[S],k=e[S]===Ai;if(k&&(E=T.properties[w.name]!=null,E))break}!l[y]&&!E&&(l[y]=!0,s.push(y))}}}return n[a]=s,s},Xt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",o=0;o<e.length;o++){var s=e[o],l=s.selector&&s.selector.matches(t);l?r+=Ai:r+=oE}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}},Xt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},o=0;o<r.length;o++){var s=r[o],l=e[o]===Ai;if(l)for(var v=0;v<s.properties.length;v++){var f=s.properties[v];a[f.name]=f}}return n[e]=a,a},Xt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,o={},s=n.types,l=0;l<a.length;l++){var v=a[l],f=e[v],c=r.pstyle(v);if(!f)if(c)c.bypass?f={name:v,deleteBypassed:!0}:f={name:v,delete:!0};else continue;if(c!==f){if(f.mapped===s.fn&&c!=null&&c.mapping!=null&&c.mapping.value===f.value){var h=c.mapping,g=h.fnValue=f.value(r);if(g===h.prevFnValue)continue}var m=o[v]={prev:c};n.applyParsedProperty(r,f),m.next=r.pstyle(v),m.next&&m.next.bypass&&(m.next=m.next.bypassed)}}return{diffProps:o}},Xt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,o=function(ge,ye,Be){return r.getPropertiesHash(ge,ye,Be)},s=e.styleKey;if(t.removed())return!1;var l=e.group==="nodes",v=t._private.style;n=Object.keys(v);for(var f=0;f<a.length;f++){var c=a[f];e.styleKeys[c]=[ma,vi]}for(var h=function(ge,ye){return e.styleKeys[ye][0]=ci(ge,e.styleKeys[ye][0])},g=function(ge,ye){return e.styleKeys[ye][1]=di(ge,e.styleKeys[ye][1])},m=function(ge,ye){h(ge,ye),g(ge,ye)},p=function(ge,ye){for(var Be=0;Be<ge.length;Be++){var ze=ge.charCodeAt(Be);h(ze,ye),g(ze,ye)}},x=2e9,w=function(ge){return-128<ge&&ge<128&&Math.floor(ge)!==ge?x-(ge*1024|0):ge},y=0;y<n.length;y++){var E=n[y],S=v[E];if(S!=null){var T=this.properties[E],k=T.type,L=T.groupKey,D=void 0;T.hashOverride!=null?D=T.hashOverride(t,S):S.pfValue!=null&&(D=S.pfValue);var _=T.enums==null?S.value:null,A=D!=null,O=_!=null,N=A||O,R=S.units;if(k.number&&N&&!k.multiple){var F=A?D:_;m(w(F),L),!A&&R!=null&&p(R,L)}else p(S.strValue,L)}}for(var M=[ma,vi],H=0;H<a.length;H++){var $=a[H],q=e.styleKeys[$];M[0]=ci(q[0],M[0]),M[1]=di(q[1],M[1])}e.styleKey=wb(M[0],M[1]);var U=e.styleKeys;e.labelDimsKey=wn(U.labelDimensions);var X=o(t,["label"],U.labelDimensions);if(e.labelKey=wn(X),e.labelStyleKey=wn(vo(U.commonLabel,X)),!l){var J=o(t,["source-label"],U.labelDimensions);e.sourceLabelKey=wn(J),e.sourceLabelStyleKey=wn(vo(U.commonLabel,J));var Y=o(t,["target-label"],U.labelDimensions);e.targetLabelKey=wn(Y),e.targetLabelStyleKey=wn(vo(U.commonLabel,Y))}if(l){var j=e.styleKeys,ie=j.nodeBody,se=j.nodeBorder,ee=j.backgroundImage,ne=j.compound,K=j.pie,oe=[ie,se,ee,ne,K].filter(function(ue){return ue!=null}).reduce(vo,[ma,vi]);e.nodeKey=wn(oe),e.hasPie=K!=null&&K[0]!==ma&&K[1]!==vi}return s!==e.styleKey},Xt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},Xt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,o,s=r.types,l=r.properties[n.name].type,v=n.bypass,f=a[n.name],c=f&&f.bypass,h=t._private,g="mapping",m=function(ie){return ie==null?null:ie.pfValue!=null?ie.pfValue:ie.value},p=function(){var ie=m(f),se=m(n);r.checkTriggers(t,n.name,ie,se)};if(n&&n.name.substr(0,3)==="pie"&&st("The pie style properties are deprecated.  Create charts using background images instead."),e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",v)),n.delete)return a[n.name]=void 0,p(),!0;if(n.deleteBypassed)return f?f.bypass?(f.bypassed=void 0,p(),!0):!1:(p(),!0);if(n.deleteBypass)return f?f.bypass?(a[n.name]=f.bypassed,p(),!0):!1:(p(),!0);var x=function(){st("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var w=n.field.split("."),y=h.data,E=0;E<w.length&&y;E++){var S=w[E];y=y[S]}if(y==null)return x(),!1;var T;if(we(y)){var k=n.fieldMax-n.fieldMin;k===0?T=0:T=(y-n.fieldMin)/k}else return st("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+t.id()+"` is non-numeric)"),!1;if(T<0?T=0:T>1&&(T=1),l.color){var L=n.valueMin[0],D=n.valueMax[0],_=n.valueMin[1],A=n.valueMax[1],O=n.valueMin[2],N=n.valueMax[2],R=n.valueMin[3]==null?1:n.valueMin[3],F=n.valueMax[3]==null?1:n.valueMax[3],M=[Math.round(L+(D-L)*T),Math.round(_+(A-_)*T),Math.round(O+(N-O)*T),Math.round(R+(F-R)*T)];o={bypass:n.bypass,name:n.name,value:M,strValue:"rgb("+M[0]+", "+M[1]+", "+M[2]+")"}}else if(l.number){var H=n.valueMin+(n.valueMax-n.valueMin)*T;o=this.parse(n.name,H,n.bypass,g)}else return!1;if(!o)return x(),!1;o.mapping=n,n=o;break}case s.data:{for(var $=n.field.split("."),q=h.data,U=0;U<$.length&&q;U++){var X=$[U];q=q[X]}if(q!=null&&(o=this.parse(n.name,q,n.bypass,g)),!o)return x(),!1;o.mapping=n,n=o;break}case s.fn:{var J=n.value,Y=n.fnValue!=null?n.fnValue:J(t);if(n.prevFnValue=Y,Y==null)return st("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(o=this.parse(n.name,Y,n.bypass,g),!o)return st("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;o.mapping=Kr(n),n=o;break}case void 0:break;default:return!1}return v?(c?n.bypassed=f.bypassed:n.bypassed=f,a[n.name]=n):c?f.bypassed=n:a[n.name]=n,p(),!0},Xt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,o=Object.keys(a),s=0;s<o.length;s++){var l=o[s],v=a[l];v!=null&&(v.bypass?v.bypassed=null:a[l]=null)}}},Xt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()},Xt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(a.length>0&&o>0){for(var l={},v=!1,f=0;f<a.length;f++){var c=a[f],h=t.pstyle(c),g=e[c];if(g){var m=g.prev,p=m,x=g.next!=null?g.next:h,w=!1,y=void 0,E=1e-6;p&&(we(p.pfValue)&&we(x.pfValue)?(w=x.pfValue-p.pfValue,y=p.pfValue+E*w):we(p.value)&&we(x.value)?(w=x.value-p.value,y=p.value+E*w):ct(p.value)&&ct(x.value)&&(w=p.value[0]!==x.value[0]||p.value[1]!==x.value[1]||p.value[2]!==x.value[2],y=p.strValue),w&&(l[c]=x.strValue,this.applyBypass(t,c,y),v=!0))}}if(!v)return;n.transitioning=!0,new Ta(function(S){s>0?t.delayAnimation(s).play().promise().then(S):S()}).then(function(){return t.animation({style:l,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)},Xt.checkTrigger=function(t,e,r,n,a,o){var s=this.properties[e],l=a(s);l!=null&&l(r,n)&&o(s)},Xt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(o){return o.triggersZOrder},function(){a._private.cy.notify("zorder",t)})},Xt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&(e==="curve-style"&&(r==="bezier"||n==="bezier")||e==="display"&&(r==="none"||n==="none"))&&t.parallelEdges().forEach(function(o){o.isBundledBezier()&&o.dirtyBoundingBoxCache()})})},Xt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n)};var Pi={};Pi.applyBypass=function(t,e,r,n){var a=this,o=[],s=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var l=0;l<a.properties.length;l++){var v=a.properties[l],f=v.name,c=this.parse(f,r,!0);c&&o.push(c)}}else if(ke(e)){var h=this.parse(e,r,!0);h&&o.push(h)}else if(tt(e)){var g=e;n=r;for(var m=Object.keys(g),p=0;p<m.length;p++){var x=m[p],w=g[x];if(w===void 0&&(w=g[lo(x)]),w!==void 0){var y=this.parse(x,w,!0);y&&o.push(y)}}}else return!1;if(o.length===0)return!1;for(var E=!1,S=0;S<t.length;S++){for(var T=t[S],k={},L=void 0,D=0;D<o.length;D++){var _=o[D];if(n){var A=T.pstyle(_.name);L=k[_.name]={prev:A}}E=this.applyParsedProperty(T,Kr(_))||E,n&&(L.next=T.pstyle(_.name))}E&&this.updateStyleHints(T),n&&this.updateTransitions(T,k,s)}return E},Pi.overrideBypass=function(t,e,r){e=ru(e);for(var n=0;n<t.length;n++){var a=t[n],o=a._private.style[e],s=this.properties[e].type,l=s.color,v=s.mutiple,f=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(a,e,r):(o.value=r,o.pfValue!=null&&(o.pfValue=r),l?o.strValue="rgb("+r.join(",")+")":v?o.strValue=r.join(" "):o.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,f,r)}},Pi.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)},Pi.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var o=t[a],s={},l=0;l<e.length;l++){var v=e[l],f=this.properties[v],c=o.pstyle(f.name);if(!(!c||!c.bypass)){var h="",g=this.parse(v,h,!0),m=s[f.name]={prev:c};this.applyParsedProperty(o,g),m.next=o.pstyle(f.name)}}this.updateStyleHints(o),r&&this.updateTransitions(o,s,n)}};var Lu={};Lu.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1},Lu.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var Xr={};Xr.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},Xr.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var o=r.properties[a],s=r.getStylePropertyValue(t,o.name,e);s!=null&&(n[o.name]=s,n[lo(o.name)]=s)}return n}},Xr.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]},Xr.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var o=a.type,s=t.pstyle(a.name);if(s){var l=s.value,v=s.units,f=s.strValue;if(r&&o.number&&l!=null&&we(l)){var c=t.cy().zoom(),h=function(w){return w*c},g=function(w,y){return h(w)+y},m=ct(l),p=m?v.every(function(x){return x!=null}):v!=null;return p?m?l.map(function(x,w){return g(x,v[w])}).join(" "):g(l,v):m?l.map(function(x){return ke(x)?x:""+h(x)}).join(" "):""+h(l)}else if(f!=null)return f}return null}},Xr.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],o=a.name,s=t.pstyle(o);s!==void 0&&(tt(s)?s=this.parse(o,s.strValue):s=this.parse(o,s)),s&&(r[o]=s)}return r},Xr.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var o=Object.keys(n),s=0;s<o.length;s++){var l=o[s],v=n[l],f=a[l]||a[ru(l)],c=this.parse(f.name,v);c&&r.push(c)}return r},Xr.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,o,s,l,v,f;for(v=0;v<e.length;v++)if(a=e[v],o=t.pstyle(a,!1),o!=null)if(o.pfValue!=null)n[0]=ci(l,n[0]),n[1]=di(l,n[1]);else for(s=o.strValue,f=0;f<s.length;f++)l=s.charCodeAt(f),n[0]=ci(l,n[0]),n[1]=di(l,n[1]);return n},Xr.getPropertiesHash=Xr.getNonDefaultPropertiesHash;var zo={};zo.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,o=n.style||n.css,s=Object.keys(o);e.selector(a);for(var l=0;l<s.length;l++){var v=s[l],f=o[v];e.css(v,f)}}return e},zo.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e},zo.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,o={},s=0;s<a.length;s++){var l=a[s];o[l.name]=l.strValue}t.push({selector:n?n.toString():"core",style:o})}return t};var ku={};ku.appendFromString=function(t){var e=this,r=this,n=""+t,a,o,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function l(){n.length>a.length?n=n.substr(a.length):n=""}function v(){o.length>s.length?o=o.substr(s.length):o=""}for(;;){var f=n.match(/^\s*$/);if(f)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){st("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var h=c[1];if(h!=="core"){var g=new Tn(h);if(g.invalid){st("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),l();continue}}var m=c[2],p=!1;o=m;for(var x=[];;){var w=o.match(/^\s*$/);if(w)break;var y=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){st("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+m),p=!0;break}s=y[0];var E=y[1],S=y[2],T=e.properties[E];if(!T){st("Skipping property: Invalid property name in: "+s),v();continue}var k=r.parse(E,S);if(!k){st("Skipping property: Invalid property definition in: "+s),v();continue}x.push({name:E,val:S}),v()}if(p){l();break}r.selector(h);for(var L=0;L<x.length;L++){var D=x[L];r.css(D.name,D.val)}l()}return r},ku.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var Wt={};(function(){var t=kt,e=sb,r=lb,n=fb,a=vb,o=function(oe){return"^"+oe+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(oe){var ue=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+oe+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+ue+")\\s*\\,\\s*("+ue+")\\)$"},l=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Wt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:l,singleRegexMatchValue:!0},urls:{regexes:l,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(oe,ue){switch(oe.length){case 2:return ue[0]!=="deg"&&ue[0]!=="rad"&&ue[1]!=="deg"&&ue[1]!=="rad";case 1:return ke(oe[0])||ue[0]==="deg"||ue[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(oe){var ue=oe.length;return ue===1||ue===2||ue===4}}};var v={zeroNonZero:function(oe,ue){return(oe==null||ue==null)&&oe!==ue||oe==0&&ue!=0?!0:oe!=0&&ue==0},any:function(oe,ue){return oe!=ue},emptyNonEmpty:function(oe,ue){var ge=bn(oe),ye=bn(ue);return ge&&!ye||!ge&&ye}},f=Wt.types,c=[{name:"label",type:f.text,triggersBounds:v.any,triggersZOrder:v.emptyNonEmpty},{name:"text-rotation",type:f.textRotation,triggersBounds:v.any},{name:"text-margin-x",type:f.bidirectionalSize,triggersBounds:v.any},{name:"text-margin-y",type:f.bidirectionalSize,triggersBounds:v.any}],h=[{name:"source-label",type:f.text,triggersBounds:v.any},{name:"source-text-rotation",type:f.textRotation,triggersBounds:v.any},{name:"source-text-margin-x",type:f.bidirectionalSize,triggersBounds:v.any},{name:"source-text-margin-y",type:f.bidirectionalSize,triggersBounds:v.any},{name:"source-text-offset",type:f.size,triggersBounds:v.any}],g=[{name:"target-label",type:f.text,triggersBounds:v.any},{name:"target-text-rotation",type:f.textRotation,triggersBounds:v.any},{name:"target-text-margin-x",type:f.bidirectionalSize,triggersBounds:v.any},{name:"target-text-margin-y",type:f.bidirectionalSize,triggersBounds:v.any},{name:"target-text-offset",type:f.size,triggersBounds:v.any}],m=[{name:"font-family",type:f.fontFamily,triggersBounds:v.any},{name:"font-style",type:f.fontStyle,triggersBounds:v.any},{name:"font-weight",type:f.fontWeight,triggersBounds:v.any},{name:"font-size",type:f.size,triggersBounds:v.any},{name:"text-transform",type:f.textTransform,triggersBounds:v.any},{name:"text-wrap",type:f.textWrap,triggersBounds:v.any},{name:"text-overflow-wrap",type:f.textOverflowWrap,triggersBounds:v.any},{name:"text-max-width",type:f.size,triggersBounds:v.any},{name:"text-outline-width",type:f.size,triggersBounds:v.any},{name:"line-height",type:f.positiveNumber,triggersBounds:v.any}],p=[{name:"text-valign",type:f.valign,triggersBounds:v.any},{name:"text-halign",type:f.halign,triggersBounds:v.any},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size,triggersBounds:v.any},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size,triggersBounds:v.any},{name:"text-border-style",type:f.borderStyle,triggersBounds:v.any},{name:"text-background-shape",type:f.textBackgroundShape,triggersBounds:v.any},{name:"text-justification",type:f.justification}],x=[{name:"events",type:f.bool},{name:"text-events",type:f.bool}],w=[{name:"display",type:f.display,triggersZOrder:v.any,triggersBounds:v.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:f.visibility,triggersZOrder:v.any},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:v.zeroNonZero},{name:"text-opacity",type:f.zeroOneNumber},{name:"min-zoomed-font-size",type:f.size},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:v.any},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:v.any},{name:"z-index",type:f.nonNegativeInt,triggersZOrder:v.any}],y=[{name:"overlay-padding",type:f.size,triggersBounds:v.any},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber,triggersBounds:v.zeroNonZero},{name:"overlay-shape",type:f.overlayShape,triggersBounds:v.any}],E=[{name:"underlay-padding",type:f.size,triggersBounds:v.any},{name:"underlay-color",type:f.color},{name:"underlay-opacity",type:f.zeroOneNumber,triggersBounds:v.zeroNonZero},{name:"underlay-shape",type:f.overlayShape,triggersBounds:v.any}],S=[{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing}],T=function(oe,ue){return ue.value==="label"?-oe.poolIndex():ue.pfValue},k=[{name:"height",type:f.nodeSize,triggersBounds:v.any,hashOverride:T},{name:"width",type:f.nodeSize,triggersBounds:v.any,hashOverride:T},{name:"shape",type:f.nodeShape,triggersBounds:v.any},{name:"shape-polygon-points",type:f.polygonPointList,triggersBounds:v.any},{name:"background-color",type:f.color},{name:"background-fill",type:f.fill},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"background-gradient-stop-colors",type:f.colors},{name:"background-gradient-stop-positions",type:f.percentages},{name:"background-gradient-direction",type:f.gradientDirection},{name:"padding",type:f.sizeMaybePercent,triggersBounds:v.any},{name:"padding-relative-to",type:f.paddingRelativeTo,triggersBounds:v.any},{name:"bounds-expansion",type:f.boundsExpansion,triggersBounds:v.any}],L=[{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size,triggersBounds:v.any},{name:"border-style",type:f.borderStyle}],D=[{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",type:f.zeroOneNumbers},{name:"background-image-containment",type:f.bgContainment},{name:"background-image-smoothing",type:f.bools},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",type:f.bgWH},{name:"background-offset-x",type:f.bgPos},{name:"background-offset-y",type:f.bgPos}],_=[{name:"position",type:f.position,triggersBounds:v.any},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels,triggersBounds:v.any},{name:"min-width",type:f.size,triggersBounds:v.any},{name:"min-width-bias-left",type:f.sizeMaybePercent,triggersBounds:v.any},{name:"min-width-bias-right",type:f.sizeMaybePercent,triggersBounds:v.any},{name:"min-height",type:f.size,triggersBounds:v.any},{name:"min-height-bias-top",type:f.sizeMaybePercent,triggersBounds:v.any},{name:"min-height-bias-bottom",type:f.sizeMaybePercent,triggersBounds:v.any}],A=[{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"line-fill",type:f.fill},{name:"line-cap",type:f.lineCap},{name:"line-opacity",type:f.zeroOneNumber},{name:"line-dash-pattern",type:f.numbers},{name:"line-dash-offset",type:f.number},{name:"line-gradient-stop-colors",type:f.colors},{name:"line-gradient-stop-positions",type:f.percentages},{name:"curve-style",type:f.curveStyle,triggersBounds:v.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:f.zeroOneNumber,triggersBounds:v.any},{name:"source-endpoint",type:f.edgeEndpoint,triggersBounds:v.any},{name:"target-endpoint",type:f.edgeEndpoint,triggersBounds:v.any},{name:"control-point-step-size",type:f.size,triggersBounds:v.any},{name:"control-point-distances",type:f.bidirectionalSizes,triggersBounds:v.any},{name:"control-point-weights",type:f.numbers,triggersBounds:v.any},{name:"segment-distances",type:f.bidirectionalSizes,triggersBounds:v.any},{name:"segment-weights",type:f.numbers,triggersBounds:v.any},{name:"taxi-turn",type:f.bidirectionalSizeMaybePercent,triggersBounds:v.any},{name:"taxi-turn-min-distance",type:f.size,triggersBounds:v.any},{name:"taxi-direction",type:f.axisDirection,triggersBounds:v.any},{name:"edge-distances",type:f.edgeDistances,triggersBounds:v.any},{name:"arrow-scale",type:f.positiveNumber,triggersBounds:v.any},{name:"loop-direction",type:f.angle,triggersBounds:v.any},{name:"loop-sweep",type:f.angle,triggersBounds:v.any},{name:"source-distance-from-node",type:f.size,triggersBounds:v.any},{name:"target-distance-from-node",type:f.size,triggersBounds:v.any}],O=[{name:"ghost",type:f.bool,triggersBounds:v.any},{name:"ghost-offset-x",type:f.bidirectionalSize,triggersBounds:v.any},{name:"ghost-offset-y",type:f.bidirectionalSize,triggersBounds:v.any},{name:"ghost-opacity",type:f.zeroOneNumber}],N=[{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],R=[];Wt.pieBackgroundN=16,R.push({name:"pie-size",type:f.sizeMaybePercent});for(var F=1;F<=Wt.pieBackgroundN;F++)R.push({name:"pie-"+F+"-background-color",type:f.color}),R.push({name:"pie-"+F+"-background-size",type:f.percent}),R.push({name:"pie-"+F+"-background-opacity",type:f.zeroOneNumber});var M=[],H=Wt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:f.arrowShape,triggersBounds:v.any},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill}].forEach(function(K){H.forEach(function(oe){var ue=oe+"-"+K.name,ge=K.type,ye=K.triggersBounds;M.push({name:ue,type:ge,triggersBounds:ye})})},{});var $=Wt.properties=[].concat(x,S,w,y,E,O,p,m,c,h,g,k,L,D,R,_,A,M,N),q=Wt.propertyGroups={behavior:x,transition:S,visibility:w,overlay:y,underlay:E,ghost:O,commonLabel:p,labelDimensions:m,mainLabel:c,sourceLabel:h,targetLabel:g,nodeBody:k,nodeBorder:L,backgroundImage:D,pie:R,compound:_,edgeLine:A,edgeArrow:M,core:N},U=Wt.propertyGroupNames={},X=Wt.propertyGroupKeys=Object.keys(q);X.forEach(function(K){U[K]=q[K].map(function(oe){return oe.name}),q[K].forEach(function(oe){return oe.groupKey=K})});var J=Wt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Wt.propertyNames=$.map(function(K){return K.name});for(var Y=0;Y<$.length;Y++){var j=$[Y];$[j.name]=j}for(var ie=0;ie<J.length;ie++){var se=J[ie],ee=$[se.pointsTo],ne={name:se.name,alias:!0,pointsTo:ee};$.push(ne),$[se.name]=ne}})(),Wt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},Wt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=_e({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(v,f){for(var c=1;c<=Wt.pieBackgroundN;c++){var h=f.name.replace("{{i}}",c),g=f.value;v[h]=g}return v},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(v,f){return Wt.arrowPrefixes.forEach(function(c){var h=c+"-"+f.name,g=f.value;v[h]=g}),v},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var o=a.name,s=e[o],l=this.parse(o,s);r[o]=l}}return t.defaultProperties=r,t.defaultProperties},Wt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Fo={};Fo.parse=function(t,e,r,n){var a=this;if(xt(e))return a.parseImplWarn(t,e,r,n);var o=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",l=""+e,v=nv(t,l,s,o),f=a.propCache=a.propCache||[],c;return(c=f[v])||(c=f[v]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Kr(c),c&&(c.value=Kr(c.value))),c},Fo.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&st("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&st("The style value of `label` is deprecated for `"+a.name+"`"),a},Fo.parseImpl=function(t,e,r,n){var a=this;t=ru(t);var o=a.properties[t],s=e,l=a.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,t=o.name);var v=ke(e);v&&(e=e.trim());var f=o.type;if(!f)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(xt(e))return{name:t,value:e,strValue:"fn",mapped:l.fn,bypass:r};var c,h;if(!(!v||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(l.data.regex).exec(e))){if(r)return!1;var g=l.data;return{name:t,value:c,strValue:""+e,mapped:g,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(h=new RegExp(l.mapData.regex).exec(e))){if(r||f.multiple)return!1;var m=l.mapData;if(!(f.color||f.number))return!1;var p=this.parse(t,h[4]);if(!p||p.mapped)return!1;var x=this.parse(t,h[5]);if(!x||x.mapped)return!1;if(p.pfValue===x.pfValue||p.strValue===x.strValue)return st("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+p.strValue+"`"),this.parse(t,p.strValue);if(f.color){var w=p.value,y=x.value,E=w[0]===y[0]&&w[1]===y[1]&&w[2]===y[2]&&(w[3]===y[3]||(w[3]==null||w[3]===1)&&(y[3]==null||y[3]===1));if(E)return!1}return{name:t,value:h,strValue:""+e,mapped:m,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:p.value,valueMax:x.value,bypass:r}}}if(f.multiple&&n!=="multiple"){var S;if(v?S=e.split(/\s+/):ct(e)?S=e:S=[e],f.evenMultiple&&S.length%2!==0)return null;for(var T=[],k=[],L=[],D="",_=!1,A=0;A<S.length;A++){var O=a.parse(t,S[A],r,"multiple");_=_||ke(O.value),T.push(O.value),L.push(O.pfValue!=null?O.pfValue:O.value),k.push(O.units),D+=(A>0?" ":"")+O.strValue}return f.validate&&!f.validate(T,k)?null:f.singleEnum&&_?T.length===1&&ke(T[0])?{name:t,value:T[0],strValue:T[0],bypass:r}:null:{name:t,value:T,pfValue:L,strValue:D,bypass:r,units:k}}var N=function(){for(var ue=0;ue<f.enums.length;ue++){var ge=f.enums[ue];if(ge===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(f.number){var R,F="px";if(f.units&&(R=f.units),f.implicitUnits&&(F=f.implicitUnits),!f.unitless)if(v){var M="px|em"+(f.allowPercent?"|\\%":"");R&&(M=R);var H=e.match("^("+kt+")("+M+")?$");H&&(e=H[1],R=H[2]||F)}else(!R||f.implicitUnits)&&(R=F);if(e=parseFloat(e),isNaN(e)&&f.enums===void 0)return null;if(isNaN(e)&&f.enums!==void 0)return e=s,N();if(f.integer&&!eb(e)||f.min!==void 0&&(e<f.min||f.strictMin&&e===f.min)||f.max!==void 0&&(e>f.max||f.strictMax&&e===f.max))return null;var $={name:t,value:e,strValue:""+e+(R||""),units:R,bypass:r};return f.unitless||R!=="px"&&R!=="em"?$.pfValue=e:$.pfValue=R==="px"||!R?e:this.getEmSizeInPixels()*e,(R==="ms"||R==="s")&&($.pfValue=R==="ms"?e:1e3*e),(R==="deg"||R==="rad")&&($.pfValue=R==="rad"?e:Xb(e)),R==="%"&&($.pfValue=e/100),$}else if(f.propList){var q=[],U=""+e;if(U!=="none"){for(var X=U.split(/\s*,\s*|\s+/),J=0;J<X.length;J++){var Y=X[J].trim();a.properties[Y]?q.push(Y):st("`"+Y+"` is not a valid property name")}if(q.length===0)return null}return{name:t,value:q,strValue:q.length===0?"none":q.join(" "),bypass:r}}else if(f.color){var j=mb(e);return j?{name:t,value:j,pfValue:j,strValue:"rgb("+j[0]+","+j[1]+","+j[2]+")",bypass:r}:null}else if(f.regex||f.regexes){if(f.enums){var ie=N();if(ie)return ie}for(var se=f.regexes?f.regexes:[f.regex],ee=0;ee<se.length;ee++){var ne=new RegExp(se[ee]),K=ne.exec(e);if(K)return{name:t,value:f.singleRegexMatchValue?K[1]:K,strValue:""+e,bypass:r}}return null}else return f.string?{name:t,value:""+e,strValue:""+e,bypass:r}:f.enums?N():null};var Zt=function t(e){if(!(this instanceof t))return new t(e);if(!tu(e)){St("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Qt=Zt.prototype;Qt.instanceString=function(){return"style"},Qt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var o=a[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this},Qt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Qt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},Qt.selector=function(t){var e=t==="core"?null:new Tn(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this},Qt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],o=r[a.name];o===void 0&&(o=r[lo(a.name)]),o!==void 0&&this.cssRule(a.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this},Qt.style=Qt.css,Qt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this},Qt.append=function(t){return Yf(t)?t.appendToStyle(this):ct(t)?this.appendFromJson(t):ke(t)&&this.appendFromString(t),this},Zt.fromJson=function(t,e){var r=new Zt(t);return r.fromJson(e),r},Zt.fromString=function(t,e){return new Zt(t).fromString(e)},[Xt,Pi,Lu,Xr,zo,ku,Wt,Fo].forEach(function(t){_e(Qt,t)}),Zt.types=Qt.types,Zt.properties=Qt.properties,Zt.propertyGroups=Qt.propertyGroups,Zt.propertyGroupNames=Qt.propertyGroupNames,Zt.propertyGroupKeys=Qt.propertyGroupKeys;var sE={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return Yf(e)?r.style=e.generateStyle(this):ct(e)?r.style=Zt.fromJson(this,e):ke(e)?r.style=Zt.fromString(this,e):r.style=Zt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},uE="single",Qn={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=uE),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,o,s,l;switch(e.length){case 0:return r;case 1:if(ke(e[0]))return n=e[0],r[n];if(tt(e[0])){if(!this._private.panningEnabled)return this;o=e[0],s=o.x,l=o.y,we(s)&&(r.x=s),we(l)&&(r.y=l),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&we(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,o,s,l,v,f;if(!this._private.panningEnabled)return this;switch(n.length){case 1:tt(e)&&(l=n[0],v=l.x,f=l.y,we(v)&&(a.x+=v),we(f)&&(a.y+=f),this.emit("pan viewport"));break;case 2:o=e,s=r,(o==="x"||o==="y")&&we(s)&&(a[o]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(we(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(ke(e)){var a=e;e=this.$(a)}else if(nb(e)){var o=e;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else mr(e)||(e=this.mutableElements());if(!(mr(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),l=this.height(),v;if(r=we(r)?r:0,!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){v=Math.min((s-2*r)/n.w,(l-2*r)/n.h),v=v>this._private.maxZoom?this._private.maxZoom:v,v=v<this._private.minZoom?this._private.minZoom:v;var f={x:(s-v*(n.x1+n.x2))/2,y:(l-v*(n.y1+n.y2))/2};return{zoom:v,pan:f}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return we(e)&&we(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):we(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:we(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,o,s,l=!1;if(r.zoomingEnabled||(l=!0),we(e)?s=e:tt(e)&&(s=e.level,e.position!=null?o=go(e.position,a,n):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!r.panningEnabled&&(l=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,l||!we(s)||s===a||o!=null&&(!we(o.x)||!we(o.y)))return null;if(o!=null){var v=n,f=a,c=s,h={x:-c/f*(o.x-v.x)+o.x,y:-c/f*(o.y-v.y)+o.y};return{zoomed:!0,panned:!0,zoom:c,pan:h}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,o=[],s=!1,l=!1;if(!e)return this;if(we(e.zoom)||(n=!1),tt(e.pan)||(a=!1),!n&&!a)return this;if(n){var v=e.zoom;v<r.minZoom||v>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=v,o.push("zoom"))}if(a&&(!s||!e.cancelOnFailedZoom)&&r.panningEnabled){var f=e.pan;we(f.x)&&(r.pan.x=f.x,l=!1),we(f.y)&&(r.pan.y=f.y,l=!1),l||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(ke(e)){var n=e;e=this.mutableElements().filter(n)}else mr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),o=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var l={x:(o-r*(a.x1+a.x2))/2,y:(s-r*(a.y1+a.y2))/2};return l}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),o=function(l){return parseFloat(a.getPropertyValue(l))};return{width:r.clientWidth-o("padding-left")-o("padding-right"),height:r.clientHeight-o("padding-top")-o("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Qn.centre=Qn.center,Qn.autolockNodes=Qn.autolock,Qn.autoungrabifyNodes=Qn.autoungrabify;var Li={data:ut.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ut.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ut.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ut.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Li.attr=Li.data,Li.removeAttr=Li.removeData;var ki=function(e){var r=this;e=_e({},e);var n=e.container;n&&!uo(n)&&uo(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var o=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var s=Lt!==void 0&&n!==void 0&&!e.headless,l=e;l.layout=_e({name:s?"grid":"null"},l.layout),l.renderer=_e({name:s?"canvas":"null"},l.renderer);var v=function(p,x,w){return x!==void 0?x:w!==void 0?w:p},f=this._private={container:n,ready:!1,options:l,elements:new Vt(this),listeners:[],aniEles:new Vt(this),data:l.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:v(!0,l.zoomingEnabled),userZoomingEnabled:v(!0,l.userZoomingEnabled),panningEnabled:v(!0,l.panningEnabled),userPanningEnabled:v(!0,l.userPanningEnabled),boxSelectionEnabled:v(!0,l.boxSelectionEnabled),autolock:v(!1,l.autolock,l.autolockNodes),autoungrabify:v(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:v(!1,l.autounselectify),styleEnabled:l.styleEnabled===void 0?s:l.styleEnabled,zoom:we(l.zoom)?l.zoom:1,pan:{x:tt(l.pan)&&we(l.pan.x)?l.pan.x:0,y:tt(l.pan)&&we(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:v(250,l.multiClickDebounceTime)};this.createEmitter(),this.selectionType(l.selectionType),this.zoomRange({min:l.minZoom,max:l.maxZoom});var c=function(p,x){var w=p.some(ab);if(w)return Ta.all(p).then(x);x(p)};f.styleEnabled&&r.setStyle([]);var h=_e({},l,l.renderer);r.initRenderer(h);var g=function(p,x,w){r.notifications(!1);var y=r.mutableElements();y.length>0&&y.remove(),p!=null&&(tt(p)||ct(p))&&r.add(p),r.one("layoutready",function(S){r.notifications(!0),r.emit(S),r.one("load",x),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",w),r.emit("done")});var E=_e({},r._private.options.layout);E.eles=r.elements(),r.layout(E).run()};c([l.style,l.elements],function(m){var p=m[0],x=m[1];f.styleEnabled&&r.style().append(p),g(x,function(){r.startAnimationLoop(),f.ready=!0,xt(l.ready)&&r.on("ready",l.ready);for(var w=0;w<o.length;w++){var y=o[w];r.on("ready",y)}a&&(a.readies=[]),r.emit("ready")},l.done)})},$o=ki.prototype;_e($o,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Lt;var r=this._private.container.ownerDocument;return r===void 0||r==null?Lt:r.defaultView||Lt},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!uo(e)&&uo(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(_e({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Kr(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),o=function(T){return r.getElementById(T.id())};if(tt(e)){if(r.startBatch(),e.elements){var s={},l=function(T,k){for(var L=[],D=[],_=0;_<T.length;_++){var A=T[_];if(!A.data.id){st("cy.json() cannot handle elements without an ID attribute");continue}var O=""+A.data.id,N=r.getElementById(O);s[O]=!0,N.length!==0?D.push({ele:N,json:A}):(k&&(A.group=k),L.push(A))}r.add(L);for(var R=0;R<D.length;R++){var F=D[R],M=F.ele,H=F.json;M.json(H)}};if(ct(e.elements))l(e.elements);else for(var v=["nodes","edges"],f=0;f<v.length;f++){var c=v[f],h=e.elements[c];ct(h)&&l(h,c)}var g=r.collection();a.filter(function(S){return!s[S.id()]}).forEach(function(S){S.isParent()?g.merge(S):S.remove()}),g.forEach(function(S){return S.children().move({parent:null})}),g.forEach(function(S){return o(S).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var m=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<m.length;p++){var x=m[p];e[x]!=null&&r[x](e[x])}return r.endBatch(),this}else{var w=!!e,y={};w?y.elements=this.elements().map(function(S){return S.json()}):(y.elements={},a.forEach(function(S){var T=S.group();y.elements[T]||(y.elements[T]=[]),y.elements[T].push(S.json())})),this._private.styleEnabled&&(y.style=r.style().json()),y.data=Kr(r.data());var E=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=Kr(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=Kr(E.renderer),y.hideEdgesOnViewport=E.hideEdgesOnViewport,y.textureOnViewport=E.textureOnViewport,y.wheelSensitivity=E.wheelSensitivity,y.motionBlur=E.motionBlur,y.multiClickDebounceTime=E.multiClickDebounceTime,y}}}),$o.$id=$o.getElementById,[Qx,rE,Cc,Au,Oo,aE,Pu,No,sE,Qn,Li].forEach(function(t){_e($o,t)});var lE={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},fE={maximal:!1,acyclic:!1},_a=function(e){return e.scratch("breadthfirst")},Tc=function(e,r){return e.scratch("breadthfirst",r)};function Dc(t){this.options=_e({},lE,fE,t)}Dc.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().filter(function(pe){return!pe.isParent()}),o=n,s=e.directed,l=e.acyclic||e.maximal||e.maximalAdjustments>0,v=sr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),f;if(mr(e.roots))f=e.roots;else if(ct(e.roots)){for(var c=[],h=0;h<e.roots.length;h++){var g=e.roots[h],m=r.getElementById(g);c.push(m)}f=r.collection(c)}else if(ke(e.roots))f=r.$(e.roots);else if(s)f=a.roots();else{var p=n.components();f=r.collection();for(var x=function(me){var De=p[me],xe=De.maxDegree(!1),be=De.filter(function(Te){return Te.degree(!1)===xe});f=f.add(be)},w=0;w<p.length;w++)x(w)}var y=[],E={},S=function(me,De){y[De]==null&&(y[De]=[]);var xe=y[De].length;y[De].push(me),Tc(me,{index:xe,depth:De})},T=function(me,De){var xe=_a(me),be=xe.depth,Te=xe.index;y[be][Te]=null,S(me,De)};o.bfs({roots:f,directed:e.directed,visit:function(me,De,xe,be,Te){var $e=me[0],Re=$e.id();S($e,Te),E[Re]=!0}});for(var k=[],L=0;L<a.length;L++){var D=a[L];E[D.id()]||k.push(D)}var _=function(me){for(var De=y[me],xe=0;xe<De.length;xe++){var be=De[xe];if(be==null){De.splice(xe,1),xe--;continue}Tc(be,{depth:me,index:xe})}},A=function(){for(var me=0;me<y.length;me++)_(me)},O=function(me,De){for(var xe=_a(me),be=me.incomers().filter(function(I){return I.isNode()&&n.has(I)}),Te=-1,$e=me.id(),Re=0;Re<be.length;Re++){var Le=be[Re],Je=_a(Le);Te=Math.max(Te,Je.depth)}if(xe.depth<=Te){if(!e.acyclic&&De[$e])return null;var de=Te+1;return T(me,de),De[$e]=de,!0}return!1};if(s&&l){var N=[],R={},F=function(me){return N.push(me)},M=function(){return N.shift()};for(a.forEach(function(pe){return N.push(pe)});N.length>0;){var H=M(),$=O(H,R);if($)H.outgoers().filter(function(pe){return pe.isNode()&&n.has(pe)}).forEach(F);else if($===null){st("Detected double maximal shift for node `"+H.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}A();var q=0;if(e.avoidOverlap)for(var U=0;U<a.length;U++){var X=a[U],J=X.layoutDimensions(e),Y=J.w,j=J.h;q=Math.max(q,Y,j)}var ie={},se=function(me){if(ie[me.id()])return ie[me.id()];for(var De=_a(me).depth,xe=me.neighborhood(),be=0,Te=0,$e=0;$e<xe.length;$e++){var Re=xe[$e];if(!(Re.isEdge()||Re.isParent()||!a.has(Re))){var Le=_a(Re);if(Le!=null){var Je=Le.index,de=Le.depth;if(!(Je==null||de==null)){var I=y[de].length;de<De&&(be+=Je/I,Te++)}}}}return Te=Math.max(1,Te),be=be/Te,Te===0&&(be=0),ie[me.id()]=be,be},ee=function(me,De){var xe=se(me),be=se(De),Te=xe-be;return Te===0?Qf(me.id(),De.id()):Te};e.depthSort!==void 0&&(ee=e.depthSort);for(var ne=0;ne<y.length;ne++)y[ne].sort(ee),_(ne);for(var K=[],oe=0;oe<k.length;oe++)K.push(k[oe]);y.unshift(K),A();for(var ue=0,ge=0;ge<y.length;ge++)ue=Math.max(y[ge].length,ue);var ye={x:v.x1+v.w/2,y:v.x1+v.h/2},Be=y.reduce(function(pe,me){return Math.max(pe,me.length)},0),ze=function(me){var De=_a(me),xe=De.depth,be=De.index,Te=y[xe].length,$e=Math.max(v.w/((e.grid?Be:Te)+1),q),Re=Math.max(v.h/(y.length+1),q),Le=Math.min(v.w/2/y.length,v.h/2/y.length);if(Le=Math.max(Le,q),e.circle){var de=Le*xe+Le-(y.length>0&&y[0].length<=3?Le/2:0),I=2*Math.PI/y[xe].length*be;return xe===0&&y[0].length===1&&(de=1),{x:ye.x+de*Math.cos(I),y:ye.y+de*Math.sin(I)}}else{var Je={x:ye.x+(be+1-(Te+1)/2)*$e,y:(xe+1)*Re};return Je}};return n.nodes().layoutPositions(this,e,ze),this};var vE={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Ac(t){this.options=_e({},vE,t)}Ac.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=n.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var s=sr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l={x:s.x1+s.w/2,y:s.y1+s.h/2},v=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,f=v/Math.max(1,o.length-1),c,h=0,g=0;g<o.length;g++){var m=o[g],p=m.layoutDimensions(e),x=p.w,w=p.h;h=Math.max(h,x,w)}if(we(e.radius)?c=e.radius:o.length<=1?c=0:c=Math.min(s.h,s.w)/2-h,o.length>1&&e.avoidOverlap){h*=1.75;var y=Math.cos(f)-Math.cos(0),E=Math.sin(f)-Math.sin(0),S=Math.sqrt(h*h/(y*y+E*E));c=Math.max(S,c)}var T=function(L,D){var _=e.startAngle+D*f*(a?1:-1),A=c*Math.cos(_),O=c*Math.sin(_),N={x:l.x+A,y:l.y+O};return N};return n.nodes().layoutPositions(this,e,T),this};var cE={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Pc(t){this.options=_e({},cE,t)}Pc.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,o=a.nodes().not(":parent"),s=sr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l={x:s.x1+s.w/2,y:s.y1+s.h/2},v=[],f=0,c=0;c<o.length;c++){var h=o[c],g=void 0;g=e.concentric(h),v.push({value:g,node:h}),h._private.scratch.concentric=g}o.updateStyle();for(var m=0;m<o.length;m++){var p=o[m],x=p.layoutDimensions(e);f=Math.max(f,x.w,x.h)}v.sort(function(pe,me){return me.value-pe.value});for(var w=e.levelWidth(o),y=[[]],E=y[0],S=0;S<v.length;S++){var T=v[S];if(E.length>0){var k=Math.abs(E[0].value-T.value);k>=w&&(E=[],y.push(E))}E.push(T)}var L=f+e.minNodeSpacing;if(!e.avoidOverlap){var D=y.length>0&&y[0].length>1,_=Math.min(s.w,s.h)/2-L,A=_/(y.length+D?1:0);L=Math.min(L,A)}for(var O=0,N=0;N<y.length;N++){var R=y[N],F=e.sweep===void 0?2*Math.PI-2*Math.PI/R.length:e.sweep,M=R.dTheta=F/Math.max(1,R.length-1);if(R.length>1&&e.avoidOverlap){var H=Math.cos(M)-Math.cos(0),$=Math.sin(M)-Math.sin(0),q=Math.sqrt(L*L/(H*H+$*$));O=Math.max(q,O)}R.r=O,O+=L}if(e.equidistant){for(var U=0,X=0,J=0;J<y.length;J++){var Y=y[J],j=Y.r-X;U=Math.max(U,j)}X=0;for(var ie=0;ie<y.length;ie++){var se=y[ie];ie===0&&(X=se.r),se.r=X,X+=U}}for(var ee={},ne=0;ne<y.length;ne++)for(var K=y[ne],oe=K.dTheta,ue=K.r,ge=0;ge<K.length;ge++){var ye=K[ge],Be=e.startAngle+(r?1:-1)*oe*ge,ze={x:l.x+ue*Math.cos(Be),y:l.y+ue*Math.sin(Be)};ee[ye.node.id()]=ze}return a.nodes().layoutPositions(this,e,function(pe){var me=pe.id();return ee[me]}),this};var Bu,dE={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function qo(t){this.options=_e({},dE,t),this.options.layout=this}qo.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Bu=!0:Bu=!1;var n=hE(e,r,t);Bu&&mE(n),t.randomize&&yE(n);var a=rn(),o=function(){bE(n,e,t),t.fit===!0&&e.fit(t.padding)},s=function(g){return!(r.stopped||g>=t.numIter||(wE(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},l=function(){if(t.animate===!0||t.animate===!1)o(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var g=t.eles.nodes(),m=Lc(n,t,g);g.layoutPositions(r,t,m)}},v=0,f=!0;if(t.animate===!0){var c=function h(){for(var g=0;f&&g<t.refresh;)f=s(v),v++,g++;if(!f)Bc(n,t),l();else{var m=rn();m-a>=t.animationThreshold&&o(),fo(h)}};c()}else{for(;f;)f=s(v),v++;Bc(n,t),l()}return this},qo.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},qo.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var hE=function(e,r,n){for(var a=n.eles.edges(),o=n.eles.nodes(),s=sr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),l={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},v=n.eles.components(),f={},c=0;c<v.length;c++)for(var h=v[c],g=0;g<h.length;g++){var m=h[g];f[m.id()]=c}for(var c=0;c<l.nodeSize;c++){var p=o[c],x=p.layoutDimensions(n),w={};w.isLocked=p.locked(),w.id=p.data("id"),w.parentId=p.data("parent"),w.cmptId=f[p.id()],w.children=[],w.positionX=p.position("x"),w.positionY=p.position("y"),w.offsetX=0,w.offsetY=0,w.height=x.w,w.width=x.h,w.maxX=w.positionX+w.width/2,w.minX=w.positionX-w.width/2,w.maxY=w.positionY+w.height/2,w.minY=w.positionY-w.height/2,w.padLeft=parseFloat(p.style("padding")),w.padRight=parseFloat(p.style("padding")),w.padTop=parseFloat(p.style("padding")),w.padBottom=parseFloat(p.style("padding")),w.nodeRepulsion=xt(n.nodeRepulsion)?n.nodeRepulsion(p):n.nodeRepulsion,l.layoutNodes.push(w),l.idToIndex[w.id]=c}for(var y=[],E=0,S=-1,T=[],c=0;c<l.nodeSize;c++){var p=l.layoutNodes[c],k=p.parentId;k!=null?l.layoutNodes[l.idToIndex[k]].children.push(p.id):(y[++S]=p.id,T.push(p.id))}for(l.graphSet.push(T);E<=S;){var L=y[E++],D=l.idToIndex[L],m=l.layoutNodes[D],_=m.children;if(_.length>0){l.graphSet.push(_);for(var c=0;c<_.length;c++)y[++S]=_[c]}}for(var c=0;c<l.graphSet.length;c++)for(var A=l.graphSet[c],g=0;g<A.length;g++){var O=l.idToIndex[A[g]];l.indexToGraph[O]=c}for(var c=0;c<l.edgeSize;c++){var N=a[c],R={};R.id=N.data("id"),R.sourceId=N.data("source"),R.targetId=N.data("target");var F=xt(n.idealEdgeLength)?n.idealEdgeLength(N):n.idealEdgeLength,M=xt(n.edgeElasticity)?n.edgeElasticity(N):n.edgeElasticity,H=l.idToIndex[R.sourceId],$=l.idToIndex[R.targetId],q=l.indexToGraph[H],U=l.indexToGraph[$];if(q!=U){for(var X=gE(R.sourceId,R.targetId,l),J=l.graphSet[X],Y=0,w=l.layoutNodes[H];J.indexOf(w.id)===-1;)w=l.layoutNodes[l.idToIndex[w.parentId]],Y++;for(w=l.layoutNodes[$];J.indexOf(w.id)===-1;)w=l.layoutNodes[l.idToIndex[w.parentId]],Y++;F*=Y*n.nestingFactor}R.idealLength=F,R.elasticity=M,l.layoutEdges.push(R)}return l},gE=function(e,r,n){var a=pE(e,r,0,n);return 2>a.count?0:a.graph},pE=function t(e,r,n,a){var o=a.graphSet[n];if(-1<o.indexOf(e)&&-1<o.indexOf(r))return{count:2,graph:n};for(var s=0,l=0;l<o.length;l++){var v=o[l],f=a.idToIndex[v],c=a.layoutNodes[f].children;if(c.length!==0){var h=a.indexToGraph[a.idToIndex[c[0]]],g=t(e,r,h,a);if(g.count!==0)if(g.count===1){if(s++,s===2)break}else return g}}return{count:s,graph:n}},mE,yE=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,o=0;o<e.nodeSize;o++){var s=e.layoutNodes[o];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*a)}},Lc=function(e,r,n){var a=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var l=e.layoutNodes[e.idToIndex[s.data("id")]];o.x1=Math.min(o.x1,l.positionX),o.x2=Math.max(o.x2,l.positionX),o.y1=Math.min(o.y1,l.positionY),o.y2=Math.max(o.y2,l.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(s,l){var v=e.layoutNodes[e.idToIndex[s.data("id")]];if(r.boundingBox){var f=(v.positionX-o.x1)/o.w,c=(v.positionY-o.y1)/o.h;return{x:a.x1+f*a.w,y:a.y1+c*a.h}}else return{x:v.positionX,y:v.positionY}}},bE=function(e,r,n){var a=n.layout,o=n.eles.nodes(),s=Lc(e,n,o);o.positions(s),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},wE=function(e,r,n){xE(e,r),CE(e),TE(e,r),DE(e),AE(e)},xE=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],o=a.length,s=0;s<o;s++)for(var l=e.layoutNodes[e.idToIndex[a[s]]],v=s+1;v<o;v++){var f=e.layoutNodes[e.idToIndex[a[v]]];EE(l,f,e,r)}},kc=function(e){return-e+2*e*Math.random()},EE=function(e,r,n,a){var o=e.cmptId,s=r.cmptId;if(!(o!==s&&!n.isCompound)){var l=r.positionX-e.positionX,v=r.positionY-e.positionY,f=1;l===0&&v===0&&(l=kc(f),v=kc(f));var c=SE(e,r,l,v);if(c>0)var h=a.nodeOverlap*c,g=Math.sqrt(l*l+v*v),m=h*l/g,p=h*v/g;else var x=Vo(e,l,v),w=Vo(r,-1*l,-1*v),y=w.x-x.x,E=w.y-x.y,S=y*y+E*E,g=Math.sqrt(S),h=(e.nodeRepulsion+r.nodeRepulsion)/S,m=h*y/g,p=h*E/g;e.isLocked||(e.offsetX-=m,e.offsetY-=p),r.isLocked||(r.offsetX+=m,r.offsetY+=p)}},SE=function(e,r,n,a){if(n>0)var o=e.maxX-r.minX;else var o=r.maxX-e.minX;if(a>0)var s=e.maxY-r.minY;else var s=r.maxY-e.minY;return o>=0&&s>=0?Math.sqrt(o*o+s*s):0},Vo=function(e,r,n){var a=e.positionX,o=e.positionY,s=e.height||1,l=e.width||1,v=n/r,f=s/l,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=o+s/2,c):0<r&&-1*f<=v&&v<=f?(c.x=a+l/2,c.y=o+l*n/2/r,c):0>r&&-1*f<=v&&v<=f?(c.x=a-l/2,c.y=o-l*n/2/r,c):0<n&&(v<=-1*f||v>=f)?(c.x=a+s*r/2/n,c.y=o+s/2,c):(0>n&&(v<=-1*f||v>=f)&&(c.x=a-s*r/2/n,c.y=o-s/2),c)},CE=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],o=e.idToIndex[a.sourceId],s=e.layoutNodes[o],l=e.idToIndex[a.targetId],v=e.layoutNodes[l],f=v.positionX-s.positionX,c=v.positionY-s.positionY;if(!(f===0&&c===0)){var h=Vo(s,f,c),g=Vo(v,-1*f,-1*c),m=g.x-h.x,p=g.y-h.y,x=Math.sqrt(m*m+p*p),w=Math.pow(a.idealLength-x,2)/a.elasticity;if(x!==0)var y=w*m/x,E=w*p/x;else var y=0,E=0;s.isLocked||(s.offsetX+=y,s.offsetY+=E),v.isLocked||(v.offsetX-=y,v.offsetY-=E)}}},TE=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var o=e.graphSet[a],s=o.length;if(a===0)var l=e.clientHeight/2,v=e.clientWidth/2;else var f=e.layoutNodes[e.idToIndex[o[0]]],c=e.layoutNodes[e.idToIndex[f.parentId]],l=c.positionX,v=c.positionY;for(var h=0;h<s;h++){var g=e.layoutNodes[e.idToIndex[o[h]]];if(!g.isLocked){var m=l-g.positionX,p=v-g.positionY,x=Math.sqrt(m*m+p*p);if(x>n){var w=r.gravity*m/x,y=r.gravity*p/x;g.offsetX+=w,g.offsetY+=y}}}}},DE=function(e,r){var n=[],a=0,o=-1;for(n.push.apply(n,e.graphSet[0]),o+=e.graphSet[0].length;a<=o;){var s=n[a++],l=e.idToIndex[s],v=e.layoutNodes[l],f=v.children;if(0<f.length&&!v.isLocked){for(var c=v.offsetX,h=v.offsetY,g=0;g<f.length;g++){var m=e.layoutNodes[e.idToIndex[f[g]]];m.offsetX+=c,m.offsetY+=h,n[++o]=f[g]}v.offsetX=0,v.offsetY=0}}},AE=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var o=PE(a.offsetX,a.offsetY,e.temperature);a.positionX+=o.x,a.positionY+=o.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,LE(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},PE=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var o={x:n*e/a,y:n*r/a};else var o={x:e,y:r};return o},LE=function t(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],o=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,o=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,o=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,o=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,o=!0),o)return t(a,r)}},Bc=function(e,r){for(var n=e.layoutNodes,a=[],o=0;o<n.length;o++){var s=n[o],l=s.cmptId,v=a[l]=a[l]||[];v.push(s)}for(var f=0,o=0;o<a.length;o++){var c=a[o];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var h=0;h<c.length;h++){var g=c[h];c.x1=Math.min(c.x1,g.positionX-g.width/2),c.x2=Math.max(c.x2,g.positionX+g.width/2),c.y1=Math.min(c.y1,g.positionY-g.height/2),c.y2=Math.max(c.y2,g.positionY+g.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,f+=c.w*c.h}}a.sort(function(E,S){return S.w*S.h-E.w*E.h});for(var m=0,p=0,x=0,w=0,y=Math.sqrt(f)*e.clientWidth/e.clientHeight,o=0;o<a.length;o++){var c=a[o];if(c){for(var h=0;h<c.length;h++){var g=c[h];g.isLocked||(g.positionX+=m-c.x1,g.positionY+=p-c.y1)}m+=c.w+r.componentSpacing,x+=c.w+r.componentSpacing,w=Math.max(w,c.h),x>y&&(p+=w+r.componentSpacing,m=0,x=0,w=0)}}},kE={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Rc(t){this.options=_e({},kE,t)}Rc.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var o=sr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(o.h===0||o.w===0)n.nodes().layoutPositions(this,e,function(ie){return{x:o.x1,y:o.y1}});else{var s=a.size(),l=Math.sqrt(s*o.h/o.w),v=Math.round(l),f=Math.round(o.w/o.h*l),c=function(se){if(se==null)return Math.min(v,f);var ee=Math.min(v,f);ee==v?v=se:f=se},h=function(se){if(se==null)return Math.max(v,f);var ee=Math.max(v,f);ee==v?v=se:f=se},g=e.rows,m=e.cols!=null?e.cols:e.columns;if(g!=null&&m!=null)v=g,f=m;else if(g!=null&&m==null)v=g,f=Math.ceil(s/v);else if(g==null&&m!=null)f=m,v=Math.ceil(s/f);else if(f*v>s){var p=c(),x=h();(p-1)*x>=s?c(p-1):(x-1)*p>=s&&h(x-1)}else for(;f*v<s;){var w=c(),y=h();(y+1)*w>=s?h(y+1):c(w+1)}var E=o.w/f,S=o.h/v;if(e.condense&&(E=0,S=0),e.avoidOverlap)for(var T=0;T<a.length;T++){var k=a[T],L=k._private.position;(L.x==null||L.y==null)&&(L.x=0,L.y=0);var D=k.layoutDimensions(e),_=e.avoidOverlapPadding,A=D.w+_,O=D.h+_;E=Math.max(E,A),S=Math.max(S,O)}for(var N={},R=function(se,ee){return!!N["c-"+se+"-"+ee]},F=function(se,ee){N["c-"+se+"-"+ee]=!0},M=0,H=0,$=function(){H++,H>=f&&(H=0,M++)},q={},U=0;U<a.length;U++){var X=a[U],J=e.position(X);if(J&&(J.row!==void 0||J.col!==void 0)){var Y={row:J.row,col:J.col};if(Y.col===void 0)for(Y.col=0;R(Y.row,Y.col);)Y.col++;else if(Y.row===void 0)for(Y.row=0;R(Y.row,Y.col);)Y.row++;q[X.id()]=Y,F(Y.row,Y.col)}}var j=function(se,ee){var ne,K;if(se.locked()||se.isParent())return!1;var oe=q[se.id()];if(oe)ne=oe.col*E+E/2+o.x1,K=oe.row*S+S/2+o.y1;else{for(;R(M,H);)$();ne=H*E+E/2+o.x1,K=M*S+S/2+o.y1,F(M,H),$()}return{x:ne,y:K}};a.layoutPositions(this,e,j)}return this};var BE={ready:function(){},stop:function(){}};function Ru(t){this.options=_e({},BE,t)}Ru.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this},Ru.prototype.stop=function(){return this};var RE={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function _c(t){this.options=_e({},RE,t)}_c.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=xt(t.positions);function a(o){if(t.positions==null)return Hb(o.position());if(n)return t.positions(o);var s=t.positions[o._private.data.id];return s??null}return r.layoutPositions(this,t,function(o,s){var l=a(o);return o.locked()||l==null?!1:l}),this};var _E={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Ic(t){this.options=_e({},_E,t)}Ic.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=sr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(s,l){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var IE=[{name:"breadthfirst",impl:Dc},{name:"circle",impl:Ac},{name:"concentric",impl:Pc},{name:"cose",impl:qo},{name:"grid",impl:Rc},{name:"null",impl:Ru},{name:"preset",impl:_c},{name:"random",impl:Ic}];function Mc(t){this.options=t,this.notifications=0}var Oc=function(){},Nc=function(){throw new Error("A headless instance can not render images")};Mc.prototype={recalculateRenderedStyle:Oc,notify:function(){this.notifications++},init:Oc,isHeadless:function(){return!0},png:Nc,jpg:Nc};var _u={};_u.arrowShapeWidth=.3,_u.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(f,c,h,g,m,p,x){var w=m.x-h/2-x,y=m.x+h/2+x,E=m.y-h/2-x,S=m.y+h/2+x,T=w<=f&&f<=y&&E<=c&&c<=S;return T},n=function(f,c,h,g,m){var p=f*Math.cos(g)-c*Math.sin(g),x=f*Math.sin(g)+c*Math.cos(g),w=p*h,y=x*h,E=w+m.x,S=y+m.y;return{x:E,y:S}},a=function(f,c,h,g){for(var m=[],p=0;p<f.length;p+=2){var x=f[p],w=f[p+1];m.push(n(x,w,c,h,g))}return m},o=function(f){for(var c=[],h=0;h<f.length;h++){var g=f[h];c.push(g.x,g.y)}return c},s=function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").pfValue*2},l=function(f,c){ke(c)&&(c=t[c]),t[f]=_e({name:f,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(g,m,p,x,w,y){var E=o(a(this.points,p+2*y,x,w)),S=ur(g,m,E);return S},roughCollide:r,draw:function(g,m,p,x){var w=a(this.points,m,p,x);e.arrowShapeImpl("polygon")(g,w)},spacing:function(g){return 0},gap:s},c)};l("none",{collide:co,roughCollide:co,draw:iu,spacing:ov,gap:ov}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(f,c,h,g,m){var p=a(this.points,c,h,g),x=this.controlPoint,w=n(x[0],x[1],c,h,g);e.arrowShapeImpl(this.name)(f,p,w)},gap:function(f){return s(f)*.8}}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(f,c,h,g,m,p,x){var w=o(a(this.points,h+2*x,g,m)),y=o(a(this.pointsTee,h+2*x,g,m)),E=ur(f,c,w)||ur(f,c,y);return E},draw:function(f,c,h,g,m){var p=a(this.points,c,h,g),x=a(this.pointsTee,c,h,g);e.arrowShapeImpl(this.name)(f,p,x)}}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(f,c,h,g,m,p,x){var w=m,y=Math.pow(w.x-f,2)+Math.pow(w.y-c,2)<=Math.pow((h+2*x)*this.radius,2),E=o(a(this.points,h+2*x,g,m));return ur(f,c,E)||y},draw:function(f,c,h,g,m){var p=a(this.pointsTr,c,h,g);e.arrowShapeImpl(this.name)(f,p,g.x,g.y,this.radius*c)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(f,c){var h=this.baseCrossLinePts.slice(),g=c/f,m=3,p=5;return h[m]=h[m]-g,h[p]=h[p]-g,h},collide:function(f,c,h,g,m,p,x){var w=o(a(this.points,h+2*x,g,m)),y=o(a(this.crossLinePts(h,p),h+2*x,g,m)),E=ur(f,c,w)||ur(f,c,y);return E},draw:function(f,c,h,g,m){var p=a(this.points,c,h,g),x=a(this.crossLinePts(c,m),c,h,g);e.arrowShapeImpl(this.name)(f,p,x)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(f){return s(f)*.525}}),l("circle",{radius:.15,collide:function(f,c,h,g,m,p,x){var w=m,y=Math.pow(w.x-f,2)+Math.pow(w.y-c,2)<=Math.pow((h+2*x)*this.radius,2);return y},draw:function(f,c,h,g,m){e.arrowShapeImpl(this.name)(f,g.x,g.y,this.radius*c)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(f){return 1},gap:function(f){return 1}}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(f){return .95*f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}})};var Jn={};Jn.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],o=n[1],s=n[4],l=r.pan(),v=r.zoom(),f=((t-a)/s-l.x)/v,c=((e-o)/s-l.y)/v;return[f,c]},Jn.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(y){return parseFloat(r.getPropertyValue(y))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},o={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=t.clientWidth,l=t.clientHeight,v=a.left+a.right,f=a.top+a.bottom,c=o.left+o.right,h=e.width/(s+c),g=s-v,m=l-f,p=e.left+a.left+o.left,x=e.top+a.top+o.top;return this.containerBB=[p,x,g,m,h]},Jn.invalidateContainerClientCoordsCache=function(){this.containerBB=null},Jn.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]},Jn.findNearestElements=function(t,e,r,n){var a=this,o=this,s=o.getCachedZSortedEles(),l=[],v=o.cy.zoom(),f=o.cy.hasCompoundNodes(),c=(n?24:8)/v,h=(n?8:2)/v,g=(n?8:2)/v,m=1/0,p,x;r&&(s=s.interactive);function w(D,_){if(D.isNode()){if(x)return;x=D,l.push(D)}if(D.isEdge()&&(_==null||_<m))if(p){if(p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value&&p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value){for(var A=0;A<l.length;A++)if(l[A].isEdge()){l[A]=D,p=D,m=_??m;break}}}else l.push(D),p=D,m=_??m}function y(D){var _=D.outerWidth()+2*h,A=D.outerHeight()+2*h,O=_/2,N=A/2,R=D.position();if(R.x-O<=t&&t<=R.x+O&&R.y-N<=e&&e<=R.y+N){var F=o.nodeShapes[a.getNodeShape(D)];if(F.checkPoint(t,e,0,_,A,R.x,R.y))return w(D,0),!0}}function E(D){var _=D._private,A=_.rscratch,O=D.pstyle("width").pfValue,N=D.pstyle("arrow-scale").value,R=O/2+c,F=R*R,M=R*2,U=_.source,X=_.target,H;if(A.edgeType==="segments"||A.edgeType==="straight"||A.edgeType==="haystack"){for(var $=A.allpts,q=0;q+3<$.length;q+=2)if(nw(t,e,$[q],$[q+1],$[q+2],$[q+3],M)&&F>(H=uw(t,e,$[q],$[q+1],$[q+2],$[q+3])))return w(D,H),!0}else if(A.edgeType==="bezier"||A.edgeType==="multibezier"||A.edgeType==="self"||A.edgeType==="compound"){for(var $=A.allpts,q=0;q+5<A.allpts.length;q+=4)if(aw(t,e,$[q],$[q+1],$[q+2],$[q+3],$[q+4],$[q+5],M)&&F>(H=sw(t,e,$[q],$[q+1],$[q+2],$[q+3],$[q+4],$[q+5])))return w(D,H),!0}for(var U=U||_.source,X=X||_.target,J=a.getArrowWidth(O,N),Y=[{name:"source",x:A.arrowStartX,y:A.arrowStartY,angle:A.srcArrowAngle},{name:"target",x:A.arrowEndX,y:A.arrowEndY,angle:A.tgtArrowAngle},{name:"mid-source",x:A.midX,y:A.midY,angle:A.midsrcArrowAngle},{name:"mid-target",x:A.midX,y:A.midY,angle:A.midtgtArrowAngle}],q=0;q<Y.length;q++){var j=Y[q],ie=o.arrowShapes[D.pstyle(j.name+"-arrow-shape").value],se=D.pstyle("width").pfValue;if(ie.roughCollide(t,e,J,j.angle,{x:j.x,y:j.y},se,c)&&ie.collide(t,e,J,j.angle,{x:j.x,y:j.y},se,c))return w(D),!0}f&&l.length>0&&(y(U),y(X))}function S(D,_,A){return Nr(D,_,A)}function T(D,_){var A=D._private,O=g,N;_?N=_+"-":N="",D.boundingBox();var R=A.labelBounds[_||"main"],F=D.pstyle(N+"label").value,M=D.pstyle("text-events").strValue==="yes";if(!(!M||!F)){var H=S(A.rscratch,"labelX",_),$=S(A.rscratch,"labelY",_),q=S(A.rscratch,"labelAngle",_),U=D.pstyle(N+"text-margin-x").pfValue,X=D.pstyle(N+"text-margin-y").pfValue,J=R.x1-O-U,Y=R.x2+O-U,j=R.y1-O-X,ie=R.y2+O-X;if(q){var se=Math.cos(q),ee=Math.sin(q),ne=function(ze,pe){return ze=ze-H,pe=pe-$,{x:ze*se-pe*ee+H,y:ze*ee+pe*se+$}},K=ne(J,j),oe=ne(J,ie),ue=ne(Y,j),ge=ne(Y,ie),ye=[K.x+U,K.y+X,ue.x+U,ue.y+X,ge.x+U,ge.y+X,oe.x+U,oe.y+X];if(ur(t,e,ye))return w(D),!0}else if(xa(R,t,e))return w(D),!0}}for(var k=s.length-1;k>=0;k--){var L=s[k];L.isNode()?y(L)||T(L):E(L)||T(L)||T(L,"source")||T(L,"target")}return l},Jn.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,o=[],s=Math.min(t,r),l=Math.max(t,r),v=Math.min(e,n),f=Math.max(e,n);t=s,r=l,e=v,n=f;for(var c=sr({x1:t,y1:e,x2:r,y2:n}),h=0;h<a.length;h++){var g=a[h];if(g.isNode()){var m=g,p=m.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});fu(c,p)&&!hv(p,c)&&o.push(m)}else{var x=g,w=x._private,y=w.rscratch;if(y.startX!=null&&y.startY!=null&&!xa(c,y.startX,y.startY)||y.endX!=null&&y.endY!=null&&!xa(c,y.endX,y.endY))continue;if(y.edgeType==="bezier"||y.edgeType==="multibezier"||y.edgeType==="self"||y.edgeType==="compound"||y.edgeType==="segments"||y.edgeType==="haystack"){for(var E=w.rstyle.bezierPts||w.rstyle.linePts||w.rstyle.haystackPts,S=!0,T=0;T<E.length;T++)if(!rw(c,E[T])){S=!1;break}S&&o.push(x)}else(y.edgeType==="haystack"||y.edgeType==="straight")&&o.push(x)}}return o};var Wo={};Wo.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",o=e.edgeType==="segments",s=e.edgeType==="compound",l=e.edgeType==="self",v,f,c,h,g,m,y,E;if(r?(c=e.haystackPts[0],h=e.haystackPts[1],g=e.haystackPts[2],m=e.haystackPts[3]):(c=e.arrowStartX,h=e.arrowStartY,g=e.arrowEndX,m=e.arrowEndY),y=e.midX,E=e.midY,o)v=c-e.segpts[0],f=h-e.segpts[1];else if(a||s||l||n){var p=e.allpts,x=Ot(p[0],p[2],p[4],.1),w=Ot(p[1],p[3],p[5],.1);v=c-x,f=h-w}else v=c-y,f=h-E;e.srcArrowAngle=po(v,f);var y=e.midX,E=e.midY;if(r&&(y=(c+g)/2,E=(h+m)/2),v=g-c,f=m-h,o){var p=e.allpts;if(p.length/2%2===0){var S=p.length/2,T=S-2;v=p[S]-p[T],f=p[S+1]-p[T+1]}else{var S=p.length/2-1,T=S-2,k=S+2;v=p[S]-p[T],f=p[S+1]-p[T+1]}}else if(a||s||l){var p=e.allpts,L=e.ctrlpts,D,_,A,O;if(L.length/2%2===0){var N=p.length/2-1,R=N+2,F=R+2;D=Ot(p[N],p[R],p[F],0),_=Ot(p[N+1],p[R+1],p[F+1],0),A=Ot(p[N],p[R],p[F],1e-4),O=Ot(p[N+1],p[R+1],p[F+1],1e-4)}else{var R=p.length/2-1,N=R-2,F=R+2;D=Ot(p[N],p[R],p[F],.4999),_=Ot(p[N+1],p[R+1],p[F+1],.4999),A=Ot(p[N],p[R],p[F],.5),O=Ot(p[N+1],p[R+1],p[F+1],.5)}v=A-D,f=O-_}if(e.midtgtArrowAngle=po(v,f),e.midDispX=v,e.midDispY=f,v*=-1,f*=-1,o){var p=e.allpts;if(p.length/2%2!==0){var S=p.length/2-1,k=S+2;v=-(p[k]-p[S]),f=-(p[k+1]-p[S+1])}}if(e.midsrcArrowAngle=po(v,f),o)v=g-e.segpts[e.segpts.length-2],f=m-e.segpts[e.segpts.length-1];else if(a||s||l||n){var p=e.allpts,M=p.length,x=Ot(p[M-6],p[M-4],p[M-2],.9),w=Ot(p[M-5],p[M-3],p[M-1],.9);v=g-x,f=m-w}else v=g-y,f=m-E;e.tgtArrowAngle=po(v,f)},Wo.getArrowWidth=Wo.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var nr={};nr.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var o=Math.random()*2*Math.PI;a.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,a.target={x:Math.cos(o),y:Math.sin(o)}}var s=n.source,l=n.target,v=s.position(),f=l.position(),c=s.width(),h=l.width(),g=s.height(),m=l.height(),p=r.pstyle("haystack-radius").value,x=p/2;a.haystackPts=a.allpts=[a.source.x*c*x+v.x,a.source.y*g*x+v.y,a.target.x*h*x+f.x,a.target.y*m*x+f.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},nr.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=e.posPts,a=e.intersectionPts,o=e.vectorNormInverse,s=t.pstyle("edge-distances").value,l=t.pstyle("segment-weights"),v=t.pstyle("segment-distances"),f=Math.min(l.pfValue.length,v.pfValue.length);r.edgeType="segments",r.segpts=[];for(var c=0;c<f;c++){var h=l.pfValue[c],g=v.pfValue[c],m=1-h,p=h,x=s==="node-position"?n:a,w={x:x.x1*m+x.x2*p,y:x.y1*m+x.y2*p};r.segpts.push(w.x+o.x*g,w.y+o.y*g)}},nr.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,o=e.dirCounts,s=e.srcPos,l=t.pstyle("control-point-distances"),v=l?l.pfValue[0]:void 0,f=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var g=r,m=h;n&&(g=0,m=v);var p=f-Math.PI/2,x=p-c/2,w=p+c/2,y=f+"_"+c;g=o[y]===void 0?o[y]=0:++o[y],a.ctrlpts=[s.x+Math.cos(x)*1.4*m*(g/3+1),s.y+Math.sin(x)*1.4*m*(g/3+1),s.x+Math.cos(w)*1.4*m*(g/3+1),s.y+Math.sin(w)*1.4*m*(g/3+1)]},nr.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var o=e.srcPos,s=e.tgtPos,l=e.srcW,v=e.srcH,f=e.tgtW,c=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,g=t.pstyle("control-point-distances"),m=g?g.pfValue[0]:void 0,p=r,x=h;n&&(p=0,x=m);var w=50,y={x:o.x-l/2,y:o.y-v/2},E={x:s.x-f/2,y:s.y-c/2},S={x:Math.min(y.x,E.x),y:Math.min(y.y,E.y)},T=.5,k=Math.max(T,Math.log(l*.01)),L=Math.max(T,Math.log(f*.01));a.ctrlpts=[S.x,S.y-(1+Math.pow(w,1.12)/100)*x*(p/3+1)*k,S.x-(1+Math.pow(w,1.12)/100)*x*(p/3+1)*L,S.y]},nr.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},nr.findBezierPoints=function(t,e,r,n,a){var o=t._private.rscratch,s=e.vectorNormInverse,l=e.posPts,v=e.intersectionPts,f=t.pstyle("edge-distances").value,c=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),g=t.pstyle("control-point-weights"),m=h&&g?Math.min(h.value.length,g.value.length):1,p=h?h.pfValue[0]:void 0,x=g.value[0],w=n;o.edgeType=w?"multibezier":"bezier",o.ctrlpts=[];for(var y=0;y<m;y++){var E=(.5-e.eles.length/2+r)*c*(a?-1:1),S=void 0,T=cv(E);w&&(p=h?h.pfValue[y]:c,x=g.value[y]),n?S=p:S=p!==void 0?T*p:void 0;var k=S!==void 0?S:E,L=1-x,D=x,_=f==="node-position"?l:v,A={x:_.x1*L+_.x2*D,y:_.y1*L+_.y2*D};o.ctrlpts.push(A.x+s.x*k,A.y+s.y*k)}},nr.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",o="leftward",s="rightward",l="downward",v="upward",f="auto",c=e.posPts,h=e.srcW,g=e.srcH,m=e.tgtW,p=e.tgtH,x=t.pstyle("edge-distances").value,w=x!=="node-position",y=t.pstyle("taxi-direction").value,E=y,S=t.pstyle("taxi-turn"),T=S.units==="%",k=S.pfValue,L=k<0,D=t.pstyle("taxi-turn-min-distance").pfValue,_=w?(h+m)/2:0,A=w?(g+p)/2:0,O=c.x2-c.x1,N=c.y2-c.y1,R=function(ce,Ae){return ce>0?Math.max(ce-Ae,0):Math.min(ce+Ae,0)},F=R(O,_),M=R(N,A),H=!1;E===f?y=Math.abs(F)>Math.abs(M)?a:n:E===v||E===l?(y=n,H=!0):(E===o||E===s)&&(y=a,H=!0);var $=y===n,q=$?M:F,U=$?N:O,X=cv(U),J=!1;!(H&&(T||L))&&(E===l&&U<0||E===v&&U>0||E===o&&U>0||E===s&&U<0)&&(X*=-1,q=X*Math.abs(q),J=!0);var Y;if(T){var j=k<0?1+k:k;Y=j*q}else{var ie=k<0?q:0;Y=ie+k*X}var se=function(ce){return Math.abs(ce)<D||Math.abs(ce)>=Math.abs(q)},ee=se(Y),ne=se(Math.abs(q)-Math.abs(Y)),K=ee||ne;if(K&&!J)if($){var oe=Math.abs(U)<=g/2,ue=Math.abs(O)<=m/2;if(oe){var ge=(c.x1+c.x2)/2,ye=c.y1,Be=c.y2;r.segpts=[ge,ye,ge,Be]}else if(ue){var ze=(c.y1+c.y2)/2,pe=c.x1,me=c.x2;r.segpts=[pe,ze,me,ze]}else r.segpts=[c.x1,c.y2]}else{var De=Math.abs(U)<=h/2,xe=Math.abs(N)<=p/2;if(De){var be=(c.y1+c.y2)/2,Te=c.x1,$e=c.x2;r.segpts=[Te,be,$e,be]}else if(xe){var Re=(c.x1+c.x2)/2,Le=c.y1,Je=c.y2;r.segpts=[Re,Le,Re,Je]}else r.segpts=[c.x2,c.y1]}else if($){var de=c.y1+Y+(w?g/2*X:0),I=c.x1,Q=c.x2;r.segpts=[I,de,Q,de]}else{var ve=c.x1+Y+(w?h/2*X:0),te=c.y1,ae=c.y2;r.segpts=[ve,te,ve,ae]}},nr.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,o=e.srcW,s=e.srcH,l=e.tgtW,v=e.tgtH,f=e.srcShape,c=e.tgtShape,h=!we(r.startX)||!we(r.startY),g=!we(r.arrowStartX)||!we(r.arrowStartY),m=!we(r.endX)||!we(r.endY),p=!we(r.arrowEndX)||!we(r.arrowEndY),x=3,w=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,y=x*w,E=Un({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),S=E<y,T=Un({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),k=T<y,L=!1;if(h||g||S){L=!0;var D={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},_=Math.sqrt(D.x*D.x+D.y*D.y),A={x:D.x/_,y:D.y/_},O=Math.max(o,s),N={x:r.ctrlpts[0]+A.x*2*O,y:r.ctrlpts[1]+A.y*2*O},R=f.intersectLine(n.x,n.y,o,s,N.x,N.y,0);S?(r.ctrlpts[0]=r.ctrlpts[0]+A.x*(y-E),r.ctrlpts[1]=r.ctrlpts[1]+A.y*(y-E)):(r.ctrlpts[0]=R[0]+A.x*y,r.ctrlpts[1]=R[1]+A.y*y)}if(m||p||k){L=!0;var F={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},M=Math.sqrt(F.x*F.x+F.y*F.y),H={x:F.x/M,y:F.y/M},$=Math.max(o,s),q={x:r.ctrlpts[0]+H.x*2*$,y:r.ctrlpts[1]+H.y*2*$},U=c.intersectLine(a.x,a.y,l,v,q.x,q.y,0);k?(r.ctrlpts[0]=r.ctrlpts[0]+H.x*(y-T),r.ctrlpts[1]=r.ctrlpts[1]+H.y*(y-T)):(r.ctrlpts[0]=U[0]+H.x*y,r.ctrlpts[1]=U[1]+H.y*y)}L&&this.findEndpoints(t)}},nr.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=Ot(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=Ot(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var o=e.segpts.length/2,s=o-2;e.midX=(e.segpts[s]+e.segpts[o])/2,e.midY=(e.segpts[s+1]+e.segpts[o+1])/2}else{var l=e.segpts.length/2-1;e.midX=e.segpts[l],e.midY=e.segpts[l+1]}},nr.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||we(e.startX)&&we(e.startY)&&we(e.endX)&&we(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,st("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},nr.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),o={map:new Yr,get:function(D){var _=this.map.get(D[0]);return _!=null?_.get(D[1]):null},set:function(D,_){var A=this.map.get(D[0]);A==null&&(A=new Yr,this.map.set(D[0],A)),A.set(D[1],_)}},s=[],l=[],v=0;v<t.length;v++){var f=t[v],c=f._private,h=f.pstyle("curve-style").value;if(!(f.removed()||!f.takesUpSpace())){if(h==="haystack"){l.push(f);continue}var g=h==="unbundled-bezier"||h==="segments"||h==="straight"||h==="straight-triangle"||h==="taxi",m=h==="unbundled-bezier"||h==="bezier",p=c.source,x=c.target,w=p.poolIndex(),y=x.poolIndex(),E=[w,y].sort(),S=o.get(E);S==null&&(S={eles:[]},o.set(E,S),s.push(E)),S.eles.push(f),g&&(S.hasUnbundled=!0),m&&(S.hasBezier=!0)}}for(var T=function(D){var _=s[D],A=o.get(_),O=void 0;if(!A.hasUnbundled){var N=A.eles[0].parallelEdges().filter(function(Je){return Je.isBundledBezier()});ou(A.eles),N.forEach(function(Je){return A.eles.push(Je)}),A.eles.sort(function(Je,de){return Je.poolIndex()-de.poolIndex()})}var R=A.eles[0],F=R.source(),M=R.target();if(F.poolIndex()>M.poolIndex()){var H=F;F=M,M=H}var $=A.srcPos=F.position(),q=A.tgtPos=M.position(),U=A.srcW=F.outerWidth(),X=A.srcH=F.outerHeight(),J=A.tgtW=M.outerWidth(),Y=A.tgtH=M.outerHeight(),j=A.srcShape=r.nodeShapes[e.getNodeShape(F)],ie=A.tgtShape=r.nodeShapes[e.getNodeShape(M)];A.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var se=0;se<A.eles.length;se++){var ee=A.eles[se],ne=ee[0]._private.rscratch,K=ee.pstyle("curve-style").value,oe=K==="unbundled-bezier"||K==="segments"||K==="taxi",ue=!F.same(ee.source());if(!A.calculatedIntersection&&F!==M&&(A.hasBezier||A.hasUnbundled)){A.calculatedIntersection=!0;var ge=j.intersectLine($.x,$.y,U,X,q.x,q.y,0),ye=A.srcIntn=ge,Be=ie.intersectLine(q.x,q.y,J,Y,$.x,$.y,0),ze=A.tgtIntn=Be,pe=A.intersectionPts={x1:ge[0],x2:Be[0],y1:ge[1],y2:Be[1]},me=A.posPts={x1:$.x,x2:q.x,y1:$.y,y2:q.y},De=Be[1]-ge[1],xe=Be[0]-ge[0],be=Math.sqrt(xe*xe+De*De),Te=A.vector={x:xe,y:De},$e=A.vectorNorm={x:Te.x/be,y:Te.y/be},Re={x:-$e.y,y:$e.x};A.nodesOverlap=!we(be)||ie.checkPoint(ge[0],ge[1],0,J,Y,q.x,q.y)||j.checkPoint(Be[0],Be[1],0,U,X,$.x,$.y),A.vectorNormInverse=Re,O={nodesOverlap:A.nodesOverlap,dirCounts:A.dirCounts,calculatedIntersection:!0,hasBezier:A.hasBezier,hasUnbundled:A.hasUnbundled,eles:A.eles,srcPos:q,tgtPos:$,srcW:J,srcH:Y,tgtW:U,tgtH:X,srcIntn:ze,tgtIntn:ye,srcShape:ie,tgtShape:j,posPts:{x1:me.x2,y1:me.y2,x2:me.x1,y2:me.y1},intersectionPts:{x1:pe.x2,y1:pe.y2,x2:pe.x1,y2:pe.y1},vector:{x:-Te.x,y:-Te.y},vectorNorm:{x:-$e.x,y:-$e.y},vectorNormInverse:{x:-Re.x,y:-Re.y}}}var Le=ue?O:A;ne.nodesOverlap=Le.nodesOverlap,ne.srcIntn=Le.srcIntn,ne.tgtIntn=Le.tgtIntn,a&&(F.isParent()||F.isChild()||M.isParent()||M.isChild())&&(F.parents().anySame(M)||M.parents().anySame(F)||F.same(M)&&F.isParent())?e.findCompoundLoopPoints(ee,Le,se,oe):F===M?e.findLoopPoints(ee,Le,se,oe):K==="segments"?e.findSegmentsPoints(ee,Le):K==="taxi"?e.findTaxiPoints(ee,Le):K==="straight"||!oe&&A.eles.length%2===1&&se===Math.floor(A.eles.length/2)?e.findStraightEdgePoints(ee):e.findBezierPoints(ee,Le,se,oe,ue),e.findEndpoints(ee),e.tryToCorrectInvalidPoints(ee,Le),e.checkForInvalidEdgeWarning(ee),e.storeAllpts(ee),e.storeEdgeProjections(ee),e.calculateArrowAngles(ee),e.recalculateEdgeLabelProjections(ee),e.calculateLabelAngles(ee)}},k=0;k<s.length;k++)T(k);this.findHaystackPoints(l)}};function zc(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}nr.getSegmentPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="segments")return this.recalculateRenderedStyle(t),zc(e.segpts)},nr.getControlPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return this.recalculateRenderedStyle(t),zc(e.ctrlpts)},nr.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Bi={};Bi.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),o=t.outerHeight();if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*a),e.units[1]==="%"&&(s[1]=s[1]*o),s[0]+=n.x,s[1]+=n.y,s}else{var l=e.pfValue[0];l=-Math.PI/2+l;var v=2*Math.max(a,o),f=[n.x+Math.cos(l)*v,n.y+Math.sin(l)*v];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,o,f[0],f[1],0)}},Bi.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],o=n.position(),s=a.position(),l=t.pstyle("target-arrow-shape").value,v=t.pstyle("source-arrow-shape").value,f=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,h=t.pstyle("curve-style").value,g=t._private.rscratch,m=g.edgeType,p=h==="taxi",x=m==="self"||m==="compound",w=m==="bezier"||m==="multibezier"||x,y=m!=="bezier",E=m==="straight"||m==="segments",S=m==="segments",T=w||y||E,k=x||p,L=t.pstyle("source-endpoint"),D=k?"outside-to-node":L.value,_=t.pstyle("target-endpoint"),A=k?"outside-to-node":_.value;g.srcManEndpt=L,g.tgtManEndpt=_;var O,N,R,F;if(w){var M=[g.ctrlpts[0],g.ctrlpts[1]],H=y?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:M;O=H,N=M}else if(E){var $=S?g.segpts.slice(0,2):[s.x,s.y],q=S?g.segpts.slice(g.segpts.length-2):[o.x,o.y];O=q,N=$}if(A==="inside-to-node")r=[s.x,s.y];else if(_.units)r=this.manualEndptToPx(a,_);else if(A==="outside-to-line")r=g.tgtIntn;else if(A==="outside-to-node"||A==="outside-to-node-or-label"?R=O:(A==="outside-to-line"||A==="outside-to-line-or-label")&&(R=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(s.x,s.y,a.outerWidth(),a.outerHeight(),R[0],R[1],0),A==="outside-to-node-or-label"||A==="outside-to-line-or-label"){var U=a._private.rscratch,X=U.labelWidth,J=U.labelHeight,Y=U.labelX,j=U.labelY,ie=X/2,se=J/2,ee=a.pstyle("text-valign").value;ee==="top"?j-=se:ee==="bottom"&&(j+=se);var ne=a.pstyle("text-halign").value;ne==="left"?Y-=ie:ne==="right"&&(Y+=ie);var K=mi(R[0],R[1],[Y-ie,j-se,Y+ie,j-se,Y+ie,j+se,Y-ie,j+se],s.x,s.y);if(K.length>0){var oe=o,ue=Kn(oe,ba(r)),ge=Kn(oe,ba(K)),ye=ue;if(ge<ue&&(r=K,ye=ge),K.length>2){var Be=Kn(oe,{x:K[2],y:K[3]});Be<ye&&(r=[K[2],K[3]])}}}var ze=yo(r,O,e.arrowShapes[l].spacing(t)+f),pe=yo(r,O,e.arrowShapes[l].gap(t)+f);if(g.endX=pe[0],g.endY=pe[1],g.arrowEndX=ze[0],g.arrowEndY=ze[1],D==="inside-to-node")r=[o.x,o.y];else if(L.units)r=this.manualEndptToPx(n,L);else if(D==="outside-to-line")r=g.srcIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?F=N:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(F=[s.x,s.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(o.x,o.y,n.outerWidth(),n.outerHeight(),F[0],F[1],0),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var me=n._private.rscratch,De=me.labelWidth,xe=me.labelHeight,be=me.labelX,Te=me.labelY,$e=De/2,Re=xe/2,Le=n.pstyle("text-valign").value;Le==="top"?Te-=Re:Le==="bottom"&&(Te+=Re);var Je=n.pstyle("text-halign").value;Je==="left"?be-=$e:Je==="right"&&(be+=$e);var de=mi(F[0],F[1],[be-$e,Te-Re,be+$e,Te-Re,be+$e,Te+Re,be-$e,Te+Re],o.x,o.y);if(de.length>0){var I=s,Q=Kn(I,ba(r)),ve=Kn(I,ba(de)),te=Q;if(ve<Q&&(r=[de[0],de[1]],te=ve),de.length>2){var ae=Kn(I,{x:de[2],y:de[3]});ae<te&&(r=[de[2],de[3]])}}}var Ne=yo(r,N,e.arrowShapes[v].spacing(t)+c),ce=yo(r,N,e.arrowShapes[v].gap(t)+c);g.startX=ce[0],g.startY=ce[1],g.arrowStartX=Ne[0],g.arrowStartY=Ne[1],T&&(!we(g.startX)||!we(g.startY)||!we(g.endX)||!we(g.endY)?g.badLine=!0:g.badLine=!1)},Bi.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}},Bi.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Iu={};function ME(t,e,r){for(var n=function(f,c,h,g){return Ot(f,c,h,g)},a=e._private,o=a.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var l=t.bezierProjPcts[s];o.push({x:n(r[0],r[2],r[4],l),y:n(r[1],r[3],r[5],l)})}}Iu.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)ME(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var o=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)o.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},Iu.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Zr={};Zr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!bn(e)){var r,n,a=t._private,o=t.width(),s=t.height(),l=t.padding(),v=t.position(),f=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,h=a.rscratch,g=a.rstyle;switch(f){case"left":r=v.x-o/2-l;break;case"right":r=v.x+o/2+l;break;default:r=v.x}switch(c){case"top":n=v.y-s/2-l;break;case"bottom":n=v.y+s/2+l;break;default:n=v.y}h.labelX=r,h.labelY=n,g.labelX=r,g.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var Fc=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},$c=function(e,r){var n=r.x-e.x,a=r.y-e.y;return Fc(n,a)},OE=function(e,r,n,a){var o=gi(0,a-.001,1),s=gi(0,a+.001,1),l=wa(e,r,n,o),v=wa(e,r,n,s);return $c(l,v)};Zr.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:n.midX,y:n.midY};var s=function(h,g,m){En(r.rscratch,h,g,m),En(r.rstyle,h,g,m)};s("labelX",null,e.x),s("labelY",null,e.y);var l=Fc(n.midDispX,n.midDispY);s("labelAutoAngle",null,l);var v=function c(){if(c.cache)return c.cache;for(var h=[],g=0;g+5<n.allpts.length;g+=4){var m={x:n.allpts[g],y:n.allpts[g+1]},p={x:n.allpts[g+2],y:n.allpts[g+3]},x={x:n.allpts[g+4],y:n.allpts[g+5]};h.push({p0:m,p1:p,p2:x,startDist:0,length:0,segments:[]})}var w=r.rstyle.bezierPts,y=a.bezierProjPcts.length;function E(D,_,A,O,N){var R=Un(_,A),F=D.segments[D.segments.length-1],M={p0:_,p1:A,t0:O,t1:N,startDist:F?F.startDist+F.length:0,length:R};D.segments.push(M),D.length+=R}for(var S=0;S<h.length;S++){var T=h[S],k=h[S-1];k&&(T.startDist=k.startDist+k.length),E(T,T.p0,w[S*y],0,a.bezierProjPcts[0]);for(var L=0;L<y-1;L++)E(T,w[S*y+L],w[S*y+L+1],a.bezierProjPcts[L],a.bezierProjPcts[L+1]);E(T,w[S*y+y-1],T.p2,a.bezierProjPcts[y-1],1)}return c.cache=h},f=function(h){var g,m=h==="source";if(o[h]){var p=t.pstyle(h+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var x=v(),w,y=0,E=0,S=0;S<x.length;S++){for(var T=x[m?S:x.length-1-S],k=0;k<T.segments.length;k++){var L=T.segments[m?k:T.segments.length-1-k],D=S===x.length-1&&k===T.segments.length-1;if(y=E,E+=L.length,E>=p||D){w={cp:T,segment:L};break}}if(w)break}var _=w.cp,A=w.segment,O=(p-y)/A.length,N=A.t1-A.t0,R=m?A.t0+N*O:A.t1-N*O;R=gi(0,R,1),e=wa(_.p0,_.p1,_.p2,R),g=OE(_.p0,_.p1,_.p2,R);break}case"straight":case"segments":case"haystack":{for(var F=0,M,H,$,q,U=n.allpts.length,X=0;X+3<U&&(m?($={x:n.allpts[X],y:n.allpts[X+1]},q={x:n.allpts[X+2],y:n.allpts[X+3]}):($={x:n.allpts[U-2-X],y:n.allpts[U-1-X]},q={x:n.allpts[U-4-X],y:n.allpts[U-3-X]}),M=Un($,q),H=F,F+=M,!(F>=p));X+=2);var J=p-H,Y=J/M;Y=gi(0,Y,1),e=Qb($,q,Y),g=$c($,q);break}}s("labelX",h,e.x),s("labelY",h,e.y),s("labelAutoAngle",h,g)}};f("source"),f("target"),this.applyLabelDimensions(t)}},Zr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},Zr.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=this.calculateLabelDimensions(t,n),o=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,l=Nr(r.rscratch,"labelWrapCachedLines",e)||[],v=s!=="wrap"?1:Math.max(l.length,1),f=a.height/v,c=f*o,h=a.width,g=a.height+(v-1)*(o-1)*f;En(r.rstyle,"labelWidth",e,h),En(r.rscratch,"labelWidth",e,h),En(r.rstyle,"labelHeight",e,g),En(r.rscratch,"labelHeight",e,g),En(r.rscratch,"labelLineHeight",e,c)},Zr.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,o=t.pstyle("text-transform").value,s=function(J,Y){return Y?(En(r.rscratch,J,e,Y),Y):Nr(r.rscratch,J,e)};if(!a)return"";o=="none"||(o=="uppercase"?a=a.toUpperCase():o=="lowercase"&&(a=a.toLowerCase()));var l=t.pstyle("text-wrap").value;if(l==="wrap"){var v=s("labelKey");if(v!=null&&s("labelWrapKey")===v)return s("labelWrapCachedText");for(var f="​",c=a.split(`
`),h=t.pstyle("text-max-width").pfValue,g=t.pstyle("text-overflow-wrap").value,m=g==="anywhere",p=[],x=/[\s\u200b]+/,w=m?"":" ",y=0;y<c.length;y++){var E=c[y],S=this.calculateLabelDimensions(t,E),T=S.width;if(m){var k=E.split("").join(f);E=k}if(T>h){for(var L=E.split(x),D="",_=0;_<L.length;_++){var A=L[_],O=D.length===0?A:D+w+A,N=this.calculateLabelDimensions(t,O),R=N.width;R<=h?D+=A+w:(D&&p.push(D),D=A+w)}D.match(/^[\s\u200b]+$/)||p.push(D)}else p.push(E)}s("labelWrapCachedLines",p),a=s("labelWrapCachedText",p.join(`
`)),s("labelWrapKey",v)}else if(l==="ellipsis"){var F=t.pstyle("text-max-width").pfValue,M="",H="…",$=!1;if(this.calculateLabelDimensions(t,a).width<F)return a;for(var q=0;q<a.length;q++){var U=this.calculateLabelDimensions(t,M+a[q]+H).width;if(U>F)break;M+=a[q],q===a.length-1&&($=!0)}return $||(M+=H),M}return a},Zr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e},Zr.calculateLabelDimensions=function(t,e){var r=this,n=Gn(e,t._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),o=a[n];if(o!=null)return o;var s=0,l=t.pstyle("font-style").strValue,v=t.pstyle("font-size").pfValue,f=t.pstyle("font-family").strValue,c=t.pstyle("font-weight").strValue,h=this.labelCalcCanvas,g=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=document.createElement("canvas"),g=this.labelCalcCanvasContext=h.getContext("2d");var m=h.style;m.position="absolute",m.left="-9999px",m.top="-9999px",m.zIndex="-1",m.visibility="hidden",m.pointerEvents="none"}g.font="".concat(l," ").concat(c," ").concat(v,"px ").concat(f);for(var p=0,x=0,w=e.split(`
`),y=0;y<w.length;y++){var E=w[y],S=g.measureText(E),T=Math.ceil(S.width),k=v;p=Math.max(T,p),x+=k}return p+=s,x+=s,a[n]={width:p,height:x}},Zr.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),o=e?e+"-":"",s=t.pstyle(o+"text-rotation"),l=s.strValue;return l==="none"?0:a&&l==="autorotate"?n.labelAutoAngle:l==="autorotate"?0:s.pfValue},Zr.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var qc={},Vc=28,Wc=!1;qc.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<Vc||t.height()<Vc))return Wc||(st("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Wc=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var Ho={};Ho.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),l)for(var v=0;v<s.length;v++){var f=s[v],c=f._private,h=c.rstyle;h.clean=!1,h.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(s){var l=s.target;n(l)}).on("style.* background.*",function(s){var l=s.target;n(l,!1)});var a=function(s){if(s){var l=r.onUpdateEleCalcsFns;e.cleanStyle();for(var v=0;v<e.length;v++){var f=e[v],c=f._private.rstyle;f.isNode()&&!c.cleanConnected&&(n(f.connectedEdges()),c.cleanConnected=!0)}if(l)for(var h=0;h<l.length;h++){var g=l[h];g(s,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)},Ho.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)},Ho.recalculateRenderedStyle=function(t,e){var r=function(T){return T._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<t.length;o++){var s=t[o],l=s._private,v=l.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(v.clean=!1),!(e&&v.clean||s.removed())&&s.pstyle("display").value!=="none"&&(l.group==="nodes"?a.push(s):n.push(s),v.clean=!0)}for(var f=0;f<a.length;f++){var c=a[f],h=c._private,g=h.rstyle,m=c.position();this.recalculateNodeLabelProjection(c),g.nodeX=m.x,g.nodeY=m.y,g.nodeW=c.pstyle("width").pfValue,g.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var p=0;p<n.length;p++){var x=n[p],w=x._private,y=w.rstyle,E=w.rscratch;y.srcX=E.arrowStartX,y.srcY=E.arrowStartY,y.tgtX=E.arrowEndX,y.tgtY=E.arrowEndY,y.midX=E.midX,y.midY=E.midY,y.labelAngle=E.labelAngle,y.sourceLabelAngle=E.sourceLabelAngle,y.targetLabelAngle=E.targetLabelAngle}}};var Go={};Go.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}},Go.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},Go.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(cc),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Hc={};[Jn,Wo,nr,Bi,Iu,Zr,qc,Ho,Go].forEach(function(t){_e(Hc,t)});var Gc={};Gc.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},o=a[t];if(o)return o.image.complete||o.image.addEventListener("load",r),o.image;o=a[t]=a[t]||{};var s=o.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var l="data:",v=t.substring(0,l.length).toLowerCase()===l;return v||(e=e==="null"?null:e,s.crossOrigin=e),s.src=t,s};var Ia={};Ia.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,a)},Ia.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||rb(t);if(e.supportsPassiveEvents==null){var a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=a}var s=function(v,f,c){var h=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(h[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:h}),(t.addEventListener||t.on).apply(t,h),this};return{on:s,addEventListener:s,addListener:s,bind:s}},Ia.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},Ia.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()},Ia.load=function(){var t=this,e=t.cy.window(),r=function(I){return I.selected()},n=function(I,Q,ve,te){I==null&&(I=t.cy);for(var ae=0;ae<Q.length;ae++){var Ne=Q[ae];I.emit({originalEvent:ve,type:Ne,position:te})}},a=function(I){return I.shiftKey||I.metaKey||I.ctrlKey},o=function(I,Q){var ve=!0;if(t.cy.hasCompoundNodes()&&I&&I.pannable())for(var te=0;Q&&te<Q.length;te++){var I=Q[te];if(I.isNode()&&I.isParent()&&!I.pannable()){ve=!1;break}}else ve=!0;return ve},s=function(I){I[0]._private.grabbed=!0},l=function(I){I[0]._private.grabbed=!1},v=function(I){I[0]._private.rscratch.inDragLayer=!0},f=function(I){I[0]._private.rscratch.inDragLayer=!1},c=function(I){I[0]._private.rscratch.isGrabTarget=!0},h=function(I){I[0]._private.rscratch.isGrabTarget=!1},g=function(I,Q){var ve=Q.addToList,te=ve.has(I);!te&&I.grabbable()&&!I.locked()&&(ve.merge(I),s(I))},m=function(I,Q){if(I.cy().hasCompoundNodes()&&!(Q.inDragLayer==null&&Q.addToList==null)){var ve=I.descendants();Q.inDragLayer&&(ve.forEach(v),ve.connectedEdges().forEach(v)),Q.addToList&&g(ve,Q)}},p=function(I,Q){Q=Q||{};var ve=I.cy().hasCompoundNodes();Q.inDragLayer&&(I.forEach(v),I.neighborhood().stdFilter(function(te){return!ve||te.isEdge()}).forEach(v)),Q.addToList&&I.forEach(function(te){g(te,Q)}),m(I,Q),y(I,{inDragLayer:Q.inDragLayer}),t.updateCachedGrabbedEles()},x=p,w=function(I){I&&(t.getCachedZSortedEles().forEach(function(Q){l(Q),f(Q),h(Q)}),t.updateCachedGrabbedEles())},y=function(I,Q){if(!(Q.inDragLayer==null&&Q.addToList==null)&&I.cy().hasCompoundNodes()){var ve=I.ancestors().orphans();if(!ve.same(I)){var te=ve.descendants().spawnSelf().merge(ve).unmerge(I).unmerge(I.descendants()),ae=te.connectedEdges();Q.inDragLayer&&(ae.forEach(v),te.forEach(v)),Q.addToList&&te.forEach(function(Ne){g(Ne,Q)})}}},E=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},S=typeof MutationObserver<"u",T=typeof ResizeObserver<"u";S?(t.removeObserver=new MutationObserver(function(de){for(var I=0;I<de.length;I++){var Q=de[I],ve=Q.removedNodes;if(ve)for(var te=0;te<ve.length;te++){var ae=ve[te];if(ae===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(de){t.destroy()});var k=so.default(function(){t.cy.resize()},100);S&&(t.styleObserver=new MutationObserver(k),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",k),T&&(t.resizeObserver=new ResizeObserver(k),t.resizeObserver.observe(t.container));var L=function(I,Q){for(;I!=null;)Q(I),I=I.parentNode},D=function(){t.invalidateContainerClientCoordsCache()};L(t.container,function(de){t.registerBinding(de,"transitionend",D),t.registerBinding(de,"animationend",D),t.registerBinding(de,"scroll",D)}),t.registerBinding(t.container,"contextmenu",function(de){de.preventDefault()});var _=function(){return t.selection[4]!==0},A=function(I){for(var Q=t.findContainerClientCoords(),ve=Q[0],te=Q[1],ae=Q[2],Ne=Q[3],ce=I.touches?I.touches:[I],Ae=!1,Ze=0;Ze<ce.length;Ze++){var nt=ce[Ze];if(ve<=nt.clientX&&nt.clientX<=ve+ae&&te<=nt.clientY&&nt.clientY<=te+Ne){Ae=!0;break}}if(!Ae)return!1;for(var qe=t.container,je=I.target,Fe=je.parentNode,He=!1;Fe;){if(Fe===qe){He=!0;break}Fe=Fe.parentNode}return!!He};t.registerBinding(t.container,"mousedown",function(I){if(A(I)){I.preventDefault(),E(),t.hoverData.capture=!0,t.hoverData.which=I.which;var Q=t.cy,ve=[I.clientX,I.clientY],te=t.projectIntoViewport(ve[0],ve[1]),ae=t.selection,Ne=t.findNearestElements(te[0],te[1],!0,!1),ce=Ne[0],Ae=t.dragData.possibleDragElements;t.hoverData.mdownPos=te,t.hoverData.mdownGPos=ve;var Ze=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var bt=t.hoverData.down;bt?bt.emit({originalEvent:I,type:"taphold",position:{x:te[0],y:te[1]}}):Q.emit({originalEvent:I,type:"taphold",position:{x:te[0],y:te[1]}})}},t.tapholdDuration)};if(I.which==3){t.hoverData.cxtStarted=!0;var nt={originalEvent:I,type:"cxttapstart",position:{x:te[0],y:te[1]}};ce?(ce.activate(),ce.emit(nt),t.hoverData.down=ce):Q.emit(nt),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(I.which==1){ce&&ce.activate();{if(ce!=null&&t.nodeIsGrabbable(ce)){var qe=function(bt){return{originalEvent:I,type:bt,position:{x:te[0],y:te[1]}}},je=function(bt){bt.emit(qe("grab"))};if(c(ce),!ce.selected())Ae=t.dragData.possibleDragElements=Q.collection(),x(ce,{addToList:Ae}),ce.emit(qe("grabon")).emit(qe("grab"));else{Ae=t.dragData.possibleDragElements=Q.collection();var Fe=Q.$(function(He){return He.isNode()&&He.selected()&&t.nodeIsGrabbable(He)});p(Fe,{addToList:Ae}),ce.emit(qe("grabon")),Fe.forEach(je)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ce,t.hoverData.downs=Ne,t.hoverData.downTime=new Date().getTime()}n(ce,["mousedown","tapstart","vmousedown"],I,{x:te[0],y:te[1]}),ce==null?(ae[4]=1,t.data.bgActivePosistion={x:te[0],y:te[1]},t.redrawHint("select",!0),t.redraw()):ce.pannable()&&(ae[4]=1),Ze()}ae[0]=ae[2]=te[0],ae[1]=ae[3]=te[1]}},!1),t.registerBinding(e,"mousemove",function(I){var Q=t.hoverData.capture;if(!(!Q&&!A(I))){var ve=!1,te=t.cy,ae=te.zoom(),Ne=[I.clientX,I.clientY],ce=t.projectIntoViewport(Ne[0],Ne[1]),Ae=t.hoverData.mdownPos,Ze=t.hoverData.mdownGPos,nt=t.selection,qe=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(qe=t.findNearestElement(ce[0],ce[1],!0,!1));var je=t.hoverData.last,Fe=t.hoverData.down,He=[ce[0]-nt[2],ce[1]-nt[3]],bt=t.dragData.possibleDragElements,Rt;if(Ze){var lr=Ne[0]-Ze[0],fr=lr*lr,_t=Ne[1]-Ze[1],vr=_t*_t,Gt=fr+vr;t.hoverData.isOverThresholdDrag=Rt=Gt>=t.desktopTapThreshold2}var $r=a(I);Rt&&(t.hoverData.tapholdCancelled=!0);var qr=function(){var Pr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Pr.length===0?(Pr.push(He[0]),Pr.push(He[1])):(Pr[0]+=He[0],Pr[1]+=He[1])};ve=!0,n(qe,["mousemove","vmousemove","tapdrag"],I,{x:ce[0],y:ce[1]});var Rn=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||te.emit({originalEvent:I,type:"boxstart",position:{x:ce[0],y:ce[1]}}),nt[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(Rt){var un={originalEvent:I,type:"cxtdrag",position:{x:ce[0],y:ce[1]}};Fe?Fe.emit(un):te.emit(un),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||qe!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:I,type:"cxtdragout",position:{x:ce[0],y:ce[1]}}),t.hoverData.cxtOver=qe,qe&&qe.emit({originalEvent:I,type:"cxtdragover",position:{x:ce[0],y:ce[1]}}))}}else if(t.hoverData.dragging){if(ve=!0,te.panningEnabled()&&te.userPanningEnabled()){var _n;if(t.hoverData.justStartedPan){var In=t.hoverData.mdownPos;_n={x:(ce[0]-In[0])*ae,y:(ce[1]-In[1])*ae},t.hoverData.justStartedPan=!1}else _n={x:He[0]*ae,y:He[1]*ae};te.panBy(_n),te.emit("dragpan"),t.hoverData.dragged=!0}ce=t.projectIntoViewport(I.clientX,I.clientY)}else if(nt[4]==1&&(Fe==null||Fe.pannable())){if(Rt){if(!t.hoverData.dragging&&te.boxSelectionEnabled()&&($r||!te.panningEnabled()||!te.userPanningEnabled()))Rn();else if(!t.hoverData.selecting&&te.panningEnabled()&&te.userPanningEnabled()){var ln=o(Fe,t.hoverData.downs);ln&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,nt[4]=0,t.data.bgActivePosistion=ba(Ae),t.redrawHint("select",!0),t.redraw())}Fe&&Fe.pannable()&&Fe.active()&&Fe.unactivate()}}else{if(Fe&&Fe.pannable()&&Fe.active()&&Fe.unactivate(),(!Fe||!Fe.grabbed())&&qe!=je&&(je&&n(je,["mouseout","tapdragout"],I,{x:ce[0],y:ce[1]}),qe&&n(qe,["mouseover","tapdragover"],I,{x:ce[0],y:ce[1]}),t.hoverData.last=qe),Fe)if(Rt){if(te.boxSelectionEnabled()&&$r)Fe&&Fe.grabbed()&&(w(bt),Fe.emit("freeon"),bt.emit("free"),t.dragData.didDrag&&(Fe.emit("dragfreeon"),bt.emit("dragfree"))),Rn();else if(Fe&&Fe.grabbed()&&t.nodeIsDraggable(Fe)){var Nt=!t.dragData.didDrag;Nt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||p(bt,{inDragLayer:!0});var zt={x:0,y:0};if(we(He[0])&&we(He[1])&&(zt.x+=He[0],zt.y+=He[1],Nt)){var Jt=t.hoverData.dragDelta;Jt&&we(Jt[0])&&we(Jt[1])&&(zt.x+=Jt[0],zt.y+=Jt[1])}t.hoverData.draggingEles=!0,bt.silentShift(zt).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else qr();ve=!0}if(nt[2]=ce[0],nt[3]=ce[1],ve)return I.stopPropagation&&I.stopPropagation(),I.preventDefault&&I.preventDefault(),!1}},!1);var O,N,R;t.registerBinding(e,"mouseup",function(I){var Q=t.hoverData.capture;if(Q){t.hoverData.capture=!1;var ve=t.cy,te=t.projectIntoViewport(I.clientX,I.clientY),ae=t.selection,Ne=t.findNearestElement(te[0],te[1],!0,!1),ce=t.dragData.possibleDragElements,Ae=t.hoverData.down,Ze=a(I);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Ae&&Ae.unactivate(),t.hoverData.which===3){var nt={originalEvent:I,type:"cxttapend",position:{x:te[0],y:te[1]}};if(Ae?Ae.emit(nt):ve.emit(nt),!t.hoverData.cxtDragged){var qe={originalEvent:I,type:"cxttap",position:{x:te[0],y:te[1]}};Ae?Ae.emit(qe):ve.emit(qe)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(n(Ne,["mouseup","tapend","vmouseup"],I,{x:te[0],y:te[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(n(Ae,["click","tap","vclick"],I,{x:te[0],y:te[1]}),N=!1,I.timeStamp-R<=ve.multiClickDebounceTime()?(O&&clearTimeout(O),N=!0,R=null,n(Ae,["dblclick","dbltap","vdblclick"],I,{x:te[0],y:te[1]})):(O=setTimeout(function(){N||n(Ae,["oneclick","onetap","voneclick"],I,{x:te[0],y:te[1]})},ve.multiClickDebounceTime()),R=I.timeStamp)),Ae==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!a(I)&&(ve.$(r).unselect(["tapunselect"]),ce.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ce=ve.collection()),Ne==Ae&&!t.dragData.didDrag&&!t.hoverData.selecting&&Ne!=null&&Ne._private.selectable&&(t.hoverData.dragging||(ve.selectionType()==="additive"||Ze?Ne.selected()?Ne.unselect(["tapunselect"]):Ne.select(["tapselect"]):Ze||(ve.$(r).unmerge(Ne).unselect(["tapunselect"]),Ne.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var je=ve.collection(t.getAllInBox(ae[0],ae[1],ae[2],ae[3]));t.redrawHint("select",!0),je.length>0&&t.redrawHint("eles",!0),ve.emit({type:"boxend",originalEvent:I,position:{x:te[0],y:te[1]}});var Fe=function(Rt){return Rt.selectable()&&!Rt.selected()};ve.selectionType()==="additive"||Ze||ve.$(r).unmerge(je).unselect(),je.emit("box").stdFilter(Fe).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!ae[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var He=Ae&&Ae.grabbed();w(ce),He&&(Ae.emit("freeon"),ce.emit("free"),t.dragData.didDrag&&(Ae.emit("dragfreeon"),ce.emit("dragfree")))}}ae[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var F=function(I){if(!t.scrollingPage){var Q=t.cy,ve=Q.zoom(),te=Q.pan(),ae=t.projectIntoViewport(I.clientX,I.clientY),Ne=[ae[0]*ve+te.x,ae[1]*ve+te.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||_()){I.preventDefault();return}if(Q.panningEnabled()&&Q.userPanningEnabled()&&Q.zoomingEnabled()&&Q.userZoomingEnabled()){I.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var ce;I.deltaY!=null?ce=I.deltaY/-250:I.wheelDeltaY!=null?ce=I.wheelDeltaY/1e3:ce=I.wheelDelta/1e3,ce=ce*t.wheelSensitivity;var Ae=I.deltaMode===1;Ae&&(ce*=33);var Ze=Q.zoom()*Math.pow(10,ce);I.type==="gesturechange"&&(Ze=t.gestureStartZoom*I.scale),Q.zoom({level:Ze,renderedPosition:{x:Ne[0],y:Ne[1]}}),Q.emit(I.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",F,!0),t.registerBinding(e,"scroll",function(I){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(I){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||I.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(de){t.hasTouchStarted||F(de)},!0),t.registerBinding(t.container,"mouseout",function(I){var Q=t.projectIntoViewport(I.clientX,I.clientY);t.cy.emit({originalEvent:I,type:"mouseout",position:{x:Q[0],y:Q[1]}})},!1),t.registerBinding(t.container,"mouseover",function(I){var Q=t.projectIntoViewport(I.clientX,I.clientY);t.cy.emit({originalEvent:I,type:"mouseover",position:{x:Q[0],y:Q[1]}})},!1);var M,H,$,q,U,X,J,Y,j,ie,se,ee,ne,K=function(I,Q,ve,te){return Math.sqrt((ve-I)*(ve-I)+(te-Q)*(te-Q))},oe=function(I,Q,ve,te){return(ve-I)*(ve-I)+(te-Q)*(te-Q)},ue;t.registerBinding(t.container,"touchstart",ue=function(I){if(t.hasTouchStarted=!0,!!A(I)){E(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var Q=t.cy,ve=t.touchData.now,te=t.touchData.earlier;if(I.touches[0]){var ae=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);ve[0]=ae[0],ve[1]=ae[1]}if(I.touches[1]){var ae=t.projectIntoViewport(I.touches[1].clientX,I.touches[1].clientY);ve[2]=ae[0],ve[3]=ae[1]}if(I.touches[2]){var ae=t.projectIntoViewport(I.touches[2].clientX,I.touches[2].clientY);ve[4]=ae[0],ve[5]=ae[1]}if(I.touches[1]){t.touchData.singleTouchMoved=!0,w(t.dragData.touchDragEles);var Ne=t.findContainerClientCoords();j=Ne[0],ie=Ne[1],se=Ne[2],ee=Ne[3],M=I.touches[0].clientX-j,H=I.touches[0].clientY-ie,$=I.touches[1].clientX-j,q=I.touches[1].clientY-ie,ne=0<=M&&M<=se&&0<=$&&$<=se&&0<=H&&H<=ee&&0<=q&&q<=ee;var ce=Q.pan(),Ae=Q.zoom();U=K(M,H,$,q),X=oe(M,H,$,q),J=[(M+$)/2,(H+q)/2],Y=[(J[0]-ce.x)/Ae,(J[1]-ce.y)/Ae];var Ze=200,nt=Ze*Ze;if(X<nt&&!I.touches[2]){var qe=t.findNearestElement(ve[0],ve[1],!0,!0),je=t.findNearestElement(ve[2],ve[3],!0,!0);qe&&qe.isNode()?(qe.activate().emit({originalEvent:I,type:"cxttapstart",position:{x:ve[0],y:ve[1]}}),t.touchData.start=qe):je&&je.isNode()?(je.activate().emit({originalEvent:I,type:"cxttapstart",position:{x:ve[0],y:ve[1]}}),t.touchData.start=je):Q.emit({originalEvent:I,type:"cxttapstart",position:{x:ve[0],y:ve[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(I.touches[2])Q.boxSelectionEnabled()&&I.preventDefault();else if(!I.touches[1]){if(I.touches[0]){var Fe=t.findNearestElements(ve[0],ve[1],!0,!0),He=Fe[0];if(He!=null&&(He.activate(),t.touchData.start=He,t.touchData.starts=Fe,t.nodeIsGrabbable(He))){var bt=t.dragData.touchDragEles=Q.collection(),Rt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),He.selected()?(Rt=Q.$(function(Gt){return Gt.selected()&&t.nodeIsGrabbable(Gt)}),p(Rt,{addToList:bt})):x(He,{addToList:bt}),c(He);var lr=function($r){return{originalEvent:I,type:$r,position:{x:ve[0],y:ve[1]}}};He.emit(lr("grabon")),Rt?Rt.forEach(function(Gt){Gt.emit(lr("grab"))}):He.emit(lr("grab"))}n(He,["touchstart","tapstart","vmousedown"],I,{x:ve[0],y:ve[1]}),He==null&&(t.data.bgActivePosistion={x:ae[0],y:ae[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&n(t.touchData.start,["taphold"],I,{x:ve[0],y:ve[1]})},t.tapholdDuration)}}if(I.touches.length>=1){for(var fr=t.touchData.startPosition=[null,null,null,null,null,null],_t=0;_t<ve.length;_t++)fr[_t]=te[_t]=ve[_t];var vr=I.touches[0];t.touchData.startGPosition=[vr.clientX,vr.clientY]}}},!1);var ge;t.registerBinding(window,"touchmove",ge=function(I){var Q=t.touchData.capture;if(!(!Q&&!A(I))){var ve=t.selection,te=t.cy,ae=t.touchData.now,Ne=t.touchData.earlier,ce=te.zoom();if(I.touches[0]){var Ae=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);ae[0]=Ae[0],ae[1]=Ae[1]}if(I.touches[1]){var Ae=t.projectIntoViewport(I.touches[1].clientX,I.touches[1].clientY);ae[2]=Ae[0],ae[3]=Ae[1]}if(I.touches[2]){var Ae=t.projectIntoViewport(I.touches[2].clientX,I.touches[2].clientY);ae[4]=Ae[0],ae[5]=Ae[1]}var Ze=t.touchData.startGPosition,nt;if(Q&&I.touches[0]&&Ze){for(var qe=[],je=0;je<ae.length;je++)qe[je]=ae[je]-Ne[je];var Fe=I.touches[0].clientX-Ze[0],He=Fe*Fe,bt=I.touches[0].clientY-Ze[1],Rt=bt*bt,lr=He+Rt;nt=lr>=t.touchTapThreshold2}if(Q&&t.touchData.cxt){I.preventDefault();var fr=I.touches[0].clientX-j,_t=I.touches[0].clientY-ie,vr=I.touches[1].clientX-j,Gt=I.touches[1].clientY-ie,$r=oe(fr,_t,vr,Gt),qr=$r/X,Rn=150,un=Rn*Rn,_n=1.5,In=_n*_n;if(qr>=In||$r>=un){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var ln={originalEvent:I,type:"cxttapend",position:{x:ae[0],y:ae[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(ln),t.touchData.start=null):te.emit(ln)}}if(Q&&t.touchData.cxt){var ln={originalEvent:I,type:"cxtdrag",position:{x:ae[0],y:ae[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(ln):te.emit(ln),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Nt=t.findNearestElement(ae[0],ae[1],!0,!0);(!t.touchData.cxtOver||Nt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:I,type:"cxtdragout",position:{x:ae[0],y:ae[1]}}),t.touchData.cxtOver=Nt,Nt&&Nt.emit({originalEvent:I,type:"cxtdragover",position:{x:ae[0],y:ae[1]}}))}else if(Q&&I.touches[2]&&te.boxSelectionEnabled())I.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||te.emit({originalEvent:I,type:"boxstart",position:{x:ae[0],y:ae[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,ve[4]=1,!ve||ve.length===0||ve[0]===void 0?(ve[0]=(ae[0]+ae[2]+ae[4])/3,ve[1]=(ae[1]+ae[3]+ae[5])/3,ve[2]=(ae[0]+ae[2]+ae[4])/3+1,ve[3]=(ae[1]+ae[3]+ae[5])/3+1):(ve[2]=(ae[0]+ae[2]+ae[4])/3,ve[3]=(ae[1]+ae[3]+ae[5])/3),t.redrawHint("select",!0),t.redraw();else if(Q&&I.touches[1]&&!t.touchData.didSelect&&te.zoomingEnabled()&&te.panningEnabled()&&te.userZoomingEnabled()&&te.userPanningEnabled()){I.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var zt=t.dragData.touchDragEles;if(zt){t.redrawHint("drag",!0);for(var Jt=0;Jt<zt.length;Jt++){var Fa=zt[Jt]._private;Fa.grabbed=!1,Fa.rscratch.inDragLayer=!1}}var Pr=t.touchData.start,fr=I.touches[0].clientX-j,_t=I.touches[0].clientY-ie,vr=I.touches[1].clientX-j,Gt=I.touches[1].clientY-ie,Zo=K(fr,_t,vr,Gt),Wu=Zo/U;if(ne){var Hu=fr-M,Gu=_t-H,Qo=vr-$,Uu=Gt-q,Ku=(Hu+Qo)/2,Yu=(Gu+Uu)/2,ra=te.zoom(),Oi=ra*Wu,$a=te.pan(),na=Y[0]*ra+$a.x,Jo=Y[1]*ra+$a.y,qa={x:-Oi/ra*(na-$a.x-Ku)+na,y:-Oi/ra*(Jo-$a.y-Yu)+Jo};if(Pr&&Pr.active()){var zt=t.dragData.touchDragEles;w(zt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Pr.unactivate().emit("freeon"),zt.emit("free"),t.dragData.didDrag&&(Pr.emit("dragfreeon"),zt.emit("dragfree"))}te.viewport({zoom:Oi,pan:qa,cancelOnFailedZoom:!0}),te.emit("pinchzoom"),U=Zo,M=fr,H=_t,$=vr,q=Gt,t.pinching=!0}if(I.touches[0]){var Ae=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);ae[0]=Ae[0],ae[1]=Ae[1]}if(I.touches[1]){var Ae=t.projectIntoViewport(I.touches[1].clientX,I.touches[1].clientY);ae[2]=Ae[0],ae[3]=Ae[1]}if(I.touches[2]){var Ae=t.projectIntoViewport(I.touches[2].clientX,I.touches[2].clientY);ae[4]=Ae[0],ae[5]=Ae[1]}}else if(I.touches[0]&&!t.touchData.didSelect){var br=t.touchData.start,Ni=t.touchData.last,Nt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Nt=t.findNearestElement(ae[0],ae[1],!0,!0)),Q&&br!=null&&I.preventDefault(),Q&&br!=null&&t.nodeIsDraggable(br))if(nt){var zt=t.dragData.touchDragEles,jo=!t.dragData.didDrag;jo&&p(zt,{inDragLayer:!0}),t.dragData.didDrag=!0;var Mn={x:0,y:0};if(we(qe[0])&&we(qe[1])&&(Mn.x+=qe[0],Mn.y+=qe[1],jo)){t.redrawHint("eles",!0);var cr=t.touchData.dragDelta;cr&&we(cr[0])&&we(cr[1])&&(Mn.x+=cr[0],Mn.y+=cr[1])}t.hoverData.draggingEles=!0,zt.silentShift(Mn).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==Ne[0]&&t.touchData.startPosition[1]==Ne[1]&&t.redrawHint("eles",!0),t.redraw()}else{var cr=t.touchData.dragDelta=t.touchData.dragDelta||[];cr.length===0?(cr.push(qe[0]),cr.push(qe[1])):(cr[0]+=qe[0],cr[1]+=qe[1])}if(n(br||Nt,["touchmove","tapdrag","vmousemove"],I,{x:ae[0],y:ae[1]}),(!br||!br.grabbed())&&Nt!=Ni&&(Ni&&Ni.emit({originalEvent:I,type:"tapdragout",position:{x:ae[0],y:ae[1]}}),Nt&&Nt.emit({originalEvent:I,type:"tapdragover",position:{x:ae[0],y:ae[1]}})),t.touchData.last=Nt,Q)for(var Jt=0;Jt<ae.length;Jt++)ae[Jt]&&t.touchData.startPosition[Jt]&&nt&&(t.touchData.singleTouchMoved=!0);if(Q&&(br==null||br.pannable())&&te.panningEnabled()&&te.userPanningEnabled()){var es=o(br,t.touchData.starts);es&&(I.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=ba(t.touchData.startPosition)),t.swipePanning?(te.panBy({x:qe[0]*ce,y:qe[1]*ce}),te.emit("dragpan")):nt&&(t.swipePanning=!0,te.panBy({x:Fe*ce,y:bt*ce}),te.emit("dragpan"),br&&(br.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var Ae=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);ae[0]=Ae[0],ae[1]=Ae[1]}}for(var je=0;je<ae.length;je++)Ne[je]=ae[je];Q&&I.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var ye;t.registerBinding(e,"touchcancel",ye=function(I){var Q=t.touchData.start;t.touchData.capture=!1,Q&&Q.unactivate()});var Be,ze,pe,me;if(t.registerBinding(e,"touchend",Be=function(I){var Q=t.touchData.start,ve=t.touchData.capture;if(ve)I.touches.length===0&&(t.touchData.capture=!1),I.preventDefault();else return;var te=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var ae=t.cy,Ne=ae.zoom(),ce=t.touchData.now,Ae=t.touchData.earlier;if(I.touches[0]){var Ze=t.projectIntoViewport(I.touches[0].clientX,I.touches[0].clientY);ce[0]=Ze[0],ce[1]=Ze[1]}if(I.touches[1]){var Ze=t.projectIntoViewport(I.touches[1].clientX,I.touches[1].clientY);ce[2]=Ze[0],ce[3]=Ze[1]}if(I.touches[2]){var Ze=t.projectIntoViewport(I.touches[2].clientX,I.touches[2].clientY);ce[4]=Ze[0],ce[5]=Ze[1]}Q&&Q.unactivate();var nt;if(t.touchData.cxt){if(nt={originalEvent:I,type:"cxttapend",position:{x:ce[0],y:ce[1]}},Q?Q.emit(nt):ae.emit(nt),!t.touchData.cxtDragged){var qe={originalEvent:I,type:"cxttap",position:{x:ce[0],y:ce[1]}};Q?Q.emit(qe):ae.emit(qe)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!I.touches[2]&&ae.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var je=ae.collection(t.getAllInBox(te[0],te[1],te[2],te[3]));te[0]=void 0,te[1]=void 0,te[2]=void 0,te[3]=void 0,te[4]=0,t.redrawHint("select",!0),ae.emit({type:"boxend",originalEvent:I,position:{x:ce[0],y:ce[1]}});var Fe=function(un){return un.selectable()&&!un.selected()};je.emit("box").stdFilter(Fe).select().emit("boxselect"),je.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(Q?.unactivate(),I.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!I.touches[1]){if(!I.touches[0]){if(!I.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var He=t.dragData.touchDragEles;if(Q!=null){var bt=Q._private.grabbed;w(He),t.redrawHint("drag",!0),t.redrawHint("eles",!0),bt&&(Q.emit("freeon"),He.emit("free"),t.dragData.didDrag&&(Q.emit("dragfreeon"),He.emit("dragfree"))),n(Q,["touchend","tapend","vmouseup","tapdragout"],I,{x:ce[0],y:ce[1]}),Q.unactivate(),t.touchData.start=null}else{var Rt=t.findNearestElement(ce[0],ce[1],!0,!0);n(Rt,["touchend","tapend","vmouseup","tapdragout"],I,{x:ce[0],y:ce[1]})}var lr=t.touchData.startPosition[0]-ce[0],fr=lr*lr,_t=t.touchData.startPosition[1]-ce[1],vr=_t*_t,Gt=fr+vr,$r=Gt*Ne*Ne;t.touchData.singleTouchMoved||(Q||ae.$(":selected").unselect(["tapunselect"]),n(Q,["tap","vclick"],I,{x:ce[0],y:ce[1]}),ze=!1,I.timeStamp-me<=ae.multiClickDebounceTime()?(pe&&clearTimeout(pe),ze=!0,me=null,n(Q,["dbltap","vdblclick"],I,{x:ce[0],y:ce[1]})):(pe=setTimeout(function(){ze||n(Q,["onetap","voneclick"],I,{x:ce[0],y:ce[1]})},ae.multiClickDebounceTime()),me=I.timeStamp)),Q!=null&&!t.dragData.didDrag&&Q._private.selectable&&$r<t.touchTapThreshold2&&!t.pinching&&(ae.selectionType()==="single"?(ae.$(r).unmerge(Q).unselect(["tapunselect"]),Q.select(["tapselect"])):Q.selected()?Q.unselect(["tapunselect"]):Q.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var qr=0;qr<ce.length;qr++)Ae[qr]=ce[qr];t.dragData.didDrag=!1,I.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),I.touches.length<2&&(I.touches.length===1&&(t.touchData.startGPosition=[I.touches[0].clientX,I.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var De=[],xe=function(I){return{clientX:I.clientX,clientY:I.clientY,force:1,identifier:I.pointerId,pageX:I.pageX,pageY:I.pageY,radiusX:I.width/2,radiusY:I.height/2,screenX:I.screenX,screenY:I.screenY,target:I.target}},be=function(I){return{event:I,touch:xe(I)}},Te=function(I){De.push(be(I))},$e=function(I){for(var Q=0;Q<De.length;Q++){var ve=De[Q];if(ve.event.pointerId===I.pointerId){De.splice(Q,1);return}}},Re=function(I){var Q=De.filter(function(ve){return ve.event.pointerId===I.pointerId})[0];Q.event=I,Q.touch=xe(I)},Le=function(I){I.touches=De.map(function(Q){return Q.touch})},Je=function(I){return I.pointerType==="mouse"||I.pointerType===4};t.registerBinding(t.container,"pointerdown",function(de){Je(de)||(de.preventDefault(),Te(de),Le(de),ue(de))}),t.registerBinding(t.container,"pointerup",function(de){Je(de)||($e(de),Le(de),Be(de))}),t.registerBinding(t.container,"pointercancel",function(de){Je(de)||($e(de),Le(de),ye(de))}),t.registerBinding(t.container,"pointermove",function(de){Je(de)||(de.preventDefault(),Re(de),Le(de),ge(de))})}};var on={};on.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,o,s,l){this.renderer.nodeShapeImpl("polygon",n,a,o,s,l,this.points)},intersectLine:function(n,a,o,s,l,v,f){return mi(l,v,this.points,n,a,o/2,s/2,f)},checkPoint:function(n,a,o,s,l,v,f){return nn(n,a,this.points,v,f,s,l,[0,-1],o)}}},on.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},intersectLine:function(e,r,n,a,o,s,l){return fw(o,s,e,r,n/2+l,a/2+l)},checkPoint:function(e,r,n,a,o,s,l){return Yn(e,r,a,o,s,l,n)}}},on.generateRoundPolygon=function(t,e){for(var r=new Array(e.length*2),n=0;n<e.length/2;n++){var a=n*2,o=void 0;n<e.length/2-1?o=(n+1)*2:o=0,r[n*4]=e[a],r[n*4+1]=e[a+1];var s=e[o]-e[a],l=e[o+1]-e[a+1],v=Math.sqrt(s*s+l*l);r[n*4+2]=s/v,r[n*4+3]=l/v}return this.nodeShapes[t]={renderer:this,name:t,points:r,draw:function(c,h,g,m,p){this.renderer.nodeShapeImpl("round-polygon",c,h,g,m,p,this.points)},intersectLine:function(c,h,g,m,p,x,w){return vw(p,x,this.points,c,h,g,m)},checkPoint:function(c,h,g,m,p,x,w){return lw(c,h,this.points,x,w,m,p)}}},on.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:rr(4,0),draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},intersectLine:function(e,r,n,a,o,s,l){return gv(o,s,e,r,n,a,l)},checkPoint:function(e,r,n,a,o,s,l){var v=yi(a,o),f=v*2;return!!(nn(e,r,this.points,s,l,a,o-f,[0,-1],n)||nn(e,r,this.points,s,l,a-f,o,[0,-1],n)||Yn(e,r,f,f,s-a/2+v,l-o/2+v,n)||Yn(e,r,f,f,s+a/2-v,l-o/2+v,n)||Yn(e,r,f,f,s+a/2-v,l+o/2-v,n)||Yn(e,r,f,f,s-a/2+v,l+o/2-v,n))}}},on.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:bv(),points:rr(4,0),draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},generateCutTrianglePts:function(e,r,n,a){var o=this.cornerLength,s=r/2,l=e/2,v=n-l,f=n+l,c=a-s,h=a+s;return{topLeft:[v,c+o,v+o,c,v+o,c+o],topRight:[f-o,c,f,c+o,f-o,c+o],bottomRight:[f,h-o,f-o,h,f-o,h-o],bottomLeft:[v+o,h,v,h-o,v+o,h-o]}},intersectLine:function(e,r,n,a,o,s,l){var v=this.generateCutTrianglePts(n+2*l,a+2*l,e,r),f=[].concat.apply([],[v.topLeft.splice(0,4),v.topRight.splice(0,4),v.bottomRight.splice(0,4),v.bottomLeft.splice(0,4)]);return mi(o,s,f,e,r)},checkPoint:function(e,r,n,a,o,s,l){if(nn(e,r,this.points,s,l,a,o-2*this.cornerLength,[0,-1],n)||nn(e,r,this.points,s,l,a-2*this.cornerLength,o,[0,-1],n))return!0;var v=this.generateCutTrianglePts(a,o,s,l);return ur(e,r,v.topLeft)||ur(e,r,v.topRight)||ur(e,r,v.bottomRight)||ur(e,r,v.bottomLeft)}}},on.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:rr(4,0),draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},intersectLine:function(e,r,n,a,o,s,l){var v=.15,f=.5,c=.85,h=this.generateBarrelBezierPts(n+2*l,a+2*l,e,r),g=function(x){var w=wa({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},v),y=wa({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},f),E=wa({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},c);return[x[0],x[1],w.x,w.y,y.x,y.y,E.x,E.y,x[4],x[5]]},m=[].concat(g(h.topLeft),g(h.topRight),g(h.bottomRight),g(h.bottomLeft));return mi(o,s,m,e,r)},generateBarrelBezierPts:function(e,r,n,a){var o=r/2,s=e/2,l=n-s,v=n+s,f=a-o,c=a+o,h=hu(e,r),g=h.heightOffset,m=h.widthOffset,p=h.ctrlPtOffsetPct*e,x={topLeft:[l,f+g,l+p,f,l+m,f],topRight:[v-m,f,v-p,f,v,f+g],bottomRight:[v,c-g,v-p,c,v-m,c],bottomLeft:[l+m,c,l+p,c,l,c-g]};return x.topLeft.isTop=!0,x.topRight.isTop=!0,x.bottomLeft.isBottom=!0,x.bottomRight.isBottom=!0,x},checkPoint:function(e,r,n,a,o,s,l){var v=hu(a,o),f=v.heightOffset,c=v.widthOffset;if(nn(e,r,this.points,s,l,a,o-2*f,[0,-1],n)||nn(e,r,this.points,s,l,a-2*c,o,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(a,o,s,l),g=function(D,_,A){var O=A[4],N=A[2],R=A[0],F=A[5],M=A[1],H=Math.min(O,R),$=Math.max(O,R),q=Math.min(F,M),U=Math.max(F,M);if(H<=D&&D<=$&&q<=_&&_<=U){var X=cw(O,N,R),J=iw(X[0],X[1],X[2],D),Y=J.filter(function(j){return 0<=j&&j<=1});if(Y.length>0)return Y[0]}return null},m=Object.keys(h),p=0;p<m.length;p++){var x=m[p],w=h[x],y=g(e,r,w);if(y!=null){var E=w[5],S=w[3],T=w[1],k=Ot(E,S,T,y);if(w.isTop&&k<=r||w.isBottom&&r<=k)return!0}}return!1}}},on.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:rr(4,0),draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},intersectLine:function(e,r,n,a,o,s,l){var v=e-(n/2+l),f=r-(a/2+l),c=f,h=e+(n/2+l),g=Sn(o,s,e,r,v,f,h,c,!1);return g.length>0?g:gv(o,s,e,r,n,a,l)},checkPoint:function(e,r,n,a,o,s,l){var v=yi(a,o),f=2*v;if(nn(e,r,this.points,s,l,a,o-f,[0,-1],n)||nn(e,r,this.points,s,l,a-f,o,[0,-1],n))return!0;var c=a/2+2*n,h=o/2+2*n,g=[s-c,l-h,s-c,l,s+c,l,s+c,l-h];return!!(ur(e,r,g)||Yn(e,r,f,f,s+a/2-v,l+o/2-v,n)||Yn(e,r,f,f,s-a/2+v,l+o/2-v,n))}}},on.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",rr(3,0)),this.generateRoundPolygon("round-triangle",rr(3,0)),this.generatePolygon("rectangle",rr(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",rr(5,0)),this.generateRoundPolygon("round-pentagon",rr(5,0)),this.generatePolygon("hexagon",rr(6,0)),this.generateRoundPolygon("round-hexagon",rr(6,0)),this.generatePolygon("heptagon",rr(7,0)),this.generateRoundPolygon("round-heptagon",rr(7,0)),this.generatePolygon("octagon",rr(8,0)),this.generateRoundPolygon("round-octagon",rr(8,0));var n=new Array(20);{var a=cu(5,0),o=cu(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var l=0;l<o.length/2;l++)o[l*2]*=s,o[l*2+1]*=s;for(var l=0;l<20/4;l++)n[l*4]=a[l*2],n[l*4+1]=a[l*2+1],n[l*4+2]=o[l*2],n[l*4+3]=o[l*2+1]}n=yv(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var v=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",v),this.generateRoundPolygon("round-tag",v)}t.makePolygon=function(f){var c=f.join("$"),h="polygon-"+c,g;return(g=this[h])?g:e.generatePolygon(h,f)}};var Ri={};Ri.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},Ri.redraw=function(t){t=t||lv();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},Ri.beforeRender=function(t,e){if(!this.destroyed){e==null&&St("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var Uc=function(e,r,n){for(var a=e.beforeRenderCallbacks,o=0;o<a.length;o++)a[o].fn(r,n)};Ri.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function n(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Uc(t,!0,a);var o=rn();t.render(t.renderOptions);var s=t.lastDrawTime=rn();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-o),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var l=s-o;t.redrawTotalTime+=l,t.lastRedrawTime=l,t.averageRedrawTime=t.averageRedrawTime/2+l/2,t.requestedFrame=!1}else Uc(t,!1,a);t.skipFrame=!1,fo(n)}};fo(r)}};var NE=function(e){this.init(e)},Kc=NE,Ma=Kc.prototype;Ma.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Ma.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,o=a.head,s="__________cytoscape_stylesheet",l="__________cytoscape_container",v=a.getElementById(s)!=null;if(r.className.indexOf(l)<0&&(r.className=(r.className||"")+" "+l),!v){var f=a.createElement("style");f.id=s,f.textContent="."+l+" { position: relative; }",o.insertBefore(f,o.children[0])}var c=n.getComputedStyle(r),h=c.getPropertyValue("position");h==="static"&&st("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=we(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},Ma.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},Ma.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}},Ma.isHeadless=function(){return!1},[_u,Hc,Gc,Ia,on,Ri].forEach(function(t){_e(Ma,t)});var Mu=1e3/60,Yc={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var o=so.default(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),s=function(f,c){var h=rn(),g=a.averageRedrawTime,m=a.lastRedrawTime,p=[],x=a.cy.extent(),w=a.getPixelRatio();for(f||a.flushRenderedStyleQueue();;){var y=rn(),E=y-h,S=y-c;if(m<Mu){var T=Mu-(f?g:0);if(S>=e.deqFastCost*T)break}else if(f){if(E>=e.deqCost*m||E>=e.deqAvgCost*g)break}else if(S>=e.deqNoDrawCost*Mu)break;var k=e.deq(n,w,x);if(k.length>0)for(var L=0;L<k.length;L++)p.push(k[L]);else break}p.length>0&&(e.onDeqd(n,p),!f&&e.shouldRedraw(n,p,w,x)&&o())},l=e.priority||iu;a.beforeRender(s,l(n))}}}},zE=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:co;js(this,t),this.idsByKey=new Yr,this.keyForId=new Yr,this.cachesByLvl=new Yr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return eu(t,[{key:"getIdsFor",value:function(r){r==null&&St("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new ya,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),o=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(o,n),this.keyForId.set(n,o)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),o=this.getKey(r);return a!==o}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,o=n.get(r);return o||(o=new Yr,n.set(r,o),a.push(r)),o}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),o=this.getCache(a,n);return o!=null&&this.updateKeyMappingFor(r),o}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),o=this.getCache(a,n);return o}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var o=this.getKey(r);this.setCache(o,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var o=this.doesEleInvalidateKey(r);return o&&this.invalidateKey(a),o||this.getNumberOfIdsForKey(a)===0}}]),t}(),Xc=25,Uo=50,Ko=-4,Ou=3,FE=7.99,$E=8,qE=1024,VE=1024,WE=1024,HE=.2,GE=.8,UE=10,KE=.15,YE=.1,XE=.9,ZE=.9,QE=100,JE=1,Oa={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},jE=$t({getKey:null,doesEleInvalidateKey:co,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:iv,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),_i=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=jE(r);_e(n,a),n.lookup=new zE(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},Bt=_i.prototype;Bt.reasons=Oa,Bt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]},Bt.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n},Bt.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new si.default(function(r,n){return n.reqs-r.reqs});return e},Bt.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e},Bt.getElement=function(t,e,r,n,a){var o=this,s=this.renderer,l=s.cy.zoom(),v=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(uu(l*r))),n<Ko)n=Ko;else if(l>=FE||n>Ou)return null;var f=Math.pow(2,n),c=e.h*f,h=e.w*f,g=s.eleTextBiggerThanMin(t,f);if(!this.isVisible(t,g))return null;var m=v.get(t,n);if(m&&m.invalidated&&(m.invalidated=!1,m.texture.invalidatedWidth-=m.width),m)return m;var p;if(c<=Xc?p=Xc:c<=Uo?p=Uo:p=Math.ceil(c/Uo)*Uo,c>WE||h>VE)return null;var x=o.getTextureQueue(p),w=x[x.length-2],y=function(){return o.recycleTexture(p,h)||o.addTexture(p,h)};w||(w=x[x.length-1]),w||(w=y()),w.width-w.usedWidth<h&&(w=y());for(var E=function($){return $&&$.scaledLabelShown===g},S=a&&a===Oa.dequeue,T=a&&a===Oa.highQuality,k=a&&a===Oa.downscale,L,D=n+1;D<=Ou;D++){var _=v.get(t,D);if(_){L=_;break}}var A=L&&L.level===n+1?L:null,O=function(){w.context.drawImage(A.texture.canvas,A.x,0,A.width,A.height,w.usedWidth,0,h,c)};if(w.context.setTransform(1,0,0,1,0,0),w.context.clearRect(w.usedWidth,0,h,p),E(A))O();else if(E(L))if(T){for(var N=L.level;N>n;N--)A=o.getElement(t,e,r,N,Oa.downscale);O()}else return o.queueElement(t,L.level-1),L;else{var R;if(!S&&!T&&!k)for(var F=n-1;F>=Ko;F--){var M=v.get(t,F);if(M){R=M;break}}if(E(R))return o.queueElement(t,n),R;w.context.translate(w.usedWidth,0),w.context.scale(f,f),this.drawElement(w.context,t,e,g,!1),w.context.scale(1/f,1/f),w.context.translate(-w.usedWidth,0)}return m={x:w.usedWidth,texture:w,level:n,scale:f,width:h,height:c,scaledLabelShown:g},w.usedWidth+=Math.ceil(h+$E),w.eleCaches.push(m),v.set(t,n,m),o.checkTextureFullness(w),m},Bt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},Bt.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var o=Ko;o<=Ou;o++){var s=r.getForCachedKey(t,o);s&&n.push(s)}var l=r.invalidate(t);if(l)for(var v=0;v<n.length;v++){var f=n[v],c=f.texture;c.invalidatedWidth+=f.width,f.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}},Bt.checkTextureUtility=function(t){t.invalidatedWidth>=HE*t.width&&this.retireTexture(t)},Bt.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>GE&&t.fullnessChecks>=UE?xn(r,t):t.fullnessChecks++},Bt.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;xn(n,t),t.retired=!0;for(var o=t.eleCaches,s=0;s<o.length;s++){var l=o[s];a.deleteCache(l.key,l.level)}ou(o);var v=e.getRetiredTextureQueue(r);v.push(t)},Bt.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(qE,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a},Bt.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),o=0;o<a.length;o++){var s=a[o];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,ou(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),xn(a,s),n.push(s),s}},Bt.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),o=this.getKey(t),s=a[o];if(s)s.level=Math.max(s.level,e),s.eles.merge(t),s.reqs++,n.updateItem(s);else{var l={eles:t.spawn().merge(t),level:e,reqs:1,key:o};n.push(l),a[o]=l}},Bt.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],o=e.lookup,s=0;s<JE&&r.size()>0;s++){var l=r.pop(),v=l.key,f=l.eles[0],c=o.hasCache(f,l.level);if(n[v]=null,c)continue;a.push(l);var h=e.getBoundingBox(f);e.getElement(f,h,t,l.level,Oa.dequeue)}return a},Bt.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),o=n[a];o!=null&&(o.eles.length===1?(o.reqs=au,r.updateItem(o),r.pop(),n[a]=null):o.eles.unmerge(t))},Bt.onDequeue=function(t){this.onDequeues.push(t)},Bt.offDequeue=function(t){xn(this.onDequeues,t)},Bt.setupDequeueing=Yc.setupDequeueing({deqRedrawThreshold:QE,deqCost:KE,deqAvgCost:YE,deqNoDrawCost:XE,deqFastCost:ZE,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var o=0;o<r.length;o++)for(var s=r[o].eles,l=0;l<s.length;l++){var v=s[l].boundingBox();if(fu(v,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var eS=1,Ii=-4,Yo=2,tS=3.99,rS=50,nS=50,aS=.15,iS=.1,oS=.9,sS=.9,uS=1,Zc=250,lS=4e3*4e3,fS=!0,Qc=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=rn()-2*Zc,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=so.default(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},nS),n.beforeRender(function(s,l){l-r.lastInvalidationTime<=Zc?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var o=function(l,v){return v.reqs-l.reqs};r.layersQueue=new si.default(o),r.setupDequeueing()},Ht=Qc.prototype,Jc=0,vS=Math.pow(2,53)-1;Ht.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),o=this.renderer.makeOffscreenCanvas(n,a),s={id:Jc=++Jc%vS,bb:t,level:e,width:n,height:a,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},l=s.context,v=-s.bb.x1,f=-s.bb.y1;return l.scale(r,r),l.translate(v,f),s},Ht.getLayers=function(t,e,r){var n=this,a=n.renderer,o=a.cy,s=o.zoom(),l=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(uu(s*e)),r<Ii)r=Ii;else if(s>=tS||r>Yo)return null}n.validateLayersElesOrdering(r,t);var v=n.layersByLevel,f=Math.pow(2,r),c=v[r]=v[r]||[],h,g=n.levelIsComplete(r,t),m,p=function(){var O=function(H){if(n.validateLayersElesOrdering(H,t),n.levelIsComplete(H,t))return m=v[H],!0},N=function(H){if(!m)for(var $=r+H;Ii<=$&&$<=Yo&&!O($);$+=H);};N(1),N(-1);for(var R=c.length-1;R>=0;R--){var F=c[R];F.invalid&&xn(c,F)}};if(!g)p();else return c;var x=function(){if(!h){h=sr();for(var O=0;O<t.length;O++)ew(h,t[O].boundingBox())}return h},w=function(O){O=O||{};var N=O.after;x();var R=h.w*f*(h.h*f);if(R>lS)return null;var F=n.makeLayer(h,r);if(N!=null){var M=c.indexOf(N)+1;c.splice(M,0,F)}else(O.insert===void 0||O.insert)&&c.unshift(F);return F};if(n.skipping&&!l)return null;for(var y=null,E=t.length/eS,S=!l,T=0;T<t.length;T++){var k=t[T],L=k._private.rscratch,D=L.imgLayerCaches=L.imgLayerCaches||{},_=D[r];if(_){y=_;continue}if((!y||y.eles.length>=E||!hv(y.bb,k.boundingBox()))&&(y=w({insert:!0,after:y}),!y))return null;m||S?n.queueLayer(y,k):n.drawEleInLayer(y,k,r,e),y.eles.push(k),D[r]=y}return m||(S?null:c)},Ht.getEleLevelForLayerLevel=function(t,e){return t},Ht.drawEleInLayer=function(t,e,r,n){var a=this,o=this.renderer,s=t.context,l=e.boundingBox();l.w===0||l.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),o.setImgSmoothing(s,!1),o.drawCachedElement(s,e,null,null,r,fS),o.setImgSmoothing(s,!0))},Ht.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,o=0;o<n.length;o++){var s=n[o];if(s.reqs>0||s.invalid)return!1;a+=s.eles.length}return a===e.length},Ht.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],o=-1,s=0;s<e.length;s++)if(a.eles[0]===e[s]){o=s;break}if(o<0){this.invalidateLayer(a);continue}for(var l=o,s=0;s<a.eles.length;s++)if(a.eles[s]!==e[l+s]){this.invalidateLayer(a);break}}},Ht.updateElementsInLayers=function(t,e){for(var r=this,n=li(t[0]),a=0;a<t.length;a++)for(var o=n?null:t[a],s=n?t[a]:t[a].ele,l=s._private.rscratch,v=l.imgLayerCaches=l.imgLayerCaches||{},f=Ii;f<=Yo;f++){var c=v[f];c&&(o&&r.getEleLevelForLayerLevel(c.level)!==o.level||e(c,s,o))}},Ht.haveLayers=function(){for(var t=this,e=!1,r=Ii;r<=Yo;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e},Ht.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=rn(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,o){e.invalidateLayer(n)}))},Ht.invalidateLayer=function(t){if(this.lastInvalidationTime=rn(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];xn(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var o=r[a]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}},Ht.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,o){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var l=0;l<s.eles.length;l++)e.queueLayer(s,s.eles[l])})},Ht.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},Ht.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,o=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(o[e.id()])return;a.push(e),o[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},Ht.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<uS&&r.size()!==0;){var o=r.peek();if(o.replacement){r.pop();continue}if(o.replaces&&o!==o.replaces.replacement){r.pop();continue}if(o.invalid){r.pop();continue}var s=o.elesQueue.shift();s&&(e.drawEleInLayer(o,s,o.level,t),a++),n.length===0&&n.push(!0),o.elesQueue.length===0&&(r.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return n},Ht.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var o=0;o<t.eles.length;o++){var s=t.eles[o]._private,l=s.imgLayerCaches=s.imgLayerCaches||{};l&&(l[t.level]=t)}e.requestRedraw()}},Ht.requestRedraw=so.default(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),Ht.setupDequeueing=Yc.setupDequeueing({deqRedrawThreshold:rS,deqCost:aS,deqAvgCost:iS,deqNoDrawCost:oS,deqFastCost:sS,deq:function(e,r){return e.dequeue(r)},onDeqd:iu,shouldRedraw:iv,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var jc={},ed;function cS(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function dS(t,e,r){for(var n,a=0;a<e.length;a++){var o=e[a];a===0&&(n=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function td(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var o=n[a];t.lineTo(o.x,o.y)}var s=r,l=r[0];t.moveTo(l.x,l.y);for(var a=1;a<s.length;a++){var o=s[a];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()}function hS(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var o=e,s=o[0];t.moveTo(s.x,s.y);for(var l=0;l<o.length;l++){var v=o[l];t.lineTo(v.x,v.y)}t.closePath&&t.closePath()}function gS(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}jc.arrowShapeImpl=function(t){return(ed||(ed={polygon:cS,"triangle-backcurve":dS,"triangle-tee":td,"circle-triangle":hS,"triangle-cross":td,circle:gS}))[t]};var Qr={};Qr.drawElement=function(t,e,r,n,a,o){var s=this;e.isNode()?s.drawNode(t,e,r,n,a,o):s.drawEdge(t,e,r,n,a,o)},Qr.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)},Qr.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)},Qr.drawCachedElementPortion=function(t,e,r,n,a,o,s,l){var v=this,f=r.getBoundingBox(e);if(!(f.w===0||f.h===0)){var c=r.getElement(e,f,n,a,o);if(c!=null){var h=l(v,e);if(h===0)return;var g=s(v,e),m=f.x1,p=f.y1,x=f.w,w=f.h,y,E,S,T,k;if(g!==0){var L=r.getRotationPoint(e);S=L.x,T=L.y,t.translate(S,T),t.rotate(g),k=v.getImgSmoothing(t),k||v.setImgSmoothing(t,!0);var D=r.getRotationOffset(e);y=D.x,E=D.y}else y=m,E=p;var _;h!==1&&(_=t.globalAlpha,t.globalAlpha=_*h),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,y,E,x,w),h!==1&&(t.globalAlpha=_),g!==0&&(t.rotate(-g),t.translate(-S,-T),k||v.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var pS=function(){return 0},mS=function(e,r){return e.getTextAngle(r,null)},yS=function(e,r){return e.getTextAngle(r,"source")},bS=function(e,r){return e.getTextAngle(r,"target")},wS=function(e,r){return r.effectiveOpacity()},Nu=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Qr.drawCachedElement=function(t,e,r,n,a,o){var s=this,l=s.data,v=l.eleTxrCache,f=l.lblTxrCache,c=l.slbTxrCache,h=l.tlbTxrCache,g=e.boundingBox(),m=o===!0?v.reasons.highQuality:null;if(!(g.w===0||g.h===0||!e.visible())&&(!n||fu(g,n))){var p=e.isEdge(),x=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,v,r,a,m,pS,wS),(!p||!x)&&s.drawCachedElementPortion(t,e,f,r,a,m,mS,Nu),p&&!x&&(s.drawCachedElementPortion(t,e,c,r,a,m,yS,Nu),s.drawCachedElementPortion(t,e,h,r,a,m,bS,Nu)),s.drawElementOverlay(t,e)}},Qr.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}},Qr.drawCachedElements=function(t,e,r,n){for(var a=this,o=0;o<e.length;o++){var s=e[o];a.drawCachedElement(t,s,r,n)}},Qr.drawCachedNodes=function(t,e,r,n){for(var a=this,o=0;o<e.length;o++){var s=e[o];s.isNode()&&a.drawCachedElement(t,s,r,n)}},Qr.drawLayeredElements=function(t,e,r,n){var a=this,o=a.data.lyrTxrCache.getLayers(e,r);if(o)for(var s=0;s<o.length;s++){var l=o[s],v=l.bb;v.w===0||v.h===0||t.drawImage(l.canvas,v.x1,v.y1,v.w,v.h)}else a.drawCachedElements(t,e,r,n)};var sn={};sn.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,l=e._private.rscratch;if(!(o&&!e.visible())&&!(l.badLine||l.allpts==null||isNaN(l.allpts[0]))){var v;r&&(v=r,t.translate(-v.x1,-v.y1));var f=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,g=e.pstyle("line-style").value,m=e.pstyle("width").pfValue,p=e.pstyle("line-cap").value,x=f*c,w=f*c,y=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;h==="straight-triangle"?(s.eleStrokeStyle(t,e,R),s.drawEdgeTrianglePath(e,t,l.allpts)):(t.lineWidth=m,t.lineCap=p,s.eleStrokeStyle(t,e,R),s.drawEdgePath(e,t,l.allpts,g),t.lineCap="butt")},E=function(){a&&s.drawEdgeOverlay(t,e)},S=function(){a&&s.drawEdgeUnderlay(t,e)},T=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w;s.drawArrowheads(t,e,R)},k=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var L=e.pstyle("ghost").value==="yes";if(L){var D=e.pstyle("ghost-offset-x").pfValue,_=e.pstyle("ghost-offset-y").pfValue,A=e.pstyle("ghost-opacity").value,O=x*A;t.translate(D,_),y(O),T(O),t.translate(-D,-_)}S(),y(),T(),E(),k(),r&&t.translate(v.x1,v.y1)}};var rd=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var o=this,s=o.usePaths(),l=n._private.rscratch,v=n.pstyle("".concat(e,"-padding")).pfValue,f=2*v,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=f,l.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",o.colorStrokeStyle(r,c[0],c[1],c[2],a),o.drawEdgePath(n,r,l.allpts,"solid")}}}};sn.drawEdgeOverlay=rd("overlay"),sn.drawEdgeUnderlay=rd("underlay"),sn.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,o=e,s,l=!1,v=this.usePaths(),f=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(v){var h=r.join("$"),g=a.pathCacheKey&&a.pathCacheKey===h;g?(s=e=a.pathCache,l=!0):(s=e=new Path2D,a.pathCacheKey=h,a.pathCache=s)}if(o.setLineDash)switch(n){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(f),o.lineDashOffset=c;break;case"solid":o.setLineDash([]);break}if(!l&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var m=2;m+3<r.length;m+=4)e.quadraticCurveTo(r[m],r[m+1],r[m+2],r[m+3]);break;case"straight":case"segments":case"haystack":for(var p=2;p+1<r.length;p+=2)e.lineTo(r[p],r[p+1]);break}e=o,v?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])},sn.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var o=[r[a+2]-r[a],r[a+3]-r[a+1]],s=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l=[o[1]/s,-o[0]/s],v=[l[0]*n/2,l[1]*n/2];e.beginPath(),e.moveTo(r[a]-v[0],r[a+1]-v[1]),e.lineTo(r[a]+v[0],r[a+1]+v[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}},sn.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},sn.drawArrowhead=function(t,e,r,n,a,o,s){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(o)||o==null)){var l=this,v=e.pstyle(r+"-arrow-shape").value;if(v!=="none"){var f=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,h=e.pstyle("width").pfValue,g=e.pstyle("opacity").value;s===void 0&&(s=g);var m=t.globalCompositeOperation;(s!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",l.colorFillStyle(t,255,255,255,1),l.colorStrokeStyle(t,255,255,255,1),l.drawArrowShape(e,t,f,h,v,n,a,o),t.globalCompositeOperation=m);var p=e.pstyle(r+"-arrow-color").value;l.colorFillStyle(t,p[0],p[1],p[2],s),l.colorStrokeStyle(t,p[0],p[1],p[2],s),l.drawArrowShape(e,t,c,h,v,n,a,o)}}},sn.drawArrowShape=function(t,e,r,n,a,o,s,l){var v=this,f=this.usePaths()&&a!=="triangle-cross",c=!1,h,g=e,m={x:o,y:s},p=t.pstyle("arrow-scale").value,x=this.getArrowWidth(n,p),w=v.arrowShapes[a];if(f){var y=v.arrowPathCache=v.arrowPathCache||[],E=Gn(a),S=y[E];S!=null?(h=e=S,c=!0):(h=e=new Path2D,y[E]=h)}c||(e.beginPath&&e.beginPath(),f?w.draw(e,1,0,{x:0,y:0},1):w.draw(e,x,l,m,n),e.closePath&&e.closePath()),e=g,f&&(e.translate(o,s),e.rotate(l),e.scale(x,x)),(r==="filled"||r==="both")&&(f?e.fill(h):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=(w.matchEdgeWidth?n:1)/(f?x:1),e.lineJoin="miter",f?e.stroke(h):e.stroke()),f&&(e.scale(1/x,1/x),e.rotate(-l),e.translate(-o,-s))};var zu={};zu.safeDrawImage=function(t,e,r,n,a,o,s,l,v,f){if(!(a<=0||o<=0||v<=0||f<=0))try{t.drawImage(e,r,n,a,o,s,l,v,f)}catch(c){st(c)}},zu.drawInscribedImage=function(t,e,r,n,a){var o=this,s=r.position(),l=s.x,v=s.y,f=r.cy().style(),c=f.getIndexedStyle.bind(f),h=c(r,"background-fit","value",n),g=c(r,"background-repeat","value",n),m=r.width(),p=r.height(),x=r.padding()*2,w=m+(c(r,"background-width-relative-to","value",n)==="inner"?0:x),y=p+(c(r,"background-height-relative-to","value",n)==="inner"?0:x),E=r._private.rscratch,S=c(r,"background-clip","value",n),T=S==="node",k=c(r,"background-image-opacity","value",n)*a,L=c(r,"background-image-smoothing","value",n),D=e.width||e.cachedW,_=e.height||e.cachedH;(D==null||_==null)&&(document.body.appendChild(e),D=e.cachedW=e.width||e.offsetWidth,_=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var A=D,O=_;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?A=c(r,"background-width","pfValue",n)*w:A=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?O=c(r,"background-height","pfValue",n)*y:O=c(r,"background-height","pfValue",n)),!(A===0||O===0)){if(h==="contain"){var N=Math.min(w/A,y/O);A*=N,O*=N}else if(h==="cover"){var N=Math.max(w/A,y/O);A*=N,O*=N}var R=l-w/2,F=c(r,"background-position-x","units",n),M=c(r,"background-position-x","pfValue",n);F==="%"?R+=(w-A)*M:R+=M;var H=c(r,"background-offset-x","units",n),$=c(r,"background-offset-x","pfValue",n);H==="%"?R+=(w-A)*$:R+=$;var q=v-y/2,U=c(r,"background-position-y","units",n),X=c(r,"background-position-y","pfValue",n);U==="%"?q+=(y-O)*X:q+=X;var J=c(r,"background-offset-y","units",n),Y=c(r,"background-offset-y","pfValue",n);J==="%"?q+=(y-O)*Y:q+=Y,E.pathCache&&(R-=l,q-=v,l=0,v=0);var j=t.globalAlpha;t.globalAlpha=k;var ie=o.getImgSmoothing(t),se=!1;if(L==="no"&&ie?(o.setImgSmoothing(t,!1),se=!0):L==="yes"&&!ie&&(o.setImgSmoothing(t,!0),se=!0),g==="no-repeat")T&&(t.save(),E.pathCache?t.clip(E.pathCache):(o.nodeShapes[o.getNodeShape(r)].draw(t,l,v,w,y),t.clip())),o.safeDrawImage(t,e,0,0,D,_,R,q,A,O),T&&t.restore();else{var ee=t.createPattern(e,g);t.fillStyle=ee,o.nodeShapes[o.getNodeShape(r)].draw(t,l,v,w,y),t.translate(R,q),t.fill(),t.translate(-R,-q)}t.globalAlpha=j,se&&o.setImgSmoothing(t,ie)}};var jn={};jn.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(uu(r*n));e=Math.pow(2,a)}var o=t.pstyle("font-size").pfValue*e,s=t.pstyle("min-zoomed-font-size").pfValue;return!(o<s)},jn.drawElementText=function(t,e,r,n,a){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(o&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var l=e.pstyle("label");if(!l||!l.value)return;var v=s.getLabelJustification(e);t.textAlign=v,t.textBaseline="bottom"}else{var f=e.element()._private.rscratch.badLine,c=e.pstyle("label"),h=e.pstyle("source-label"),g=e.pstyle("target-label");if(f||(!c||!c.value)&&(!h||!h.value)&&(!g||!g.value))return;t.textAlign="center",t.textBaseline="bottom"}var m=!r,p;r&&(p=r,t.translate(-p.x1,-p.y1)),a==null?(s.drawText(t,e,null,m,o),e.isEdge()&&(s.drawText(t,e,"source",m,o),s.drawText(t,e,"target",m,o))):s.drawText(t,e,a,m,o),r&&t.translate(p.x1,p.y1)},jn.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e},jn.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,l=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,v=e.pstyle("text-outline-opacity").value*l,f=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+a+" "+o,t.lineJoin="round",this.colorFillStyle(t,f[0],f[1],f[2],l),this.colorStrokeStyle(t,c[0],c[1],c[2],v)};function xS(t,e,r,n,a){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;t.beginPath(),t.moveTo(e+o,r),t.lineTo(e+n-o,r),t.quadraticCurveTo(e+n,r,e+n,r+o),t.lineTo(e+n,r+a-o),t.quadraticCurveTo(e+n,r+a,e+n-o,r+a),t.lineTo(e+o,r+a),t.quadraticCurveTo(e,r+a,e,r+a-o),t.lineTo(e,r+o),t.quadraticCurveTo(e,r,e+o,r),t.closePath(),t.fill()}jn.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,o=e?e+"-":"",s=t.pstyle(o+"text-rotation"),l=Nr(a,"labelAngle",e);return s.strValue==="autorotate"?r=t.isEdge()?l:0:s.strValue==="none"?r=0:r=s.pfValue,r},jn.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,s=o.rscratch,l=a?e.effectiveOpacity():1;if(!(a&&(l===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var v=Nr(s,"labelX",r),f=Nr(s,"labelY",r),c,h,g=this.getLabelText(e,r);if(g!=null&&g!==""&&!isNaN(v)&&!isNaN(f)){this.setupTextStyle(t,e,a);var m=r?r+"-":"",p=Nr(s,"labelWidth",r),x=Nr(s,"labelHeight",r),w=e.pstyle(m+"text-margin-x").pfValue,y=e.pstyle(m+"text-margin-y").pfValue,E=e.isEdge(),S=e.pstyle("text-halign").value,T=e.pstyle("text-valign").value;E&&(S="center",T="center"),v+=w,f+=y;var k;switch(n?k=this.getTextAngle(e,r):k=0,k!==0&&(c=v,h=f,t.translate(c,h),t.rotate(k),v=0,f=0),T){case"top":break;case"center":f+=x/2;break;case"bottom":f+=x;break}var L=e.pstyle("text-background-opacity").value,D=e.pstyle("text-border-opacity").value,_=e.pstyle("text-border-width").pfValue,A=e.pstyle("text-background-padding").pfValue;if(L>0||_>0&&D>0){var O=v-A;switch(S){case"left":O-=p;break;case"center":O-=p/2;break}var N=f-x-A,R=p+2*A,F=x+2*A;if(L>0){var M=t.fillStyle,H=e.pstyle("text-background-color").value;t.fillStyle="rgba("+H[0]+","+H[1]+","+H[2]+","+L*l+")";var $=e.pstyle("text-background-shape").strValue;$.indexOf("round")===0?xS(t,O,N,R,F,2):t.fillRect(O,N,R,F),t.fillStyle=M}if(_>0&&D>0){var q=t.strokeStyle,U=t.lineWidth,X=e.pstyle("text-border-color").value,J=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+X[0]+","+X[1]+","+X[2]+","+D*l+")",t.lineWidth=_,t.setLineDash)switch(J){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=_/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(t.strokeRect(O,N,R,F),J==="double"){var Y=_/2;t.strokeRect(O+Y,N+Y,R-Y*2,F-Y*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=U,t.strokeStyle=q}}var j=2*e.pstyle("text-outline-width").pfValue;if(j>0&&(t.lineWidth=j),e.pstyle("text-wrap").value==="wrap"){var ie=Nr(s,"labelWrapCachedLines",r),se=Nr(s,"labelLineHeight",r),ee=p/2,ne=this.getLabelJustification(e);switch(ne==="auto"||(S==="left"?ne==="left"?v+=-p:ne==="center"&&(v+=-ee):S==="center"?ne==="left"?v+=-ee:ne==="right"&&(v+=ee):S==="right"&&(ne==="center"?v+=ee:ne==="right"&&(v+=p))),T){case"top":f-=(ie.length-1)*se;break;case"center":case"bottom":f-=(ie.length-1)*se;break}for(var K=0;K<ie.length;K++)j>0&&t.strokeText(ie[K],v,f),t.fillText(ie[K],v,f),f+=se}else j>0&&t.strokeText(g,v,f),t.fillText(g,v,f);k!==0&&(t.rotate(-k),t.translate(-c,-h))}}};var Na={};Na.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,l,v,f=e._private,c=f.rscratch,h=e.position();if(!(!we(h.x)||!we(h.y))&&!(o&&!e.visible())){var g=o?e.effectiveOpacity():1,m=s.usePaths(),p,x=!1,w=e.padding();l=e.width()+2*w,v=e.height()+2*w;var y;r&&(y=r,t.translate(-y.x1,-y.y1));for(var E=e.pstyle("background-image"),S=E.value,T=new Array(S.length),k=new Array(S.length),L=0,D=0;D<S.length;D++){var _=S[D],A=T[D]=_!=null&&_!=="none";if(A){var O=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",D);L++,k[D]=s.getCachedImage(_,O,function(){f.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var N=e.pstyle("background-blacken").value,R=e.pstyle("border-width").pfValue,F=e.pstyle("background-opacity").value*g,M=e.pstyle("border-color").value,H=e.pstyle("border-style").value,$=e.pstyle("border-opacity").value*g;t.lineJoin="miter";var q=function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F;s.eleFillStyle(t,e,be)},U=function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$;s.colorStrokeStyle(t,M[0],M[1],M[2],be)},X=e.pstyle("shape").strValue,J=e.pstyle("shape-polygon-points").pfValue;if(m){t.translate(h.x,h.y);var Y=s.nodePathCache=s.nodePathCache||[],j=nv(X==="polygon"?X+","+J.join(","):X,""+v,""+l),ie=Y[j];ie!=null?(p=ie,x=!0,c.pathCache=p):(p=new Path2D,Y[j]=c.pathCache=p)}var se=function(){if(!x){var be=h;m&&(be={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(p||t,be.x,be.y,l,v)}m?t.fill(p):t.fill()},ee=function(){for(var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,$e=f.backgrounding,Re=0,Le=0;Le<k.length;Le++){var Je=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Le);if(Te&&Je==="over"||!Te&&Je==="inside"){Re++;continue}T[Le]&&k[Le].complete&&!k[Le].error&&(Re++,s.drawInscribedImage(t,k[Le],e,Le,be))}f.backgrounding=Re!==L,$e!==f.backgrounding&&e.updateStyle(!1)},ne=function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;s.hasPie(e)&&(s.drawPie(t,e,Te),be&&(m||s.nodeShapes[s.getNodeShape(e)].draw(t,h.x,h.y,l,v)))},K=function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,Te=(N>0?N:-N)*be,$e=N>0?0:255;N!==0&&(s.colorFillStyle(t,$e,$e,$e,Te),m?t.fill(p):t.fill())},oe=function(){if(R>0){if(t.lineWidth=R,t.lineCap="butt",t.setLineDash)switch(H){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}if(m?t.stroke(p):t.stroke(),H==="double"){t.lineWidth=R/3;var be=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",m?t.stroke(p):t.stroke(),t.globalCompositeOperation=be}t.setLineDash&&t.setLineDash([])}},ue=function(){a&&s.drawNodeOverlay(t,e,h,l,v)},ge=function(){a&&s.drawNodeUnderlay(t,e,h,l,v)},ye=function(){s.drawElementText(t,e,null,n)},Be=e.pstyle("ghost").value==="yes";if(Be){var ze=e.pstyle("ghost-offset-x").pfValue,pe=e.pstyle("ghost-offset-y").pfValue,me=e.pstyle("ghost-opacity").value,De=me*g;t.translate(ze,pe),q(me*F),se(),ee(De,!0),U(me*$),oe(),ne(N!==0||R!==0),ee(De,!1),K(De),t.translate(-ze,-pe)}m&&t.translate(-h.x,-h.y),ge(),m&&t.translate(h.x,h.y),q(),se(),ee(g,!0),U(),oe(),ne(N!==0||R!==0),ee(g,!1),K(),m&&t.translate(-h.x,-h.y),ye(),ue(),r&&t.translate(y.x1,y.y1)}};var nd=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,o,s){var l=this;if(n.visible()){var v=n.pstyle("".concat(e,"-padding")).pfValue,f=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value;if(f>0){if(a=a||n.position(),o==null||s==null){var g=n.padding();o=n.width()+2*g,s=n.height()+2*g}l.colorFillStyle(r,c[0],c[1],c[2],f),l.nodeShapes[h].draw(r,a.x,a.y,o+v*2,s+v*2),r.fill()}}}};Na.drawNodeOverlay=nd("overlay"),Na.drawNodeUnderlay=nd("underlay"),Na.hasPie=function(t){return t=t[0],t._private.hasPie},Na.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),o=e.pstyle("pie-size"),s=n.x,l=n.y,v=e.width(),f=e.height(),c=Math.min(v,f)/2,h=0,g=this.usePaths();g&&(s=0,l=0),o.units==="%"?c=c*o.pfValue:o.pfValue!==void 0&&(c=o.pfValue/2);for(var m=1;m<=a.pieBackgroundN;m++){var p=e.pstyle("pie-"+m+"-background-size").value,x=e.pstyle("pie-"+m+"-background-color").value,w=e.pstyle("pie-"+m+"-background-opacity").value*r,y=p/100;y+h>1&&(y=1-h);var E=1.5*Math.PI+2*Math.PI*h,S=2*Math.PI*y,T=E+S;p===0||h>=1||h+y>1||(t.beginPath(),t.moveTo(s,l),t.arc(s,l,c,E,T),t.closePath(),this.colorFillStyle(t,x[0],x[1],x[2],w),t.fill(),h+=y)}};var yr={},ES=100;yr.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},yr.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n},yr.createGradientStyleFor=function(t,e,r,n,a){var o,s=this.usePaths(),l=r.pstyle(e+"-gradient-stop-colors").value,v=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var f=r.sourceEndpoint(),c=r.targetEndpoint(),h=r.midpoint(),g=Un(f,h),m=Un(c,h);o=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(g,m))}else{var p=s?{x:0,y:0}:r.position(),x=r.paddedWidth(),w=r.paddedHeight();o=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(x,w))}else if(r.isEdge()){var y=r.sourceEndpoint(),E=r.targetEndpoint();o=t.createLinearGradient(y.x,y.y,E.x,E.y)}else{var S=s?{x:0,y:0}:r.position(),T=r.paddedWidth(),k=r.paddedHeight(),L=T/2,D=k/2,_=r.pstyle("background-gradient-direction").value;switch(_){case"to-bottom":o=t.createLinearGradient(S.x,S.y-D,S.x,S.y+D);break;case"to-top":o=t.createLinearGradient(S.x,S.y+D,S.x,S.y-D);break;case"to-left":o=t.createLinearGradient(S.x+L,S.y,S.x-L,S.y);break;case"to-right":o=t.createLinearGradient(S.x-L,S.y,S.x+L,S.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(S.x-L,S.y-D,S.x+L,S.y+D);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(S.x-L,S.y+D,S.x+L,S.y-D);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(S.x+L,S.y-D,S.x-L,S.y+D);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(S.x+L,S.y+D,S.x-L,S.y-D);break}}if(!o)return null;for(var A=v.length===l.length,O=l.length,N=0;N<O;N++)o.addColorStop(A?v[N]:N/(O-1),"rgba("+l[N][0]+","+l[N][1]+","+l[N][2]+","+a+")");return o},yr.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a},yr.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"},yr.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}},yr.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a},yr.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"},yr.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}},yr.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],o=n[3],s=e.getPixelRatio(),l=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=l);var v=a*s,f=o*s,c;if(!(v===e.canvasWidth&&f===e.canvasHeight)){e.fontCaches=null;var h=r.canvasContainer;h.style.width=a+"px",h.style.height=o+"px";for(var g=0;g<e.CANVAS_LAYERS;g++)c=r.canvases[g],c.width=v,c.height=f,c.style.width=a+"px",c.style.height=o+"px";for(var g=0;g<e.BUFFER_COUNT;g++)c=r.bufferCanvases[g],c.width=v,c.height=f,c.style.width=a+"px",c.style.height=o+"px";e.textureMult=1,s<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=v*e.textureMult,c.height=f*e.textureMult),e.canvasWidth=v,e.canvasHeight=f}},yr.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},yr.render=function(t){t=t||lv();var e=t.forcedContext,r=t.drawAllLayers,n=t.drawOnlyNodeLayer,a=t.forcedZoom,o=t.forcedPan,s=this,l=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,v=s.cy,f=s.data,c=f.canvasNeedsRedraw,h=s.textureOnViewport&&!e&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),g=t.motionBlur!==void 0?t.motionBlur:s.motionBlur,m=s.motionBlurPxRatio,p=v.hasCompoundNodes(),x=s.hoverData.draggingEles,w=!!(s.hoverData.selecting||s.touchData.selecting);g=g&&!e&&s.motionBlurEnabled&&!w;var y=g;e||(s.prevPxRatio!==l&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=l),!e&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),g&&(s.mbFrames==null&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(y=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!h&&(c[s.NODE]=!0,c[s.SELECT_BOX]=!0);var E=v.style(),S=v.zoom(),T=a!==void 0?a:S,k=v.pan(),L={x:k.x,y:k.y},D={zoom:S,pan:{x:k.x,y:k.y}},_=s.prevViewport,A=_===void 0||D.zoom!==_.zoom||D.pan.x!==_.pan.x||D.pan.y!==_.pan.y;!A&&!(x&&!p)&&(s.motionBlurPxRatio=1),o&&(L=o),T*=l,L.x*=l,L.y*=l;var O=s.getCachedZSortedEles();function N(pe,me,De,xe,be){var Te=pe.globalCompositeOperation;pe.globalCompositeOperation="destination-out",s.colorFillStyle(pe,255,255,255,s.motionBlurTransparency),pe.fillRect(me,De,xe,be),pe.globalCompositeOperation=Te}function R(pe,me){var De,xe,be,Te;!s.clearingMotionBlur&&(pe===f.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]||pe===f.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG])?(De={x:k.x*m,y:k.y*m},xe=S*m,be=s.canvasWidth*m,Te=s.canvasHeight*m):(De=L,xe=T,be=s.canvasWidth,Te=s.canvasHeight),pe.setTransform(1,0,0,1,0,0),me==="motionBlur"?N(pe,0,0,be,Te):!e&&(me===void 0||me)&&pe.clearRect(0,0,be,Te),r||(pe.translate(De.x,De.y),pe.scale(xe,xe)),o&&pe.translate(o.x,o.y),a&&pe.scale(a,a)}if(h||(s.textureDrawLastFrame=!1),h){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=v.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var F=s.data.bufferContexts[s.TEXTURE_BUFFER];F.setTransform(1,0,0,1,0,0),F.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:F,drawOnlyNodeLayer:!0,forcedPxRatio:l*s.textureMult});var D=s.textureCache.viewport={zoom:v.zoom(),pan:v.pan(),width:s.canvasWidth,height:s.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}c[s.DRAG]=!1,c[s.NODE]=!1;var M=f.contexts[s.NODE],H=s.textureCache.texture,D=s.textureCache.viewport;M.setTransform(1,0,0,1,0,0),g?N(M,0,0,D.width,D.height):M.clearRect(0,0,D.width,D.height);var $=E.core("outside-texture-bg-color").value,q=E.core("outside-texture-bg-opacity").value;s.colorFillStyle(M,$[0],$[1],$[2],q),M.fillRect(0,0,D.width,D.height);var S=v.zoom();R(M,!1),M.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/l,D.height/D.zoom/l),M.drawImage(H,D.mpan.x,D.mpan.y,D.width/D.zoom/l,D.height/D.zoom/l)}else s.textureOnViewport&&!e&&(s.textureCache=null);var U=v.extent(),X=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles||s.cy.animated(),J=s.hideEdgesOnViewport&&X,Y=[];if(Y[s.NODE]=!c[s.NODE]&&g&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,Y[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),Y[s.DRAG]=!c[s.DRAG]&&g&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,Y[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),c[s.NODE]||r||n||Y[s.NODE]){var j=g&&!Y[s.NODE]&&m!==1,M=e||(j?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:f.contexts[s.NODE]),ie=g&&!j?"motionBlur":void 0;R(M,ie),J?s.drawCachedNodes(M,O.nondrag,l,U):s.drawLayeredElements(M,O.nondrag,l,U),s.debug&&s.drawDebugPoints(M,O.nondrag),!r&&!g&&(c[s.NODE]=!1)}if(!n&&(c[s.DRAG]||r||Y[s.DRAG])){var j=g&&!Y[s.DRAG]&&m!==1,M=e||(j?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:f.contexts[s.DRAG]);R(M,g&&!j?"motionBlur":void 0),J?s.drawCachedNodes(M,O.drag,l,U):s.drawCachedElements(M,O.drag,l,U),s.debug&&s.drawDebugPoints(M,O.drag),!r&&!g&&(c[s.DRAG]=!1)}if(s.showFps||!n&&c[s.SELECT_BOX]&&!r){var M=e||f.contexts[s.SELECT_BOX];if(R(M),s.selection[4]==1&&(s.hoverData.selecting||s.touchData.selecting)){var S=s.cy.zoom(),se=E.core("selection-box-border-width").value/S;M.lineWidth=se,M.fillStyle="rgba("+E.core("selection-box-color").value[0]+","+E.core("selection-box-color").value[1]+","+E.core("selection-box-color").value[2]+","+E.core("selection-box-opacity").value+")",M.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),se>0&&(M.strokeStyle="rgba("+E.core("selection-box-border-color").value[0]+","+E.core("selection-box-border-color").value[1]+","+E.core("selection-box-border-color").value[2]+","+E.core("selection-box-opacity").value+")",M.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(f.bgActivePosistion&&!s.hoverData.selecting){var S=s.cy.zoom(),ee=f.bgActivePosistion;M.fillStyle="rgba("+E.core("active-bg-color").value[0]+","+E.core("active-bg-color").value[1]+","+E.core("active-bg-color").value[2]+","+E.core("active-bg-opacity").value+")",M.beginPath(),M.arc(ee.x,ee.y,E.core("active-bg-size").pfValue/S,0,2*Math.PI),M.fill()}var ne=s.lastRedrawTime;if(s.showFps&&ne){ne=Math.round(ne);var K=Math.round(1e3/ne);M.setTransform(1,0,0,1,0,0),M.fillStyle="rgba(255, 0, 0, 0.75)",M.strokeStyle="rgba(255, 0, 0, 0.75)",M.lineWidth=1,M.fillText("1 frame = "+ne+" ms = "+K+" fps",0,20);var oe=60;M.strokeRect(0,30,250,20),M.fillRect(0,30,250*Math.min(K/oe,1),20)}r||(c[s.SELECT_BOX]=!1)}if(g&&m!==1){var ue=f.contexts[s.NODE],ge=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],ye=f.contexts[s.DRAG],Be=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],ze=function(me,De,xe){me.setTransform(1,0,0,1,0,0),xe||!y?me.clearRect(0,0,s.canvasWidth,s.canvasHeight):N(me,0,0,s.canvasWidth,s.canvasHeight);var be=m;me.drawImage(De,0,0,s.canvasWidth*be,s.canvasHeight*be,0,0,s.canvasWidth,s.canvasHeight)};(c[s.NODE]||Y[s.NODE])&&(ze(ue,ge,Y[s.NODE]),c[s.NODE]=!1),(c[s.DRAG]||Y[s.DRAG])&&(ze(ye,Be,Y[s.DRAG]),c[s.DRAG]=!1)}s.prevViewport=D,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),g&&(s.motionBlurTimeout=setTimeout(function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!h,s.mbFrames=0,c[s.NODE]=!0,c[s.DRAG]=!0,s.redraw()},ES)),e||v.emit("render")};var Bn={};Bn.drawPolygonPath=function(t,e,r,n,a,o){var s=n/2,l=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*o[0],r+l*o[1]);for(var v=1;v<o.length/2;v++)t.lineTo(e+s*o[v*2],r+l*o[v*2+1]);t.closePath()},Bn.drawRoundPolygonPath=function(t,e,r,n,a,o){var s=n/2,l=a/2,v=du(n,a);t.beginPath&&t.beginPath();for(var f=0;f<o.length/4;f++){var c=void 0,h=void 0;f===0?c=o.length-2:c=f*4-2,h=f*4+2;var g=e+s*o[f*4],m=r+l*o[f*4+1],p=-o[c]*o[h]-o[c+1]*o[h+1],x=v/Math.tan(Math.acos(p)/2),w=g-x*o[c],y=m-x*o[c+1],E=g+x*o[h],S=m+x*o[h+1];f===0?t.moveTo(w,y):t.lineTo(w,y),t.arcTo(g,m,E,S,v)}t.closePath()},Bn.drawRoundRectanglePath=function(t,e,r,n,a){var o=n/2,s=a/2,l=yi(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.arcTo(e+o,r-s,e+o,r,l),t.arcTo(e+o,r+s,e,r+s,l),t.arcTo(e-o,r+s,e-o,r,l),t.arcTo(e-o,r-s,e,r-s,l),t.lineTo(e,r-s),t.closePath()},Bn.drawBottomRoundRectanglePath=function(t,e,r,n,a){var o=n/2,s=a/2,l=yi(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.lineTo(e+o,r-s),t.lineTo(e+o,r),t.arcTo(e+o,r+s,e,r+s,l),t.arcTo(e-o,r+s,e-o,r,l),t.lineTo(e-o,r-s),t.lineTo(e,r-s),t.closePath()},Bn.drawCutRectanglePath=function(t,e,r,n,a){var o=n/2,s=a/2,l=bv();t.beginPath&&t.beginPath(),t.moveTo(e-o+l,r-s),t.lineTo(e+o-l,r-s),t.lineTo(e+o,r-s+l),t.lineTo(e+o,r+s-l),t.lineTo(e+o-l,r+s),t.lineTo(e-o+l,r+s),t.lineTo(e-o,r+s-l),t.lineTo(e-o,r-s+l),t.closePath()},Bn.drawBarrelPath=function(t,e,r,n,a){var o=n/2,s=a/2,l=e-o,v=e+o,f=r-s,c=r+s,h=hu(n,a),g=h.widthOffset,m=h.heightOffset,p=h.ctrlPtOffsetPct*g;t.beginPath&&t.beginPath(),t.moveTo(l,f+m),t.lineTo(l,c-m),t.quadraticCurveTo(l+p,c,l+g,c),t.lineTo(v-g,c),t.quadraticCurveTo(v-p,c,v,c-m),t.lineTo(v,f+m),t.quadraticCurveTo(v-p,f,v-g,f),t.lineTo(l+g,f),t.quadraticCurveTo(l+p,f,l,f+m),t.closePath()};for(var ad=Math.sin(0),id=Math.cos(0),Fu={},$u={},od=Math.PI/40,za=0*Math.PI;za<2*Math.PI;za+=od)Fu[za]=Math.sin(za),$u[za]=Math.cos(za);Bn.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var o,s,l=n/2,v=a/2,f=0*Math.PI;f<2*Math.PI;f+=od)o=e-l*Fu[f]*ad+l*$u[f]*id,s=r+v*$u[f]*ad+v*Fu[f]*id,f===0?t.moveTo(o,s):t.lineTo(o,s);t.closePath()};var Mi={};Mi.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]},Mi.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),o=t.full?Math.ceil(n.w):a[2],s=t.full?Math.ceil(n.h):a[3],l=we(t.maxWidth)||we(t.maxHeight),v=this.getPixelRatio(),f=1;if(t.scale!==void 0)o*=t.scale,s*=t.scale,f=t.scale;else if(l){var c=1/0,h=1/0;we(t.maxWidth)&&(c=f*t.maxWidth/o),we(t.maxHeight)&&(h=f*t.maxHeight/s),f=Math.min(c,h),o*=f,s*=f}l||(o*=v,s*=v,f*=v);var g=document.createElement("canvas");g.width=o,g.height=s,g.style.width=o+"px",g.style.height=s+"px";var m=g.getContext("2d");if(o>0&&s>0){m.clearRect(0,0,o,s),m.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(t.full)m.translate(-n.x1*f,-n.y1*f),m.scale(f,f),this.drawElements(m,p),m.scale(1/f,1/f),m.translate(n.x1*f,n.y1*f);else{var x=e.pan(),w={x:x.x*f,y:x.y*f};f*=e.zoom(),m.translate(w.x,w.y),m.scale(f,f),this.drawElements(m,p),m.scale(1/f,1/f),m.translate(-w.x,-w.y)}t.bg&&(m.globalCompositeOperation="destination-over",m.fillStyle=t.bg,m.rect(0,0,o,s),m.fill())}return g};function SS(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),o=0;o<r.length;o++)a[o]=r.charCodeAt(o);return new Blob([n],{type:e})}function sd(t){var e=t.indexOf(",");return t.substr(e+1)}function ud(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Ta(function(a,o){try{e.toBlob(function(s){s!=null?a(s):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(s){o(s)}});case"blob":return SS(sd(n()),r);case"base64":return sd(n());case"base64uri":default:return n()}}Mi.png=function(t){return ud(t,this.bufferCanvasImage(t),"image/png")},Mi.jpg=function(t){return ud(t,this.bufferCanvasImage(t),"image/jpeg")};var ld={};ld.nodeShapeImpl=function(t,e,r,n,a,o,s){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,o);case"polygon":return this.drawPolygonPath(e,r,n,a,o,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,o);case"barrel":return this.drawBarrelPath(e,r,n,a,o)}};var CS=fd,it=fd.prototype;it.CANVAS_LAYERS=3,it.SELECT_BOX=0,it.DRAG=1,it.NODE=2,it.BUFFER_COUNT=3,it.TEXTURE_BUFFER=0,it.MOTIONBLUR_BUFFER_NODE=1,it.MOTIONBLUR_BUFFER_DRAG=2;function fd(t){var e=this;e.data={canvases:new Array(it.CANVAS_LAYERS),contexts:new Array(it.CANVAS_LAYERS),canvasNeedsRedraw:new Array(it.CANVAS_LAYERS),bufferCanvases:new Array(it.BUFFER_COUNT),bufferContexts:new Array(it.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[r]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[r]=n;var s={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ib()&&(s["-ms-touch-action"]="none",s["touch-action"]="none");for(var l=0;l<it.CANVAS_LAYERS;l++){var v=e.data.canvases[l]=document.createElement("canvas");e.data.contexts[l]=v.getContext("2d"),Object.keys(s).forEach(function(ne){v.style[ne]=s[ne]}),v.style.position="absolute",v.setAttribute("data-id","layer"+l),v.style.zIndex=String(it.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(v),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[it.NODE].setAttribute("data-id","layer"+it.NODE+"-node"),e.data.canvases[it.SELECT_BOX].setAttribute("data-id","layer"+it.SELECT_BOX+"-selectbox"),e.data.canvases[it.DRAG].setAttribute("data-id","layer"+it.DRAG+"-drag");for(var l=0;l<it.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=document.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var f=sr(),c=function(K){return{x:(K.x1+K.x2)/2,y:(K.y1+K.y2)/2}},h=function(K){return{x:-K.w/2,y:-K.h/2}},g=function(K){var oe=K[0]._private,ue=oe.oldBackgroundTimestamp===oe.backgroundTimestamp;return!ue},m=function(K){return K[0]._private.nodeKey},p=function(K){return K[0]._private.labelStyleKey},x=function(K){return K[0]._private.sourceLabelStyleKey},w=function(K){return K[0]._private.targetLabelStyleKey},y=function(K,oe,ue,ge,ye){return e.drawElement(K,oe,ue,!1,!1,ye)},E=function(K,oe,ue,ge,ye){return e.drawElementText(K,oe,ue,ge,"main",ye)},S=function(K,oe,ue,ge,ye){return e.drawElementText(K,oe,ue,ge,"source",ye)},T=function(K,oe,ue,ge,ye){return e.drawElementText(K,oe,ue,ge,"target",ye)},k=function(K){return K.boundingBox(),K[0]._private.bodyBounds},L=function(K){return K.boundingBox(),K[0]._private.labelBounds.main||f},D=function(K){return K.boundingBox(),K[0]._private.labelBounds.source||f},_=function(K){return K.boundingBox(),K[0]._private.labelBounds.target||f},A=function(K,oe){return oe},O=function(K){return c(k(K))},N=function(K,oe,ue){var ge=K?K+"-":"";return{x:oe.x+ue.pstyle(ge+"text-margin-x").pfValue,y:oe.y+ue.pstyle(ge+"text-margin-y").pfValue}},R=function(K,oe,ue){var ge=K[0]._private.rscratch;return{x:ge[oe],y:ge[ue]}},F=function(K){return N("",R(K,"labelX","labelY"),K)},M=function(K){return N("source",R(K,"sourceLabelX","sourceLabelY"),K)},H=function(K){return N("target",R(K,"targetLabelX","targetLabelY"),K)},$=function(K){return h(k(K))},q=function(K){return h(D(K))},U=function(K){return h(_(K))},X=function(K){var oe=L(K),ue=h(L(K));if(K.isNode()){switch(K.pstyle("text-halign").value){case"left":ue.x=-oe.w;break;case"right":ue.x=0;break}switch(K.pstyle("text-valign").value){case"top":ue.y=-oe.h;break;case"bottom":ue.y=0;break}}return ue},J=e.data.eleTxrCache=new _i(e,{getKey:m,doesEleInvalidateKey:g,drawElement:y,getBoundingBox:k,getRotationPoint:O,getRotationOffset:$,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Y=e.data.lblTxrCache=new _i(e,{getKey:p,drawElement:E,getBoundingBox:L,getRotationPoint:F,getRotationOffset:X,isVisible:A}),j=e.data.slbTxrCache=new _i(e,{getKey:x,drawElement:S,getBoundingBox:D,getRotationPoint:M,getRotationOffset:q,isVisible:A}),ie=e.data.tlbTxrCache=new _i(e,{getKey:w,drawElement:T,getBoundingBox:_,getRotationPoint:H,getRotationOffset:U,isVisible:A}),se=e.data.lyrTxrCache=new Qc(e);e.onUpdateEleCalcs(function(K,oe){J.invalidateElements(oe),Y.invalidateElements(oe),j.invalidateElements(oe),ie.invalidateElements(oe),se.invalidateElements(oe);for(var ue=0;ue<oe.length;ue++){var ge=oe[ue]._private;ge.oldBackgroundTimestamp=ge.backgroundTimestamp}});var ee=function(K){for(var oe=0;oe<K.length;oe++)se.enqueueElementRefinement(K[oe].ele)};J.onDequeue(ee),Y.onDequeue(ee),j.onDequeue(ee),ie.onDequeue(ee)}it.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[it.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[it.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[it.SELECT_BOX]=e;break}};var TS=typeof Path2D<"u";it.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t},it.usePaths=function(){return TS&&this.pathsEnabled},it.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},it.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},it.makeOffscreenCanvas=function(t,e){var r;return(typeof OffscreenCanvas>"u"?"undefined":Pt(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(t,e):(r=document.createElement("canvas"),r.width=t,r.height=e),r},[jc,Qr,sn,zu,jn,Na,yr,Bn,Mi,ld].forEach(function(t){_e(it,t)});var DS=[{name:"null",impl:Mc},{name:"base",impl:Kc},{name:"canvas",impl:CS}],AS=[{type:"layout",extensions:IE},{type:"renderer",extensions:DS}],vd={},cd={};function dd(t,e,r){var n=r,a=function(_){st("Can not register `"+e+"` for `"+t+"` since `"+_+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(ki.prototype[e])return a(e);ki.prototype[e]=r}else if(t==="collection"){if(Vt.prototype[e])return a(e);Vt.prototype[e]=r}else if(t==="layout"){for(var o=function(_){this.options=_,r.call(this,_),tt(this._private)||(this._private={}),this._private.cy=_.cy,this._private.listeners=[],this.createEmitter()},s=o.prototype=Object.create(r.prototype),l=[],v=0;v<l.length;v++){var f=l[v];s[f]=s[f]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var c=r.prototype.stop;s.stop=function(){var D=this.options;if(D&&D.animate){var _=this.animations;if(_)for(var A=0;A<_.length;A++)_[A].stop()}return c?c.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var h=function(_){return _._private.cy},g={addEventFields:function(_,A){A.layout=_,A.cy=h(_),A.target=_},bubble:function(){return!0},parent:function(_){return h(_)}};_e(s,{createEmitter:function(){return this._private.emitter=new Po(g,this),this},emitter:function(){return this._private.emitter},on:function(_,A){return this.emitter().on(_,A),this},one:function(_,A){return this.emitter().one(_,A),this},once:function(_,A){return this.emitter().one(_,A),this},removeListener:function(_,A){return this.emitter().removeListener(_,A),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(_,A){return this.emitter().emit(_,A),this}}),ut.eventAliasesOn(s),n=o}else if(t==="renderer"&&e!=="null"&&e!=="base"){var m=hd("renderer","base"),p=m.prototype,x=r,w=r.prototype,y=function(){m.apply(this,arguments),x.apply(this,arguments)},E=y.prototype;for(var S in p){var T=p[S],k=w[S]!=null;if(k)return a(S);E[S]=T}for(var L in w)E[L]=w[L];p.clientFunctions.forEach(function(D){E[D]=E[D]||function(){St("Renderer does not implement `renderer."+D+"()` on its prototype")}}),n=y}else if(t==="__proto__"||t==="constructor"||t==="prototype")return St(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return Jf({map:vd,keys:[t,e],value:n})}function hd(t,e){return jf({map:vd,keys:[t,e]})}function PS(t,e,r,n,a){return Jf({map:cd,keys:[t,e,r,n],value:a})}function LS(t,e,r,n){return jf({map:cd,keys:[t,e,r,n]})}var qu=function(){if(arguments.length===2)return hd.apply(null,arguments);if(arguments.length===3)return dd.apply(null,arguments);if(arguments.length===4)return LS.apply(null,arguments);if(arguments.length===5)return PS.apply(null,arguments);St("Invalid extension access syntax")};ki.prototype.extension=qu,AS.forEach(function(t){t.extensions.forEach(function(e){dd(t.type,e.name,e.impl)})});var gd=function t(){if(!(this instanceof t))return new t;this.length=0},ea=gd.prototype;ea.instanceString=function(){return"stylesheet"},ea.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this},ea.css=function(t,e){var r=this.length-1;if(ke(t))this[r].properties.push({name:t,value:e});else if(tt(t))for(var n=t,a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],l=n[s];if(l!=null){var v=Zt.properties[s]||Zt.properties[lo(s)];if(v!=null){var f=v.name,c=l;this[r].properties.push({name:f,value:c})}}}return this},ea.style=ea.css,ea.generateStyle=function(t){var e=new Zt(t);return this.appendToStyle(e)},ea.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var o=0;o<a.length;o++){var s=a[o];t.css(s.name,s.value)}}return t};var kS="3.26.0",ta=function(e){if(e===void 0&&(e={}),tt(e))return new ki(e);if(ke(e))return qu.apply(qu,arguments)};ta.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(ta),t.apply(null,e),this},ta.warnings=function(t){return sv(t)},ta.version=kS,ta.stylesheet=ta.Stylesheet=gd;var BS=ta,RS=$g(BS),Xo={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Xo.exports,function(t,e){(function(){var r,n="4.17.21",a=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",f=500,c="__lodash_placeholder__",h=1,g=2,m=4,p=1,x=2,w=1,y=2,E=4,S=8,T=16,k=32,L=64,D=128,_=256,A=512,O=30,N="...",R=800,F=16,M=1,H=2,$=3,q=1/0,U=9007199254740991,X=17976931348623157e292,J=0/0,Y=4294967295,j=Y-1,ie=Y>>>1,se=[["ary",D],["bind",w],["bindKey",y],["curry",S],["curryRight",T],["flip",A],["partial",k],["partialRight",L],["rearg",_]],ee="[object Arguments]",ne="[object Array]",K="[object AsyncFunction]",oe="[object Boolean]",ue="[object Date]",ge="[object DOMException]",ye="[object Error]",Be="[object Function]",ze="[object GeneratorFunction]",pe="[object Map]",me="[object Number]",De="[object Null]",xe="[object Object]",be="[object Promise]",Te="[object Proxy]",$e="[object RegExp]",Re="[object Set]",Le="[object String]",Je="[object Symbol]",de="[object Undefined]",I="[object WeakMap]",Q="[object WeakSet]",ve="[object ArrayBuffer]",te="[object DataView]",ae="[object Float32Array]",Ne="[object Float64Array]",ce="[object Int8Array]",Ae="[object Int16Array]",Ze="[object Int32Array]",nt="[object Uint8Array]",qe="[object Uint8ClampedArray]",je="[object Uint16Array]",Fe="[object Uint32Array]",He=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,Rt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lr=/&(?:amp|lt|gt|quot|#39);/g,fr=/[&<>"']/g,_t=RegExp(lr.source),vr=RegExp(fr.source),Gt=/<%-([\s\S]+?)%>/g,$r=/<%([\s\S]+?)%>/g,qr=/<%=([\s\S]+?)%>/g,Rn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,un=/^\w*$/,_n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,In=/[\\^$.*+?()[\]{}|]/g,ln=RegExp(In.source),Nt=/^\s+/,zt=/\s/,Jt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fa=/\{\n\/\* \[wrapped with (.+)\] \*/,Pr=/,? & /,Zo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wu=/[()=,{}\[\]\/\s]/,Hu=/\\(\\)?/g,Gu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qo=/\w*$/,Uu=/^[-+]0x[0-9a-f]+$/i,Ku=/^0b[01]+$/i,Yu=/^\[object .+?Constructor\]$/,ra=/^0o[0-7]+$/i,Oi=/^(?:0|[1-9]\d*)$/,$a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,na=/($^)/,Jo=/['\n\r\u2028\u2029\\]/g,qa="\\ud800-\\udfff",br="\\u0300-\\u036f",Ni="\\ufe20-\\ufe2f",jo="\\u20d0-\\u20ff",Mn=br+Ni+jo,cr="\\u2700-\\u27bf",es="a-z\\xdf-\\xf6\\xf8-\\xff",OS="\\xac\\xb1\\xd7\\xf7",NS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zS="\\u2000-\\u206f",FS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",md="A-Z\\xc0-\\xd6\\xd8-\\xde",yd="\\ufe0e\\ufe0f",bd=OS+NS+zS+FS,Xu="['’]",$S="["+qa+"]",wd="["+bd+"]",ts="["+Mn+"]",xd="\\d+",qS="["+cr+"]",Ed="["+es+"]",Sd="[^"+qa+bd+xd+cr+es+md+"]",Zu="\\ud83c[\\udffb-\\udfff]",VS="(?:"+ts+"|"+Zu+")",Cd="[^"+qa+"]",Qu="(?:\\ud83c[\\udde6-\\uddff]){2}",Ju="[\\ud800-\\udbff][\\udc00-\\udfff]",Va="["+md+"]",Td="\\u200d",Dd="(?:"+Ed+"|"+Sd+")",WS="(?:"+Va+"|"+Sd+")",Ad="(?:"+Xu+"(?:d|ll|m|re|s|t|ve))?",Pd="(?:"+Xu+"(?:D|LL|M|RE|S|T|VE))?",Ld=VS+"?",kd="["+yd+"]?",HS="(?:"+Td+"(?:"+[Cd,Qu,Ju].join("|")+")"+kd+Ld+")*",GS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",US="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bd=kd+Ld+HS,KS="(?:"+[qS,Qu,Ju].join("|")+")"+Bd,YS="(?:"+[Cd+ts+"?",ts,Qu,Ju,$S].join("|")+")",XS=RegExp(Xu,"g"),ZS=RegExp(ts,"g"),ju=RegExp(Zu+"(?="+Zu+")|"+YS+Bd,"g"),QS=RegExp([Va+"?"+Ed+"+"+Ad+"(?="+[wd,Va,"$"].join("|")+")",WS+"+"+Pd+"(?="+[wd,Va+Dd,"$"].join("|")+")",Va+"?"+Dd+"+"+Ad,Va+"+"+Pd,US,GS,xd,KS].join("|"),"g"),JS=RegExp("["+Td+qa+Mn+yd+"]"),jS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tC=-1,yt={};yt[ae]=yt[Ne]=yt[ce]=yt[Ae]=yt[Ze]=yt[nt]=yt[qe]=yt[je]=yt[Fe]=!0,yt[ee]=yt[ne]=yt[ve]=yt[oe]=yt[te]=yt[ue]=yt[ye]=yt[Be]=yt[pe]=yt[me]=yt[xe]=yt[$e]=yt[Re]=yt[Le]=yt[I]=!1;var pt={};pt[ee]=pt[ne]=pt[ve]=pt[te]=pt[oe]=pt[ue]=pt[ae]=pt[Ne]=pt[ce]=pt[Ae]=pt[Ze]=pt[pe]=pt[me]=pt[xe]=pt[$e]=pt[Re]=pt[Le]=pt[Je]=pt[nt]=pt[qe]=pt[je]=pt[Fe]=!0,pt[ye]=pt[Be]=pt[I]=!1;var rC={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},nC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},aC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},iC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},oC=parseFloat,sC=parseInt,Rd=typeof Ur=="object"&&Ur&&Ur.Object===Object&&Ur,uC=typeof self=="object"&&self&&self.Object===Object&&self,Ut=Rd||uC||Function("return this")(),el=e&&!e.nodeType&&e,aa=el&&!0&&t&&!t.nodeType&&t,_d=aa&&aa.exports===el,tl=_d&&Rd.process,Lr=function(){try{var W=aa&&aa.require&&aa.require("util").types;return W||tl&&tl.binding&&tl.binding("util")}catch{}}(),Id=Lr&&Lr.isArrayBuffer,Md=Lr&&Lr.isDate,Od=Lr&&Lr.isMap,Nd=Lr&&Lr.isRegExp,zd=Lr&&Lr.isSet,Fd=Lr&&Lr.isTypedArray;function wr(W,re,Z){switch(Z.length){case 0:return W.call(re);case 1:return W.call(re,Z[0]);case 2:return W.call(re,Z[0],Z[1]);case 3:return W.call(re,Z[0],Z[1],Z[2])}return W.apply(re,Z)}function lC(W,re,Z,Se){for(var Ve=-1,ot=W==null?0:W.length;++Ve<ot;){var It=W[Ve];re(Se,It,Z(It),W)}return Se}function kr(W,re){for(var Z=-1,Se=W==null?0:W.length;++Z<Se&&re(W[Z],Z,W)!==!1;);return W}function fC(W,re){for(var Z=W==null?0:W.length;Z--&&re(W[Z],Z,W)!==!1;);return W}function $d(W,re){for(var Z=-1,Se=W==null?0:W.length;++Z<Se;)if(!re(W[Z],Z,W))return!1;return!0}function On(W,re){for(var Z=-1,Se=W==null?0:W.length,Ve=0,ot=[];++Z<Se;){var It=W[Z];re(It,Z,W)&&(ot[Ve++]=It)}return ot}function rs(W,re){var Z=W==null?0:W.length;return!!Z&&Wa(W,re,0)>-1}function rl(W,re,Z){for(var Se=-1,Ve=W==null?0:W.length;++Se<Ve;)if(Z(re,W[Se]))return!0;return!1}function wt(W,re){for(var Z=-1,Se=W==null?0:W.length,Ve=Array(Se);++Z<Se;)Ve[Z]=re(W[Z],Z,W);return Ve}function Nn(W,re){for(var Z=-1,Se=re.length,Ve=W.length;++Z<Se;)W[Ve+Z]=re[Z];return W}function nl(W,re,Z,Se){var Ve=-1,ot=W==null?0:W.length;for(Se&&ot&&(Z=W[++Ve]);++Ve<ot;)Z=re(Z,W[Ve],Ve,W);return Z}function vC(W,re,Z,Se){var Ve=W==null?0:W.length;for(Se&&Ve&&(Z=W[--Ve]);Ve--;)Z=re(Z,W[Ve],Ve,W);return Z}function al(W,re){for(var Z=-1,Se=W==null?0:W.length;++Z<Se;)if(re(W[Z],Z,W))return!0;return!1}var cC=il("length");function dC(W){return W.split("")}function hC(W){return W.match(Zo)||[]}function qd(W,re,Z){var Se;return Z(W,function(Ve,ot,It){if(re(Ve,ot,It))return Se=ot,!1}),Se}function ns(W,re,Z,Se){for(var Ve=W.length,ot=Z+(Se?1:-1);Se?ot--:++ot<Ve;)if(re(W[ot],ot,W))return ot;return-1}function Wa(W,re,Z){return re===re?DC(W,re,Z):ns(W,Vd,Z)}function gC(W,re,Z,Se){for(var Ve=Z-1,ot=W.length;++Ve<ot;)if(Se(W[Ve],re))return Ve;return-1}function Vd(W){return W!==W}function Wd(W,re){var Z=W==null?0:W.length;return Z?sl(W,re)/Z:J}function il(W){return function(re){return re==null?r:re[W]}}function ol(W){return function(re){return W==null?r:W[re]}}function Hd(W,re,Z,Se,Ve){return Ve(W,function(ot,It,dt){Z=Se?(Se=!1,ot):re(Z,ot,It,dt)}),Z}function pC(W,re){var Z=W.length;for(W.sort(re);Z--;)W[Z]=W[Z].value;return W}function sl(W,re){for(var Z,Se=-1,Ve=W.length;++Se<Ve;){var ot=re(W[Se]);ot!==r&&(Z=Z===r?ot:Z+ot)}return Z}function ul(W,re){for(var Z=-1,Se=Array(W);++Z<W;)Se[Z]=re(Z);return Se}function mC(W,re){return wt(re,function(Z){return[Z,W[Z]]})}function Gd(W){return W&&W.slice(0,Xd(W)+1).replace(Nt,"")}function xr(W){return function(re){return W(re)}}function ll(W,re){return wt(re,function(Z){return W[Z]})}function zi(W,re){return W.has(re)}function Ud(W,re){for(var Z=-1,Se=W.length;++Z<Se&&Wa(re,W[Z],0)>-1;);return Z}function Kd(W,re){for(var Z=W.length;Z--&&Wa(re,W[Z],0)>-1;);return Z}function yC(W,re){for(var Z=W.length,Se=0;Z--;)W[Z]===re&&++Se;return Se}var bC=ol(rC),wC=ol(nC);function xC(W){return"\\"+iC[W]}function EC(W,re){return W==null?r:W[re]}function Ha(W){return JS.test(W)}function SC(W){return jS.test(W)}function CC(W){for(var re,Z=[];!(re=W.next()).done;)Z.push(re.value);return Z}function fl(W){var re=-1,Z=Array(W.size);return W.forEach(function(Se,Ve){Z[++re]=[Ve,Se]}),Z}function Yd(W,re){return function(Z){return W(re(Z))}}function zn(W,re){for(var Z=-1,Se=W.length,Ve=0,ot=[];++Z<Se;){var It=W[Z];(It===re||It===c)&&(W[Z]=c,ot[Ve++]=Z)}return ot}function as(W){var re=-1,Z=Array(W.size);return W.forEach(function(Se){Z[++re]=Se}),Z}function TC(W){var re=-1,Z=Array(W.size);return W.forEach(function(Se){Z[++re]=[Se,Se]}),Z}function DC(W,re,Z){for(var Se=Z-1,Ve=W.length;++Se<Ve;)if(W[Se]===re)return Se;return-1}function AC(W,re,Z){for(var Se=Z+1;Se--;)if(W[Se]===re)return Se;return Se}function Ga(W){return Ha(W)?LC(W):cC(W)}function Vr(W){return Ha(W)?kC(W):dC(W)}function Xd(W){for(var re=W.length;re--&&zt.test(W.charAt(re)););return re}var PC=ol(aC);function LC(W){for(var re=ju.lastIndex=0;ju.test(W);)++re;return re}function kC(W){return W.match(ju)||[]}function BC(W){return W.match(QS)||[]}var RC=function W(re){re=re==null?Ut:Ua.defaults(Ut.Object(),re,Ua.pick(Ut,eC));var Z=re.Array,Se=re.Date,Ve=re.Error,ot=re.Function,It=re.Math,dt=re.Object,vl=re.RegExp,_C=re.String,Br=re.TypeError,is=Z.prototype,IC=ot.prototype,Ka=dt.prototype,os=re["__core-js_shared__"],ss=IC.toString,ft=Ka.hasOwnProperty,MC=0,Zd=function(){var i=/[^.]+$/.exec(os&&os.keys&&os.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),us=Ka.toString,OC=ss.call(dt),NC=Ut._,zC=vl("^"+ss.call(ft).replace(In,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ls=_d?re.Buffer:r,Fn=re.Symbol,fs=re.Uint8Array,Qd=ls?ls.allocUnsafe:r,vs=Yd(dt.getPrototypeOf,dt),Jd=dt.create,jd=Ka.propertyIsEnumerable,cs=is.splice,eh=Fn?Fn.isConcatSpreadable:r,Fi=Fn?Fn.iterator:r,ia=Fn?Fn.toStringTag:r,ds=function(){try{var i=fa(dt,"defineProperty");return i({},"",{}),i}catch{}}(),FC=re.clearTimeout!==Ut.clearTimeout&&re.clearTimeout,$C=Se&&Se.now!==Ut.Date.now&&Se.now,qC=re.setTimeout!==Ut.setTimeout&&re.setTimeout,hs=It.ceil,gs=It.floor,cl=dt.getOwnPropertySymbols,VC=ls?ls.isBuffer:r,th=re.isFinite,WC=is.join,HC=Yd(dt.keys,dt),Mt=It.max,jt=It.min,GC=Se.now,UC=re.parseInt,rh=It.random,KC=is.reverse,dl=fa(re,"DataView"),$i=fa(re,"Map"),hl=fa(re,"Promise"),Ya=fa(re,"Set"),qi=fa(re,"WeakMap"),Vi=fa(dt,"create"),ps=qi&&new qi,Xa={},YC=va(dl),XC=va($i),ZC=va(hl),QC=va(Ya),JC=va(qi),ms=Fn?Fn.prototype:r,Wi=ms?ms.valueOf:r,nh=ms?ms.toString:r;function P(i){if(Tt(i)&&!We(i)&&!(i instanceof Qe)){if(i instanceof Rr)return i;if(ft.call(i,"__wrapped__"))return ag(i)}return new Rr(i)}var Za=function(){function i(){}return function(u){if(!Et(u))return{};if(Jd)return Jd(u);i.prototype=u;var d=new i;return i.prototype=r,d}}();function ys(){}function Rr(i,u){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=r}P.templateSettings={escape:Gt,evaluate:$r,interpolate:qr,variable:"",imports:{_:P}},P.prototype=ys.prototype,P.prototype.constructor=P,Rr.prototype=Za(ys.prototype),Rr.prototype.constructor=Rr;function Qe(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function jC(){var i=new Qe(this.__wrapped__);return i.__actions__=dr(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=dr(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=dr(this.__views__),i}function e2(){if(this.__filtered__){var i=new Qe(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function t2(){var i=this.__wrapped__.value(),u=this.__dir__,d=We(i),b=u<0,C=d?i.length:0,B=dT(0,C,this.__views__),z=B.start,V=B.end,G=V-z,le=b?V:z-1,fe=this.__iteratees__,he=fe.length,Ee=0,Pe=jt(G,this.__takeCount__);if(!d||!b&&C==G&&Pe==G)return Ah(i,this.__actions__);var Me=[];e:for(;G--&&Ee<Pe;){le+=u;for(var Ue=-1,Oe=i[le];++Ue<he;){var Ye=fe[Ue],et=Ye.iteratee,Cr=Ye.type,or=et(Oe);if(Cr==H)Oe=or;else if(!or){if(Cr==M)continue e;break e}}Me[Ee++]=Oe}return Me}Qe.prototype=Za(ys.prototype),Qe.prototype.constructor=Qe;function oa(i){var u=-1,d=i==null?0:i.length;for(this.clear();++u<d;){var b=i[u];this.set(b[0],b[1])}}function r2(){this.__data__=Vi?Vi(null):{},this.size=0}function n2(i){var u=this.has(i)&&delete this.__data__[i];return this.size-=u?1:0,u}function a2(i){var u=this.__data__;if(Vi){var d=u[i];return d===v?r:d}return ft.call(u,i)?u[i]:r}function i2(i){var u=this.__data__;return Vi?u[i]!==r:ft.call(u,i)}function o2(i,u){var d=this.__data__;return this.size+=this.has(i)?0:1,d[i]=Vi&&u===r?v:u,this}oa.prototype.clear=r2,oa.prototype.delete=n2,oa.prototype.get=a2,oa.prototype.has=i2,oa.prototype.set=o2;function fn(i){var u=-1,d=i==null?0:i.length;for(this.clear();++u<d;){var b=i[u];this.set(b[0],b[1])}}function s2(){this.__data__=[],this.size=0}function u2(i){var u=this.__data__,d=bs(u,i);if(d<0)return!1;var b=u.length-1;return d==b?u.pop():cs.call(u,d,1),--this.size,!0}function l2(i){var u=this.__data__,d=bs(u,i);return d<0?r:u[d][1]}function f2(i){return bs(this.__data__,i)>-1}function v2(i,u){var d=this.__data__,b=bs(d,i);return b<0?(++this.size,d.push([i,u])):d[b][1]=u,this}fn.prototype.clear=s2,fn.prototype.delete=u2,fn.prototype.get=l2,fn.prototype.has=f2,fn.prototype.set=v2;function vn(i){var u=-1,d=i==null?0:i.length;for(this.clear();++u<d;){var b=i[u];this.set(b[0],b[1])}}function c2(){this.size=0,this.__data__={hash:new oa,map:new($i||fn),string:new oa}}function d2(i){var u=Bs(this,i).delete(i);return this.size-=u?1:0,u}function h2(i){return Bs(this,i).get(i)}function g2(i){return Bs(this,i).has(i)}function p2(i,u){var d=Bs(this,i),b=d.size;return d.set(i,u),this.size+=d.size==b?0:1,this}vn.prototype.clear=c2,vn.prototype.delete=d2,vn.prototype.get=h2,vn.prototype.has=g2,vn.prototype.set=p2;function sa(i){var u=-1,d=i==null?0:i.length;for(this.__data__=new vn;++u<d;)this.add(i[u])}function m2(i){return this.__data__.set(i,v),this}function y2(i){return this.__data__.has(i)}sa.prototype.add=sa.prototype.push=m2,sa.prototype.has=y2;function Wr(i){var u=this.__data__=new fn(i);this.size=u.size}function b2(){this.__data__=new fn,this.size=0}function w2(i){var u=this.__data__,d=u.delete(i);return this.size=u.size,d}function x2(i){return this.__data__.get(i)}function E2(i){return this.__data__.has(i)}function S2(i,u){var d=this.__data__;if(d instanceof fn){var b=d.__data__;if(!$i||b.length<a-1)return b.push([i,u]),this.size=++d.size,this;d=this.__data__=new vn(b)}return d.set(i,u),this.size=d.size,this}Wr.prototype.clear=b2,Wr.prototype.delete=w2,Wr.prototype.get=x2,Wr.prototype.has=E2,Wr.prototype.set=S2;function ah(i,u){var d=We(i),b=!d&&ca(i),C=!d&&!b&&Hn(i),B=!d&&!b&&!C&&ei(i),z=d||b||C||B,V=z?ul(i.length,_C):[],G=V.length;for(var le in i)(u||ft.call(i,le))&&!(z&&(le=="length"||C&&(le=="offset"||le=="parent")||B&&(le=="buffer"||le=="byteLength"||le=="byteOffset")||gn(le,G)))&&V.push(le);return V}function ih(i){var u=i.length;return u?i[Tl(0,u-1)]:r}function C2(i,u){return Rs(dr(i),ua(u,0,i.length))}function T2(i){return Rs(dr(i))}function gl(i,u,d){(d!==r&&!Hr(i[u],d)||d===r&&!(u in i))&&cn(i,u,d)}function Hi(i,u,d){var b=i[u];(!(ft.call(i,u)&&Hr(b,d))||d===r&&!(u in i))&&cn(i,u,d)}function bs(i,u){for(var d=i.length;d--;)if(Hr(i[d][0],u))return d;return-1}function D2(i,u,d,b){return $n(i,function(C,B,z){u(b,C,d(C),z)}),b}function oh(i,u){return i&&jr(u,Ft(u),i)}function A2(i,u){return i&&jr(u,gr(u),i)}function cn(i,u,d){u=="__proto__"&&ds?ds(i,u,{configurable:!0,enumerable:!0,value:d,writable:!0}):i[u]=d}function pl(i,u){for(var d=-1,b=u.length,C=Z(b),B=i==null;++d<b;)C[d]=B?r:Zl(i,u[d]);return C}function ua(i,u,d){return i===i&&(d!==r&&(i=i<=d?i:d),u!==r&&(i=i>=u?i:u)),i}function _r(i,u,d,b,C,B){var z,V=u&h,G=u&g,le=u&m;if(d&&(z=C?d(i,b,C,B):d(i)),z!==r)return z;if(!Et(i))return i;var fe=We(i);if(fe){if(z=gT(i),!V)return dr(i,z)}else{var he=er(i),Ee=he==Be||he==ze;if(Hn(i))return kh(i,V);if(he==xe||he==ee||Ee&&!C){if(z=G||Ee?{}:Xh(i),!V)return G?aT(i,A2(z,i)):nT(i,oh(z,i))}else{if(!pt[he])return C?i:{};z=pT(i,he,V)}}B||(B=new Wr);var Pe=B.get(i);if(Pe)return Pe;B.set(i,z),Cg(i)?i.forEach(function(Oe){z.add(_r(Oe,u,d,Oe,i,B))}):Eg(i)&&i.forEach(function(Oe,Ye){z.set(Ye,_r(Oe,u,d,Ye,i,B))});var Me=le?G?Ol:Ml:G?gr:Ft,Ue=fe?r:Me(i);return kr(Ue||i,function(Oe,Ye){Ue&&(Ye=Oe,Oe=i[Ye]),Hi(z,Ye,_r(Oe,u,d,Ye,i,B))}),z}function P2(i){var u=Ft(i);return function(d){return sh(d,i,u)}}function sh(i,u,d){var b=d.length;if(i==null)return!b;for(i=dt(i);b--;){var C=d[b],B=u[C],z=i[C];if(z===r&&!(C in i)||!B(z))return!1}return!0}function uh(i,u,d){if(typeof i!="function")throw new Br(s);return Qi(function(){i.apply(r,d)},u)}function Gi(i,u,d,b){var C=-1,B=rs,z=!0,V=i.length,G=[],le=u.length;if(!V)return G;d&&(u=wt(u,xr(d))),b?(B=rl,z=!1):u.length>=a&&(B=zi,z=!1,u=new sa(u));e:for(;++C<V;){var fe=i[C],he=d==null?fe:d(fe);if(fe=b||fe!==0?fe:0,z&&he===he){for(var Ee=le;Ee--;)if(u[Ee]===he)continue e;G.push(fe)}else B(u,he,b)||G.push(fe)}return G}var $n=Mh(Jr),lh=Mh(yl,!0);function L2(i,u){var d=!0;return $n(i,function(b,C,B){return d=!!u(b,C,B),d}),d}function ws(i,u,d){for(var b=-1,C=i.length;++b<C;){var B=i[b],z=u(B);if(z!=null&&(V===r?z===z&&!Sr(z):d(z,V)))var V=z,G=B}return G}function k2(i,u,d,b){var C=i.length;for(d=Ge(d),d<0&&(d=-d>C?0:C+d),b=b===r||b>C?C:Ge(b),b<0&&(b+=C),b=d>b?0:Dg(b);d<b;)i[d++]=u;return i}function fh(i,u){var d=[];return $n(i,function(b,C,B){u(b,C,B)&&d.push(b)}),d}function Kt(i,u,d,b,C){var B=-1,z=i.length;for(d||(d=yT),C||(C=[]);++B<z;){var V=i[B];u>0&&d(V)?u>1?Kt(V,u-1,d,b,C):Nn(C,V):b||(C[C.length]=V)}return C}var ml=Oh(),vh=Oh(!0);function Jr(i,u){return i&&ml(i,u,Ft)}function yl(i,u){return i&&vh(i,u,Ft)}function xs(i,u){return On(u,function(d){return pn(i[d])})}function la(i,u){u=Vn(u,i);for(var d=0,b=u.length;i!=null&&d<b;)i=i[en(u[d++])];return d&&d==b?i:r}function ch(i,u,d){var b=u(i);return We(i)?b:Nn(b,d(i))}function ar(i){return i==null?i===r?de:De:ia&&ia in dt(i)?cT(i):TT(i)}function bl(i,u){return i>u}function B2(i,u){return i!=null&&ft.call(i,u)}function R2(i,u){return i!=null&&u in dt(i)}function _2(i,u,d){return i>=jt(u,d)&&i<Mt(u,d)}function wl(i,u,d){for(var b=d?rl:rs,C=i[0].length,B=i.length,z=B,V=Z(B),G=1/0,le=[];z--;){var fe=i[z];z&&u&&(fe=wt(fe,xr(u))),G=jt(fe.length,G),V[z]=!d&&(u||C>=120&&fe.length>=120)?new sa(z&&fe):r}fe=i[0];var he=-1,Ee=V[0];e:for(;++he<C&&le.length<G;){var Pe=fe[he],Me=u?u(Pe):Pe;if(Pe=d||Pe!==0?Pe:0,!(Ee?zi(Ee,Me):b(le,Me,d))){for(z=B;--z;){var Ue=V[z];if(!(Ue?zi(Ue,Me):b(i[z],Me,d)))continue e}Ee&&Ee.push(Me),le.push(Pe)}}return le}function I2(i,u,d,b){return Jr(i,function(C,B,z){u(b,d(C),B,z)}),b}function Ui(i,u,d){u=Vn(u,i),i=jh(i,u);var b=i==null?i:i[en(Mr(u))];return b==null?r:wr(b,i,d)}function dh(i){return Tt(i)&&ar(i)==ee}function M2(i){return Tt(i)&&ar(i)==ve}function O2(i){return Tt(i)&&ar(i)==ue}function Ki(i,u,d,b,C){return i===u?!0:i==null||u==null||!Tt(i)&&!Tt(u)?i!==i&&u!==u:N2(i,u,d,b,Ki,C)}function N2(i,u,d,b,C,B){var z=We(i),V=We(u),G=z?ne:er(i),le=V?ne:er(u);G=G==ee?xe:G,le=le==ee?xe:le;var fe=G==xe,he=le==xe,Ee=G==le;if(Ee&&Hn(i)){if(!Hn(u))return!1;z=!0,fe=!1}if(Ee&&!fe)return B||(B=new Wr),z||ei(i)?Uh(i,u,d,b,C,B):fT(i,u,G,d,b,C,B);if(!(d&p)){var Pe=fe&&ft.call(i,"__wrapped__"),Me=he&&ft.call(u,"__wrapped__");if(Pe||Me){var Ue=Pe?i.value():i,Oe=Me?u.value():u;return B||(B=new Wr),C(Ue,Oe,d,b,B)}}return Ee?(B||(B=new Wr),vT(i,u,d,b,C,B)):!1}function z2(i){return Tt(i)&&er(i)==pe}function xl(i,u,d,b){var C=d.length,B=C,z=!b;if(i==null)return!B;for(i=dt(i);C--;){var V=d[C];if(z&&V[2]?V[1]!==i[V[0]]:!(V[0]in i))return!1}for(;++C<B;){V=d[C];var G=V[0],le=i[G],fe=V[1];if(z&&V[2]){if(le===r&&!(G in i))return!1}else{var he=new Wr;if(b)var Ee=b(le,fe,G,i,u,he);if(!(Ee===r?Ki(fe,le,p|x,b,he):Ee))return!1}}return!0}function hh(i){if(!Et(i)||wT(i))return!1;var u=pn(i)?zC:Yu;return u.test(va(i))}function F2(i){return Tt(i)&&ar(i)==$e}function $2(i){return Tt(i)&&er(i)==Re}function q2(i){return Tt(i)&&zs(i.length)&&!!yt[ar(i)]}function gh(i){return typeof i=="function"?i:i==null?pr:typeof i=="object"?We(i)?yh(i[0],i[1]):mh(i):Ng(i)}function El(i){if(!Zi(i))return HC(i);var u=[];for(var d in dt(i))ft.call(i,d)&&d!="constructor"&&u.push(d);return u}function V2(i){if(!Et(i))return CT(i);var u=Zi(i),d=[];for(var b in i)b=="constructor"&&(u||!ft.call(i,b))||d.push(b);return d}function Sl(i,u){return i<u}function ph(i,u){var d=-1,b=hr(i)?Z(i.length):[];return $n(i,function(C,B,z){b[++d]=u(C,B,z)}),b}function mh(i){var u=zl(i);return u.length==1&&u[0][2]?Qh(u[0][0],u[0][1]):function(d){return d===i||xl(d,i,u)}}function yh(i,u){return $l(i)&&Zh(u)?Qh(en(i),u):function(d){var b=Zl(d,i);return b===r&&b===u?Ql(d,i):Ki(u,b,p|x)}}function Es(i,u,d,b,C){i!==u&&ml(u,function(B,z){if(C||(C=new Wr),Et(B))W2(i,u,z,d,Es,b,C);else{var V=b?b(Vl(i,z),B,z+"",i,u,C):r;V===r&&(V=B),gl(i,z,V)}},gr)}function W2(i,u,d,b,C,B,z){var V=Vl(i,d),G=Vl(u,d),le=z.get(G);if(le){gl(i,d,le);return}var fe=B?B(V,G,d+"",i,u,z):r,he=fe===r;if(he){var Ee=We(G),Pe=!Ee&&Hn(G),Me=!Ee&&!Pe&&ei(G);fe=G,Ee||Pe||Me?We(V)?fe=V:Dt(V)?fe=dr(V):Pe?(he=!1,fe=kh(G,!0)):Me?(he=!1,fe=Bh(G,!0)):fe=[]:Ji(G)||ca(G)?(fe=V,ca(V)?fe=Ag(V):(!Et(V)||pn(V))&&(fe=Xh(G))):he=!1}he&&(z.set(G,fe),C(fe,G,b,B,z),z.delete(G)),gl(i,d,fe)}function bh(i,u){var d=i.length;if(d)return u+=u<0?d:0,gn(u,d)?i[u]:r}function wh(i,u,d){u.length?u=wt(u,function(B){return We(B)?function(z){return la(z,B.length===1?B[0]:B)}:B}):u=[pr];var b=-1;u=wt(u,xr(Ie()));var C=ph(i,function(B,z,V){var G=wt(u,function(le){return le(B)});return{criteria:G,index:++b,value:B}});return pC(C,function(B,z){return rT(B,z,d)})}function H2(i,u){return xh(i,u,function(d,b){return Ql(i,b)})}function xh(i,u,d){for(var b=-1,C=u.length,B={};++b<C;){var z=u[b],V=la(i,z);d(V,z)&&Yi(B,Vn(z,i),V)}return B}function G2(i){return function(u){return la(u,i)}}function Cl(i,u,d,b){var C=b?gC:Wa,B=-1,z=u.length,V=i;for(i===u&&(u=dr(u)),d&&(V=wt(i,xr(d)));++B<z;)for(var G=0,le=u[B],fe=d?d(le):le;(G=C(V,fe,G,b))>-1;)V!==i&&cs.call(V,G,1),cs.call(i,G,1);return i}function Eh(i,u){for(var d=i?u.length:0,b=d-1;d--;){var C=u[d];if(d==b||C!==B){var B=C;gn(C)?cs.call(i,C,1):Pl(i,C)}}return i}function Tl(i,u){return i+gs(rh()*(u-i+1))}function U2(i,u,d,b){for(var C=-1,B=Mt(hs((u-i)/(d||1)),0),z=Z(B);B--;)z[b?B:++C]=i,i+=d;return z}function Dl(i,u){var d="";if(!i||u<1||u>U)return d;do u%2&&(d+=i),u=gs(u/2),u&&(i+=i);while(u);return d}function Ke(i,u){return Wl(Jh(i,u,pr),i+"")}function K2(i){return ih(ti(i))}function Y2(i,u){var d=ti(i);return Rs(d,ua(u,0,d.length))}function Yi(i,u,d,b){if(!Et(i))return i;u=Vn(u,i);for(var C=-1,B=u.length,z=B-1,V=i;V!=null&&++C<B;){var G=en(u[C]),le=d;if(G==="__proto__"||G==="constructor"||G==="prototype")return i;if(C!=z){var fe=V[G];le=b?b(fe,G,V):r,le===r&&(le=Et(fe)?fe:gn(u[C+1])?[]:{})}Hi(V,G,le),V=V[G]}return i}var Sh=ps?function(i,u){return ps.set(i,u),i}:pr,X2=ds?function(i,u){return ds(i,"toString",{configurable:!0,enumerable:!1,value:jl(u),writable:!0})}:pr;function Z2(i){return Rs(ti(i))}function Ir(i,u,d){var b=-1,C=i.length;u<0&&(u=-u>C?0:C+u),d=d>C?C:d,d<0&&(d+=C),C=u>d?0:d-u>>>0,u>>>=0;for(var B=Z(C);++b<C;)B[b]=i[b+u];return B}function Q2(i,u){var d;return $n(i,function(b,C,B){return d=u(b,C,B),!d}),!!d}function Ss(i,u,d){var b=0,C=i==null?b:i.length;if(typeof u=="number"&&u===u&&C<=ie){for(;b<C;){var B=b+C>>>1,z=i[B];z!==null&&!Sr(z)&&(d?z<=u:z<u)?b=B+1:C=B}return C}return Al(i,u,pr,d)}function Al(i,u,d,b){var C=0,B=i==null?0:i.length;if(B===0)return 0;u=d(u);for(var z=u!==u,V=u===null,G=Sr(u),le=u===r;C<B;){var fe=gs((C+B)/2),he=d(i[fe]),Ee=he!==r,Pe=he===null,Me=he===he,Ue=Sr(he);if(z)var Oe=b||Me;else le?Oe=Me&&(b||Ee):V?Oe=Me&&Ee&&(b||!Pe):G?Oe=Me&&Ee&&!Pe&&(b||!Ue):Pe||Ue?Oe=!1:Oe=b?he<=u:he<u;Oe?C=fe+1:B=fe}return jt(B,j)}function Ch(i,u){for(var d=-1,b=i.length,C=0,B=[];++d<b;){var z=i[d],V=u?u(z):z;if(!d||!Hr(V,G)){var G=V;B[C++]=z===0?0:z}}return B}function Th(i){return typeof i=="number"?i:Sr(i)?J:+i}function Er(i){if(typeof i=="string")return i;if(We(i))return wt(i,Er)+"";if(Sr(i))return nh?nh.call(i):"";var u=i+"";return u=="0"&&1/i==-q?"-0":u}function qn(i,u,d){var b=-1,C=rs,B=i.length,z=!0,V=[],G=V;if(d)z=!1,C=rl;else if(B>=a){var le=u?null:uT(i);if(le)return as(le);z=!1,C=zi,G=new sa}else G=u?[]:V;e:for(;++b<B;){var fe=i[b],he=u?u(fe):fe;if(fe=d||fe!==0?fe:0,z&&he===he){for(var Ee=G.length;Ee--;)if(G[Ee]===he)continue e;u&&G.push(he),V.push(fe)}else C(G,he,d)||(G!==V&&G.push(he),V.push(fe))}return V}function Pl(i,u){return u=Vn(u,i),i=jh(i,u),i==null||delete i[en(Mr(u))]}function Dh(i,u,d,b){return Yi(i,u,d(la(i,u)),b)}function Cs(i,u,d,b){for(var C=i.length,B=b?C:-1;(b?B--:++B<C)&&u(i[B],B,i););return d?Ir(i,b?0:B,b?B+1:C):Ir(i,b?B+1:0,b?C:B)}function Ah(i,u){var d=i;return d instanceof Qe&&(d=d.value()),nl(u,function(b,C){return C.func.apply(C.thisArg,Nn([b],C.args))},d)}function Ll(i,u,d){var b=i.length;if(b<2)return b?qn(i[0]):[];for(var C=-1,B=Z(b);++C<b;)for(var z=i[C],V=-1;++V<b;)V!=C&&(B[C]=Gi(B[C]||z,i[V],u,d));return qn(Kt(B,1),u,d)}function Ph(i,u,d){for(var b=-1,C=i.length,B=u.length,z={};++b<C;){var V=b<B?u[b]:r;d(z,i[b],V)}return z}function kl(i){return Dt(i)?i:[]}function Bl(i){return typeof i=="function"?i:pr}function Vn(i,u){return We(i)?i:$l(i,u)?[i]:ng(lt(i))}var J2=Ke;function Wn(i,u,d){var b=i.length;return d=d===r?b:d,!u&&d>=b?i:Ir(i,u,d)}var Lh=FC||function(i){return Ut.clearTimeout(i)};function kh(i,u){if(u)return i.slice();var d=i.length,b=Qd?Qd(d):new i.constructor(d);return i.copy(b),b}function Rl(i){var u=new i.constructor(i.byteLength);return new fs(u).set(new fs(i)),u}function j2(i,u){var d=u?Rl(i.buffer):i.buffer;return new i.constructor(d,i.byteOffset,i.byteLength)}function eT(i){var u=new i.constructor(i.source,Qo.exec(i));return u.lastIndex=i.lastIndex,u}function tT(i){return Wi?dt(Wi.call(i)):{}}function Bh(i,u){var d=u?Rl(i.buffer):i.buffer;return new i.constructor(d,i.byteOffset,i.length)}function Rh(i,u){if(i!==u){var d=i!==r,b=i===null,C=i===i,B=Sr(i),z=u!==r,V=u===null,G=u===u,le=Sr(u);if(!V&&!le&&!B&&i>u||B&&z&&G&&!V&&!le||b&&z&&G||!d&&G||!C)return 1;if(!b&&!B&&!le&&i<u||le&&d&&C&&!b&&!B||V&&d&&C||!z&&C||!G)return-1}return 0}function rT(i,u,d){for(var b=-1,C=i.criteria,B=u.criteria,z=C.length,V=d.length;++b<z;){var G=Rh(C[b],B[b]);if(G){if(b>=V)return G;var le=d[b];return G*(le=="desc"?-1:1)}}return i.index-u.index}function _h(i,u,d,b){for(var C=-1,B=i.length,z=d.length,V=-1,G=u.length,le=Mt(B-z,0),fe=Z(G+le),he=!b;++V<G;)fe[V]=u[V];for(;++C<z;)(he||C<B)&&(fe[d[C]]=i[C]);for(;le--;)fe[V++]=i[C++];return fe}function Ih(i,u,d,b){for(var C=-1,B=i.length,z=-1,V=d.length,G=-1,le=u.length,fe=Mt(B-V,0),he=Z(fe+le),Ee=!b;++C<fe;)he[C]=i[C];for(var Pe=C;++G<le;)he[Pe+G]=u[G];for(;++z<V;)(Ee||C<B)&&(he[Pe+d[z]]=i[C++]);return he}function dr(i,u){var d=-1,b=i.length;for(u||(u=Z(b));++d<b;)u[d]=i[d];return u}function jr(i,u,d,b){var C=!d;d||(d={});for(var B=-1,z=u.length;++B<z;){var V=u[B],G=b?b(d[V],i[V],V,d,i):r;G===r&&(G=i[V]),C?cn(d,V,G):Hi(d,V,G)}return d}function nT(i,u){return jr(i,Fl(i),u)}function aT(i,u){return jr(i,Kh(i),u)}function Ts(i,u){return function(d,b){var C=We(d)?lC:D2,B=u?u():{};return C(d,i,Ie(b,2),B)}}function Qa(i){return Ke(function(u,d){var b=-1,C=d.length,B=C>1?d[C-1]:r,z=C>2?d[2]:r;for(B=i.length>3&&typeof B=="function"?(C--,B):r,z&&ir(d[0],d[1],z)&&(B=C<3?r:B,C=1),u=dt(u);++b<C;){var V=d[b];V&&i(u,V,b,B)}return u})}function Mh(i,u){return function(d,b){if(d==null)return d;if(!hr(d))return i(d,b);for(var C=d.length,B=u?C:-1,z=dt(d);(u?B--:++B<C)&&b(z[B],B,z)!==!1;);return d}}function Oh(i){return function(u,d,b){for(var C=-1,B=dt(u),z=b(u),V=z.length;V--;){var G=z[i?V:++C];if(d(B[G],G,B)===!1)break}return u}}function iT(i,u,d){var b=u&w,C=Xi(i);function B(){var z=this&&this!==Ut&&this instanceof B?C:i;return z.apply(b?d:this,arguments)}return B}function Nh(i){return function(u){u=lt(u);var d=Ha(u)?Vr(u):r,b=d?d[0]:u.charAt(0),C=d?Wn(d,1).join(""):u.slice(1);return b[i]()+C}}function Ja(i){return function(u){return nl(Mg(Ig(u).replace(XS,"")),i,"")}}function Xi(i){return function(){var u=arguments;switch(u.length){case 0:return new i;case 1:return new i(u[0]);case 2:return new i(u[0],u[1]);case 3:return new i(u[0],u[1],u[2]);case 4:return new i(u[0],u[1],u[2],u[3]);case 5:return new i(u[0],u[1],u[2],u[3],u[4]);case 6:return new i(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new i(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var d=Za(i.prototype),b=i.apply(d,u);return Et(b)?b:d}}function oT(i,u,d){var b=Xi(i);function C(){for(var B=arguments.length,z=Z(B),V=B,G=ja(C);V--;)z[V]=arguments[V];var le=B<3&&z[0]!==G&&z[B-1]!==G?[]:zn(z,G);if(B-=le.length,B<d)return Vh(i,u,Ds,C.placeholder,r,z,le,r,r,d-B);var fe=this&&this!==Ut&&this instanceof C?b:i;return wr(fe,this,z)}return C}function zh(i){return function(u,d,b){var C=dt(u);if(!hr(u)){var B=Ie(d,3);u=Ft(u),d=function(V){return B(C[V],V,C)}}var z=i(u,d,b);return z>-1?C[B?u[z]:z]:r}}function Fh(i){return hn(function(u){var d=u.length,b=d,C=Rr.prototype.thru;for(i&&u.reverse();b--;){var B=u[b];if(typeof B!="function")throw new Br(s);if(C&&!z&&ks(B)=="wrapper")var z=new Rr([],!0)}for(b=z?b:d;++b<d;){B=u[b];var V=ks(B),G=V=="wrapper"?Nl(B):r;G&&ql(G[0])&&G[1]==(D|S|k|_)&&!G[4].length&&G[9]==1?z=z[ks(G[0])].apply(z,G[3]):z=B.length==1&&ql(B)?z[V]():z.thru(B)}return function(){var le=arguments,fe=le[0];if(z&&le.length==1&&We(fe))return z.plant(fe).value();for(var he=0,Ee=d?u[he].apply(this,le):fe;++he<d;)Ee=u[he].call(this,Ee);return Ee}})}function Ds(i,u,d,b,C,B,z,V,G,le){var fe=u&D,he=u&w,Ee=u&y,Pe=u&(S|T),Me=u&A,Ue=Ee?r:Xi(i);function Oe(){for(var Ye=arguments.length,et=Z(Ye),Cr=Ye;Cr--;)et[Cr]=arguments[Cr];if(Pe)var or=ja(Oe),Tr=yC(et,or);if(b&&(et=_h(et,b,C,Pe)),B&&(et=Ih(et,B,z,Pe)),Ye-=Tr,Pe&&Ye<le){var At=zn(et,or);return Vh(i,u,Ds,Oe.placeholder,d,et,At,V,G,le-Ye)}var Gr=he?d:this,yn=Ee?Gr[i]:i;return Ye=et.length,V?et=DT(et,V):Me&&Ye>1&&et.reverse(),fe&&G<Ye&&(et.length=G),this&&this!==Ut&&this instanceof Oe&&(yn=Ue||Xi(yn)),yn.apply(Gr,et)}return Oe}function $h(i,u){return function(d,b){return I2(d,i,u(b),{})}}function As(i,u){return function(d,b){var C;if(d===r&&b===r)return u;if(d!==r&&(C=d),b!==r){if(C===r)return b;typeof d=="string"||typeof b=="string"?(d=Er(d),b=Er(b)):(d=Th(d),b=Th(b)),C=i(d,b)}return C}}function _l(i){return hn(function(u){return u=wt(u,xr(Ie())),Ke(function(d){var b=this;return i(u,function(C){return wr(C,b,d)})})})}function Ps(i,u){u=u===r?" ":Er(u);var d=u.length;if(d<2)return d?Dl(u,i):u;var b=Dl(u,hs(i/Ga(u)));return Ha(u)?Wn(Vr(b),0,i).join(""):b.slice(0,i)}function sT(i,u,d,b){var C=u&w,B=Xi(i);function z(){for(var V=-1,G=arguments.length,le=-1,fe=b.length,he=Z(fe+G),Ee=this&&this!==Ut&&this instanceof z?B:i;++le<fe;)he[le]=b[le];for(;G--;)he[le++]=arguments[++V];return wr(Ee,C?d:this,he)}return z}function qh(i){return function(u,d,b){return b&&typeof b!="number"&&ir(u,d,b)&&(d=b=r),u=mn(u),d===r?(d=u,u=0):d=mn(d),b=b===r?u<d?1:-1:mn(b),U2(u,d,b,i)}}function Ls(i){return function(u,d){return typeof u=="string"&&typeof d=="string"||(u=Or(u),d=Or(d)),i(u,d)}}function Vh(i,u,d,b,C,B,z,V,G,le){var fe=u&S,he=fe?z:r,Ee=fe?r:z,Pe=fe?B:r,Me=fe?r:B;u|=fe?k:L,u&=~(fe?L:k),u&E||(u&=~(w|y));var Ue=[i,u,C,Pe,he,Me,Ee,V,G,le],Oe=d.apply(r,Ue);return ql(i)&&eg(Oe,Ue),Oe.placeholder=b,tg(Oe,i,u)}function Il(i){var u=It[i];return function(d,b){if(d=Or(d),b=b==null?0:jt(Ge(b),292),b&&th(d)){var C=(lt(d)+"e").split("e"),B=u(C[0]+"e"+(+C[1]+b));return C=(lt(B)+"e").split("e"),+(C[0]+"e"+(+C[1]-b))}return u(d)}}var uT=Ya&&1/as(new Ya([,-0]))[1]==q?function(i){return new Ya(i)}:rf;function Wh(i){return function(u){var d=er(u);return d==pe?fl(u):d==Re?TC(u):mC(u,i(u))}}function dn(i,u,d,b,C,B,z,V){var G=u&y;if(!G&&typeof i!="function")throw new Br(s);var le=b?b.length:0;if(le||(u&=~(k|L),b=C=r),z=z===r?z:Mt(Ge(z),0),V=V===r?V:Ge(V),le-=C?C.length:0,u&L){var fe=b,he=C;b=C=r}var Ee=G?r:Nl(i),Pe=[i,u,d,b,C,fe,he,B,z,V];if(Ee&&ST(Pe,Ee),i=Pe[0],u=Pe[1],d=Pe[2],b=Pe[3],C=Pe[4],V=Pe[9]=Pe[9]===r?G?0:i.length:Mt(Pe[9]-le,0),!V&&u&(S|T)&&(u&=~(S|T)),!u||u==w)var Me=iT(i,u,d);else u==S||u==T?Me=oT(i,u,V):(u==k||u==(w|k))&&!C.length?Me=sT(i,u,d,b):Me=Ds.apply(r,Pe);var Ue=Ee?Sh:eg;return tg(Ue(Me,Pe),i,u)}function Hh(i,u,d,b){return i===r||Hr(i,Ka[d])&&!ft.call(b,d)?u:i}function Gh(i,u,d,b,C,B){return Et(i)&&Et(u)&&(B.set(u,i),Es(i,u,r,Gh,B),B.delete(u)),i}function lT(i){return Ji(i)?r:i}function Uh(i,u,d,b,C,B){var z=d&p,V=i.length,G=u.length;if(V!=G&&!(z&&G>V))return!1;var le=B.get(i),fe=B.get(u);if(le&&fe)return le==u&&fe==i;var he=-1,Ee=!0,Pe=d&x?new sa:r;for(B.set(i,u),B.set(u,i);++he<V;){var Me=i[he],Ue=u[he];if(b)var Oe=z?b(Ue,Me,he,u,i,B):b(Me,Ue,he,i,u,B);if(Oe!==r){if(Oe)continue;Ee=!1;break}if(Pe){if(!al(u,function(Ye,et){if(!zi(Pe,et)&&(Me===Ye||C(Me,Ye,d,b,B)))return Pe.push(et)})){Ee=!1;break}}else if(!(Me===Ue||C(Me,Ue,d,b,B))){Ee=!1;break}}return B.delete(i),B.delete(u),Ee}function fT(i,u,d,b,C,B,z){switch(d){case te:if(i.byteLength!=u.byteLength||i.byteOffset!=u.byteOffset)return!1;i=i.buffer,u=u.buffer;case ve:return!(i.byteLength!=u.byteLength||!B(new fs(i),new fs(u)));case oe:case ue:case me:return Hr(+i,+u);case ye:return i.name==u.name&&i.message==u.message;case $e:case Le:return i==u+"";case pe:var V=fl;case Re:var G=b&p;if(V||(V=as),i.size!=u.size&&!G)return!1;var le=z.get(i);if(le)return le==u;b|=x,z.set(i,u);var fe=Uh(V(i),V(u),b,C,B,z);return z.delete(i),fe;case Je:if(Wi)return Wi.call(i)==Wi.call(u)}return!1}function vT(i,u,d,b,C,B){var z=d&p,V=Ml(i),G=V.length,le=Ml(u),fe=le.length;if(G!=fe&&!z)return!1;for(var he=G;he--;){var Ee=V[he];if(!(z?Ee in u:ft.call(u,Ee)))return!1}var Pe=B.get(i),Me=B.get(u);if(Pe&&Me)return Pe==u&&Me==i;var Ue=!0;B.set(i,u),B.set(u,i);for(var Oe=z;++he<G;){Ee=V[he];var Ye=i[Ee],et=u[Ee];if(b)var Cr=z?b(et,Ye,Ee,u,i,B):b(Ye,et,Ee,i,u,B);if(!(Cr===r?Ye===et||C(Ye,et,d,b,B):Cr)){Ue=!1;break}Oe||(Oe=Ee=="constructor")}if(Ue&&!Oe){var or=i.constructor,Tr=u.constructor;or!=Tr&&"constructor"in i&&"constructor"in u&&!(typeof or=="function"&&or instanceof or&&typeof Tr=="function"&&Tr instanceof Tr)&&(Ue=!1)}return B.delete(i),B.delete(u),Ue}function hn(i){return Wl(Jh(i,r,sg),i+"")}function Ml(i){return ch(i,Ft,Fl)}function Ol(i){return ch(i,gr,Kh)}var Nl=ps?function(i){return ps.get(i)}:rf;function ks(i){for(var u=i.name+"",d=Xa[u],b=ft.call(Xa,u)?d.length:0;b--;){var C=d[b],B=C.func;if(B==null||B==i)return C.name}return u}function ja(i){var u=ft.call(P,"placeholder")?P:i;return u.placeholder}function Ie(){var i=P.iteratee||ef;return i=i===ef?gh:i,arguments.length?i(arguments[0],arguments[1]):i}function Bs(i,u){var d=i.__data__;return bT(u)?d[typeof u=="string"?"string":"hash"]:d.map}function zl(i){for(var u=Ft(i),d=u.length;d--;){var b=u[d],C=i[b];u[d]=[b,C,Zh(C)]}return u}function fa(i,u){var d=EC(i,u);return hh(d)?d:r}function cT(i){var u=ft.call(i,ia),d=i[ia];try{i[ia]=r;var b=!0}catch{}var C=us.call(i);return b&&(u?i[ia]=d:delete i[ia]),C}var Fl=cl?function(i){return i==null?[]:(i=dt(i),On(cl(i),function(u){return jd.call(i,u)}))}:nf,Kh=cl?function(i){for(var u=[];i;)Nn(u,Fl(i)),i=vs(i);return u}:nf,er=ar;(dl&&er(new dl(new ArrayBuffer(1)))!=te||$i&&er(new $i)!=pe||hl&&er(hl.resolve())!=be||Ya&&er(new Ya)!=Re||qi&&er(new qi)!=I)&&(er=function(i){var u=ar(i),d=u==xe?i.constructor:r,b=d?va(d):"";if(b)switch(b){case YC:return te;case XC:return pe;case ZC:return be;case QC:return Re;case JC:return I}return u});function dT(i,u,d){for(var b=-1,C=d.length;++b<C;){var B=d[b],z=B.size;switch(B.type){case"drop":i+=z;break;case"dropRight":u-=z;break;case"take":u=jt(u,i+z);break;case"takeRight":i=Mt(i,u-z);break}}return{start:i,end:u}}function hT(i){var u=i.match(Fa);return u?u[1].split(Pr):[]}function Yh(i,u,d){u=Vn(u,i);for(var b=-1,C=u.length,B=!1;++b<C;){var z=en(u[b]);if(!(B=i!=null&&d(i,z)))break;i=i[z]}return B||++b!=C?B:(C=i==null?0:i.length,!!C&&zs(C)&&gn(z,C)&&(We(i)||ca(i)))}function gT(i){var u=i.length,d=new i.constructor(u);return u&&typeof i[0]=="string"&&ft.call(i,"index")&&(d.index=i.index,d.input=i.input),d}function Xh(i){return typeof i.constructor=="function"&&!Zi(i)?Za(vs(i)):{}}function pT(i,u,d){var b=i.constructor;switch(u){case ve:return Rl(i);case oe:case ue:return new b(+i);case te:return j2(i,d);case ae:case Ne:case ce:case Ae:case Ze:case nt:case qe:case je:case Fe:return Bh(i,d);case pe:return new b;case me:case Le:return new b(i);case $e:return eT(i);case Re:return new b;case Je:return tT(i)}}function mT(i,u){var d=u.length;if(!d)return i;var b=d-1;return u[b]=(d>1?"& ":"")+u[b],u=u.join(d>2?", ":" "),i.replace(Jt,`{
/* [wrapped with `+u+`] */
`)}function yT(i){return We(i)||ca(i)||!!(eh&&i&&i[eh])}function gn(i,u){var d=typeof i;return u=u??U,!!u&&(d=="number"||d!="symbol"&&Oi.test(i))&&i>-1&&i%1==0&&i<u}function ir(i,u,d){if(!Et(d))return!1;var b=typeof u;return(b=="number"?hr(d)&&gn(u,d.length):b=="string"&&u in d)?Hr(d[u],i):!1}function $l(i,u){if(We(i))return!1;var d=typeof i;return d=="number"||d=="symbol"||d=="boolean"||i==null||Sr(i)?!0:un.test(i)||!Rn.test(i)||u!=null&&i in dt(u)}function bT(i){var u=typeof i;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?i!=="__proto__":i===null}function ql(i){var u=ks(i),d=P[u];if(typeof d!="function"||!(u in Qe.prototype))return!1;if(i===d)return!0;var b=Nl(d);return!!b&&i===b[0]}function wT(i){return!!Zd&&Zd in i}var xT=os?pn:af;function Zi(i){var u=i&&i.constructor,d=typeof u=="function"&&u.prototype||Ka;return i===d}function Zh(i){return i===i&&!Et(i)}function Qh(i,u){return function(d){return d==null?!1:d[i]===u&&(u!==r||i in dt(d))}}function ET(i){var u=Os(i,function(b){return d.size===f&&d.clear(),b}),d=u.cache;return u}function ST(i,u){var d=i[1],b=u[1],C=d|b,B=C<(w|y|D),z=b==D&&d==S||b==D&&d==_&&i[7].length<=u[8]||b==(D|_)&&u[7].length<=u[8]&&d==S;if(!(B||z))return i;b&w&&(i[2]=u[2],C|=d&w?0:E);var V=u[3];if(V){var G=i[3];i[3]=G?_h(G,V,u[4]):V,i[4]=G?zn(i[3],c):u[4]}return V=u[5],V&&(G=i[5],i[5]=G?Ih(G,V,u[6]):V,i[6]=G?zn(i[5],c):u[6]),V=u[7],V&&(i[7]=V),b&D&&(i[8]=i[8]==null?u[8]:jt(i[8],u[8])),i[9]==null&&(i[9]=u[9]),i[0]=u[0],i[1]=C,i}function CT(i){var u=[];if(i!=null)for(var d in dt(i))u.push(d);return u}function TT(i){return us.call(i)}function Jh(i,u,d){return u=Mt(u===r?i.length-1:u,0),function(){for(var b=arguments,C=-1,B=Mt(b.length-u,0),z=Z(B);++C<B;)z[C]=b[u+C];C=-1;for(var V=Z(u+1);++C<u;)V[C]=b[C];return V[u]=d(z),wr(i,this,V)}}function jh(i,u){return u.length<2?i:la(i,Ir(u,0,-1))}function DT(i,u){for(var d=i.length,b=jt(u.length,d),C=dr(i);b--;){var B=u[b];i[b]=gn(B,d)?C[B]:r}return i}function Vl(i,u){if(!(u==="constructor"&&typeof i[u]=="function")&&u!="__proto__")return i[u]}var eg=rg(Sh),Qi=qC||function(i,u){return Ut.setTimeout(i,u)},Wl=rg(X2);function tg(i,u,d){var b=u+"";return Wl(i,mT(b,AT(hT(b),d)))}function rg(i){var u=0,d=0;return function(){var b=GC(),C=F-(b-d);if(d=b,C>0){if(++u>=R)return arguments[0]}else u=0;return i.apply(r,arguments)}}function Rs(i,u){var d=-1,b=i.length,C=b-1;for(u=u===r?b:u;++d<u;){var B=Tl(d,C),z=i[B];i[B]=i[d],i[d]=z}return i.length=u,i}var ng=ET(function(i){var u=[];return i.charCodeAt(0)===46&&u.push(""),i.replace(_n,function(d,b,C,B){u.push(C?B.replace(Hu,"$1"):b||d)}),u});function en(i){if(typeof i=="string"||Sr(i))return i;var u=i+"";return u=="0"&&1/i==-q?"-0":u}function va(i){if(i!=null){try{return ss.call(i)}catch{}try{return i+""}catch{}}return""}function AT(i,u){return kr(se,function(d){var b="_."+d[0];u&d[1]&&!rs(i,b)&&i.push(b)}),i.sort()}function ag(i){if(i instanceof Qe)return i.clone();var u=new Rr(i.__wrapped__,i.__chain__);return u.__actions__=dr(i.__actions__),u.__index__=i.__index__,u.__values__=i.__values__,u}function PT(i,u,d){(d?ir(i,u,d):u===r)?u=1:u=Mt(Ge(u),0);var b=i==null?0:i.length;if(!b||u<1)return[];for(var C=0,B=0,z=Z(hs(b/u));C<b;)z[B++]=Ir(i,C,C+=u);return z}function LT(i){for(var u=-1,d=i==null?0:i.length,b=0,C=[];++u<d;){var B=i[u];B&&(C[b++]=B)}return C}function kT(){var i=arguments.length;if(!i)return[];for(var u=Z(i-1),d=arguments[0],b=i;b--;)u[b-1]=arguments[b];return Nn(We(d)?dr(d):[d],Kt(u,1))}var BT=Ke(function(i,u){return Dt(i)?Gi(i,Kt(u,1,Dt,!0)):[]}),RT=Ke(function(i,u){var d=Mr(u);return Dt(d)&&(d=r),Dt(i)?Gi(i,Kt(u,1,Dt,!0),Ie(d,2)):[]}),_T=Ke(function(i,u){var d=Mr(u);return Dt(d)&&(d=r),Dt(i)?Gi(i,Kt(u,1,Dt,!0),r,d):[]});function IT(i,u,d){var b=i==null?0:i.length;return b?(u=d||u===r?1:Ge(u),Ir(i,u<0?0:u,b)):[]}function MT(i,u,d){var b=i==null?0:i.length;return b?(u=d||u===r?1:Ge(u),u=b-u,Ir(i,0,u<0?0:u)):[]}function OT(i,u){return i&&i.length?Cs(i,Ie(u,3),!0,!0):[]}function NT(i,u){return i&&i.length?Cs(i,Ie(u,3),!0):[]}function zT(i,u,d,b){var C=i==null?0:i.length;return C?(d&&typeof d!="number"&&ir(i,u,d)&&(d=0,b=C),k2(i,u,d,b)):[]}function ig(i,u,d){var b=i==null?0:i.length;if(!b)return-1;var C=d==null?0:Ge(d);return C<0&&(C=Mt(b+C,0)),ns(i,Ie(u,3),C)}function og(i,u,d){var b=i==null?0:i.length;if(!b)return-1;var C=b-1;return d!==r&&(C=Ge(d),C=d<0?Mt(b+C,0):jt(C,b-1)),ns(i,Ie(u,3),C,!0)}function sg(i){var u=i==null?0:i.length;return u?Kt(i,1):[]}function FT(i){var u=i==null?0:i.length;return u?Kt(i,q):[]}function $T(i,u){var d=i==null?0:i.length;return d?(u=u===r?1:Ge(u),Kt(i,u)):[]}function qT(i){for(var u=-1,d=i==null?0:i.length,b={};++u<d;){var C=i[u];b[C[0]]=C[1]}return b}function ug(i){return i&&i.length?i[0]:r}function VT(i,u,d){var b=i==null?0:i.length;if(!b)return-1;var C=d==null?0:Ge(d);return C<0&&(C=Mt(b+C,0)),Wa(i,u,C)}function WT(i){var u=i==null?0:i.length;return u?Ir(i,0,-1):[]}var HT=Ke(function(i){var u=wt(i,kl);return u.length&&u[0]===i[0]?wl(u):[]}),GT=Ke(function(i){var u=Mr(i),d=wt(i,kl);return u===Mr(d)?u=r:d.pop(),d.length&&d[0]===i[0]?wl(d,Ie(u,2)):[]}),UT=Ke(function(i){var u=Mr(i),d=wt(i,kl);return u=typeof u=="function"?u:r,u&&d.pop(),d.length&&d[0]===i[0]?wl(d,r,u):[]});function KT(i,u){return i==null?"":WC.call(i,u)}function Mr(i){var u=i==null?0:i.length;return u?i[u-1]:r}function YT(i,u,d){var b=i==null?0:i.length;if(!b)return-1;var C=b;return d!==r&&(C=Ge(d),C=C<0?Mt(b+C,0):jt(C,b-1)),u===u?AC(i,u,C):ns(i,Vd,C,!0)}function XT(i,u){return i&&i.length?bh(i,Ge(u)):r}var ZT=Ke(lg);function lg(i,u){return i&&i.length&&u&&u.length?Cl(i,u):i}function QT(i,u,d){return i&&i.length&&u&&u.length?Cl(i,u,Ie(d,2)):i}function JT(i,u,d){return i&&i.length&&u&&u.length?Cl(i,u,r,d):i}var jT=hn(function(i,u){var d=i==null?0:i.length,b=pl(i,u);return Eh(i,wt(u,function(C){return gn(C,d)?+C:C}).sort(Rh)),b});function eD(i,u){var d=[];if(!(i&&i.length))return d;var b=-1,C=[],B=i.length;for(u=Ie(u,3);++b<B;){var z=i[b];u(z,b,i)&&(d.push(z),C.push(b))}return Eh(i,C),d}function Hl(i){return i==null?i:KC.call(i)}function tD(i,u,d){var b=i==null?0:i.length;return b?(d&&typeof d!="number"&&ir(i,u,d)?(u=0,d=b):(u=u==null?0:Ge(u),d=d===r?b:Ge(d)),Ir(i,u,d)):[]}function rD(i,u){return Ss(i,u)}function nD(i,u,d){return Al(i,u,Ie(d,2))}function aD(i,u){var d=i==null?0:i.length;if(d){var b=Ss(i,u);if(b<d&&Hr(i[b],u))return b}return-1}function iD(i,u){return Ss(i,u,!0)}function oD(i,u,d){return Al(i,u,Ie(d,2),!0)}function sD(i,u){var d=i==null?0:i.length;if(d){var b=Ss(i,u,!0)-1;if(Hr(i[b],u))return b}return-1}function uD(i){return i&&i.length?Ch(i):[]}function lD(i,u){return i&&i.length?Ch(i,Ie(u,2)):[]}function fD(i){var u=i==null?0:i.length;return u?Ir(i,1,u):[]}function vD(i,u,d){return i&&i.length?(u=d||u===r?1:Ge(u),Ir(i,0,u<0?0:u)):[]}function cD(i,u,d){var b=i==null?0:i.length;return b?(u=d||u===r?1:Ge(u),u=b-u,Ir(i,u<0?0:u,b)):[]}function dD(i,u){return i&&i.length?Cs(i,Ie(u,3),!1,!0):[]}function hD(i,u){return i&&i.length?Cs(i,Ie(u,3)):[]}var gD=Ke(function(i){return qn(Kt(i,1,Dt,!0))}),pD=Ke(function(i){var u=Mr(i);return Dt(u)&&(u=r),qn(Kt(i,1,Dt,!0),Ie(u,2))}),mD=Ke(function(i){var u=Mr(i);return u=typeof u=="function"?u:r,qn(Kt(i,1,Dt,!0),r,u)});function yD(i){return i&&i.length?qn(i):[]}function bD(i,u){return i&&i.length?qn(i,Ie(u,2)):[]}function wD(i,u){return u=typeof u=="function"?u:r,i&&i.length?qn(i,r,u):[]}function Gl(i){if(!(i&&i.length))return[];var u=0;return i=On(i,function(d){if(Dt(d))return u=Mt(d.length,u),!0}),ul(u,function(d){return wt(i,il(d))})}function fg(i,u){if(!(i&&i.length))return[];var d=Gl(i);return u==null?d:wt(d,function(b){return wr(u,r,b)})}var xD=Ke(function(i,u){return Dt(i)?Gi(i,u):[]}),ED=Ke(function(i){return Ll(On(i,Dt))}),SD=Ke(function(i){var u=Mr(i);return Dt(u)&&(u=r),Ll(On(i,Dt),Ie(u,2))}),CD=Ke(function(i){var u=Mr(i);return u=typeof u=="function"?u:r,Ll(On(i,Dt),r,u)}),TD=Ke(Gl);function DD(i,u){return Ph(i||[],u||[],Hi)}function AD(i,u){return Ph(i||[],u||[],Yi)}var PD=Ke(function(i){var u=i.length,d=u>1?i[u-1]:r;return d=typeof d=="function"?(i.pop(),d):r,fg(i,d)});function vg(i){var u=P(i);return u.__chain__=!0,u}function LD(i,u){return u(i),i}function _s(i,u){return u(i)}var kD=hn(function(i){var u=i.length,d=u?i[0]:0,b=this.__wrapped__,C=function(B){return pl(B,i)};return u>1||this.__actions__.length||!(b instanceof Qe)||!gn(d)?this.thru(C):(b=b.slice(d,+d+(u?1:0)),b.__actions__.push({func:_s,args:[C],thisArg:r}),new Rr(b,this.__chain__).thru(function(B){return u&&!B.length&&B.push(r),B}))});function BD(){return vg(this)}function RD(){return new Rr(this.value(),this.__chain__)}function _D(){this.__values__===r&&(this.__values__=Tg(this.value()));var i=this.__index__>=this.__values__.length,u=i?r:this.__values__[this.__index__++];return{done:i,value:u}}function ID(){return this}function MD(i){for(var u,d=this;d instanceof ys;){var b=ag(d);b.__index__=0,b.__values__=r,u?C.__wrapped__=b:u=b;var C=b;d=d.__wrapped__}return C.__wrapped__=i,u}function OD(){var i=this.__wrapped__;if(i instanceof Qe){var u=i;return this.__actions__.length&&(u=new Qe(this)),u=u.reverse(),u.__actions__.push({func:_s,args:[Hl],thisArg:r}),new Rr(u,this.__chain__)}return this.thru(Hl)}function ND(){return Ah(this.__wrapped__,this.__actions__)}var zD=Ts(function(i,u,d){ft.call(i,d)?++i[d]:cn(i,d,1)});function FD(i,u,d){var b=We(i)?$d:L2;return d&&ir(i,u,d)&&(u=r),b(i,Ie(u,3))}function $D(i,u){var d=We(i)?On:fh;return d(i,Ie(u,3))}var qD=zh(ig),VD=zh(og);function WD(i,u){return Kt(Is(i,u),1)}function HD(i,u){return Kt(Is(i,u),q)}function GD(i,u,d){return d=d===r?1:Ge(d),Kt(Is(i,u),d)}function cg(i,u){var d=We(i)?kr:$n;return d(i,Ie(u,3))}function dg(i,u){var d=We(i)?fC:lh;return d(i,Ie(u,3))}var UD=Ts(function(i,u,d){ft.call(i,d)?i[d].push(u):cn(i,d,[u])});function KD(i,u,d,b){i=hr(i)?i:ti(i),d=d&&!b?Ge(d):0;var C=i.length;return d<0&&(d=Mt(C+d,0)),Fs(i)?d<=C&&i.indexOf(u,d)>-1:!!C&&Wa(i,u,d)>-1}var YD=Ke(function(i,u,d){var b=-1,C=typeof u=="function",B=hr(i)?Z(i.length):[];return $n(i,function(z){B[++b]=C?wr(u,z,d):Ui(z,u,d)}),B}),XD=Ts(function(i,u,d){cn(i,d,u)});function Is(i,u){var d=We(i)?wt:ph;return d(i,Ie(u,3))}function ZD(i,u,d,b){return i==null?[]:(We(u)||(u=u==null?[]:[u]),d=b?r:d,We(d)||(d=d==null?[]:[d]),wh(i,u,d))}var QD=Ts(function(i,u,d){i[d?0:1].push(u)},function(){return[[],[]]});function JD(i,u,d){var b=We(i)?nl:Hd,C=arguments.length<3;return b(i,Ie(u,4),d,C,$n)}function jD(i,u,d){var b=We(i)?vC:Hd,C=arguments.length<3;return b(i,Ie(u,4),d,C,lh)}function eA(i,u){var d=We(i)?On:fh;return d(i,Ns(Ie(u,3)))}function tA(i){var u=We(i)?ih:K2;return u(i)}function rA(i,u,d){(d?ir(i,u,d):u===r)?u=1:u=Ge(u);var b=We(i)?C2:Y2;return b(i,u)}function nA(i){var u=We(i)?T2:Z2;return u(i)}function aA(i){if(i==null)return 0;if(hr(i))return Fs(i)?Ga(i):i.length;var u=er(i);return u==pe||u==Re?i.size:El(i).length}function iA(i,u,d){var b=We(i)?al:Q2;return d&&ir(i,u,d)&&(u=r),b(i,Ie(u,3))}var oA=Ke(function(i,u){if(i==null)return[];var d=u.length;return d>1&&ir(i,u[0],u[1])?u=[]:d>2&&ir(u[0],u[1],u[2])&&(u=[u[0]]),wh(i,Kt(u,1),[])}),Ms=$C||function(){return Ut.Date.now()};function sA(i,u){if(typeof u!="function")throw new Br(s);return i=Ge(i),function(){if(--i<1)return u.apply(this,arguments)}}function hg(i,u,d){return u=d?r:u,u=i&&u==null?i.length:u,dn(i,D,r,r,r,r,u)}function gg(i,u){var d;if(typeof u!="function")throw new Br(s);return i=Ge(i),function(){return--i>0&&(d=u.apply(this,arguments)),i<=1&&(u=r),d}}var Ul=Ke(function(i,u,d){var b=w;if(d.length){var C=zn(d,ja(Ul));b|=k}return dn(i,b,u,d,C)}),pg=Ke(function(i,u,d){var b=w|y;if(d.length){var C=zn(d,ja(pg));b|=k}return dn(u,b,i,d,C)});function mg(i,u,d){u=d?r:u;var b=dn(i,S,r,r,r,r,r,u);return b.placeholder=mg.placeholder,b}function yg(i,u,d){u=d?r:u;var b=dn(i,T,r,r,r,r,r,u);return b.placeholder=yg.placeholder,b}function bg(i,u,d){var b,C,B,z,V,G,le=0,fe=!1,he=!1,Ee=!0;if(typeof i!="function")throw new Br(s);u=Or(u)||0,Et(d)&&(fe=!!d.leading,he="maxWait"in d,B=he?Mt(Or(d.maxWait)||0,u):B,Ee="trailing"in d?!!d.trailing:Ee);function Pe(At){var Gr=b,yn=C;return b=C=r,le=At,z=i.apply(yn,Gr),z}function Me(At){return le=At,V=Qi(Ye,u),fe?Pe(At):z}function Ue(At){var Gr=At-G,yn=At-le,zg=u-Gr;return he?jt(zg,B-yn):zg}function Oe(At){var Gr=At-G,yn=At-le;return G===r||Gr>=u||Gr<0||he&&yn>=B}function Ye(){var At=Ms();if(Oe(At))return et(At);V=Qi(Ye,Ue(At))}function et(At){return V=r,Ee&&b?Pe(At):(b=C=r,z)}function Cr(){V!==r&&Lh(V),le=0,b=G=C=V=r}function or(){return V===r?z:et(Ms())}function Tr(){var At=Ms(),Gr=Oe(At);if(b=arguments,C=this,G=At,Gr){if(V===r)return Me(G);if(he)return Lh(V),V=Qi(Ye,u),Pe(G)}return V===r&&(V=Qi(Ye,u)),z}return Tr.cancel=Cr,Tr.flush=or,Tr}var uA=Ke(function(i,u){return uh(i,1,u)}),lA=Ke(function(i,u,d){return uh(i,Or(u)||0,d)});function fA(i){return dn(i,A)}function Os(i,u){if(typeof i!="function"||u!=null&&typeof u!="function")throw new Br(s);var d=function(){var b=arguments,C=u?u.apply(this,b):b[0],B=d.cache;if(B.has(C))return B.get(C);var z=i.apply(this,b);return d.cache=B.set(C,z)||B,z};return d.cache=new(Os.Cache||vn),d}Os.Cache=vn;function Ns(i){if(typeof i!="function")throw new Br(s);return function(){var u=arguments;switch(u.length){case 0:return!i.call(this);case 1:return!i.call(this,u[0]);case 2:return!i.call(this,u[0],u[1]);case 3:return!i.call(this,u[0],u[1],u[2])}return!i.apply(this,u)}}function vA(i){return gg(2,i)}var cA=J2(function(i,u){u=u.length==1&&We(u[0])?wt(u[0],xr(Ie())):wt(Kt(u,1),xr(Ie()));var d=u.length;return Ke(function(b){for(var C=-1,B=jt(b.length,d);++C<B;)b[C]=u[C].call(this,b[C]);return wr(i,this,b)})}),Kl=Ke(function(i,u){var d=zn(u,ja(Kl));return dn(i,k,r,u,d)}),wg=Ke(function(i,u){var d=zn(u,ja(wg));return dn(i,L,r,u,d)}),dA=hn(function(i,u){return dn(i,_,r,r,r,u)});function hA(i,u){if(typeof i!="function")throw new Br(s);return u=u===r?u:Ge(u),Ke(i,u)}function gA(i,u){if(typeof i!="function")throw new Br(s);return u=u==null?0:Mt(Ge(u),0),Ke(function(d){var b=d[u],C=Wn(d,0,u);return b&&Nn(C,b),wr(i,this,C)})}function pA(i,u,d){var b=!0,C=!0;if(typeof i!="function")throw new Br(s);return Et(d)&&(b="leading"in d?!!d.leading:b,C="trailing"in d?!!d.trailing:C),bg(i,u,{leading:b,maxWait:u,trailing:C})}function mA(i){return hg(i,1)}function yA(i,u){return Kl(Bl(u),i)}function bA(){if(!arguments.length)return[];var i=arguments[0];return We(i)?i:[i]}function wA(i){return _r(i,m)}function xA(i,u){return u=typeof u=="function"?u:r,_r(i,m,u)}function EA(i){return _r(i,h|m)}function SA(i,u){return u=typeof u=="function"?u:r,_r(i,h|m,u)}function CA(i,u){return u==null||sh(i,u,Ft(u))}function Hr(i,u){return i===u||i!==i&&u!==u}var TA=Ls(bl),DA=Ls(function(i,u){return i>=u}),ca=dh(function(){return arguments}())?dh:function(i){return Tt(i)&&ft.call(i,"callee")&&!jd.call(i,"callee")},We=Z.isArray,AA=Id?xr(Id):M2;function hr(i){return i!=null&&zs(i.length)&&!pn(i)}function Dt(i){return Tt(i)&&hr(i)}function PA(i){return i===!0||i===!1||Tt(i)&&ar(i)==oe}var Hn=VC||af,LA=Md?xr(Md):O2;function kA(i){return Tt(i)&&i.nodeType===1&&!Ji(i)}function BA(i){if(i==null)return!0;if(hr(i)&&(We(i)||typeof i=="string"||typeof i.splice=="function"||Hn(i)||ei(i)||ca(i)))return!i.length;var u=er(i);if(u==pe||u==Re)return!i.size;if(Zi(i))return!El(i).length;for(var d in i)if(ft.call(i,d))return!1;return!0}function RA(i,u){return Ki(i,u)}function _A(i,u,d){d=typeof d=="function"?d:r;var b=d?d(i,u):r;return b===r?Ki(i,u,r,d):!!b}function Yl(i){if(!Tt(i))return!1;var u=ar(i);return u==ye||u==ge||typeof i.message=="string"&&typeof i.name=="string"&&!Ji(i)}function IA(i){return typeof i=="number"&&th(i)}function pn(i){if(!Et(i))return!1;var u=ar(i);return u==Be||u==ze||u==K||u==Te}function xg(i){return typeof i=="number"&&i==Ge(i)}function zs(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=U}function Et(i){var u=typeof i;return i!=null&&(u=="object"||u=="function")}function Tt(i){return i!=null&&typeof i=="object"}var Eg=Od?xr(Od):z2;function MA(i,u){return i===u||xl(i,u,zl(u))}function OA(i,u,d){return d=typeof d=="function"?d:r,xl(i,u,zl(u),d)}function NA(i){return Sg(i)&&i!=+i}function zA(i){if(xT(i))throw new Ve(o);return hh(i)}function FA(i){return i===null}function $A(i){return i==null}function Sg(i){return typeof i=="number"||Tt(i)&&ar(i)==me}function Ji(i){if(!Tt(i)||ar(i)!=xe)return!1;var u=vs(i);if(u===null)return!0;var d=ft.call(u,"constructor")&&u.constructor;return typeof d=="function"&&d instanceof d&&ss.call(d)==OC}var Xl=Nd?xr(Nd):F2;function qA(i){return xg(i)&&i>=-U&&i<=U}var Cg=zd?xr(zd):$2;function Fs(i){return typeof i=="string"||!We(i)&&Tt(i)&&ar(i)==Le}function Sr(i){return typeof i=="symbol"||Tt(i)&&ar(i)==Je}var ei=Fd?xr(Fd):q2;function VA(i){return i===r}function WA(i){return Tt(i)&&er(i)==I}function HA(i){return Tt(i)&&ar(i)==Q}var GA=Ls(Sl),UA=Ls(function(i,u){return i<=u});function Tg(i){if(!i)return[];if(hr(i))return Fs(i)?Vr(i):dr(i);if(Fi&&i[Fi])return CC(i[Fi]());var u=er(i),d=u==pe?fl:u==Re?as:ti;return d(i)}function mn(i){if(!i)return i===0?i:0;if(i=Or(i),i===q||i===-q){var u=i<0?-1:1;return u*X}return i===i?i:0}function Ge(i){var u=mn(i),d=u%1;return u===u?d?u-d:u:0}function Dg(i){return i?ua(Ge(i),0,Y):0}function Or(i){if(typeof i=="number")return i;if(Sr(i))return J;if(Et(i)){var u=typeof i.valueOf=="function"?i.valueOf():i;i=Et(u)?u+"":u}if(typeof i!="string")return i===0?i:+i;i=Gd(i);var d=Ku.test(i);return d||ra.test(i)?sC(i.slice(2),d?2:8):Uu.test(i)?J:+i}function Ag(i){return jr(i,gr(i))}function KA(i){return i?ua(Ge(i),-U,U):i===0?i:0}function lt(i){return i==null?"":Er(i)}var YA=Qa(function(i,u){if(Zi(u)||hr(u)){jr(u,Ft(u),i);return}for(var d in u)ft.call(u,d)&&Hi(i,d,u[d])}),Pg=Qa(function(i,u){jr(u,gr(u),i)}),$s=Qa(function(i,u,d,b){jr(u,gr(u),i,b)}),XA=Qa(function(i,u,d,b){jr(u,Ft(u),i,b)}),ZA=hn(pl);function QA(i,u){var d=Za(i);return u==null?d:oh(d,u)}var JA=Ke(function(i,u){i=dt(i);var d=-1,b=u.length,C=b>2?u[2]:r;for(C&&ir(u[0],u[1],C)&&(b=1);++d<b;)for(var B=u[d],z=gr(B),V=-1,G=z.length;++V<G;){var le=z[V],fe=i[le];(fe===r||Hr(fe,Ka[le])&&!ft.call(i,le))&&(i[le]=B[le])}return i}),jA=Ke(function(i){return i.push(r,Gh),wr(Lg,r,i)});function eP(i,u){return qd(i,Ie(u,3),Jr)}function tP(i,u){return qd(i,Ie(u,3),yl)}function rP(i,u){return i==null?i:ml(i,Ie(u,3),gr)}function nP(i,u){return i==null?i:vh(i,Ie(u,3),gr)}function aP(i,u){return i&&Jr(i,Ie(u,3))}function iP(i,u){return i&&yl(i,Ie(u,3))}function oP(i){return i==null?[]:xs(i,Ft(i))}function sP(i){return i==null?[]:xs(i,gr(i))}function Zl(i,u,d){var b=i==null?r:la(i,u);return b===r?d:b}function uP(i,u){return i!=null&&Yh(i,u,B2)}function Ql(i,u){return i!=null&&Yh(i,u,R2)}var lP=$h(function(i,u,d){u!=null&&typeof u.toString!="function"&&(u=us.call(u)),i[u]=d},jl(pr)),fP=$h(function(i,u,d){u!=null&&typeof u.toString!="function"&&(u=us.call(u)),ft.call(i,u)?i[u].push(d):i[u]=[d]},Ie),vP=Ke(Ui);function Ft(i){return hr(i)?ah(i):El(i)}function gr(i){return hr(i)?ah(i,!0):V2(i)}function cP(i,u){var d={};return u=Ie(u,3),Jr(i,function(b,C,B){cn(d,u(b,C,B),b)}),d}function dP(i,u){var d={};return u=Ie(u,3),Jr(i,function(b,C,B){cn(d,C,u(b,C,B))}),d}var hP=Qa(function(i,u,d){Es(i,u,d)}),Lg=Qa(function(i,u,d,b){Es(i,u,d,b)}),gP=hn(function(i,u){var d={};if(i==null)return d;var b=!1;u=wt(u,function(B){return B=Vn(B,i),b||(b=B.length>1),B}),jr(i,Ol(i),d),b&&(d=_r(d,h|g|m,lT));for(var C=u.length;C--;)Pl(d,u[C]);return d});function pP(i,u){return kg(i,Ns(Ie(u)))}var mP=hn(function(i,u){return i==null?{}:H2(i,u)});function kg(i,u){if(i==null)return{};var d=wt(Ol(i),function(b){return[b]});return u=Ie(u),xh(i,d,function(b,C){return u(b,C[0])})}function yP(i,u,d){u=Vn(u,i);var b=-1,C=u.length;for(C||(C=1,i=r);++b<C;){var B=i==null?r:i[en(u[b])];B===r&&(b=C,B=d),i=pn(B)?B.call(i):B}return i}function bP(i,u,d){return i==null?i:Yi(i,u,d)}function wP(i,u,d,b){return b=typeof b=="function"?b:r,i==null?i:Yi(i,u,d,b)}var Bg=Wh(Ft),Rg=Wh(gr);function xP(i,u,d){var b=We(i),C=b||Hn(i)||ei(i);if(u=Ie(u,4),d==null){var B=i&&i.constructor;C?d=b?new B:[]:Et(i)?d=pn(B)?Za(vs(i)):{}:d={}}return(C?kr:Jr)(i,function(z,V,G){return u(d,z,V,G)}),d}function EP(i,u){return i==null?!0:Pl(i,u)}function SP(i,u,d){return i==null?i:Dh(i,u,Bl(d))}function CP(i,u,d,b){return b=typeof b=="function"?b:r,i==null?i:Dh(i,u,Bl(d),b)}function ti(i){return i==null?[]:ll(i,Ft(i))}function TP(i){return i==null?[]:ll(i,gr(i))}function DP(i,u,d){return d===r&&(d=u,u=r),d!==r&&(d=Or(d),d=d===d?d:0),u!==r&&(u=Or(u),u=u===u?u:0),ua(Or(i),u,d)}function AP(i,u,d){return u=mn(u),d===r?(d=u,u=0):d=mn(d),i=Or(i),_2(i,u,d)}function PP(i,u,d){if(d&&typeof d!="boolean"&&ir(i,u,d)&&(u=d=r),d===r&&(typeof u=="boolean"?(d=u,u=r):typeof i=="boolean"&&(d=i,i=r)),i===r&&u===r?(i=0,u=1):(i=mn(i),u===r?(u=i,i=0):u=mn(u)),i>u){var b=i;i=u,u=b}if(d||i%1||u%1){var C=rh();return jt(i+C*(u-i+oC("1e-"+((C+"").length-1))),u)}return Tl(i,u)}var LP=Ja(function(i,u,d){return u=u.toLowerCase(),i+(d?_g(u):u)});function _g(i){return Jl(lt(i).toLowerCase())}function Ig(i){return i=lt(i),i&&i.replace($a,bC).replace(ZS,"")}function kP(i,u,d){i=lt(i),u=Er(u);var b=i.length;d=d===r?b:ua(Ge(d),0,b);var C=d;return d-=u.length,d>=0&&i.slice(d,C)==u}function BP(i){return i=lt(i),i&&vr.test(i)?i.replace(fr,wC):i}function RP(i){return i=lt(i),i&&ln.test(i)?i.replace(In,"\\$&"):i}var _P=Ja(function(i,u,d){return i+(d?"-":"")+u.toLowerCase()}),IP=Ja(function(i,u,d){return i+(d?" ":"")+u.toLowerCase()}),MP=Nh("toLowerCase");function OP(i,u,d){i=lt(i),u=Ge(u);var b=u?Ga(i):0;if(!u||b>=u)return i;var C=(u-b)/2;return Ps(gs(C),d)+i+Ps(hs(C),d)}function NP(i,u,d){i=lt(i),u=Ge(u);var b=u?Ga(i):0;return u&&b<u?i+Ps(u-b,d):i}function zP(i,u,d){i=lt(i),u=Ge(u);var b=u?Ga(i):0;return u&&b<u?Ps(u-b,d)+i:i}function FP(i,u,d){return d||u==null?u=0:u&&(u=+u),UC(lt(i).replace(Nt,""),u||0)}function $P(i,u,d){return(d?ir(i,u,d):u===r)?u=1:u=Ge(u),Dl(lt(i),u)}function qP(){var i=arguments,u=lt(i[0]);return i.length<3?u:u.replace(i[1],i[2])}var VP=Ja(function(i,u,d){return i+(d?"_":"")+u.toLowerCase()});function WP(i,u,d){return d&&typeof d!="number"&&ir(i,u,d)&&(u=d=r),d=d===r?Y:d>>>0,d?(i=lt(i),i&&(typeof u=="string"||u!=null&&!Xl(u))&&(u=Er(u),!u&&Ha(i))?Wn(Vr(i),0,d):i.split(u,d)):[]}var HP=Ja(function(i,u,d){return i+(d?" ":"")+Jl(u)});function GP(i,u,d){return i=lt(i),d=d==null?0:ua(Ge(d),0,i.length),u=Er(u),i.slice(d,d+u.length)==u}function UP(i,u,d){var b=P.templateSettings;d&&ir(i,u,d)&&(u=r),i=lt(i),u=$s({},u,b,Hh);var C=$s({},u.imports,b.imports,Hh),B=Ft(C),z=ll(C,B),V,G,le=0,fe=u.interpolate||na,he="__p += '",Ee=vl((u.escape||na).source+"|"+fe.source+"|"+(fe===qr?Gu:na).source+"|"+(u.evaluate||na).source+"|$","g"),Pe="//# sourceURL="+(ft.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tC+"]")+`
`;i.replace(Ee,function(Oe,Ye,et,Cr,or,Tr){return et||(et=Cr),he+=i.slice(le,Tr).replace(Jo,xC),Ye&&(V=!0,he+=`' +
__e(`+Ye+`) +
'`),or&&(G=!0,he+=`';
`+or+`;
__p += '`),et&&(he+=`' +
((__t = (`+et+`)) == null ? '' : __t) +
'`),le=Tr+Oe.length,Oe}),he+=`';
`;var Me=ft.call(u,"variable")&&u.variable;if(!Me)he=`with (obj) {
`+he+`
}
`;else if(Wu.test(Me))throw new Ve(l);he=(G?he.replace(He,""):he).replace(bt,"$1").replace(Rt,"$1;"),he="function("+(Me||"obj")+`) {
`+(Me?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(G?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+he+`return __p
}`;var Ue=Og(function(){return ot(B,Pe+"return "+he).apply(r,z)});if(Ue.source=he,Yl(Ue))throw Ue;return Ue}function KP(i){return lt(i).toLowerCase()}function YP(i){return lt(i).toUpperCase()}function XP(i,u,d){if(i=lt(i),i&&(d||u===r))return Gd(i);if(!i||!(u=Er(u)))return i;var b=Vr(i),C=Vr(u),B=Ud(b,C),z=Kd(b,C)+1;return Wn(b,B,z).join("")}function ZP(i,u,d){if(i=lt(i),i&&(d||u===r))return i.slice(0,Xd(i)+1);if(!i||!(u=Er(u)))return i;var b=Vr(i),C=Kd(b,Vr(u))+1;return Wn(b,0,C).join("")}function QP(i,u,d){if(i=lt(i),i&&(d||u===r))return i.replace(Nt,"");if(!i||!(u=Er(u)))return i;var b=Vr(i),C=Ud(b,Vr(u));return Wn(b,C).join("")}function JP(i,u){var d=O,b=N;if(Et(u)){var C="separator"in u?u.separator:C;d="length"in u?Ge(u.length):d,b="omission"in u?Er(u.omission):b}i=lt(i);var B=i.length;if(Ha(i)){var z=Vr(i);B=z.length}if(d>=B)return i;var V=d-Ga(b);if(V<1)return b;var G=z?Wn(z,0,V).join(""):i.slice(0,V);if(C===r)return G+b;if(z&&(V+=G.length-V),Xl(C)){if(i.slice(V).search(C)){var le,fe=G;for(C.global||(C=vl(C.source,lt(Qo.exec(C))+"g")),C.lastIndex=0;le=C.exec(fe);)var he=le.index;G=G.slice(0,he===r?V:he)}}else if(i.indexOf(Er(C),V)!=V){var Ee=G.lastIndexOf(C);Ee>-1&&(G=G.slice(0,Ee))}return G+b}function jP(i){return i=lt(i),i&&_t.test(i)?i.replace(lr,PC):i}var eL=Ja(function(i,u,d){return i+(d?" ":"")+u.toUpperCase()}),Jl=Nh("toUpperCase");function Mg(i,u,d){return i=lt(i),u=d?r:u,u===r?SC(i)?BC(i):hC(i):i.match(u)||[]}var Og=Ke(function(i,u){try{return wr(i,r,u)}catch(d){return Yl(d)?d:new Ve(d)}}),tL=hn(function(i,u){return kr(u,function(d){d=en(d),cn(i,d,Ul(i[d],i))}),i});function rL(i){var u=i==null?0:i.length,d=Ie();return i=u?wt(i,function(b){if(typeof b[1]!="function")throw new Br(s);return[d(b[0]),b[1]]}):[],Ke(function(b){for(var C=-1;++C<u;){var B=i[C];if(wr(B[0],this,b))return wr(B[1],this,b)}})}function nL(i){return P2(_r(i,h))}function jl(i){return function(){return i}}function aL(i,u){return i==null||i!==i?u:i}var iL=Fh(),oL=Fh(!0);function pr(i){return i}function ef(i){return gh(typeof i=="function"?i:_r(i,h))}function sL(i){return mh(_r(i,h))}function uL(i,u){return yh(i,_r(u,h))}var lL=Ke(function(i,u){return function(d){return Ui(d,i,u)}}),fL=Ke(function(i,u){return function(d){return Ui(i,d,u)}});function tf(i,u,d){var b=Ft(u),C=xs(u,b);d==null&&!(Et(u)&&(C.length||!b.length))&&(d=u,u=i,i=this,C=xs(u,Ft(u)));var B=!(Et(d)&&"chain"in d)||!!d.chain,z=pn(i);return kr(C,function(V){var G=u[V];i[V]=G,z&&(i.prototype[V]=function(){var le=this.__chain__;if(B||le){var fe=i(this.__wrapped__),he=fe.__actions__=dr(this.__actions__);return he.push({func:G,args:arguments,thisArg:i}),fe.__chain__=le,fe}return G.apply(i,Nn([this.value()],arguments))})}),i}function vL(){return Ut._===this&&(Ut._=NC),this}function rf(){}function cL(i){return i=Ge(i),Ke(function(u){return bh(u,i)})}var dL=_l(wt),hL=_l($d),gL=_l(al);function Ng(i){return $l(i)?il(en(i)):G2(i)}function pL(i){return function(u){return i==null?r:la(i,u)}}var mL=qh(),yL=qh(!0);function nf(){return[]}function af(){return!1}function bL(){return{}}function wL(){return""}function xL(){return!0}function EL(i,u){if(i=Ge(i),i<1||i>U)return[];var d=Y,b=jt(i,Y);u=Ie(u),i-=Y;for(var C=ul(b,u);++d<i;)u(d);return C}function SL(i){return We(i)?wt(i,en):Sr(i)?[i]:dr(ng(lt(i)))}function CL(i){var u=++MC;return lt(i)+u}var TL=As(function(i,u){return i+u},0),DL=Il("ceil"),AL=As(function(i,u){return i/u},1),PL=Il("floor");function LL(i){return i&&i.length?ws(i,pr,bl):r}function kL(i,u){return i&&i.length?ws(i,Ie(u,2),bl):r}function BL(i){return Wd(i,pr)}function RL(i,u){return Wd(i,Ie(u,2))}function _L(i){return i&&i.length?ws(i,pr,Sl):r}function IL(i,u){return i&&i.length?ws(i,Ie(u,2),Sl):r}var ML=As(function(i,u){return i*u},1),OL=Il("round"),NL=As(function(i,u){return i-u},0);function zL(i){return i&&i.length?sl(i,pr):0}function FL(i,u){return i&&i.length?sl(i,Ie(u,2)):0}return P.after=sA,P.ary=hg,P.assign=YA,P.assignIn=Pg,P.assignInWith=$s,P.assignWith=XA,P.at=ZA,P.before=gg,P.bind=Ul,P.bindAll=tL,P.bindKey=pg,P.castArray=bA,P.chain=vg,P.chunk=PT,P.compact=LT,P.concat=kT,P.cond=rL,P.conforms=nL,P.constant=jl,P.countBy=zD,P.create=QA,P.curry=mg,P.curryRight=yg,P.debounce=bg,P.defaults=JA,P.defaultsDeep=jA,P.defer=uA,P.delay=lA,P.difference=BT,P.differenceBy=RT,P.differenceWith=_T,P.drop=IT,P.dropRight=MT,P.dropRightWhile=OT,P.dropWhile=NT,P.fill=zT,P.filter=$D,P.flatMap=WD,P.flatMapDeep=HD,P.flatMapDepth=GD,P.flatten=sg,P.flattenDeep=FT,P.flattenDepth=$T,P.flip=fA,P.flow=iL,P.flowRight=oL,P.fromPairs=qT,P.functions=oP,P.functionsIn=sP,P.groupBy=UD,P.initial=WT,P.intersection=HT,P.intersectionBy=GT,P.intersectionWith=UT,P.invert=lP,P.invertBy=fP,P.invokeMap=YD,P.iteratee=ef,P.keyBy=XD,P.keys=Ft,P.keysIn=gr,P.map=Is,P.mapKeys=cP,P.mapValues=dP,P.matches=sL,P.matchesProperty=uL,P.memoize=Os,P.merge=hP,P.mergeWith=Lg,P.method=lL,P.methodOf=fL,P.mixin=tf,P.negate=Ns,P.nthArg=cL,P.omit=gP,P.omitBy=pP,P.once=vA,P.orderBy=ZD,P.over=dL,P.overArgs=cA,P.overEvery=hL,P.overSome=gL,P.partial=Kl,P.partialRight=wg,P.partition=QD,P.pick=mP,P.pickBy=kg,P.property=Ng,P.propertyOf=pL,P.pull=ZT,P.pullAll=lg,P.pullAllBy=QT,P.pullAllWith=JT,P.pullAt=jT,P.range=mL,P.rangeRight=yL,P.rearg=dA,P.reject=eA,P.remove=eD,P.rest=hA,P.reverse=Hl,P.sampleSize=rA,P.set=bP,P.setWith=wP,P.shuffle=nA,P.slice=tD,P.sortBy=oA,P.sortedUniq=uD,P.sortedUniqBy=lD,P.split=WP,P.spread=gA,P.tail=fD,P.take=vD,P.takeRight=cD,P.takeRightWhile=dD,P.takeWhile=hD,P.tap=LD,P.throttle=pA,P.thru=_s,P.toArray=Tg,P.toPairs=Bg,P.toPairsIn=Rg,P.toPath=SL,P.toPlainObject=Ag,P.transform=xP,P.unary=mA,P.union=gD,P.unionBy=pD,P.unionWith=mD,P.uniq=yD,P.uniqBy=bD,P.uniqWith=wD,P.unset=EP,P.unzip=Gl,P.unzipWith=fg,P.update=SP,P.updateWith=CP,P.values=ti,P.valuesIn=TP,P.without=xD,P.words=Mg,P.wrap=yA,P.xor=ED,P.xorBy=SD,P.xorWith=CD,P.zip=TD,P.zipObject=DD,P.zipObjectDeep=AD,P.zipWith=PD,P.entries=Bg,P.entriesIn=Rg,P.extend=Pg,P.extendWith=$s,tf(P,P),P.add=TL,P.attempt=Og,P.camelCase=LP,P.capitalize=_g,P.ceil=DL,P.clamp=DP,P.clone=wA,P.cloneDeep=EA,P.cloneDeepWith=SA,P.cloneWith=xA,P.conformsTo=CA,P.deburr=Ig,P.defaultTo=aL,P.divide=AL,P.endsWith=kP,P.eq=Hr,P.escape=BP,P.escapeRegExp=RP,P.every=FD,P.find=qD,P.findIndex=ig,P.findKey=eP,P.findLast=VD,P.findLastIndex=og,P.findLastKey=tP,P.floor=PL,P.forEach=cg,P.forEachRight=dg,P.forIn=rP,P.forInRight=nP,P.forOwn=aP,P.forOwnRight=iP,P.get=Zl,P.gt=TA,P.gte=DA,P.has=uP,P.hasIn=Ql,P.head=ug,P.identity=pr,P.includes=KD,P.indexOf=VT,P.inRange=AP,P.invoke=vP,P.isArguments=ca,P.isArray=We,P.isArrayBuffer=AA,P.isArrayLike=hr,P.isArrayLikeObject=Dt,P.isBoolean=PA,P.isBuffer=Hn,P.isDate=LA,P.isElement=kA,P.isEmpty=BA,P.isEqual=RA,P.isEqualWith=_A,P.isError=Yl,P.isFinite=IA,P.isFunction=pn,P.isInteger=xg,P.isLength=zs,P.isMap=Eg,P.isMatch=MA,P.isMatchWith=OA,P.isNaN=NA,P.isNative=zA,P.isNil=$A,P.isNull=FA,P.isNumber=Sg,P.isObject=Et,P.isObjectLike=Tt,P.isPlainObject=Ji,P.isRegExp=Xl,P.isSafeInteger=qA,P.isSet=Cg,P.isString=Fs,P.isSymbol=Sr,P.isTypedArray=ei,P.isUndefined=VA,P.isWeakMap=WA,P.isWeakSet=HA,P.join=KT,P.kebabCase=_P,P.last=Mr,P.lastIndexOf=YT,P.lowerCase=IP,P.lowerFirst=MP,P.lt=GA,P.lte=UA,P.max=LL,P.maxBy=kL,P.mean=BL,P.meanBy=RL,P.min=_L,P.minBy=IL,P.stubArray=nf,P.stubFalse=af,P.stubObject=bL,P.stubString=wL,P.stubTrue=xL,P.multiply=ML,P.nth=XT,P.noConflict=vL,P.noop=rf,P.now=Ms,P.pad=OP,P.padEnd=NP,P.padStart=zP,P.parseInt=FP,P.random=PP,P.reduce=JD,P.reduceRight=jD,P.repeat=$P,P.replace=qP,P.result=yP,P.round=OL,P.runInContext=W,P.sample=tA,P.size=aA,P.snakeCase=VP,P.some=iA,P.sortedIndex=rD,P.sortedIndexBy=nD,P.sortedIndexOf=aD,P.sortedLastIndex=iD,P.sortedLastIndexBy=oD,P.sortedLastIndexOf=sD,P.startCase=HP,P.startsWith=GP,P.subtract=NL,P.sum=zL,P.sumBy=FL,P.template=UP,P.times=EL,P.toFinite=mn,P.toInteger=Ge,P.toLength=Dg,P.toLower=KP,P.toNumber=Or,P.toSafeInteger=KA,P.toString=lt,P.toUpper=YP,P.trim=XP,P.trimEnd=ZP,P.trimStart=QP,P.truncate=JP,P.unescape=jP,P.uniqueId=CL,P.upperCase=eL,P.upperFirst=Jl,P.each=cg,P.eachRight=dg,P.first=ug,tf(P,function(){var i={};return Jr(P,function(u,d){ft.call(P.prototype,d)||(i[d]=u)}),i}(),{chain:!1}),P.VERSION=n,kr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){P[i].placeholder=P}),kr(["drop","take"],function(i,u){Qe.prototype[i]=function(d){d=d===r?1:Mt(Ge(d),0);var b=this.__filtered__&&!u?new Qe(this):this.clone();return b.__filtered__?b.__takeCount__=jt(d,b.__takeCount__):b.__views__.push({size:jt(d,Y),type:i+(b.__dir__<0?"Right":"")}),b},Qe.prototype[i+"Right"]=function(d){return this.reverse()[i](d).reverse()}}),kr(["filter","map","takeWhile"],function(i,u){var d=u+1,b=d==M||d==$;Qe.prototype[i]=function(C){var B=this.clone();return B.__iteratees__.push({iteratee:Ie(C,3),type:d}),B.__filtered__=B.__filtered__||b,B}}),kr(["head","last"],function(i,u){var d="take"+(u?"Right":"");Qe.prototype[i]=function(){return this[d](1).value()[0]}}),kr(["initial","tail"],function(i,u){var d="drop"+(u?"":"Right");Qe.prototype[i]=function(){return this.__filtered__?new Qe(this):this[d](1)}}),Qe.prototype.compact=function(){return this.filter(pr)},Qe.prototype.find=function(i){return this.filter(i).head()},Qe.prototype.findLast=function(i){return this.reverse().find(i)},Qe.prototype.invokeMap=Ke(function(i,u){return typeof i=="function"?new Qe(this):this.map(function(d){return Ui(d,i,u)})}),Qe.prototype.reject=function(i){return this.filter(Ns(Ie(i)))},Qe.prototype.slice=function(i,u){i=Ge(i);var d=this;return d.__filtered__&&(i>0||u<0)?new Qe(d):(i<0?d=d.takeRight(-i):i&&(d=d.drop(i)),u!==r&&(u=Ge(u),d=u<0?d.dropRight(-u):d.take(u-i)),d)},Qe.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},Qe.prototype.toArray=function(){return this.take(Y)},Jr(Qe.prototype,function(i,u){var d=/^(?:filter|find|map|reject)|While$/.test(u),b=/^(?:head|last)$/.test(u),C=P[b?"take"+(u=="last"?"Right":""):u],B=b||/^find/.test(u);C&&(P.prototype[u]=function(){var z=this.__wrapped__,V=b?[1]:arguments,G=z instanceof Qe,le=V[0],fe=G||We(z),he=function(Ye){var et=C.apply(P,Nn([Ye],V));return b&&Ee?et[0]:et};fe&&d&&typeof le=="function"&&le.length!=1&&(G=fe=!1);var Ee=this.__chain__,Pe=!!this.__actions__.length,Me=B&&!Ee,Ue=G&&!Pe;if(!B&&fe){z=Ue?z:new Qe(this);var Oe=i.apply(z,V);return Oe.__actions__.push({func:_s,args:[he],thisArg:r}),new Rr(Oe,Ee)}return Me&&Ue?i.apply(this,V):(Oe=this.thru(he),Me?b?Oe.value()[0]:Oe.value():Oe)})}),kr(["pop","push","shift","sort","splice","unshift"],function(i){var u=is[i],d=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",b=/^(?:pop|shift)$/.test(i);P.prototype[i]=function(){var C=arguments;if(b&&!this.__chain__){var B=this.value();return u.apply(We(B)?B:[],C)}return this[d](function(z){return u.apply(We(z)?z:[],C)})}}),Jr(Qe.prototype,function(i,u){var d=P[u];if(d){var b=d.name+"";ft.call(Xa,b)||(Xa[b]=[]),Xa[b].push({name:u,func:d})}}),Xa[Ds(r,y).name]=[{name:"wrapper",func:r}],Qe.prototype.clone=jC,Qe.prototype.reverse=e2,Qe.prototype.value=t2,P.prototype.at=kD,P.prototype.chain=BD,P.prototype.commit=RD,P.prototype.next=_D,P.prototype.plant=MD,P.prototype.reverse=OD,P.prototype.toJSON=P.prototype.valueOf=P.prototype.value=ND,P.prototype.first=P.prototype.head,Fi&&(P.prototype[Fi]=ID),P},Ua=RC();aa?((aa.exports=Ua)._=Ua,el._=Ua):Ut._=Ua}).call(Ur)}(Xo,Xo.exports),Xo.exports;const _S=["CHARACTER","SEQUEL","SIDE_STORY","SOURCE","ALTERNATIVE","SPIN_OFF","SUMMARY","COMPILATION","CONTAINS","PREQUEL","ADAPTATION","PARENT","OTHER"],IS=(()=>{const t={};return _S.map((e,r)=>{t[e]=r}),t})(),MS=(t,e,r)=>{console.log("ComputeData");const n=RS({headless:!0}),a=()=>r.map(p=>`#${p}`).join(", "),o=p=>{const x=w=>{if(w.status=="NOT_YET_RELEASED")return 1;if(w.chapters)return w.chapters*5;if(w.volumes)return w.volumes*50;if(w.episodes&&w.duration)return w.episodes*w.duration;if(w.nextAiringEpisode?.episode&&w.duration)return w.nextAiringEpisode?.episode*w.duration;const y=Object.values(w.startDate).filter(S=>S!="FuzzyDate"&&S).join("-"),E=(Date.now()-Date.parse(y))/864e5;return w.format=="MANGA"?Math.round(E/8.2)*5:(w.format=="TV",Math.round(E/8.2)*20)};return{id:p.id,status:"NO",airStatus:p.status??"",format:p.format??"SPECIAL",title:p.title.userPreferred,titles:[...Object.values(p.title),...p.synonyms].filter(w=>!["MediaTitle",null].includes(w)),siteUrl:p.siteUrl,bannerImage:p.bannerImage,popularity:p.popularity,cover:p.coverImage.extraLarge,compWeight:x(p),startDate:Object.values(p.startDate).filter(w=>w!="FuzzyDate"&&w).join("-")}},s=p=>{const x=new Map,w=new Map;console.log(p);for(const y of p)for(const E of y.entries){x.set(E.media.id,{data:{...o(E.media),status:E.status}});for(const S of E.media.relations.nodes)x.get(S.id)||x.set(S.id,{data:{...o(S),status:"NO"}});for(const S of E.media.relations.edges)w.set(S.id,{data:{id:"L"+S.id,source:E.media.id,target:S.node.id,relation:S.relationType}})}return[x,w]},[l,v]=s(t);console.log(l,v),n.add(Array.from(l.values()).concat(Array.from(v.values())));const f=n.elements().components(),c=[];f.map(p=>{let x=n.collection();p.edges().map(w=>{const y=w.parallelEdges().sort((E,S)=>e[E.data("relation")]-e[S.data("relation")])[0];switch(y.data("relation")){case"ADAPTATION":y.move({source:y.data("target"),target:y.data("source")}),y.data({relation:"SOURCE"});break;case"PREQUEL":y.move({source:y.data("target"),target:y.data("source")}),y.data({relation:"SEQUEL"});break}x=x.union(y)}),p=p.nodes().union(x),x.map(w=>{w.restore()}),p.filter("node, edge[relation!='CHARACTER']").difference(a()).components().map(w=>{w.nodes().length!=w.filter("node[status='NO']").length&&c.push({series:w,serieComplete:p.subtract(w)})})});const g=c.map(p=>{const x=p.series.sort((w,y)=>{const E=parseInt(w.data("popularity")),S=parseInt(y.data("popularity"));return isNaN(E)?999:isNaN(S)?-1:S-E});return{seriesPrime:x.nodes()[0],series:x,serieComplete:p.serieComplete}}).map(p=>{const x={};for(const w of["TV","TV_SHORT","MOVIE","SPECIAL","OVA","ONA","MUSIC","MANGA","NOVEL","ONE_SHOT"]){const y=p.series.nodes().filter(`node[format='${w}'][airStatus!="CANCELLED"]`);x[w]={tot:y.length??0,miss:y.filter("node[status='NO']").length??0,got:y.filter("node[status='COMPLETED'],node[status='DROPPED'],node[status='REPEATING']").length??0,plan:y.filter("node[status='PLANNING'],node[status='CURRENT'],node[status='PAUSED']").length??0,totWeight:y.map(E=>E.data("compWeight"))?.reduce?.((E,S)=>E+S,0),missWeight:y.filter("node[status='NO']").map(E=>E.data("compWeight"))?.reduce?.((E,S)=>E+S,0),gotWeight:y.filter("node[status='COMPLETED'],node[status='DROPPED'],node[status='REPEATING']").map(E=>E.data("compWeight"))?.reduce?.((E,S)=>E+S,0),planWeight:y.filter("node[status='PLANNING'],node[status='CURRENT'],node[status='PAUSED']").map(E=>E.data("compWeight"))?.reduce?.((E,S)=>E+S,0)}}return{...p,stats:x,status:"ERR"}}),m={};return g.map(p=>{m[p.seriesPrime.data("id")]={...p,seriesPrime:p.seriesPrime.data(),series:{nodes:p.series.nodes().map(x=>x.data()),edges:p.series.edges().map(x=>x.data())},serieComplete:{nodes:p.serieComplete.nodes().map(x=>x.data()),edges:p.serieComplete.edges().map(x=>x.data())}}}),console.log(Object.values(m).length),m},pd=`
query ($user: String!, $type: MediaType){
  MediaListCollection(userName: $user, type: $type) {
    lists {
      entries {
        id
        status
        media {
          id
          title {
            userPreferred
            romaji
            english
          }
          synonyms
          startDate {
            year
            month
            day
          }
          format
          coverImage {
            extraLarge
            medium
            color
          }
          bannerImage
          popularity
          siteUrl
          chapters
          volumes
          episodes
          duration
          nextAiringEpisode {
            episode
          }
          status(version: 2)
          relations {
            nodes {
              id
              title {
                userPreferred
                romaji
                english
              }
              synonyms
              startDate {
                year
                month
                day
              }
              format
              coverImage {
                extraLarge
                medium
                color
              }
              bannerImage
              popularity
              siteUrl
              chapters
              volumes
              episodes
              duration
              nextAiringEpisode {
                episode
              }
              status(version: 2)
            }
            edges {
              id
              relationType(version: 2)
              node {
                id
              }
            }
          }
        }
      }
      name
      isCustomList
      isSplitCompletedList
    }

  }
}
`,Vu={fullUpdate:!1};self.onmessage=async t=>{const e=t.data;if(console.log(t),e.type==="start")switch(e.action){case"fullUpdate":if(Vu.fullUpdate){console.log("Already executing the action");return}Vu.fullUpdate=!0,self.postMessage({type:"status",status:"loading",log:"Loading your Anime&Manga List"});const r=fetch("https://graphql.anilist.co",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:pd,variables:{user:e.arguments.user,type:"ANIME"}})}),n=fetch("https://graphql.anilist.co",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:pd,variables:{user:e.arguments.user,type:"MANGA"}})}),[a,o]=await Promise.all([r,n]).then(([l,v])=>Promise.all([l.json(),v.json()]));console.log(a,o),self.postMessage({type:"status",status:"loading",log:"⚙ Computing received data"});const s=MS([...a.data.MediaListCollection.lists,...o.data.MediaListCollection.lists],IS,Fg);self.postMessage({type:"status",status:"success",log:"✅ Computation Completed!"}),self.postMessage({type:"result",action:"fullUpdate",result:s}),Vu.fullUpdate=!1;break;default:console.log("Unknown action");break}}})();
